!(function(){var Eo=Math.pow;(self.webpackChunk=self.webpackChunk||[]).push([[524],{44173:function(me,Bt,G){"use strict";G.d(Bt,{vp:function(){return It},l5:function(){return zt},ph:function(){return z},TE:function(){return I},Xk:function(){return Mt},U4:function(){return Wt},_x:function(){return re},hE:function(){return ft},x4:function(){return oe},Y1:function(){return Nt}});function U(Q,yt){(yt==null||yt>Q.length)&&(yt=Q.length);for(var _t=0,Ot=Array(yt);_t<yt;_t++)Ot[_t]=Q[_t];return Ot}function Et(Q){if(Array.isArray(Q))return U(Q)}function X(Q){if(typeof Symbol!="undefined"&&Q[Symbol.iterator]!=null||Q["@@iterator"]!=null)return Array.from(Q)}function at(Q,yt){if(Q){if(typeof Q=="string")return U(Q,yt);var _t={}.toString.call(Q).slice(8,-1);return _t==="Object"&&Q.constructor&&(_t=Q.constructor.name),_t==="Map"||_t==="Set"?Array.from(Q):_t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_t)?U(Q,yt):void 0}}function tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(Q){return Et(Q)||X(Q)||at(Q)||tt()}var x=G(80450),q=G(31437);function I(Q,yt,_t,Ot){var mt=Q-_t,Tt=yt-Ot;return Math.sqrt(mt*mt+Tt*Tt)}function et(Q,yt){var _t=Math.min.apply(Math,K(Q)),Ot=Math.min.apply(Math,K(yt)),mt=Math.max.apply(Math,K(Q)),Tt=Math.max.apply(Math,K(yt));return{x:_t,y:Ot,width:mt-_t,height:Tt-Ot}}function $(Q){return(Q+Math.PI*2)%(Math.PI*2)}function it(Q,yt){var _t=Math.abs(Q);return yt>0?_t:_t*-1}function gt(Q,yt,_t,Ot,mt,Tt){var Kt=_t,Qt=Ot;if(Kt===0||Qt===0)return{x:Q,y:yt};for(var le=mt-Q,pe=Tt-yt,be=Math.abs(le),xe=Math.abs(pe),Me=Kt*Kt,_e=Qt*Qt,Pe=Math.PI/4,Xe=0,ln=0,Rn=0;Rn<4;Rn++){Xe=Kt*Math.cos(Pe),ln=Qt*Math.sin(Pe);var On=(Me-_e)*Math.pow(Math.cos(Pe),3)/Kt,Dn=(_e-Me)*Math.pow(Math.sin(Pe),3)/Qt,Mn=Xe-On,Gn=ln-Dn,Nn=be-On,Nr=xe-Dn,Ri=Math.hypot(Gn,Mn),qi=Math.hypot(Nr,Nn),Qi=Ri*Math.asin((Mn*Nr-Gn*Nn)/(Ri*qi)),Ji=Qi/Math.sqrt(Me+_e-Xe*Xe-ln*ln);Pe+=Ji,Pe=Math.min(Math.PI/2,Math.max(0,Pe))}return{x:Q+it(Xe,le),y:yt+it(ln,pe)}}function lt(Q,yt,_t,Ot,mt,Tt,Kt,Qt){return-1*_t*Math.cos(mt)*Math.sin(Qt)-Ot*Math.sin(mt)*Math.cos(Qt)}function Rt(Q,yt,_t,Ot,mt,Tt,Kt,Qt){return-1*_t*Math.sin(mt)*Math.sin(Qt)+Ot*Math.cos(mt)*Math.cos(Qt)}function At(Q,yt,_t){return Math.atan(-yt/Q*Math.tan(_t))}function Dt(Q,yt,_t){return Math.atan(yt/(Q*Math.tan(_t)))}function Jt(Q,yt,_t,Ot,mt,Tt){return _t*Math.cos(mt)*Math.cos(Tt)-Ot*Math.sin(mt)*Math.sin(Tt)+Q}function qt(Q,yt,_t,Ot,mt,Tt){return _t*Math.sin(mt)*Math.cos(Tt)+Ot*Math.cos(mt)*Math.sin(Tt)+yt}function fe(Q,yt,_t,Ot){var mt=Math.atan2(Ot*Q,_t*yt);return(mt+Math.PI*2)%(Math.PI*2)}function ae(Q,yt,_t){return{x:Q*Math.cos(_t),y:yt*Math.sin(_t)}}function pt(Q,yt,_t){var Ot=Math.cos(_t),mt=Math.sin(_t);return[Q*Ot-yt*mt,Q*mt+yt*Ot]}function It(Q,yt,_t,Ot,mt,Tt,Kt){for(var Qt=At(_t,Ot,mt),le=1/0,pe=-1/0,be=[Tt,Kt],xe=-Math.PI*2;xe<=Math.PI*2;xe+=Math.PI){var Me=Qt+xe;Tt<Kt?Tt<Me&&Me<Kt&&be.push(Me):Kt<Me&&Me<Tt&&be.push(Me)}for(var _e=0;_e<be.length;_e++){var Pe=Jt(Q,yt,_t,Ot,mt,be[_e]);Pe<le&&(le=Pe),Pe>pe&&(pe=Pe)}for(var Xe=Dt(_t,Ot,mt),ln=1/0,Rn=-1/0,On=[Tt,Kt],Dn=-Math.PI*2;Dn<=Math.PI*2;Dn+=Math.PI){var Mn=Xe+Dn;Tt<Kt?Tt<Mn&&Mn<Kt&&On.push(Mn):Kt<Mn&&Mn<Tt&&On.push(Mn)}for(var Gn=0;Gn<On.length;Gn++){var Nn=qt(Q,yt,_t,Ot,mt,On[Gn]);Nn<ln&&(ln=Nn),Nn>Rn&&(Rn=Nn)}return{x:le,y:ln,width:pe-le,height:Rn-ln}}function vt(Q,yt,_t,Ot,mt,Tt,Kt,Qt,le){var pe=pt(Qt-Q,le-yt,-mt),be=_slicedToArray(pe,2),xe=be[0],Me=be[1],_e=gt(0,0,_t,Ot,xe,Me),Pe=fe(_t,Ot,_e.x,_e.y);Pe<Tt?_e=ae(_t,Ot,Tt):Pe>Kt&&(_e=ae(_t,Ot,Kt));var Xe=pt(_e.x,_e.y,mt);return{x:Xe[0]+Q,y:Xe[1]+yt}}function st(Q,yt,_t,Ot,mt,Tt,Kt,Qt){var le=(Kt-Tt)*Qt+Tt,pe=lt(Q,yt,_t,Ot,mt,Tt,Kt,le),be=Rt(Q,yt,_t,Ot,mt,Tt,Kt,le);return $(Math.atan2(be,pe))}var Vt=1e-4;function ne(Q,yt,_t,Ot,mt,Tt){var Kt=-1,Qt=1/0,le=[_t,Ot],pe=20;Tt&&Tt>200&&(pe=Tt/10);for(var be=1/pe,xe=be/10,Me=0;Me<=pe;Me++){var _e=Me*be,Pe=[mt.apply(void 0,K(Q.concat([_e]))),mt.apply(void 0,K(yt.concat([_e])))],Xe=I(le[0],le[1],Pe[0],Pe[1]);Xe<Qt&&(Kt=_e,Qt=Xe)}if(Kt===0)return{x:Q[0],y:yt[0]};if(Kt===1){var ln=Q.length;return{x:Q[ln-1],y:yt[ln-1]}}Qt=1/0;for(var Rn=0;Rn<32&&!(xe<Vt);Rn++){var On=Kt-xe,Dn=Kt+xe,Mn=[mt.apply(void 0,K(Q.concat([On]))),mt.apply(void 0,K(yt.concat([On])))],Gn=I(le[0],le[1],Mn[0],Mn[1]);if(On>=0&&Gn<Qt)Kt=On,Qt=Gn;else{var Nn=[mt.apply(void 0,K(Q.concat([Dn]))),mt.apply(void 0,K(yt.concat([Dn])))],Nr=I(le[0],le[1],Nn[0],Nn[1]);Dn<=1&&Nr<Qt?(Kt=Dn,Qt=Nr):xe*=.5}}return{x:mt.apply(void 0,K(Q.concat([Kt]))),y:mt.apply(void 0,K(yt.concat([Kt])))}}function ee(Q,yt){for(var _t=0,Ot=Q.length,mt=0;mt<Ot;mt++){var Tt=Q[mt],Kt=yt[mt],Qt=Q[(mt+1)%Ot],le=yt[(mt+1)%Ot];_t+=I(Tt,Kt,Qt,le)}return _t/2}function Ft(Q,yt,_t,Ot){return et([Q,_t],[yt,Ot])}function Mt(Q,yt,_t,Ot){return I(Q,yt,_t,Ot)}function Wt(Q,yt,_t,Ot,mt){return{x:(1-mt)*Q+mt*_t,y:(1-mt)*yt+mt*Ot}}function te(Q,yt,_t,Ot,mt,Tt){var Kt=(_t-Q)*(mt-Q)+(Ot-yt)*(Tt-yt);if(Kt<0)return I(Q,yt,mt,Tt);var Qt=(_t-Q)*(_t-Q)+(Ot-yt)*(Ot-yt);return Kt>Qt?I(_t,Ot,mt,Tt):re(Q,yt,_t,Ot,mt,Tt)}function re(Q,yt,_t,Ot,mt,Tt){var Kt=[_t-Q,Ot-yt];if(q.I6(Kt,[0,0]))return Math.sqrt((mt-Q)*(mt-Q)+(Tt-yt)*(Tt-yt));var Qt=[-Kt[1],Kt[0]];q.Fv(Qt,Qt);var le=[mt-Q,Tt-yt];return Math.abs(q.AK(le,Qt))}function T(Q,yt,_t,Ot){return Math.atan2(Ot-yt,_t-Q)}function V(Q,yt,_t,Ot,mt){var Tt=1-mt;return Tt*Tt*Tt*Q+3*yt*mt*Tt*Tt+3*_t*mt*mt*Tt+Ot*mt*mt*mt}function H(Q,yt,_t,Ot,mt){var Tt=1-mt;return 3*(Tt*Tt*(yt-Q)+2*Tt*mt*(_t-yt)+mt*mt*(Ot-_t))}function J(Q,yt,_t,Ot){var mt=-3*Q+9*yt-9*_t+3*Ot,Tt=6*Q-12*yt+6*_t,Kt=3*yt-3*Q,Qt=[],le,pe,be;if((0,x.Z)(mt,0))(0,x.Z)(Tt,0)||(le=-Kt/Tt,le>=0&&le<=1&&Qt.push(le));else{var xe=Tt*Tt-4*mt*Kt;(0,x.Z)(xe,0)?Qt.push(-Tt/(2*mt)):xe>0&&(be=Math.sqrt(xe),le=(-Tt+be)/(2*mt),pe=(-Tt-be)/(2*mt),le>=0&&le<=1&&Qt.push(le),pe>=0&&pe<=1&&Qt.push(pe))}return Qt}function ht(Q,yt,_t,Ot,mt,Tt,Kt,Qt,le){var pe=V(Q,_t,mt,Kt,le),be=V(yt,Ot,Tt,Qt,le),xe=Wt(Q,yt,_t,Ot,le),Me=Wt(_t,Ot,mt,Tt,le),_e=Wt(mt,Tt,Kt,Qt,le),Pe=Wt(xe.x,xe.y,Me.x,Me.y,le),Xe=Wt(Me.x,Me.y,_e.x,_e.y,le);return[[Q,yt,xe.x,xe.y,Pe.x,Pe.y,pe,be],[pe,be,Xe.x,Xe.y,_e.x,_e.y,Kt,Qt]]}function bt(Q,yt,_t,Ot,mt,Tt,Kt,Qt,le){if(le===0)return ee([Q,_t,mt,Kt],[yt,Ot,Tt,Qt]);var pe=ht(Q,yt,_t,Ot,mt,Tt,Kt,Qt,.5),be=[].concat(_toConsumableArray(pe[0]),[le-1]),xe=[].concat(_toConsumableArray(pe[1]),[le-1]);return bt.apply(void 0,_toConsumableArray(be))+bt.apply(void 0,_toConsumableArray(xe))}function zt(Q,yt,_t,Ot,mt,Tt,Kt,Qt){for(var le=[Q,Kt],pe=[yt,Qt],be=J(Q,_t,mt,Kt),xe=J(yt,Ot,Tt,Qt),Me=0;Me<be.length;Me++)le.push(V(Q,_t,mt,Kt,be[Me]));for(var _e=0;_e<xe.length;_e++)pe.push(V(yt,Ot,Tt,Qt,xe[_e]));return et(le,pe)}function kt(Q,yt,_t,Ot,mt,Tt,Kt,Qt){return bt(Q,yt,_t,Ot,mt,Tt,Kt,Qt,3)}function se(Q,yt,_t,Ot,mt,Tt,Kt,Qt,le,pe,be){return ne([Q,_t,mt,Kt],[yt,Ot,Tt,Qt],le,pe,V,be)}function z(Q,yt,_t,Ot,mt,Tt,Kt,Qt,le,pe,be){var xe=se(Q,yt,_t,Ot,mt,Tt,Kt,Qt,le,pe,be);return I(xe.x,xe.y,le,pe)}function P(Q,yt,_t,Ot,mt,Tt,Kt,Qt,le){return{x:V(Q,_t,mt,Kt,le),y:V(yt,Ot,Tt,Qt,le)}}function B(Q,yt,_t,Ot,mt,Tt,Kt,Qt,le){var pe=H(Q,_t,mt,Kt,le),be=H(yt,Ot,Tt,Qt,le);return $(Math.atan2(be,pe))}function dt(Q){for(var yt=0,_t=[],Ot=0;Ot<Q.length-1;Ot++){var mt=Q[Ot],Tt=Q[Ot+1],Kt=I(mt[0],mt[1],Tt[0],Tt[1]),Qt={from:mt,to:Tt,length:Kt};_t.push(Qt),yt+=Kt}return{segments:_t,totalLength:yt}}function L(Q){if(Q.length<2)return 0;for(var yt=0,_t=0;_t<Q.length-1;_t++){var Ot=Q[_t],mt=Q[_t+1];yt+=I(Ot[0],Ot[1],mt[0],mt[1])}return yt}function Z(Q,yt){if(yt>1||yt<0||Q.length<2)return null;var _t=dt(Q),Ot=_t.segments,mt=_t.totalLength;if(mt===0)return{x:Q[0][0],y:Q[0][1]};for(var Tt=0,Kt=null,Qt=0;Qt<Ot.length;Qt++){var le=Ot[Qt],pe=le.from,be=le.to,xe=le.length/mt;if(yt>=Tt&&yt<=Tt+xe){var Me=(yt-Tt)/xe;Kt=Wt(pe[0],pe[1],be[0],be[1],Me);break}Tt+=xe}return Kt}function ct(Q,yt){if(yt>1||yt<0||Q.length<2)return 0;for(var _t=dt(Q),Ot=_t.segments,mt=_t.totalLength,Tt=0,Kt=0,Qt=0;Qt<Ot.length;Qt++){var le=Ot[Qt],pe=le.from,be=le.to,xe=le.length/mt;if(yt>=Tt&&yt<=Tt+xe){Kt=Math.atan2(be[1]-pe[1],be[0]-pe[0]);break}Tt+=xe}return Kt}function R(Q,yt,_t){for(var Ot=1/0,mt=0;mt<Q.length-1;mt++){var Tt=Q[mt],Kt=Q[mt+1],Qt=te(Tt[0],Tt[1],Kt[0],Kt[1],yt,_t);Qt<Ot&&(Ot=Qt)}return Ot}function W(Q){for(var yt=[],_t=[],Ot=0;Ot<Q.length;Ot++){var mt=Q[Ot];yt.push(mt[0]),_t.push(mt[1])}return et(yt,_t)}function ft(Q){return L(Q)}function v(Q,yt){return Z(Q,yt)}function _(Q,yt,_t){return R(Q,yt,_t)}function F(Q,yt){return ct(Q,yt)}function nt(Q){var yt=Q.slice(0);return Q.length&&yt.push(Q[0]),yt}function ut(Q){return W(Q)}function xt(Q){return L(nt(Q))}function Pt(Q,yt){return Z(nt(Q),yt)}function jt(Q,yt,_t){return R(nt(Q),yt,_t)}function Ht(Q,yt){return ct(nt(Q),yt)}function Gt(Q,yt,_t,Ot){var mt=1-Ot;return mt*mt*Q+2*Ot*mt*yt+Ot*Ot*_t}function Ut(Q,yt,_t){var Ot=Q+_t-2*yt;if((0,x.Z)(Ot,0))return[.5];var mt=(Q-yt)/Ot;return mt<=1&&mt>=0?[mt]:[]}function Yt(Q,yt,_t,Ot,mt,Tt,Kt){var Qt=Gt(Q,_t,mt,Kt),le=Gt(yt,Ot,Tt,Kt),pe=Wt(Q,yt,_t,Ot,Kt),be=Wt(_t,Ot,mt,Tt,Kt);return[[Q,yt,pe.x,pe.y,Qt,le],[Qt,le,be.x,be.y,mt,Tt]]}function ce(Q,yt,_t,Ot,mt,Tt,Kt){if(Kt===0)return(I(Q,yt,_t,Ot)+I(_t,Ot,mt,Tt)+I(Q,yt,mt,Tt))/2;var Qt=Yt(Q,yt,_t,Ot,mt,Tt,.5),le=Qt[0],pe=Qt[1];return le.push(Kt-1),pe.push(Kt-1),ce.apply(void 0,_toConsumableArray(le))+ce.apply(void 0,_toConsumableArray(pe))}function oe(Q,yt,_t,Ot,mt,Tt){var Kt=Ut(Q,_t,mt)[0],Qt=Ut(yt,Ot,Tt)[0],le=[Q,mt],pe=[yt,Tt];return Kt!==void 0&&le.push(Gt(Q,_t,mt,Kt)),Qt!==void 0&&pe.push(Gt(yt,Ot,Tt,Qt)),et(le,pe)}function de(Q,yt,_t,Ot,mt,Tt){return ce(Q,yt,_t,Ot,mt,Tt,3)}function ue(Q,yt,_t,Ot,mt,Tt,Kt,Qt){return ne([Q,_t,mt],[yt,Ot,Tt],Kt,Qt,Gt)}function Nt(Q,yt,_t,Ot,mt,Tt,Kt,Qt){var le=ue(Q,yt,_t,Ot,mt,Tt,Kt,Qt);return I(le.x,le.y,Kt,Qt)}},81746:function(me){(function(G,U){me.exports=U()})(typeof self!="undefined"?self:this,function(){return function(Bt){var G={};function U(Et){if(G[Et])return G[Et].exports;var X=G[Et]={i:Et,l:!1,exports:{}};return Bt[Et].call(X.exports,X,X.exports,U),X.l=!0,X.exports}return U.m=Bt,U.c=G,U.d=function(Et,X,at){U.o(Et,X)||Object.defineProperty(Et,X,{configurable:!1,enumerable:!0,get:at})},U.n=function(Et){var X=Et&&Et.__esModule?function(){return Et.default}:function(){return Et};return U.d(X,"a",X),X},U.o=function(Et,X){return Object.prototype.hasOwnProperty.call(Et,X)},U.p="",U(U.s=5)}([function(Bt,G){function U(Et,X,at,tt){return tt===void 0&&(tt="height"),at==="center"?(Et[tt]+X[tt])/2:Et.height}Bt.exports={assign:Object.assign,getHeight:U}},function(Bt,G,U){var Et=U(3),X=function(){function at(K,x){x===void 0&&(x={});var q=this;q.options=x,q.rootNode=Et(K,x)}var tt=at.prototype;return tt.execute=function(){throw new Error("please override this method")},at}();Bt.exports=X},function(Bt,G,U){var Et=U(4),X=["LR","RL","TB","BT","H","V"],at=["LR","RL","H"],tt=function(I){return at.indexOf(I)>-1},K=X[0];Bt.exports=function(q,I,et){var $=I.direction||K;if(I.isHorizontal=tt($),$&&X.indexOf($)===-1)throw new TypeError("Invalid direction: "+$);if($===X[0])et(q,I);else if($===X[1])et(q,I),q.right2left();else if($===X[2])et(q,I);else if($===X[3])et(q,I),q.bottom2top();else if($===X[4]||$===X[5]){var it=Et(q,I),gt=it.left,lt=it.right;et(gt,I),et(lt,I),I.isHorizontal?gt.right2left():gt.bottom2top(),lt.translate(gt.x-lt.x,gt.y-lt.y),q.x=gt.x,q.y=lt.y;var Rt=q.getBoundingBox();I.isHorizontal?Rt.top<0&&q.translate(0,-Rt.top):Rt.left<0&&q.translate(-Rt.left,0)}var At=I.fixedRoot;return At===void 0&&(At=!0),At&&q.translate(-(q.x+q.width/2+q.hgap),-(q.y+q.height/2+q.vgap)),x(q,I),q};function x(q,I){if(I.radial){var et=I.isHorizontal?["x","y"]:["y","x"],$=et[0],it=et[1],gt={x:1/0,y:1/0},lt={x:-1/0,y:-1/0},Rt=0;q.DFTraverse(function(Jt){Rt++;var qt=Jt.x,fe=Jt.y;gt.x=Math.min(gt.x,qt),gt.y=Math.min(gt.y,fe),lt.x=Math.max(lt.x,qt),lt.y=Math.max(lt.y,fe)});var At=lt[it]-gt[it];if(At===0)return;var Dt=Math.PI*2/Rt;q.DFTraverse(function(Jt){var qt=(Jt[it]-gt[it])/At*(Math.PI*2-Dt)+Dt,fe=Jt[$]-q[$];Jt.x=Math.cos(qt)*fe,Jt.y=Math.sin(qt)*fe})}}},function(Bt,G,U){var Et=U(0),X=18,at=X*2,tt=X,K={getId:function(et){return et.id||et.name},getPreH:function(et){return et.preH||0},getPreV:function(et){return et.preV||0},getHGap:function(et){return et.hgap||tt},getVGap:function(et){return et.vgap||tt},getChildren:function(et){return et.children},getHeight:function(et){return et.height||at},getWidth:function(et){var $=et.label||" ";return et.width||$.split("").length*X}};function x(I,et){var $=this;if($.vgap=$.hgap=0,I instanceof x)return I;$.data=I;var it=et.getHGap(I),gt=et.getVGap(I);return $.preH=et.getPreH(I),$.preV=et.getPreV(I),$.width=et.getWidth(I),$.height=et.getHeight(I),$.width+=$.preH,$.height+=$.preV,$.id=et.getId(I),$.x=$.y=0,$.depth=0,$.children||($.children=[]),$.addGap(it,gt),$}Et.assign(x.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(et,$){var it=this;it.hgap+=et,it.vgap+=$,it.width+=2*et,it.height+=2*$},eachNode:function(et){for(var $=this,it=[$],gt;gt=it.shift();)et(gt),it=gt.children.concat(it)},DFTraverse:function(et){this.eachNode(et)},BFTraverse:function(et){for(var $=this,it=[$],gt;gt=it.shift();)et(gt),it=it.concat(gt.children)},getBoundingBox:function(){var et={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function($){et.left=Math.min(et.left,$.x),et.top=Math.min(et.top,$.y),et.width=Math.max(et.width,$.x+$.width),et.height=Math.max(et.height,$.y+$.height)}),et},translate:function(et,$){et===void 0&&(et=0),$===void 0&&($=0),this.eachNode(function(it){it.x+=et,it.y+=$,it.x+=it.preH,it.y+=it.preV})},right2left:function(){var et=this,$=et.getBoundingBox();et.eachNode(function(it){it.x=it.x-(it.x-$.left)*2-it.width}),et.translate($.width,0)},bottom2top:function(){var et=this,$=et.getBoundingBox();et.eachNode(function(it){it.y=it.y-(it.y-$.top)*2-it.height}),et.translate(0,$.height)}});function q(I,et,$){et===void 0&&(et={}),et=Et.assign({},K,et);var it=new x(I,et),gt=[it],lt;if(!$&&!I.collapsed){for(;lt=gt.shift();)if(!lt.data.collapsed){var Rt=et.getChildren(lt.data),At=Rt?Rt.length:0;if(lt.children=new Array(At),Rt&&At)for(var Dt=0;Dt<At;Dt++){var Jt=new x(Rt[Dt],et);lt.children[Dt]=Jt,gt.push(Jt),Jt.parent=lt,Jt.depth=lt.depth+1}}}return it}Bt.exports=q},function(Bt,G,U){var Et=U(3);Bt.exports=function(X,at){for(var tt=Et(X.data,at,!0),K=Et(X.data,at,!0),x=X.children.length,q=Math.round(x/2),I=at.getSide||function(gt,lt){return lt<q?"right":"left"},et=0;et<x;et++){var $=X.children[et],it=I($,et);it==="right"?K.children.push($):tt.children.push($)}return tt.eachNode(function(gt){gt.isRoot()||(gt.side="left")}),K.eachNode(function(gt){gt.isRoot()||(gt.side="right")}),{left:tt,right:K}}},function(Bt,G,U){var Et={compactBox:U(6),dendrogram:U(8),indented:U(10),mindmap:U(12)};Bt.exports=Et},function(Bt,G,U){function Et($,it){$.prototype=Object.create(it.prototype),$.prototype.constructor=$,X($,it)}function X($,it){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(gt,lt){return gt.__proto__=lt,gt},X($,it)}var at=U(1),tt=U(7),K=U(2),x=U(0),q=function($){function it(){return $.apply(this,arguments)||this}Et(it,$);var gt=it.prototype;return gt.execute=function(){var Rt=this;return K(Rt.rootNode,Rt.options,tt)},it}(at),I={};function et($,it){return it=x.assign({},I,it),new q($,it).execute()}Bt.exports=et},function(Bt,G){function U(x,q,I,et){et===void 0&&(et=[]);var $=this;$.w=x||0,$.h=q||0,$.y=I||0,$.x=0,$.c=et||[],$.cs=et.length,$.prelim=0,$.mod=0,$.shift=0,$.change=0,$.tl=null,$.tr=null,$.el=null,$.er=null,$.msel=0,$.mser=0}U.fromNode=function(x,q){if(!x)return null;var I=[];return x.children.forEach(function(et){I.push(U.fromNode(et,q))}),q?new U(x.height,x.width,x.x,I):new U(x.width,x.height,x.y,I)};function Et(x,q,I){I?x.y+=q:x.x+=q,x.children.forEach(function(et){Et(et,q,I)})}function X(x,q){var I=q?x.y:x.x;return x.children.forEach(function(et){I=Math.min(X(et,q),I)}),I}function at(x,q){var I=X(x,q);Et(x,-I,q)}function tt(x,q,I){I?q.y=x.x:q.x=x.x,x.c.forEach(function(et,$){tt(et,q.children[$],I)})}function K(x,q,I){I===void 0&&(I=0),q?(x.x=I,I+=x.width):(x.y=I,I+=x.height),x.children.forEach(function(et){K(et,q,I)})}Bt.exports=function(x,q){q===void 0&&(q={});var I=q.isHorizontal;function et(st){if(st.cs===0){$(st);return}et(st.c[0]);for(var Vt=It(At(st.c[0].el),0,null),ne=1;ne<st.cs;++ne){et(st.c[ne]);var ee=At(st.c[ne].er);it(st,ne,Vt),Vt=It(ee,ne,Vt)}qt(st),$(st)}function $(st){st.cs===0?(st.el=st,st.er=st,st.msel=st.mser=0):(st.el=st.c[0].el,st.msel=st.c[0].msel,st.er=st.c[st.cs-1].er,st.mser=st.c[st.cs-1].mser)}function it(st,Vt,ne){for(var ee=st.c[Vt-1],Ft=ee.mod,Mt=st.c[Vt],Wt=Mt.mod;ee!==null&&Mt!==null;){At(ee)>ne.low&&(ne=ne.nxt);var te=Ft+ee.prelim+ee.w-(Wt+Mt.prelim);te>0&&(Wt+=te,gt(st,Vt,ne.index,te));var re=At(ee),T=At(Mt);re<=T&&(ee=Rt(ee),ee!==null&&(Ft+=ee.mod)),re>=T&&(Mt=lt(Mt),Mt!==null&&(Wt+=Mt.mod))}!ee&&Mt?Dt(st,Vt,Mt,Wt):ee&&!Mt&&Jt(st,Vt,ee,Ft)}function gt(st,Vt,ne,ee){st.c[Vt].mod+=ee,st.c[Vt].msel+=ee,st.c[Vt].mser+=ee,ae(st,Vt,ne,ee)}function lt(st){return st.cs===0?st.tl:st.c[0]}function Rt(st){return st.cs===0?st.tr:st.c[st.cs-1]}function At(st){return st.y+st.h}function Dt(st,Vt,ne,ee){var Ft=st.c[0].el;Ft.tl=ne;var Mt=ee-ne.mod-st.c[0].msel;Ft.mod+=Mt,Ft.prelim-=Mt,st.c[0].el=st.c[Vt].el,st.c[0].msel=st.c[Vt].msel}function Jt(st,Vt,ne,ee){var Ft=st.c[Vt].er;Ft.tr=ne;var Mt=ee-ne.mod-st.c[Vt].mser;Ft.mod+=Mt,Ft.prelim-=Mt,st.c[Vt].er=st.c[Vt-1].er,st.c[Vt].mser=st.c[Vt-1].mser}function qt(st){st.prelim=(st.c[0].prelim+st.c[0].mod+st.c[st.cs-1].mod+st.c[st.cs-1].prelim+st.c[st.cs-1].w)/2-st.w/2}function fe(st,Vt){Vt+=st.mod,st.x=st.prelim+Vt,pt(st);for(var ne=0;ne<st.cs;ne++)fe(st.c[ne],Vt)}function ae(st,Vt,ne,ee){if(ne!==Vt-1){var Ft=Vt-ne;st.c[ne+1].shift+=ee/Ft,st.c[Vt].shift-=ee/Ft,st.c[Vt].change-=ee-ee/Ft}}function pt(st){for(var Vt=0,ne=0,ee=0;ee<st.cs;ee++)Vt+=st.c[ee].shift,ne+=Vt+st.c[ee].change,st.c[ee].mod+=ne}function It(st,Vt,ne){for(;ne!==null&&st>=ne.low;)ne=ne.nxt;return{low:st,index:Vt,nxt:ne}}K(x,I);var vt=U.fromNode(x,I);return et(vt),fe(vt,0),tt(vt,x,I),at(x,I),x}},function(Bt,G,U){function Et($,it){$.prototype=Object.create(it.prototype),$.prototype.constructor=$,X($,it)}function X($,it){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(gt,lt){return gt.__proto__=lt,gt},X($,it)}var at=U(1),tt=U(9),K=U(2),x=U(0),q=function($){function it(){return $.apply(this,arguments)||this}Et(it,$);var gt=it.prototype;return gt.execute=function(){var Rt=this;return Rt.rootNode.width=0,K(Rt.rootNode,Rt.options,tt)},it}(at),I={};function et($,it){return it=x.assign({},I,it),new q($,it).execute()}Bt.exports=et},function(Bt,G,U){var Et=U(0);function X(K,x){K===void 0&&(K=0),x===void 0&&(x=[]);var q=this;q.x=q.y=0,q.leftChild=q.rightChild=null,q.height=0,q.children=x}var at={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function tt(K,x,q){q?(x.x=K.x,x.y=K.y):(x.x=K.y,x.y=K.x),K.children.forEach(function(I,et){tt(I,x.children[et],q)})}Bt.exports=function(K,x){x===void 0&&(x={}),x=Et.assign({},at,x);var q=0;function I(lt){if(!lt)return null;lt.width=0,lt.depth&&lt.depth>q&&(q=lt.depth);var Rt=lt.children,At=Rt.length,Dt=new X(lt.height,[]);return Rt.forEach(function(Jt,qt){var fe=I(Jt);Dt.children.push(fe),qt===0&&(Dt.leftChild=fe),qt===At-1&&(Dt.rightChild=fe)}),Dt.originNode=lt,Dt.isLeaf=lt.isLeaf(),Dt}function et(lt){if(lt.isLeaf||lt.children.length===0)lt.drawingDepth=q;else{var Rt=lt.children.map(function(Dt){return et(Dt)}),At=Math.min.apply(null,Rt);lt.drawingDepth=At-1}return lt.drawingDepth}var $;function it(lt){lt.x=lt.drawingDepth*x.rankSep,lt.isLeaf?(lt.y=0,$&&(lt.y=$.y+$.height+x.nodeSep,lt.originNode.parent!==$.originNode.parent&&(lt.y+=x.subTreeSep)),$=lt):(lt.children.forEach(function(Rt){it(Rt)}),lt.y=(lt.leftChild.y+lt.rightChild.y)/2)}var gt=I(K);return et(gt),it(gt),tt(gt,K,x.isHorizontal),K}},function(Bt,G,U){function Et(gt,lt){gt.prototype=Object.create(lt.prototype),gt.prototype.constructor=gt,X(gt,lt)}function X(gt,lt){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Rt,At){return Rt.__proto__=At,Rt},X(gt,lt)}var at=U(1),tt=U(11),K=U(4),x=U(0),q=["LR","RL","H"],I=q[0],et=function(gt){function lt(){return gt.apply(this,arguments)||this}Et(lt,gt);var Rt=lt.prototype;return Rt.execute=function(){var Dt=this,Jt=Dt.options,qt=Dt.rootNode;Jt.isHorizontal=!0;var fe=Jt.indent,ae=fe===void 0?20:fe,pt=Jt.dropCap,It=pt===void 0?!0:pt,vt=Jt.direction,st=vt===void 0?I:vt,Vt=Jt.align;if(st&&q.indexOf(st)===-1)throw new TypeError("Invalid direction: "+st);if(st===q[0])tt(qt,ae,It,Vt);else if(st===q[1])tt(qt,ae,It,Vt),qt.right2left();else if(st===q[2]){var ne=K(qt,Jt),ee=ne.left,Ft=ne.right;tt(ee,ae,It,Vt),ee.right2left(),tt(Ft,ae,It,Vt);var Mt=ee.getBoundingBox();Ft.translate(Mt.width,0),qt.x=Ft.x-qt.width/2}return qt},lt}(at),$={};function it(gt,lt){return lt=x.assign({},$,lt),new et(gt,lt).execute()}Bt.exports=it},function(Bt,G,U){var Et=U(0);function X(at,tt,K,x,q){var I=(typeof K=="function"?K(at):K)*at.depth;if(!x)try{if(at.id===at.parent.children[0].id){at.x+=I,at.y=tt?tt.y:0;return}}catch(it){}if(at.x+=I,tt){if(at.y=tt.y+Et.getHeight(tt,at,q),tt.parent&&at.parent.id!==tt.parent.id){var et=tt.parent,$=et.y+Et.getHeight(et,at,q);at.y=$>at.y?$:at.y}}else at.y=0}Bt.exports=function(at,tt,K,x){var q=null;at.eachNode(function(I){X(I,q,tt,K,x),q=I})}},function(Bt,G,U){function Et($,it){$.prototype=Object.create(it.prototype),$.prototype.constructor=$,X($,it)}function X($,it){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(gt,lt){return gt.__proto__=lt,gt},X($,it)}var at=U(1),tt=U(13),K=U(2),x=U(0),q=function($){function it(){return $.apply(this,arguments)||this}Et(it,$);var gt=it.prototype;return gt.execute=function(){var Rt=this;return K(Rt.rootNode,Rt.options,tt)},it}(at),I={};function et($,it){return it=x.assign({},I,it),new q($,it).execute()}Bt.exports=et},function(Bt,G,U){var Et=U(0);function X(K,x){var q=0;return K.children.length?K.children.forEach(function(I){q+=X(I,x)}):q=K.height,K._subTreeSep=x.getSubTreeSep(K.data),K.totalHeight=Math.max(K.height,q)+2*K._subTreeSep,K.totalHeight}function at(K){var x=K.children,q=x.length;if(q){x.forEach(function(lt){at(lt)});var I=x[0],et=x[q-1],$=et.y-I.y+et.height,it=0;if(x.forEach(function(lt){it+=lt.totalHeight}),$>K.height)K.y=I.y+$/2-K.height/2;else if(x.length!==1||K.height>it){var gt=K.y+(K.height-$)/2-I.y;x.forEach(function(lt){lt.translate(0,gt)})}else K.y=(I.y+I.height/2+et.y+et.height/2)/2-K.height/2}}var tt={getSubTreeSep:function(){return 0}};Bt.exports=function(K,x){x===void 0&&(x={}),x=Et.assign({},tt,x),K.parent={x:0,width:0,height:0,y:0},K.BFTraverse(function(q){q.x=q.parent.x+q.parent.width}),K.parent=null,X(K,x),K.startY=0,K.y=K.totalHeight/2-K.height/2,K.eachNode(function(q){var I=q.children,et=I.length;if(et){var $=I[0];if($.startY=q.startY+q._subTreeSep,et===1)$.y=q.y+q.height/2-$.height/2;else{$.y=$.startY+$.totalHeight/2-$.height/2;for(var it=1;it<et;it++){var gt=I[it];gt.startY=I[it-1].startY+I[it-1].totalHeight,gt.y=gt.startY+gt.totalHeight/2-gt.height/2}}}}),at(K)}}])})},81957:function(me,Bt){"use strict";var G=function(U,Et,X){return U<Et?Et:U>X?X:U};Bt.Z=G},90134:function(me,Bt,G){"use strict";var U=G(95456),Et=function(X){return(0,U.Z)(X,"Boolean")};Bt.Z=Et},80450:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return Et}});var U=1e-5;function Et(X,at,tt){return tt===void 0&&(tt=U),X===at||Math.abs(X-at)<tt}},71154:function(me,Bt){"use strict";var G=function(U){return U===void 0};Bt.Z=G},13882:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return U}});function U(Et){if(!Array.isArray(Et))return-1/0;var X=Et.length;if(!X)return-1/0;for(var at=Et[0],tt=1;tt<X;tt++)at=Math.max(at,Et[tt]);return at}},71523:function(me,Bt,G){"use strict";var U=G(5199);Bt.Z=function(Et){if((0,U.Z)(Et))return Et.reduce(function(X,at){return Math.min(X,at)},Et[0])}},8614:function(me,Bt){"use strict";var G=function(U,Et){return(U%Et+Et)%Et};Bt.Z=G},75839:function(me,Bt,G){"use strict";G.d(Bt,{Y:function(){return it}});var U=G(97582),Et=G(64985);function X(gt,lt,Rt){if(gt[Rt].length>7){gt[Rt].shift();for(var At=gt[Rt],Dt=Rt;At.length;)lt[Rt]="A",gt.splice(Dt+=1,0,["C"].concat(At.splice(0,6)));gt.splice(Rt,1)}}var at=G(4848),tt=G(11013);function K(gt){return(0,tt.y)(gt)&&gt.every(function(lt){var Rt=lt[0];return"MC".includes(Rt)})}var x=G(74873);function q(gt,lt,Rt,At,Dt,Jt){var qt=.3333333333333333,fe=2/3;return[qt*gt+fe*Rt,qt*lt+fe*At,qt*Dt+fe*Rt,qt*Jt+fe*At,Dt,Jt]}var I=G(17570),et=function(gt,lt,Rt,At){var Dt=.5,Jt=(0,I.k)([gt,lt],[Rt,At],Dt);return(0,U.ev)((0,U.ev)([],Jt,!0),[Rt,At,Rt,At],!1)};function $(gt,lt){var Rt=gt[0],At=gt.slice(1).map(Number),Dt=At[0],Jt=At[1],qt,fe=lt.x1,ae=lt.y1,pt=lt.x,It=lt.y;switch("TQ".includes(Rt)||(lt.qx=null,lt.qy=null),Rt){case"M":return lt.x=Dt,lt.y=Jt,gt;case"A":return qt=[fe,ae].concat(At),["C"].concat((0,x.W)(qt[0],qt[1],qt[2],qt[3],qt[4],qt[5],qt[6],qt[7],qt[8],qt[9]));case"Q":return lt.qx=Dt,lt.qy=Jt,qt=[fe,ae].concat(At),["C"].concat(q(qt[0],qt[1],qt[2],qt[3],qt[4],qt[5]));case"L":return["C"].concat(et(fe,ae,Dt,Jt));case"Z":return fe===pt&&ae===It?["C",fe,ae,pt,It,pt,It]:["C"].concat(et(fe,ae,pt,It));default:}return gt}function it(gt,lt){if(lt===void 0&&(lt=!1),K(gt)){var Rt=[].concat(gt);return lt?[Rt,[]]:Rt}for(var At=(0,at.A)(gt),Dt=(0,U.pi)({},Et.z),Jt=[],qt="",fe=At.length,ae,pt,It=[],vt=0;vt<fe;vt+=1){At[vt]&&(qt=At[vt][0]),Jt[vt]=qt;var st=$(At[vt],Dt);At[vt]=st,X(At,Jt,vt),fe=At.length,qt==="Z"&&It.push(vt),ae=At[vt],pt=ae.length,Dt.x1=+ae[pt-2],Dt.y1=+ae[pt-1],Dt.x2=+ae[pt-4]||Dt.x1,Dt.y2=+ae[pt-3]||Dt.y1}return lt?[At,It]:At}},18323:function(me,Bt,G){"use strict";G.d(Bt,{R:function(){return U}});var U={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0}},64985:function(me,Bt,G){"use strict";G.d(Bt,{z:function(){return U}});var U={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null}},74873:function(me,Bt,G){"use strict";G.d(Bt,{W:function(){return Et}});function U(X,at,tt){var K=X*Math.cos(tt)-at*Math.sin(tt),x=X*Math.sin(tt)+at*Math.cos(tt);return{x:K,y:x}}function Et(X,at,tt,K,x,q,I,et,$,it){var gt=X,lt=at,Rt=tt,At=K,Dt=et,Jt=$,qt=Math.PI*120/180,fe=Math.PI/180*(+x||0),ae=[],pt,It,vt,st,Vt;if(it)It=it[0],vt=it[1],st=it[2],Vt=it[3];else{pt=U(gt,lt,-fe),gt=pt.x,lt=pt.y,pt=U(Dt,Jt,-fe),Dt=pt.x,Jt=pt.y;var ne=(gt-Dt)/2,ee=(lt-Jt)/2,Ft=ne*ne/(Rt*Rt)+ee*ee/(At*At);Ft>1&&(Ft=Math.sqrt(Ft),Rt*=Ft,At*=Ft);var Mt=Rt*Rt,Wt=At*At,te=(q===I?-1:1)*Math.sqrt(Math.abs((Mt*Wt-Mt*ee*ee-Wt*ne*ne)/(Mt*ee*ee+Wt*ne*ne)));st=te*Rt*ee/At+(gt+Dt)/2,Vt=te*-At*ne/Rt+(lt+Jt)/2,It=Math.asin(((lt-Vt)/At*Math.pow(10,9)>>0)/Math.pow(10,9)),vt=Math.asin(((Jt-Vt)/At*Math.pow(10,9)>>0)/Math.pow(10,9)),It=gt<st?Math.PI-It:It,vt=Dt<st?Math.PI-vt:vt,It<0&&(It=Math.PI*2+It),vt<0&&(vt=Math.PI*2+vt),I&&It>vt&&(It-=Math.PI*2),!I&&vt>It&&(vt-=Math.PI*2)}var re=vt-It;if(Math.abs(re)>qt){var T=vt,V=Dt,H=Jt;vt=It+qt*(I&&vt>It?1:-1),Dt=st+Rt*Math.cos(vt),Jt=Vt+At*Math.sin(vt),ae=Et(Dt,Jt,Rt,At,x,0,I,V,H,[vt,T,st,Vt])}re=vt-It;var J=Math.cos(It),ht=Math.sin(It),bt=Math.cos(vt),zt=Math.sin(vt),kt=Math.tan(re/4),se=4/3*Rt*kt,z=4/3*At*kt,P=[gt,lt],B=[gt+se*ht,lt-z*J],dt=[Dt+se*zt,Jt-z*bt],L=[Dt,Jt];if(B[0]=2*P[0]-B[0],B[1]=2*P[1]-B[1],it)return B.concat(dt,L,ae);ae=B.concat(dt,L,ae);for(var Z=[],ct=0,R=ae.length;ct<R;ct+=1)Z[ct]=ct%2?U(ae[ct-1],ae[ct],fe).y:U(ae[ct],ae[ct+1],fe).x;return Z}},28659:function(me,Bt,G){"use strict";G.d(Bt,{U:function(){return U}});function U(Et){return Et.map(function(X){return Array.isArray(X)?[].concat(X):X})}},4848:function(me,Bt,G){"use strict";G.d(Bt,{A:function(){return ae}});var U=G(97582),Et=G(11013),X=G(64985),at=G(41010),tt=G(56346),K=G(18323);function x(pt){for(var It=pt.pathValue[pt.segmentStart],vt=It.toLowerCase(),st=pt.data;st.length>=K.R[vt]&&(vt==="m"&&st.length>2?(pt.segments.push([It].concat(st.splice(0,2))),vt="l",It=It==="m"?"l":"L"):pt.segments.push([It].concat(st.splice(0,K.R[vt]))),!!K.R[vt]););}function q(pt){var It=pt.index,vt=pt.pathValue,st=vt.charCodeAt(It);if(st===48){pt.param=0,pt.index+=1;return}if(st===49){pt.param=1,pt.index+=1;return}pt.err='[path-util]: invalid Arc flag "'.concat(vt[It],'", expecting 0 or 1 at index ').concat(It)}function I(pt){return pt>=48&&pt<=57||pt===43||pt===45||pt===46}function et(pt){return pt>=48&&pt<=57}function $(pt){var It=pt.max,vt=pt.pathValue,st=pt.index,Vt=st,ne=!1,ee=!1,Ft=!1,Mt=!1,Wt;if(Vt>=It){pt.err="[path-util]: Invalid path value at index ".concat(Vt,', "pathValue" is missing param');return}if(Wt=vt.charCodeAt(Vt),(Wt===43||Wt===45)&&(Vt+=1,Wt=vt.charCodeAt(Vt)),!et(Wt)&&Wt!==46){pt.err="[path-util]: Invalid path value at index ".concat(Vt,', "').concat(vt[Vt],'" is not a number');return}if(Wt!==46){if(ne=Wt===48,Vt+=1,Wt=vt.charCodeAt(Vt),ne&&Vt<It&&Wt&&et(Wt)){pt.err="[path-util]: Invalid path value at index ".concat(st,', "').concat(vt[st],'" illegal number');return}for(;Vt<It&&et(vt.charCodeAt(Vt));)Vt+=1,ee=!0;Wt=vt.charCodeAt(Vt)}if(Wt===46){for(Mt=!0,Vt+=1;et(vt.charCodeAt(Vt));)Vt+=1,Ft=!0;Wt=vt.charCodeAt(Vt)}if(Wt===101||Wt===69){if(Mt&&!ee&&!Ft){pt.err="[path-util]: Invalid path value at index ".concat(Vt,', "').concat(vt[Vt],'" invalid float exponent');return}if(Vt+=1,Wt=vt.charCodeAt(Vt),(Wt===43||Wt===45)&&(Vt+=1),Vt<It&&et(vt.charCodeAt(Vt)))for(;Vt<It&&et(vt.charCodeAt(Vt));)Vt+=1;else{pt.err="[path-util]: Invalid path value at index ".concat(Vt,', "').concat(vt[Vt],'" invalid integer exponent');return}}pt.index=Vt,pt.param=+pt.pathValue.slice(st,Vt)}function it(pt){var It=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return pt===10||pt===13||pt===8232||pt===8233||pt===32||pt===9||pt===11||pt===12||pt===160||pt>=5760&&It.includes(pt)}function gt(pt){for(var It=pt.pathValue,vt=pt.max;pt.index<vt&&it(It.charCodeAt(pt.index));)pt.index+=1}function lt(pt){switch(pt|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Rt(pt){return(pt|32)===97}function At(pt){var It=pt.max,vt=pt.pathValue,st=pt.index,Vt=vt.charCodeAt(st),ne=K.R[vt[st].toLowerCase()];if(pt.segmentStart=st,!lt(Vt)){pt.err='[path-util]: Invalid path value "'.concat(vt[st],'" is not a path command');return}if(pt.index+=1,gt(pt),pt.data=[],!ne){x(pt);return}for(;;){for(var ee=ne;ee>0;ee-=1){if(Rt(Vt)&&(ee===3||ee===4)?q(pt):$(pt),pt.err.length)return;pt.data.push(pt.param),gt(pt),pt.index<It&&vt.charCodeAt(pt.index)===44&&(pt.index+=1,gt(pt))}if(pt.index>=pt.max||!I(vt.charCodeAt(pt.index)))break}x(pt)}var Dt=function(){function pt(It){this.pathValue=It,this.segments=[],this.max=It.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return pt}();function Jt(pt){if((0,tt.n)(pt))return[].concat(pt);var It=new Dt(pt);for(gt(It);It.index<It.max&&!It.err.length;)At(It);return It.err?It.err:It.segments}function qt(pt){if((0,at.b)(pt))return[].concat(pt);var It=Jt(pt),vt=0,st=0,Vt=0,ne=0;return It.map(function(ee){var Ft=ee.slice(1).map(Number),Mt=ee[0],Wt=Mt.toUpperCase();if(Mt==="M")return vt=Ft[0],st=Ft[1],Vt=vt,ne=st,["M",vt,st];var te;if(Mt!==Wt)switch(Wt){case"A":te=[Wt,Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]+vt,Ft[6]+st];break;case"V":te=[Wt,Ft[0]+st];break;case"H":te=[Wt,Ft[0]+vt];break;default:{var re=Ft.map(function(V,H){return V+(H%2?st:vt)});te=[Wt].concat(re)}}else te=[Wt].concat(Ft);var T=te.length;switch(Wt){case"Z":vt=Vt,st=ne;break;case"H":vt=te[1];break;case"V":st=te[1];break;default:vt=te[T-2],st=te[T-1],Wt==="M"&&(Vt=vt,ne=st)}return te})}function fe(pt,It){var vt=pt[0],st=It.x1,Vt=It.y1,ne=It.x2,ee=It.y2,Ft=pt.slice(1).map(Number),Mt=pt;if("TQ".includes(vt)||(It.qx=null,It.qy=null),vt==="H")Mt=["L",pt[1],Vt];else if(vt==="V")Mt=["L",st,pt[1]];else if(vt==="S"){var Wt=st*2-ne,te=Vt*2-ee;It.x1=Wt,It.y1=te,Mt=["C",Wt,te].concat(Ft)}else if(vt==="T"){var re=st*2-It.qx,T=Vt*2-It.qy;It.qx=re,It.qy=T,Mt=["Q",re,T].concat(Ft)}else if(vt==="Q"){var V=Ft[0],H=Ft[1];It.qx=V,It.qy=H}return Mt}function ae(pt){if((0,Et.y)(pt))return[].concat(pt);for(var It=qt(pt),vt=(0,U.pi)({},X.z),st=0;st<It.length;st+=1){It[st]=fe(It[st],vt);var Vt=It[st],ne=Vt.length;vt.x1=+Vt[ne-2],vt.y1=+Vt[ne-1],vt.x2=+Vt[ne-4]||vt.x1,vt.y2=+Vt[ne-3]||vt.y1}return It}},65850:function(me,Bt,G){"use strict";G.d(Bt,{G:function(){return U}});function U(Et){var X=Et.slice(1).map(function(at,tt,K){return tt?K[tt-1].slice(-2).concat(at.slice(1)):Et[0].slice(1).concat(at.slice(1))}).map(function(at){return at.map(function(tt,K){return at[at.length-K-2*(1-K%2)]})}).reverse();return[["M"].concat(X[0].slice(0,2))].concat(X.map(function(at){return["C"].concat(at.slice(2))}))}},44078:function(me,Bt,G){"use strict";G.d(Bt,{y:function(){return U}});function U(Et,X){return Math.sqrt((Et[0]-X[0])*(Et[0]-X[0])+(Et[1]-X[1])*(Et[1]-X[1]))}},99872:function(me,Bt,G){"use strict";G.d(Bt,{x:function(){return tt}});var U=G(17570),Et=G(6489);function X(K,x){x===void 0&&(x=.5);var q=K.slice(0,2),I=K.slice(2,4),et=K.slice(4,6),$=K.slice(6,8),it=(0,U.k)(q,I,x),gt=(0,U.k)(I,et,x),lt=(0,U.k)(et,$,x),Rt=(0,U.k)(it,gt,x),At=(0,U.k)(gt,lt,x),Dt=(0,U.k)(Rt,At,x);return[["C"].concat(it,Rt,Dt),["C"].concat(At,lt,$)]}function at(K){return K.map(function(x,q,I){var et=q&&I[q-1].slice(-2).concat(x.slice(1)),$=q?(0,Et.S)(et[0],et[1],et[2],et[3],et[4],et[5],et[6],et[7],et[8],{bbox:!1}).length:0,it;return q?it=$?X(et):[x,x]:it=[x],{s:x,ss:it,l:$}})}function tt(K,x,q){var I=at(K),et=at(x),$=I.length,it=et.length,gt=I.filter(function(pt){return pt.l}).length,lt=et.filter(function(pt){return pt.l}).length,Rt=I.filter(function(pt){return pt.l}).reduce(function(pt,It){var vt=It.l;return pt+vt},0)/gt||0,At=et.filter(function(pt){return pt.l}).reduce(function(pt,It){var vt=It.l;return pt+vt},0)/lt||0,Dt=q||Math.max($,it),Jt=[Rt,At],qt=[Dt-$,Dt-it],fe=0,ae=[I,et].map(function(pt,It){return pt.l===Dt?pt.map(function(vt){return vt.s}):pt.map(function(vt,st){return fe=st&&qt[It]&&vt.l>=Jt[It],qt[It]-=fe?1:0,fe?vt.ss:[vt.s]}).flat()});return ae[0].length===ae[1].length?ae:tt(ae[0],ae[1],Dt)}},92455:function(me,Bt,G){"use strict";G.d(Bt,{b:function(){return at}});var U=G(75839);function Et(tt,K,x,q,I,et,$,it){return 3*((it-K)*(x+I)-($-tt)*(q+et)+q*(tt-I)-x*(K-et)+it*(I+tt/3)-$*(et+K/3))/20}function X(tt){var K=0,x=0,q=0;return(0,U.Y)(tt).map(function(I){var et;switch(I[0]){case"M":return K=I[1],x=I[2],0;default:var $=I.slice(1),it=$[0],gt=$[1],lt=$[2],Rt=$[3],At=$[4],Dt=$[5];return q=Et(K,x,it,gt,lt,Rt,At,Dt),et=I.slice(-2),K=et[0],x=et[1],q}}).reduce(function(I,et){return I+et},0)}function at(tt){return X(tt)>=0}},84329:function(me,Bt,G){"use strict";G.d(Bt,{r:function(){return X}});var U=G(97582),Et=G(32262);function X(at,tt,K){return(0,Et.s)(at,tt,(0,U.pi)((0,U.pi)({},K),{bbox:!1,length:!0})).point}},83555:function(me,Bt,G){"use strict";G.d(Bt,{g:function(){return X}});var U=G(44078);function Et(at){var tt=at.length,K=tt-1;return at.map(function(x,q){return at.map(function(I,et){var $=q+et,it;return et===0||at[$]&&at[$][0]==="M"?(it=at[$],["M"].concat(it.slice(-2))):($>=tt&&($-=K),at[$])})})}function X(at,tt){var K=at.length-1,x=[],q=0,I=0,et=Et(at);return et.forEach(function($,it){at.slice(1).forEach(function(gt,lt){I+=(0,U.y)(at[(it+lt)%K].slice(-2),tt[lt%K].slice(-2))}),x[it]=I,I=0}),q=x.indexOf(Math.min.apply(null,x)),et[q]}},69877:function(me,Bt,G){"use strict";G.d(Bt,{D:function(){return X}});var U=G(97582),Et=G(32262);function X(at,tt){return(0,Et.s)(at,void 0,(0,U.pi)((0,U.pi)({},tt),{bbox:!1,length:!0})).length}},41010:function(me,Bt,G){"use strict";G.d(Bt,{b:function(){return Et}});var U=G(56346);function Et(X){return(0,U.n)(X)&&X.every(function(at){var tt=at[0];return tt===tt.toUpperCase()})}},11013:function(me,Bt,G){"use strict";G.d(Bt,{y:function(){return Et}});var U=G(41010);function Et(X){return(0,U.b)(X)&&X.every(function(at){var tt=at[0];return"ACLMQZ".includes(tt)})}},56346:function(me,Bt,G){"use strict";G.d(Bt,{n:function(){return Et}});var U=G(18323);function Et(X){return Array.isArray(X)&&X.every(function(at){var tt=at[0].toLowerCase();return U.R[tt]===at.length-1&&"achlmqstvz".includes(tt)})}},17570:function(me,Bt,G){"use strict";G.d(Bt,{k:function(){return U}});function U(Et,X,at){var tt=Et[0],K=Et[1],x=X[0],q=X[1];return[tt+(x-tt)*at,K+(q-K)*at]}},32262:function(me,Bt,G){"use strict";G.d(Bt,{s:function(){return $}});var U=G(4848),Et=G(17570),X=G(44078);function at(it,gt,lt,Rt,At){var Dt=(0,X.y)([it,gt],[lt,Rt]),Jt={x:0,y:0};if(typeof At=="number")if(At<=0)Jt={x:it,y:gt};else if(At>=Dt)Jt={x:lt,y:Rt};else{var qt=(0,Et.k)([it,gt],[lt,Rt],At/Dt),fe=qt[0],ae=qt[1];Jt={x:fe,y:ae}}return{length:Dt,point:Jt,min:{x:Math.min(it,lt),y:Math.min(gt,Rt)},max:{x:Math.max(it,lt),y:Math.max(gt,Rt)}}}function tt(it,gt){var lt=it.x,Rt=it.y,At=gt.x,Dt=gt.y,Jt=lt*At+Rt*Dt,qt=Math.sqrt((Math.pow(lt,2)+Math.pow(Rt,2))*(Math.pow(At,2)+Math.pow(Dt,2))),fe=lt*Dt-Rt*At<0?-1:1,ae=fe*Math.acos(Jt/qt);return ae}function K(it,gt,lt,Rt,At,Dt,Jt,qt,fe,ae){var pt=Math.abs,It=Math.sin,vt=Math.cos,st=Math.sqrt,Vt=Math.PI,ne=pt(lt),ee=pt(Rt),Ft=(At%360+360)%360,Mt=Ft*(Vt/180);if(it===qt&&gt===fe)return{x:it,y:gt};if(ne===0||ee===0)return at(it,gt,qt,fe,ae).point;var Wt=(it-qt)/2,te=(gt-fe)/2,re={x:vt(Mt)*Wt+It(Mt)*te,y:-It(Mt)*Wt+vt(Mt)*te},T=Math.pow(re.x,2)/Math.pow(ne,2)+Math.pow(re.y,2)/Math.pow(ee,2);T>1&&(ne*=st(T),ee*=st(T));var V=Math.pow(ne,2)*Math.pow(ee,2)-Math.pow(ne,2)*Math.pow(re.y,2)-Math.pow(ee,2)*Math.pow(re.x,2),H=Math.pow(ne,2)*Math.pow(re.y,2)+Math.pow(ee,2)*Math.pow(re.x,2),J=V/H;J=J<0?0:J;var ht=(Dt!==Jt?1:-1)*st(J),bt={x:ht*(ne*re.y/ee),y:ht*(-(ee*re.x)/ne)},zt={x:vt(Mt)*bt.x-It(Mt)*bt.y+(it+qt)/2,y:It(Mt)*bt.x+vt(Mt)*bt.y+(gt+fe)/2},kt={x:(re.x-bt.x)/ne,y:(re.y-bt.y)/ee},se=tt({x:1,y:0},kt),z={x:(-re.x-bt.x)/ne,y:(-re.y-bt.y)/ee},P=tt(kt,z);!Jt&&P>0?P-=2*Vt:Jt&&P<0&&(P+=2*Vt),P%=2*Vt;var B=se+P*ae,dt=ne*vt(B),L=ee*It(B),Z={x:vt(Mt)*dt-It(Mt)*L+zt.x,y:It(Mt)*dt+vt(Mt)*L+zt.y};return Z}function x(it,gt,lt,Rt,At,Dt,Jt,qt,fe,ae,pt){var It,vt=pt.bbox,st=vt===void 0?!0:vt,Vt=pt.length,ne=Vt===void 0?!0:Vt,ee=pt.sampleSize,Ft=ee===void 0?30:ee,Mt=typeof ae=="number",Wt=it,te=gt,re=0,T=[Wt,te,re],V=[Wt,te],H=0,J={x:0,y:0},ht=[{x:Wt,y:te}];Mt&&ae<=0&&(J={x:Wt,y:te});for(var bt=0;bt<=Ft;bt+=1){if(H=bt/Ft,It=K(it,gt,lt,Rt,At,Dt,Jt,qt,fe,H),Wt=It.x,te=It.y,st&&ht.push({x:Wt,y:te}),ne&&(re+=(0,X.y)(V,[Wt,te])),V=[Wt,te],Mt&&re>=ae&&ae>T[2]){var zt=(re-ae)/(re-T[2]);J={x:V[0]*(1-zt)+T[0]*zt,y:V[1]*(1-zt)+T[1]*zt}}T=[Wt,te,re]}return Mt&&ae>=re&&(J={x:qt,y:fe}),{length:re,point:J,min:{x:Math.min.apply(null,ht.map(function(kt){return kt.x})),y:Math.min.apply(null,ht.map(function(kt){return kt.y}))},max:{x:Math.max.apply(null,ht.map(function(kt){return kt.x})),y:Math.max.apply(null,ht.map(function(kt){return kt.y}))}}}var q=G(6489);function I(it,gt,lt,Rt,At,Dt,Jt){var qt=1-Jt;return{x:Math.pow(qt,2)*it+2*qt*Jt*lt+Math.pow(Jt,2)*At,y:Math.pow(qt,2)*gt+2*qt*Jt*Rt+Math.pow(Jt,2)*Dt}}function et(it,gt,lt,Rt,At,Dt,Jt,qt){var fe,ae=qt.bbox,pt=ae===void 0?!0:ae,It=qt.length,vt=It===void 0?!0:It,st=qt.sampleSize,Vt=st===void 0?10:st,ne=typeof Jt=="number",ee=it,Ft=gt,Mt=0,Wt=[ee,Ft,Mt],te=[ee,Ft],re=0,T={x:0,y:0},V=[{x:ee,y:Ft}];ne&&Jt<=0&&(T={x:ee,y:Ft});for(var H=0;H<=Vt;H+=1){if(re=H/Vt,fe=I(it,gt,lt,Rt,At,Dt,re),ee=fe.x,Ft=fe.y,pt&&V.push({x:ee,y:Ft}),vt&&(Mt+=(0,X.y)(te,[ee,Ft])),te=[ee,Ft],ne&&Mt>=Jt&&Jt>Wt[2]){var J=(Mt-Jt)/(Mt-Wt[2]);T={x:te[0]*(1-J)+Wt[0]*J,y:te[1]*(1-J)+Wt[1]*J}}Wt=[ee,Ft,Mt]}return ne&&Jt>=Mt&&(T={x:At,y:Dt}),{length:Mt,point:T,min:{x:Math.min.apply(null,V.map(function(ht){return ht.x})),y:Math.min.apply(null,V.map(function(ht){return ht.y}))},max:{x:Math.max.apply(null,V.map(function(ht){return ht.x})),y:Math.max.apply(null,V.map(function(ht){return ht.y}))}}}function $(it,gt,lt){for(var Rt,At,Dt,Jt,qt,fe,ae=(0,U.A)(it),pt=typeof gt=="number",It,vt=[],st,Vt=0,ne=0,ee=0,Ft=0,Mt,Wt=[],te=[],re=0,T={x:0,y:0},V=T,H=T,J=T,ht=0,bt=0,zt=ae.length;bt<zt;bt+=1)Mt=ae[bt],st=Mt[0],It=st==="M",vt=It?vt:[Vt,ne].concat(Mt.slice(1)),It?(ee=Mt[1],Ft=Mt[2],T={x:ee,y:Ft},V=T,re=0,pt&&gt<.001&&(J=T)):st==="L"?(Rt=at(vt[0],vt[1],vt[2],vt[3],(gt||0)-ht),re=Rt.length,T=Rt.min,V=Rt.max,H=Rt.point):st==="A"?(At=x(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5],vt[6],vt[7],vt[8],(gt||0)-ht,lt||{}),re=At.length,T=At.min,V=At.max,H=At.point):st==="C"?(Dt=(0,q.S)(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5],vt[6],vt[7],(gt||0)-ht,lt||{}),re=Dt.length,T=Dt.min,V=Dt.max,H=Dt.point):st==="Q"?(Jt=et(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5],(gt||0)-ht,lt||{}),re=Jt.length,T=Jt.min,V=Jt.max,H=Jt.point):st==="Z"&&(vt=[Vt,ne,ee,Ft],qt=at(vt[0],vt[1],vt[2],vt[3],(gt||0)-ht),re=qt.length,T=qt.min,V=qt.max,H=qt.point),pt&&ht<gt&&ht+re>=gt&&(J=H),te.push(V),Wt.push(T),ht+=re,fe=st!=="Z"?Mt.slice(-2):[ee,Ft],Vt=fe[0],ne=fe[1];return pt&&gt>=ht&&(J={x:Vt,y:ne}),{length:ht,point:J,min:{x:Math.min.apply(null,Wt.map(function(kt){return kt.x})),y:Math.min.apply(null,Wt.map(function(kt){return kt.y}))},max:{x:Math.max.apply(null,te.map(function(kt){return kt.x})),y:Math.max.apply(null,te.map(function(kt){return kt.y}))}}}},6489:function(me,Bt,G){"use strict";G.d(Bt,{S:function(){return X}});var U=G(44078);function Et(at,tt,K,x,q,I,et,$,it){var gt=1-it;return{x:Math.pow(gt,3)*at+3*Math.pow(gt,2)*it*K+3*gt*Math.pow(it,2)*q+Math.pow(it,3)*et,y:Math.pow(gt,3)*tt+3*Math.pow(gt,2)*it*x+3*gt*Math.pow(it,2)*I+Math.pow(it,3)*$}}function X(at,tt,K,x,q,I,et,$,it,gt){var lt,Rt=gt.bbox,At=Rt===void 0?!0:Rt,Dt=gt.length,Jt=Dt===void 0?!0:Dt,qt=gt.sampleSize,fe=qt===void 0?10:qt,ae=typeof it=="number",pt=at,It=tt,vt=0,st=[pt,It,vt],Vt=[pt,It],ne=0,ee={x:0,y:0},Ft=[{x:pt,y:It}];ae&&it<=0&&(ee={x:pt,y:It});for(var Mt=0;Mt<=fe;Mt+=1){if(ne=Mt/fe,lt=Et(at,tt,K,x,q,I,et,$,ne),pt=lt.x,It=lt.y,At&&Ft.push({x:pt,y:It}),Jt&&(vt+=(0,U.y)(Vt,[pt,It])),Vt=[pt,It],ae&&vt>=it&&it>st[2]){var Wt=(vt-it)/(vt-st[2]);ee={x:Vt[0]*(1-Wt)+st[0]*Wt,y:Vt[1]*(1-Wt)+st[1]*Wt}}st=[pt,It,vt]}return ae&&it>=vt&&(ee={x:et,y:$}),{length:vt,point:ee,min:{x:Math.min.apply(null,Ft.map(function(te){return te.x})),y:Math.min.apply(null,Ft.map(function(te){return te.y}))},max:{x:Math.max.apply(null,Ft.map(function(te){return te.x})),y:Math.max.apply(null,Ft.map(function(te){return te.y}))}}}},77242:function(me,Bt,G){"use strict";G.r(Bt),G.d(Bt,{default:function(){return F3}});var U={};G.r(U),G.d(U,{circle:function(){return n_},diamond:function(){return r_},rect:function(){return a_},simple:function(){return s_},triangle:function(){return cp},triangleRect:function(){return o_},vee:function(){return i_}});var Et=G(27424),X=G.n(Et),at={g6:"g6___sap1K",tips:"tips___b1ZNl",icon:"icon___y2WCn",treeMap:"treeMap___Csyu9"},tt=G(67294),K=G(74330),x=G(4559);function q(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function I(r){"@babel/helpers - typeof";return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(r)}function et(r,t){if(I(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(I(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function $(r){var t=et(r,"string");return I(t)=="symbol"?t:t+""}function it(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,$(n.key),n)}}function gt(r,t,e){return t&&it(r.prototype,t),e&&it(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function lt(r){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lt(r)}function Rt(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Rt=function(){return!!r})()}function At(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Dt(r,t){if(t&&(I(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return At(r)}function Jt(r,t,e){return t=lt(t),Dt(r,Rt()?Reflect.construct(t,e||[],lt(r).constructor):t.apply(r,e))}function qt(r,t){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},qt(r,t)}function fe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&qt(r,t)}var ae=G(76714),pt=G(25897),It=G(32945),vt=G(85975),st=G(77160);var Vt=function(r){function t(){var e;q(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=Jt(this,t,[].concat(i)),e.landmarks=[],e}return fe(t,r),gt(t,[{key:"rotate",value:function(n,i,a){if(this.relElevation=(0,x._O)(i),this.relAzimuth=(0,x._O)(n),this.relRoll=(0,x._O)(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===x.iM.EXPLORING){var o=It.yY(It.Ue(),[1,0,0],(0,x.Vl)((this.rotateWorld?1:-1)*this.relElevation)),s=It.yY(It.Ue(),[0,1,0],(0,x.Vl)((this.rotateWorld?1:-1)*this.relAzimuth)),l=It.yY(It.Ue(),[0,0,1],(0,x.Vl)(this.relRoll)),c=It.Jp(It.Ue(),s,o);c=It.Jp(It.Ue(),c,l);var u=vt.fromQuat(vt.create(),c);vt.translate(this.matrix,this.matrix,[0,0,-this.distance]),vt.multiply(this.matrix,this.matrix,u),vt.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===x.iM.ORBITING||this.type===x.iM.EXPLORING?this._getPosition():this.type===x.iM.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(n,i){var a=(0,x.O4)(n,i,0),o=st.d9(this.position);return st.IH(o,o,st.bA(st.Ue(),this.right,a[0])),st.IH(o,o,st.bA(st.Ue(),this.up,a[1])),this._setPosition(o),this.triggerUpdate(),this}},{key:"dolly",value:function(n){var i=this.forward,a=st.d9(this.position),o=n*this.dollyingStep,s=this.distance+n*this.dollyingStep;return o=Math.max(Math.min(s,this.maxDistance),this.minDistance)-this.distance,a[0]+=o*i[0],a[1]+=o*i[1],a[2]+=o*i[2],this._setPosition(a),this.type===x.iM.ORBITING||this.type===x.iM.EXPLORING?this._getDistance():this.type===x.iM.TRACKING&&st.IH(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(n){var i,a,o,s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.position,u=c===void 0?this.position:c,h=l.focalPoint,f=h===void 0?this.focalPoint:h,d=l.roll,p=l.zoom,g=new x.GZ.CameraContribution;g.setType(this.type,void 0),g.setPosition(u[0],(i=u[1])!==null&&i!==void 0?i:this.position[1],(a=u[2])!==null&&a!==void 0?a:this.position[2]),g.setFocalPoint(f[0],(o=f[1])!==null&&o!==void 0?o:this.focalPoint[1],(s=f[2])!==null&&s!==void 0?s:this.focalPoint[2]),g.setRoll(d!=null?d:this.roll),g.setZoom(p!=null?p:this.zoom);var y={name:n,matrix:vt.clone(g.getWorldTransform()),right:st.d9(g.right),up:st.d9(g.up),forward:st.d9(g.forward),position:st.d9(g.getPosition()),focalPoint:st.d9(g.getFocalPoint()),distanceVector:st.d9(g.getDistanceVector()),distance:g.getDistance(),dollyingStep:g.getDollyingStep(),azimuth:g.getAzimuth(),elevation:g.getElevation(),roll:g.getRoll(),relAzimuth:g.relAzimuth,relElevation:g.relElevation,relRoll:g.relRoll,zoom:g.getZoom()};return this.landmarks.push(y),y}},{key:"gotoLandmark",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=(0,ae.Z)(n)?this.landmarks.find(function(S){return S.name===n}):n;if(o){var s=(0,pt.Z)(a)?{duration:a}:a,l=s.easing,c=l===void 0?"linear":l,u=s.duration,h=u===void 0?100:u,f=s.easingFunction,d=f===void 0?void 0:f,p=s.onfinish,g=p===void 0?void 0:p,y=s.onframe,m=y===void 0?void 0:y,b=.01;this.cancelLandmarkAnimation();var E=o.position,O=o.focalPoint,M=o.zoom,k=o.roll,D=d||x.GZ.EasingFunction(c),N,rt=function(){i.setFocalPoint(O),i.setPosition(E),i.setRoll(k),i.setZoom(M),i.computeMatrix(),i.triggerUpdate(),g==null||g()};if(h===0)return rt();var C=function(A){N===void 0&&(N=A);var j=A-N;if(j>=h){rt();return}var Y=D(j/h),ot=st.Ue(),Lt=st.Ue(),Xt=1,wt=0;st.t7(ot,i.focalPoint,O,Y),st.t7(Lt,i.position,E,Y),wt=i.roll*(1-Y)+k*Y,Xt=i.zoom*(1-Y)+M*Y,i.setFocalPoint(ot),i.setPosition(Lt),i.setRoll(wt),i.setZoom(Xt);var Ct=st.TK(ot,O)+st.TK(Lt,E);if(Ct<=b&&M===void 0&&k===void 0)return rt();i.computeMatrix(),i.triggerUpdate(),j<h&&(m==null||m(Y),i.landmarkAnimationID=i.canvas.requestAnimationFrame(C))};this.canvas.requestAnimationFrame(C)}}}])}(x.V1);x.GZ.CameraContribution=Vt;var ne=null,ee=0,Ft=new WeakMap,Mt=null,Wt=null,te,re;function T(r,t){return te=new ne(r,t)}function V(r){return re||(re=ne.copy(te),re.oldValue=r,re)}function H(){te=re=void 0}function J(r){return r===re||r===te}function ht(r,t){return r===t?r:re&&J(r)?re:null}function bt(r){r.nodes.forEach(function(t){var e=Ft.get(t);e&&e.forEach(function(n){n.observer===r&&n.removeTransientObservers()})})}function zt(r,t){for(var e=r;e;e=e.parentNode){var n=Ft.get(e);if(n)for(var i=0;i<n.length;i++){var a=n[i],o=a.options;if(!(e!==r&&!o.subtree)){var s=t(o);s&&a.enqueue(s)}}}}var kt=!1,se=null;function z(r){se.push(r),kt||(kt=!0,typeof runtime.globalThis!="undefined"?runtime.globalThis.setTimeout(P):P())}function P(){kt=!1;var r=se;se=[],r.sort(function(e,n){return e.uid-n.uid});var t=!1;r.forEach(function(e){var n=e.takeRecords();bt(e),n.length&&(e.callback(n,e),t=!0)}),t&&P()}function B(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(r){"@babel/helpers - typeof";return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(r)}function L(r,t){if(dt(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(dt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Z(r){var t=L(r,"string");return dt(t)=="symbol"?t:t+""}function ct(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Z(n.key),n)}}function R(r,t,e){return t&&ct(r.prototype,t),e&&ct(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function W(r){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(r)}function ft(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ft=function(){return!!r})()}function v(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _(r,t){if(t&&(dt(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(r)}function F(r,t,e){return t=W(t),_(r,ft()?Reflect.construct(t,e||[],W(r).constructor):t.apply(r,e))}function nt(r,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},nt(r,t)}function ut(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&nt(r,t)}function xt(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function Pt(r){if(Array.isArray(r))return xt(r)}function jt(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Ht(r,t){if(r){if(typeof r=="string")return xt(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?xt(r,t):void 0}}function Gt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ut(r){return Pt(r)||jt(r)||Ht(r)||Gt()}function Yt(r){if(Array.isArray(r))return r}function ce(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(e=e.call(r)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(r,t){return Yt(r)||ce(r,t)||Ht(r,t)||oe()}var ue=G(81957),Nt=G(95147);var Q=function(r){function t(e,n,i,a){var o;return B(this,t),o=F(this,t,[e]),o.currentTime=i,o.timelineTime=a,o.target=n,o.type="finish",o.bubbles=!1,o.currentTarget=n,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=i,o.timelineTime=a,o}return ut(t,r),R(t)}(x.xA),yt=0,_t=function(){function r(t,e){var n;B(this,r),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=e,this.id="".concat(yt++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((n=this.effect)===null||n===void 0?void 0:n.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return R(r,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var e=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,i){e.resolveReadyPromise=function(){n(e)},e.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var e=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,i){e.resolveFinishedPromise=function(){n(e)},e.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(e){if(e=Number(e),!isNaN(e)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var n;this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-e/this.playbackRate}this.currentTimePending=!1,this._currentTime!==e&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(e,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(e){if(e!==null){if(this.updatePromises(),e=Number(e),isNaN(e)||this._paused||this._idle)return;this._startTime=e,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){if(e!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=e,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var e=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==e&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):e==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==e&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():e==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var e=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new Q(null,this,this.currentTime,null);setTimeout(function(){e.oncancel(n)})}}},{key:"reverse",value:function(){this.updatePromises();var e=this.currentTime;this.playbackRate*=-1,this.play(),e!==null&&(this.currentTime=e),this.updatePromises()}},{key:"updatePlaybackRate",value:function(e){this.playbackRate=e}},{key:"targetAnimations",value:function(){var e,n=(e=this.effect)===null||e===void 0?void 0:e.target;return n.getAnimations()}},{key:"markTarget",value:function(){var e=this.targetAnimations();e.indexOf(this)===-1&&e.push(this)}},{key:"unmarkTarget",value:function(){var e=this.targetAnimations(),n=e.indexOf(this);n!==-1&&e.splice(n,1)}},{key:"tick",value:function(e,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=e-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((e-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(e))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(x.jf)}},{key:"addEventListener",value:function(e,n,i){throw new Error(x.jf)}},{key:"removeEventListener",value:function(e,n,i){throw new Error(x.jf)}},{key:"dispatchEvent",value:function(e){throw new Error(x.jf)}},{key:"commitStyles",value:function(){throw new Error(x.jf)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var e;this._inEffect=!!((e=this.effect)!==null&&e!==void 0&&e.update(-1))}else{var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(e,n){e!==this._currentTime&&(this._currentTime=e,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(e){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new Q(null,this,this.currentTime,e);setTimeout(function(){n.onfinish&&n.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new Q(null,this,this.currentTime,e);this.onframe(a)}this._finishedFlag=!1}}}])}(),Ot=4,mt=.001,Tt=1e-7,Kt=10,Qt=11,le=1/(Qt-1),pe=typeof Float32Array=="function",be=function(t,e){return 1-3*e+3*t},xe=function(t,e){return 3*e-6*t},Me=function(t){return 3*t},_e=function(t,e,n){return((be(e,n)*t+xe(e,n))*t+Me(e))*t},Pe=function(t,e,n){return 3*be(e,n)*t*t+2*xe(e,n)*t+Me(e)},Xe=function(t,e,n,i,a){var o,s,l=0;do s=e+(n-e)/2,o=_e(s,i,a)-t,o>0?n=s:e=s;while(Math.abs(o)>Tt&&++l<Kt);return s},ln=function(t,e,n,i){for(var a=0;a<Ot;++a){var o=Pe(e,n,i);if(o===0)return e;var s=_e(e,n,i)-t;e-=s/o}return e},Rn=function(t,e,n,i){if(!(t>=0&&t<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===i)return function(l){return l};for(var a=pe?new Float32Array(Qt):new Array(Qt),o=0;o<Qt;++o)a[o]=_e(o*le,t,n);var s=function(c){for(var u=0,h=1,f=Qt-1;h!==f&&a[h]<=c;++h)u+=le;--h;var d=(c-a[h])/(a[h+1]-a[h]),p=u+d*le,g=Pe(p,t,n);return g>=mt?ln(c,p,t,n):g===0?p:Xe(c,u,u+le,t,n)};return function(l){return l===0||l===1?l:_e(s(l),e,i)}},On=function(t){return t=t.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}),t.charAt(0)==="-"?t.substring(1):t},Dn=function(t){return Math.pow(t,2)},Mn=function(t){return Math.pow(t,3)},Gn=function(t){return Math.pow(t,4)},Nn=function(t){return Math.pow(t,5)},Nr=function(t){return Math.pow(t,6)},Ri=function(t){return 1-Math.cos(t*Math.PI/2)},qi=function(t){return 1-Math.sqrt(1-t*t)},Qi=function(t){return t*t*(3*t-2)},Ji=function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((e*3-2)/22-t,2)},wo=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=de(e,2),i=n[0],a=i===void 0?1:i,o=n[1],s=o===void 0?.5:o,l=(0,ue.Z)(Number(a),1,10),c=(0,ue.Z)(Number(s),.1,2);return t===0||t===1?t:-l*Math.pow(2,10*(t-1))*Math.sin((t-1-c/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/c)},Pa=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=de(e,4),a=i[0],o=a===void 0?1:a,s=i[1],l=s===void 0?100:s,c=i[2],u=c===void 0?10:c,h=i[3],f=h===void 0?0:h;o=(0,ue.Z)(o,.1,1e3),l=(0,ue.Z)(l,.1,1e3),u=(0,ue.Z)(u,.1,1e3),f=(0,ue.Z)(f,.1,1e3);var d=Math.sqrt(l/o),p=u/(2*Math.sqrt(l*o)),g=p<1?d*Math.sqrt(1-p*p):0,y=1,m=p<1?(p*d+-f)/g:-f+d,b=n?n*t/1e3:t;return p<1?b=Math.exp(-b*p*d)*(y*Math.cos(g*b)+m*Math.sin(g*b)):b=(y+m*b)*Math.exp(-b*d),t===0||t===1?t:1-b},ec=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=e,i=de(n,2),a=i[0],o=a===void 0?10:a,s=i[1],l=s==="start"?Math.ceil:Math.floor;return l((0,ue.Z)(t,0,1)*o)/o},Eh=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=de(e,4),i=n[0],a=n[1],o=n[2],s=n[3];return Rn(i,a,o,s)(t)},So=Rn(.42,0,1,1),cr=function(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-t(1-e,n,i)}},ur=function(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return e<.5?t(e*2,n,i)/2:1-t(e*-2+2,n,i)/2}},hr=function(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return e<.5?(1-t(1-e*2,n,i))/2:(t(e*2-1,n,i)+1)/2}},wh={steps:ec,"step-start":function(t){return ec(t,[1,"start"])},"step-end":function(t){return ec(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":Eh,ease:function(t){return Eh(t,[.25,.1,.25,1])},in:So,out:cr(So),"in-out":ur(So),"out-in":hr(So),"in-quad":Dn,"out-quad":cr(Dn),"in-out-quad":ur(Dn),"out-in-quad":hr(Dn),"in-cubic":Mn,"out-cubic":cr(Mn),"in-out-cubic":ur(Mn),"out-in-cubic":hr(Mn),"in-quart":Gn,"out-quart":cr(Gn),"in-out-quart":ur(Gn),"out-in-quart":hr(Gn),"in-quint":Nn,"out-quint":cr(Nn),"in-out-quint":ur(Nn),"out-in-quint":hr(Nn),"in-expo":Nr,"out-expo":cr(Nr),"in-out-expo":ur(Nr),"out-in-expo":hr(Nr),"in-sine":Ri,"out-sine":cr(Ri),"in-out-sine":ur(Ri),"out-in-sine":hr(Ri),"in-circ":qi,"out-circ":cr(qi),"in-out-circ":ur(qi),"out-in-circ":hr(qi),"in-back":Qi,"out-back":cr(Qi),"in-out-back":ur(Qi),"out-in-back":hr(Qi),"in-bounce":Ji,"out-bounce":cr(Ji),"in-out-bounce":ur(Ji),"out-in-bounce":hr(Ji),"in-elastic":wo,"out-elastic":cr(wo),"in-out-elastic":ur(wo),"out-in-elastic":hr(wo),spring:Pa,"spring-in":Pa,"spring-out":cr(Pa),"spring-in-out":ur(Pa),"spring-out-in":hr(Pa)},hg=function(t){return On(t).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},fg=function(t){return wh[hg(t)]||wh.linear},dg=function(t){return t},pg=1,vg=.5,Sh=0;function Oh(r,t){return function(e){if(e>=1)return 1;var n=1/r;return e+=t*n,e-e%n}}var Oo="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",gg=new RegExp("cubic-bezier\\(".concat(Oo,",").concat(Oo,",").concat(Oo,",").concat(Oo,"\\)")),yg=/steps\(\s*(\d+)\s*\)/,mg=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function nc(r){var t=gg.exec(r);if(t)return Rn.apply(void 0,Ut(t.slice(1).map(Number)));var e=yg.exec(r);if(e)return Oh(Number(e[1]),Sh);var n=mg.exec(r);return n?Oh(Number(n[1]),{start:pg,middle:vg,end:Sh}[n[2]]):fg(r)}function bg(r){return Math.abs(_g(r)/(r.playbackRate||1))}function _g(r){var t;return r.duration===0||r.iterations===0?0:(r.duration==="auto"?0:Number(r.duration))*((t=r.iterations)!==null&&t!==void 0?t:1)}var Mh=0,rc=1,Mo=2,Ch=3;function xg(r,t,e){if(t===null)return Mh;var n=e.endTime;return t<Math.min(e.delay,n)?rc:t>=Math.min(e.delay+r+e.endDelay,n)?Mo:Ch}function Eg(r,t,e,n,i){switch(n){case rc:return t==="backwards"||t==="both"?0:null;case Ch:return e-i;case Mo:return t==="forwards"||t==="both"?r:null;case Mh:return null}}function wg(r,t,e,n,i){var a=i;return r===0?t!==rc&&(a+=e):a+=n/r,a}function Sg(r,t,e,n,i,a){var o=r===1/0?t%1:r%1;return o===0&&e===Mo&&n!==0&&(i!==0||a===0)&&(o=1),o}function Og(r,t,e,n){return r===Mo&&t===1/0?1/0:e===1?Math.floor(n)-1:Math.floor(n)}function Mg(r,t,e){var n=r;if(r!=="normal"&&r!=="reverse"){var i=t;r==="alternate-reverse"&&(i+=1),n="normal",i!==1/0&&i%2!==0&&(n="reverse")}return n==="normal"?e:1-e}function Cg(r,t,e){var n=xg(r,t,e),i=Eg(r,e.fill,t,n,e.delay);if(i===null)return null;var a=e.duration==="auto"?0:e.duration,o=wg(a,n,e.iterations,i,e.iterationStart),s=Sg(o,e.iterationStart,n,e.iterations,i,a),l=Og(n,e.iterations,s,o),c=Mg(e.direction,l,s);return e.currentIteration=l,e.progress=c,e.easingFunction(c)}function Tg(r,t,e){var n=Ag(r,t),i=Pg(n,e);return function(a,o){if(o!==null)i.filter(function(l){return o>=l.applyFrom&&o<l.applyTo}).forEach(function(l){var c=o-l.startOffset,u=l.endOffset-l.startOffset,h=u===0?0:c/u;a.setAttribute(l.property,l.interpolation(h),!1,!1)});else for(var s in n)Th(s)&&a.setAttribute(s,null)}}function Th(r){return r!=="offset"&&r!=="easing"&&r!=="composite"&&r!=="computedOffset"}function Ag(r,t){for(var e={},n=0;n<r.length;n++)for(var i in r[n])if(Th(i)){var a={offset:r[n].offset,computedOffset:r[n].computedOffset,easing:r[n].easing,easingFunction:nc(r[n].easing)||t.easingFunction,value:r[n][i]};e[i]=e[i]||[],e[i].push(a)}return e}function Pg(r,t){var e=[];for(var n in r)for(var i=r[n],a=0;a<i.length-1;a++){var o=a,s=a+1,l=i[o].computedOffset,c=i[s].computedOffset,u=l,h=c;a===0&&(u=-1/0,c===0&&(s=o)),a===i.length-2&&(h=1/0,l===1&&(o=s)),e.push({applyFrom:u,applyTo:h,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:n,interpolation:Rg(n,i[o].value,i[s].value,t)})}return e.sort(function(f,d){return f.startOffset-d.startOffset}),e}var Ah=function(t,e,n){return function(i){var a=Ph(t,e,i);return(0,pt.Z)(a)?a:n(a)}};function Rg(r,t,e,n){var i=x.N1[r];if(i&&i.syntax&&i.int){var a=x.GZ.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(t,n):t,l=o?o(e,n):e,c=a.mixer(s,l,n);if(c){var u=Ah.apply(void 0,Ut(c));return function(h){return h===0?t:h===1?e:u(h)}}}}return Ah(!1,!0,function(h){return h?e:t})}function Ph(r,t,e){if(typeof r=="number"&&typeof t=="number")return r*(1-e)+t*e;if(typeof r=="boolean"&&typeof t=="boolean"||typeof r=="string"&&typeof t=="string")return e<.5?r:t;if(Array.isArray(r)&&Array.isArray(t)){for(var n=r.length,i=t.length,a=Math.max(n,i),o=[],s=0;s<a;s++)o.push(Ph(r[s<n?s:n-1],t[s<i?s:i-1],e));return o}throw new Error("Mismatched interpolation arguments ".concat(r,":").concat(t))}var Dg=function(){function r(){B(this,r),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=dg,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return R(r,[{key:"easing",get:function(){return this._easing},set:function(e){this.easingFunction=nc(e),this._easing=e}}])}();function kg(r){var t=[];for(var e in r)if(!(e in["easing","offset","composite"])){var n=r[e];Array.isArray(n)||(n=[n]);for(var i=n.length,a=0;a<i;a++){if(!t[a]){var o={};"offset"in r&&(o.offset=Number(r.offset)),"easing"in r&&(o.easing=r.easing),"composite"in r&&(o.composite=r.composite),t[a]=o}n[a]!==void 0&&n[a]!==null&&(t[a][e]=n[a])}}return t.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),t}function Rh(r,t){if(r===null)return[];Array.isArray(r)||(r=kg(r));for(var e=r.map(function(l){var c={};t!=null&&t.composite&&(c.composite="auto");for(var u in l){var h=l[u];if(u==="offset"){if(h!==null){if(h=Number(h),!isFinite(h))throw new Error("Keyframe offsets must be numbers.");if(h<0||h>1)throw new Error("Keyframe offsets must be between 0 and 1.");c.computedOffset=h}}else if(u==="composite"&&["replace","add","accumulate","auto"].indexOf(h)===-1)throw new Error("".concat(h," compositing is not supported"));c[u]=h}return c.offset===void 0&&(c.offset=null),c.easing===void 0&&(c.easing=(t==null?void 0:t.easing)||"linear"),c.composite===void 0&&(c.composite="auto"),c}),n=!0,i=-1/0,a=0;a<e.length;a++){var o=e[a].offset;if((0,Nt.Z)(o))n=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}e=e.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,c=e,u=c.length;if(e[u-1].computedOffset=Number((l=e[u-1].offset)!==null&&l!==void 0?l:1),u>1){var h;e[0].computedOffset=Number((h=e[0].offset)!==null&&h!==void 0?h:0)}for(var f=0,d=Number(e[0].computedOffset),p=1;p<u;p++){var g=e[p].computedOffset;if(!(0,Nt.Z)(g)&&!(0,Nt.Z)(d)){for(var y=1;y<p-f;y++)e[f+y].computedOffset=d+(Number(g)-d)*y/(p-f);f=p,d=Number(g)}}}return n||s(),e}var Lg="backwards|forwards|both|none".split("|"),Ig="reverse|alternate|alternate-reverse".split("|");function Ng(r,t){var e=new Dg;return t&&(e.fill="both",e.duration="auto"),typeof r=="number"&&!isNaN(r)?e.duration=r:r!==void 0&&Object.keys(r).forEach(function(n){if(r[n]!==void 0&&r[n]!==null&&r[n]!=="auto"){if((typeof e[n]=="number"||n==="duration")&&(typeof r[n]!="number"||isNaN(r[n]))||n==="fill"&&Lg.indexOf(r[n])===-1||n==="direction"&&Ig.indexOf(r[n])===-1)return;e[n]=r[n]}}),e}function jg(r,t){return r=Bg(r!=null?r:{duration:"auto"}),Ng(r,t)}function Bg(r){return typeof r=="number"&&(isNaN(r)?r={duration:"auto"}:r={duration:r}),r}var Fg=function(){function r(t,e,n){var i=this;B(this,r),this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=jg(n,!1),this.timing.effect=this,this.timing.activeDuration=bg(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=Rh(e,this.timing),this.interpolations=Tg(this.normalizedKeyframes,this.timing,this.target);var a=x.GZ.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(s,l){return l==="duration"?s.duration==="auto"?0:s.duration:l==="fill"?s.fill==="auto"?"none":s.fill:l==="localTime"?i.animation&&i.animation.currentTime||null:l==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:s.currentIteration||0:l==="progress"?!i.animation||i.animation.playState!=="running"?null:s.progress||0:s[l]},set:function(){return!0}}):this.timing}return R(r,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(e){return e===null?!1:(this.timeFraction=Cg(this.timing.activeDuration,e,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(e){this.normalizedKeyframes=Rh(e)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(e){var n=this;Object.keys(e||{}).forEach(function(i){n.timing[i]=e[i]})}}])}();function Dh(r,t){return Number(r.id)-Number(t.id)}var zg=function(){function r(t){var e=this;B(this,r),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(n){e.currentTime=n,e.discardAnimations(),e.animations.length===0?e.timelineTicking=!1:e.requestAnimationFrame(e.webAnimationsNextTick)},this.processRafCallbacks=function(n){var i=e.rafCallbacks;e.rafCallbacks=[],n<Number(e.currentTime)&&(n=Number(e.currentTime)),e.animations.sort(Dh),e.animations=e.tick(n,!0,e.animations)[0],i.forEach(function(a){a[1](n)}),e.applyPendingEffects()},this.document=t}return R(r,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(e,n,i){var a=new Fg(e,n,i),o=new _t(a,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o}},{key:"applyDirtiedAnimation",value:function(e){var n=this;if(!this.inTick){e.markTarget();var i=e.targetAnimations();i.sort(Dh);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(o){var s=n.animations.indexOf(o);s!==-1&&n.animations.splice(s,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(e){e==null||e.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(e){return e.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(e){return e.playState!=="finished"&&e.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(e){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,e]),n}},{key:"requestAnimationFrame",value:function(e){var n=this;return this.rAF(function(i){n.updateAnimationsPromises(),e(i),n.updateAnimationsPromises()})}},{key:"tick",value:function(e,n,i){var a=this,o,s;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=e,this.ticking=!1;var l=[],c=[],u=[],h=[];return i.forEach(function(f){f.tick(e,n),f._inEffect?(c.push(f.effect),f.markTarget()):(l.push(f.effect),f.unmarkTarget()),f._needsTick&&(a.ticking=!0);var d=f._inEffect||f._needsTick;f._inTimeline=d,d?u.push(f):h.push(f)}),(o=this.pendingEffects).push.apply(o,l),(s=this.pendingEffects).push.apply(s,c),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[u,h]}}])}();x.GZ.EasingFunction=nc,x.GZ.AnimationTimeline=zg;var kh=function(r){return(0,Nt.Z)(r)?"":r.toString()},Wg=function(r){var t=kh(r);return t.charAt(0).toUpperCase()+t.substring(1)},Co=Wg,Lh=G(6241),Gg=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},Ra=Gg,ic=function(r,t){if(r===t)return!0;if(!r||!t||(0,ae.Z)(r)||(0,ae.Z)(t))return!1;if(Ra(r)||Ra(t)){if(r.length!==t.length)return!1;for(var e=!0,n=0;n<r.length&&(e=ic(r[n],t[n]),!!e);n++);return e}if((0,Lh.Z)(r)||(0,Lh.Z)(t)){var i=Object.keys(r),a=Object.keys(t);if(i.length!==a.length)return!1;for(var e=!0,n=0;n<i.length&&(e=ic(r[i[n]],t[i[n]]),!!e);n++);return e}return!1},cn=ic,Vn=G(4637);const Vg={duration:500},Hg={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"},$3={CHANGE:"change"};var Ye;(function(r){r.NodeAdded="NodeAdded",r.NodeUpdated="NodeUpdated",r.NodeRemoved="NodeRemoved",r.EdgeAdded="EdgeAdded",r.EdgeUpdated="EdgeUpdated",r.EdgeRemoved="EdgeRemoved",r.ComboAdded="ComboAdded",r.ComboUpdated="ComboUpdated",r.ComboRemoved="ComboRemoved"})(Ye||(Ye={}));var Hn;(function(r){r.DRAW="draw",r.COLLAPSE="collapse",r.EXPAND="expand",r.TRANSFORM="transform"})(Hn||(Hn={}));var Ur;(function(r){r.CLICK="canvas:click",r.DBLCLICK="canvas:dblclick",r.POINTER_OVER="canvas:pointerover",r.POINTER_LEAVE="canvas:pointerleave",r.POINTER_ENTER="canvas:pointerenter",r.POINTER_MOVE="canvas:pointermove",r.POINTER_OUT="canvas:pointerout",r.POINTER_DOWN="canvas:pointerdown",r.POINTER_UP="canvas:pointerup",r.CONTEXT_MENU="canvas:contextmenu",r.DRAG_START="canvas:dragstart",r.DRAG="canvas:drag",r.DRAG_END="canvas:dragend",r.DRAG_ENTER="canvas:dragenter",r.DRAG_OVER="canvas:dragover",r.DRAG_LEAVE="canvas:dragleave",r.DROP="canvas:drop",r.WHEEL="canvas:wheel"})(Ur||(Ur={}));var Di;(function(r){r.CLICK="combo:click",r.DBLCLICK="combo:dblclick",r.POINTER_OVER="combo:pointerover",r.POINTER_LEAVE="combo:pointerleave",r.POINTER_ENTER="combo:pointerenter",r.POINTER_MOVE="combo:pointermove",r.POINTER_OUT="combo:pointerout",r.POINTER_DOWN="combo:pointerdown",r.POINTER_UP="combo:pointerup",r.CONTEXT_MENU="combo:contextmenu",r.DRAG_START="combo:dragstart",r.DRAG="combo:drag",r.DRAG_END="combo:dragend",r.DRAG_ENTER="combo:dragenter",r.DRAG_OVER="combo:dragover",r.DRAG_LEAVE="combo:dragleave",r.DROP="combo:drop"})(Di||(Di={}));var Zt;(function(r){r.CLICK="click",r.DBLCLICK="dblclick",r.POINTER_OVER="pointerover",r.POINTER_LEAVE="pointerleave",r.POINTER_ENTER="pointerenter",r.POINTER_MOVE="pointermove",r.POINTER_OUT="pointerout",r.POINTER_DOWN="pointerdown",r.POINTER_UP="pointerup",r.CONTEXT_MENU="contextmenu",r.DRAG_START="dragstart",r.DRAG="drag",r.DRAG_END="dragend",r.DRAG_ENTER="dragenter",r.DRAG_OVER="dragover",r.DRAG_LEAVE="dragleave",r.DROP="drop",r.KEY_DOWN="keydown",r.KEY_UP="keyup",r.WHEEL="wheel",r.PINCH="pinch"})(Zt||(Zt={}));var ta;(function(r){r.KEY_DOWN="keydown",r.KEY_UP="keyup"})(ta||(ta={}));var To;(function(r){r.CLICK="edge:click",r.DBLCLICK="edge:dblclick",r.POINTER_OVER="edge:pointerover",r.POINTER_LEAVE="edge:pointerleave",r.POINTER_ENTER="edge:pointerenter",r.POINTER_MOVE="edge:pointermove",r.POINTER_OUT="edge:pointerout",r.POINTER_DOWN="edge:pointerdown",r.POINTER_UP="edge:pointerup",r.CONTEXT_MENU="edge:contextmenu",r.DRAG_ENTER="edge:dragenter",r.DRAG_OVER="edge:dragover",r.DRAG_LEAVE="edge:dragleave",r.DROP="edge:drop"})(To||(To={}));var he;(function(r){r.BEFORE_CANVAS_INIT="beforecanvasinit",r.AFTER_CANVAS_INIT="aftercanvasinit",r.BEFORE_SIZE_CHANGE="beforesizechange",r.AFTER_SIZE_CHANGE="aftersizechange",r.BEFORE_ELEMENT_CREATE="beforeelementcreate",r.AFTER_ELEMENT_CREATE="afterelementcreate",r.BEFORE_ELEMENT_UPDATE="beforeelementupdate",r.AFTER_ELEMENT_UPDATE="afterelementupdate",r.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",r.AFTER_ELEMENT_DESTROY="afterelementdestroy",r.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",r.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",r.BEFORE_DRAW="beforedraw",r.AFTER_DRAW="afterdraw",r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_ANIMATE="beforeanimate",r.AFTER_ANIMATE="afteranimate",r.BEFORE_LAYOUT="beforelayout",r.AFTER_LAYOUT="afterlayout",r.BEFORE_STAGE_LAYOUT="beforestagelayout",r.AFTER_STAGE_LAYOUT="afterstagelayout",r.BEFORE_TRANSFORM="beforetransform",r.AFTER_TRANSFORM="aftertransform",r.BATCH_START="batchstart",r.BATCH_END="batchend",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.BEFORE_RENDERER_CHANGE="beforerendererchange",r.AFTER_RENDERER_CHANGE="afterrendererchange"})(he||(he={}));var oi;(function(r){r.UNDO="undo",r.REDO="redo",r.CANCEL="cancel",r.ADD="add",r.CLEAR="clear",r.CHANGE="change"})(oi||(oi={}));var fr;(function(r){r.CLICK="node:click",r.DBLCLICK="node:dblclick",r.POINTER_OVER="node:pointerover",r.POINTER_LEAVE="node:pointerleave",r.POINTER_ENTER="node:pointerenter",r.POINTER_MOVE="node:pointermove",r.POINTER_OUT="node:pointerout",r.POINTER_DOWN="node:pointerdown",r.POINTER_UP="node:pointerup",r.CONTEXT_MENU="node:contextmenu",r.DRAG_START="node:dragstart",r.DRAG="node:drag",r.DRAG_END="node:dragend",r.DRAG_ENTER="node:dragenter",r.DRAG_OVER="node:dragover",r.DRAG_LEAVE="node:dragleave",r.DROP="node:drop"})(fr||(fr={}));const Ge="combo",qn="tree";var ea;(function(r){r.NODE="node",r.EDGE="edge",r.COMBO="combo",r.THEME="theme",r.PALETTE="palette",r.LAYOUT="layout",r.BEHAVIOR="behavior",r.PLUGIN="plugin",r.ANIMATION="animation",r.TRANSFORM="transform",r.SHAPE="shape"})(ea||(ea={}));const ac={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function Yr(r,t){var e;const n=(e=ac[r])===null||e===void 0?void 0:e[t];if(n)return n}function U3(r){return EXTENSION_REGISTRY[r]}const Zg="5.0.47",$g="G6";function Kr(r){return`[${$g} v${Zg}] ${r}`}const Zn={mute:!1,debug:r=>{!Zn.mute&&console.debug(Kr(r))},info:r=>{!Zn.mute&&console.info(Kr(r))},warn:r=>{!Zn.mute&&console.warn(Kr(r))},error:r=>{!Zn.mute&&console.error(Kr(r))}};function Ih(r){const{theme:t}=r;if(!t)return{};const e=Yr(ea.THEME,t);return e||(Zn.warn(`The theme of ${t} is not registered.`),{})}function oc(r,t){if(Array.isArray(r)&&r.length===0)return null;const e=Array.isArray(r)?r[0]:r,n=Array.isArray(r)?r.slice(1):t||[];return new Proxy(e,{get(i,a){return typeof i[a]=="function"&&!["onframe","onfinish"].includes(a)?(...o)=>{i[a](...o),n.forEach(s=>{var l;return(l=s[a])===null||l===void 0?void 0:l.call(s,...o)})}:a==="finished"?Promise.all([e.finished,...n.map(o=>o.finished)]):Reflect.get(i,a)},set(i,a,o){return["onframe","onfinish"].includes(a)||n.forEach(s=>{s[a]=o}),Reflect.set(i,a,o)}})}function sc(r){const t=r.reduce((n,i)=>(Object.entries(i).forEach(([a,o])=>{n[a]===void 0?n[a]=[o]:n[a].push(o)}),n),{});Object.entries(t).forEach(([n,i])=>{(i.length!==r.length||i.some(a=>(0,Nt.Z)(a))||i.every(a=>!["sourceNode","targetNode","childrenNode"].includes(n)&&cn(a,i[0])))&&delete t[n]});const e=Object.entries(t).reduce((n,[i,a])=>(a.forEach((o,s)=>{n[s]?n[s][i]=o:n[s]={[i]:o}}),n),[]);return r.length!==0&&e.length===0&&e.push({_:0},{_:0}),e}function Da(r){switch(r){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function Nh(r,t){const{animation:e}=r;if(e===!1||t===!1)return!1;const n=Object.assign({},Vg);return(0,Vn.Z)(e)&&Object.assign(n,e),(0,Vn.Z)(t)&&Object.assign(n,t),n}function Ug(r){if(typeof r=="string"){const t=Yr(ea.ANIMATION,r);return t||(Zn.warn(`The animation of ${r} is not registered.`),[])}return r}function Yg(r,t,e,n){var i,a;const{animation:o}=r;if(o===!1||n===!1)return[];const s=(i=r==null?void 0:r[t])===null||i===void 0?void 0:i.animation;if(s===!1)return[];const l=s==null?void 0:s[e];if(l===!1)return[];const c=(a=Ih(r)[t])===null||a===void 0?void 0:a.animation,u=(f=[])=>Ug(f).map(d=>Object.assign(Object.assign(Object.assign(Object.assign({},Hg),(0,Vn.Z)(o)&&o),d),(0,Vn.Z)(n)&&n));if(l)return u(l);if(!c)return[];const h=c[e];return h===!1?[]:u(h)}function jh(r,t,e,n=[]){if(!n&&r===0&&t===0&&e===0)return null;if(Array.isArray(n)){let a=-1;const o=[];for(let s=0;s<n.length;s++){const l=n[s];if(l[0]==="translate"){if(l[1]===r&&l[2]===t)return null;a=s,o.push(["translate",r,t])}else if(l[0]==="translate3d"){if(l[1]===r&&l[2]===t&&l[3]===e)return null;a=s,o.push(["translate3d",r,t,e!=null?e:0])}else o.push(l)}return a===-1&&o.splice(0,0,(0,pt.Z)(e)?["translate3d",r,t,e!=null?e:0]:["translate",r,t]),o.length===0?null:o}const i=n?n.replace(/translate(3d)?\([^)]*\)/g,""):"";return e===0?`translate(${r}, ${t})${i}`:`translate3d(${r}, ${t}, ${e})${i}`}var Kg=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};const Xg=(r,t,e)=>{if(!e.length)return null;const[n,i]=t,a=c=>{var u;if(c){const h=r.getShape(c);if(!h)return null;const f=`get${Co(c)}Style`,d=((u=r==null?void 0:r[f])===null||u===void 0?void 0:u.bind(r))||(y=>y),p=(d==null?void 0:d(n))||{},g=(d==null?void 0:d(i))||{};return{shape:h,fromStyle:p,toStyle:g}}else return{shape:r,fromStyle:n,toStyle:i}};let o;const s=e.map(c=>{var{fields:u,shape:h,states:f}=c,d=Kg(c,["fields","shape","states"]);const p=a(h);if(!p)return null;const{shape:g,fromStyle:y,toStyle:m}=p,b=[{},{}];if(u.forEach(O=>{var M,k;Object.assign(b[0],{[O]:(M=y[O])!==null&&M!==void 0?M:Da(O)}),Object.assign(b[1],{[O]:(k=m[O])!==null&&k!==void 0?k:Da(O)})}),b.some(O=>Object.keys(O).some(M=>["x","y","z"].includes(M)))){const{x:O=0,y:M=0,z:k,transform:D=""}=g.attributes||{};b.forEach(N=>{var rt,C,S;N.transform=jh((rt=N.x)!==null&&rt!==void 0?rt:O,(C=N.y)!==null&&C!==void 0?C:M,(S=N.z)!==null&&S!==void 0?S:k,D)})}const E=g.animate(sc(b),d);return h===void 0&&(o=E),E}).filter(Boolean),l=o||(s==null?void 0:s[0]);return l?oc(l,s.filter(c=>c!==c)):null},qg=[{fields:["opacity"]}],Qg=[{fields:["x","y"]}],Bh=[{fields:["x","y"]}],Jg=Bh,Fh=[{fields:["sourceNode","targetNode"]}],ty=Fh,zh=[{fields:["childrenNode","x","y"]}],ey=zh,Y3=[{fields:["childrenNode","x","y"]}];var Se=G(45607),Xr=G(5199),ny=Object.prototype.hasOwnProperty;function ry(r,t){if(!t||!(0,Xr.Z)(r))return{};for(var e={},n=(0,Se.Z)(t)?t:function(s){return s[t]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),ny.call(e,i)?e[i].push(o):e[i]=[o]}return e}var Ao=ry,Wh=function(r,t,e){var n,i,a,o,s=0;e||(e={});var l=function(){s=e.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},c=function(){var u=Date.now();!s&&e.leading===!1&&(s=u);var h=t-(u-s);return i=this,a=arguments,h<=0||h>t?(n&&(clearTimeout(n),n=null),s=u,o=r.apply(i,a),n||(i=a=null)):!n&&e.trailing!==!1&&(n=setTimeout(l,h)),o};return c.cancel=function(){clearTimeout(n),s=0,n=i=a=null},c},Po=G(83207);function iy(r){return"source"in r&&"target"in r}function ay(r){return r.length===2}function K3(r){return r.length===3}function na(r){return r instanceof Float32Array?!0:Array.isArray(r)&&(r.length===2||r.length===3)?r.every(t=>typeof t=="number"):!1}function jr(r,t,e){return r>=t&&r<=e}function xr(r=0){if(Array.isArray(r)){const[t=0,e=t,n=t,i=e]=r;return[t,e,n,i]}return[r,r,r,r]}function oy(r=0){const t=xr(r);return t[0]+t[2]}function X3(r=0){const t=xr(r);return t[1]+t[3]}function Br(r){return r.max[0]-r.min[0]}function Fr(r){return r.max[1]-r.min[1]}function si(r){return[Br(r),Fr(r)]}function li(r,t){const e=na(r)?lc(r):r.getShape("key").getBounds();return t?ci(e,t):e}function lc(r){const[t,e,n=0]=r,i=new x.mN;return i.setMinMax([t,e,n],[t,e,n]),i}function ci(r,t){const[e,n,i,a]=xr(t),[o,s,l]=r.min,[c,u,h]=r.max,f=new x.mN;return f.setMinMax([o-a,s-e,l],[c+n,u+i,h]),f}function ka(r){if(r.length===0)return new x.mN;if(r.length===1)return r[0];const t=new x.mN;t.setMinMax(r[0].min,r[0].max);for(let e=1;e<r.length;e++){const n=r[e];t.setMinMax([Math.min(t.min[0],n.min[0]),Math.min(t.min[1],n.min[1]),Math.min(t.min[2],n.min[2])],[Math.max(t.max[0],n.max[0]),Math.max(t.max[1],n.max[1]),Math.max(t.max[2],n.max[2])])}return t}function sy(r,t){const[e,n]=r.min,[i,a]=r.max,[o,s]=t.min,[l,c]=t.max;return e>=o&&i<=l&&n>=s&&a<=c}function Er(r,t){return jr(r[0],t.min[0],t.max[0])&&jr(r[1],t.min[1],t.max[1])}function Gh(r,t,e=!1){const{min:[n,i],max:[a,o]}=t,s=(r[1]===i||r[1]===o)&&(e||jr(r[0],n,a)),l=(r[0]===n||r[0]===a)&&(e||jr(r[1],i,o));return s||l}function ly(r,t){return!Er(r,t)}function Ro(r,t){const{center:e}=t;return r[0]===e[0]&&r[1]===e[1]}function La(r,t){const[e,n]=r,[i,a]=t.min,[o,s]=t.max,l=e-i,c=o-e,u=n-a,h=s-n,f=Math.min(l,c,u,h);return f===l?"left":f===c?"right":f===u?"top":f===h?"bottom":"left"}function ki(r,t){const e=(0,Po.Z)(r);if(Er(r,t))switch(La(r,t)){case"left":e[0]=t.min[0];break;case"right":e[0]=t.max[0];break;case"top":e[1]=t.min[1];break;case"bottom":e[1]=t.max[1];break}else{const[n,i]=r,[a,o]=t.min,[s,l]=t.max;e[0]=jr(n,a,s)?n:n<a?a:s,e[1]=jr(i,o,l)?i:i<o?o:l}return e}function cy(r,t){const{center:e}=r,[n,i]=si(r),a=t==="up"||t==="down"?e[0]:t==="right"?e[0]-n/6:e[0]+n/6,o=t==="left"||t==="right"?e[1]:t==="down"?e[1]-i/6:e[1]+i/6;return[a,o]}function uy(r,t){let[e,n]=si(r);return[e,n]=t==="up"||t==="down"?[e,n]:[n,e],(Math.pow(n,2)-Math.pow(Math.sqrt(Math.pow(e/2,2)+Math.pow(n,2))-e/2,2))/(2*n)}function hy(r){const{min:[t,e],max:[n,i]}=r,a=[t,i],o=[n,i],s=[n,e],l=[t,e];return[[a,o],[o,s],[s,l],[l,a]]}var fy=function(t,e){var n=t.nodes,i=t.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var c=[];a.push(c)}),i&&i.forEach(function(s){var l=s.source,c=s.target,u=o[l],h=o[c];!u&&u!==0||!h&&h!==0||(a[u][h]=1,e||(a[h][u]=1))}),a},Do=fy,dy=function(t,e){return t===e},Vh=function(){function r(t,e){e===void 0&&(e=null),this.value=t,this.next=e}return r.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},r}(),py=function(){function r(t){t===void 0&&(t=dy),this.head=null,this.tail=null,this.compare=t}return r.prototype.prepend=function(t){var e=new Vh(t,this.head);return this.head=e,this.tail||(this.tail=e),this},r.prototype.append=function(t){var e=new Vh(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},r.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},r.prototype.find=function(t){var e=t.value,n=e===void 0?void 0:e,i=t.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},r.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},r.prototype.fromArray=function(t){var e=this;return t.forEach(function(n){return e.append(n)}),this},r.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},r.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},r.prototype.toString=function(t){return t===void 0&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},r}(),Hh=py,vy=function(){function r(){this.linkedList=new Hh}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(t){this.linkedList.append(t)},r.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},r.prototype.toString=function(t){return this.linkedList.toString(t)},r}(),gy=vy,dr=function(t,e,n){e===void 0&&(e=[]);var i=e.filter(function(l){return l.source===t||l.target===t});if(n==="target"){var a=function(c){return c.source===t};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(c){return c.target===t};return i.filter(o).map(function(l){return l.source})}var s=function(c){return c.source===t?c.target:c.source};return i.map(s)},yy=function(t,e){return e.filter(function(n){return n.source===t})},ko=function(t,e){return e.filter(function(n){return n.source===t||n.target===t})},Zh=function(t){t===void 0&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};function my(r){r===void 0&&(r={});var t=r,e=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return t.allowTraversal=r.allowTraversal||n,t.enter=r.enter||e,t.leave=r.leave||e,t}var by=function(t,e,n,i){i===void 0&&(i=!0);var a=my(n),o=new gy,s=t.edges,l=s===void 0?[]:s;o.enqueue(e);for(var c="",u=function(){var f=o.dequeue();a.enter({current:f,previous:c}),dr(f,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:c,current:f,next:d})&&o.enqueue(d)}),a.leave({current:f,previous:c}),c=f};!o.isEmpty();)u()},_y=by,xy=function(t){for(var e=t.nodes,n=e===void 0?[]:e,i=t.edges,a=i===void 0?[]:i,o=[],s={},l=[],c=function d(p){l.push(p),s[p.id]=!0;for(var g=dr(p.id,a),y=function(E){var O=g[E];if(!s[O]){var M=n.filter(function(k){return k.id===O});M.length>0&&d(M[0])}},m=0;m<g.length;++m)y(m)},u=0;u<n.length;u++){var h=n[u];if(!s[h.id]){c(h);for(var f=[];l.length>0;)f.push(l.pop());o.push(f)}}return o},$h=function(t){for(var e=t.nodes,n=e===void 0?[]:e,i=t.edges,a=i===void 0?[]:i,o=[],s={},l={},c={},u=[],h=0,f=function y(m){l[m.id]=h,c[m.id]=h,h+=1,o.push(m),s[m.id]=!0;for(var b=dr(m.id,a,"target").filter(function(D){return n.map(function(N){return N.id}).indexOf(D)>-1}),E=function(N){var rt=b[N];if(!l[rt]&&l[rt]!==0){var C=n.filter(function(S){return S.id===rt});C.length>0&&y(C[0]),c[m.id]=Math.min(c[m.id],c[rt])}else s[rt]&&(c[m.id]=Math.min(c[m.id],l[rt]))},O=0;O<b.length;O++)E(O);if(c[m.id]===l[m.id]){for(var M=[];o.length>0;){var k=o.pop();if(s[k.id]=!1,M.push(k),k===m)break}M.length>0&&u.push(M)}},d=0,p=n;d<p.length;d++){var g=p[d];!l[g.id]&&l[g.id]!==0&&f(g)}return u};function Uh(r,t){return t?$h(r):xy(r)}var Ia=function(t){var e={},n=t.nodes,i=n===void 0?[]:n,a=t.edges,o=a===void 0?[]:a;return i.forEach(function(s){e[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){e[s.source].degree++,e[s.source].outDegree++,e[s.target].degree++,e[s.target].inDegree++}),e},cc=Ia,Ey=function(t,e){var n=Ia(t);return n[e]?Ia(t)[e].inDegree:0},wy=function(t,e){var n=Ia(t);return n[e]?Ia(t)[e].outDegree:0};function Sy(r){r===void 0&&(r={});var t=r,e=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return t.allowTraversal=r.allowTraversal||n,t.enter=r.enter||e,t.leave=r.leave||e,t}function Yh(r,t,e,n,i){i===void 0&&(i=!0),n.enter({current:t,previous:e});var a=r.edges,o=a===void 0?[]:a;dr(t,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:e,current:t,next:s})&&Yh(r,s,t,n,i)}),n.leave({current:t,previous:e})}function Kh(r,t,e,n){n===void 0&&(n=!0),Yh(r,t,"",Sy(e),n)}var Oy=function(t){var e=null,n=t.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(h){o[h.id]=h});for(var c={enter:function(f){var d=f.current,p=f.previous;if(s[d]){e={};for(var g=d,y=p;y!==d;)e[g]=y,g=y,y=a[y];e[g]=y}else s[d]=d,delete o[d],a[d]=p},leave:function(f){var d=f.current;l[d]=d,delete s[d]},allowTraversal:function(f){var d=f.next;return e?!1:!l[d]}};Object.keys(o).length;){var u=Object.keys(o)[0];Kh(t,u,c)}return e},Xh=function(t,e,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=Uh(t,!1),l=0,c=s;l<c.length;l++){var u=c[l];if(u.length)for(var h=u[0],f=h.id,d=[h],p=(i={},i[f]=h,i),g=(a={},a[f]=new Set,a);d.length>0;)for(var y=d.pop(),m=y.id,b=dr(m,t.edges),E=function(k){var D,N=b[k],rt=t.nodes.find(function(ot){return ot.id===N});if(N===m)o.push((D={},D[N]=y,D));else if(!(N in g))p[N]=y,d.push(rt),g[N]=new Set([y]);else if(!g[m].has(rt)){for(var C=!0,S=[rt,y],A=p[m];g[N].size&&!g[N].has(A)&&(S.push(A),A!==p[A.id]);)A=p[A.id];if(S.push(A),e&&n?(C=!1,S.findIndex(function(ot){return e.indexOf(ot.id)>-1})>-1&&(C=!0)):e&&!n&&S.findIndex(function(ot){return e.indexOf(ot.id)>-1})>-1&&(C=!1),C){for(var j={},Y=1;Y<S.length;Y+=1)j[S[Y-1].id]=S[Y];S.length&&(j[S[S.length-1].id]=S[0]),o.push(j)}g[N].add(y)}},O=0;O<b.length;O+=1)E(O)}return o},qh=function(t,e,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},c={},u=function(A){for(var j=[A];j.length>0;){var Y=j.pop();a.has(Y)&&(a.delete(Y),o[Y.id].forEach(function(ot){j.push(ot)}),o[Y.id].clear())}},h=function S(A,j,Y){var ot=!1;if(e&&n===!1&&e.indexOf(A.id)>-1)return ot;i.push(A),a.add(A);for(var Lt=Y[A.id],Xt=0;Xt<Lt.length;Xt+=1){var wt=l[Lt[Xt]];if(wt===j){for(var Ct={},$t=1;$t<i.length;$t+=1)Ct[i[$t-1].id]=i[$t];i.length&&(Ct[i[i.length-1].id]=i[0]),s.push(Ct),ot=!0}else a.has(wt)||S(wt,j,Y)&&(ot=!0)}if(ot)u(A);else for(var Xt=0;Xt<Lt.length;Xt+=1){var wt=l[Lt[Xt]];o[wt.id].has(A)||o[wt.id].add(A)}return i.pop(),ot},f=t.nodes,d=f===void 0?[]:f,p=0;p<d.length;p+=1){var g=d[p],y=g.id;c[y]=p,l[p]=g}if(e&&n)for(var m=function(A){var j=e[A];c[d[A].id]=c[j],c[j]=0,l[0]=d.find(function(Y){return Y.id===j}),l[c[d[A].id]]=d[A]},p=0;p<e.length;p++)m(p);for(var b=function(A){for(var j,Y,ot=1/0,Lt=0;Lt<A.length;Lt+=1)for(var Xt=A[Lt],wt=0;wt<Xt.length;wt++){var Ct=c[Xt[wt].id];Ct<ot&&(ot=Ct,Y=Lt)}for(var $t=A[Y],ie=[],Lt=0;Lt<$t.length;Lt+=1){var ye=$t[Lt];ie[ye.id]=[];for(var ve=0,Ee=dr(ye.id,t.edges,"target").filter(function(an){return $t.map(function(He){return He.id}).indexOf(an)>-1});ve<Ee.length;ve++){var Oe=Ee[ve];Oe===ye.id&&!(n===!1&&e.indexOf(ye.id)>-1)?s.push((j={},j[ye.id]=ye,j)):ie[ye.id].push(c[Oe])}}return{component:$t,adjList:ie,minIdx:ot}},E=0;E<d.length;){var O=d.filter(function(S){return c[S.id]>=E}),M=$h({nodes:O,edges:t.edges}).filter(function(S){return S.length>1});if(M.length===0)break;var k=b(M),D=k.minIdx,N=k.adjList,rt=k.component;if(rt.length>1){rt.forEach(function(S){o[S.id]=new Set});var C=l[D];if(e&&n&&e.indexOf(C.id)===-1)return s;h(C,C,N),E=D+1}else break}return s},My=function(t,e,n,i){return i===void 0&&(i=!0),e?qh(t,n,i):Xh(t,n,i)},Qh=Oy,w=G(97582),Cy={}.toString,Ty=function(r,t){return Cy.call(r)==="[object "+t+"]"},Lo=Ty,uc=function(r){return Lo(r,"Function")},hc=function(r){return Array.isArray?Array.isArray(r):Lo(r,"Array")},Ay=function(r){var t=typeof r;return r!==null&&t==="object"||t==="function"};function Py(r,t){if(r){var e;if(hc(r))for(var n=0,i=r.length;n<i&&(e=t(r[n],n),e!==!1);n++);else if(Ay(r)){for(var a in r)if(r.hasOwnProperty(a)&&(e=t(r[a],a),e===!1))break}}}var Jh=Py,q3=Object.keys?function(r){return Object.keys(r)}:function(r){var t=[];return Jh(r,function(e,n){uc(r)&&n==="prototype"||t.push(n)}),t},Q3=null;function J3(r,t){var e=keys(t),n=e.length;if(isNil(r))return!n;for(var i=0;i<n;i+=1){var a=e[i];if(t[a]!==r[a]||!(a in r))return!1}return!0}var tC=null,eC=function(r){if(!isObjectLike(r)||!isType(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var t=r;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t},nC=null;function rC(r,t){if(!isArray(r))return null;var e;if(isFunction(t)&&(e=t),isPlainObject(t)&&(e=function(i){return isMatch(i,t)}),e){for(var n=0;n<r.length;n+=1)if(e(r[n]))return r[n]}return null}var iC=null,aC=function(r,t){for(var e=null,n=0;n<r.length;n++){var i=r[n],a=i[t];if(!isNil(a)){isArray(a)?e=a[0]:e=a;break}}return e},oC=null,sC=function(r){if(!isArray(r))return[];for(var t=[],e=0;e<r.length;e++)t=t.concat(r[e]);return t},lC=null,Ry=function(r,t){if(t===void 0&&(t=[]),!isArray(r))t.push(r);else for(var e=0;e<r.length;e+=1)Ry(r[e],t);return t},cC=null,uC=function(r){if(isArray(r))return r.reduce(function(t,e){return Math.max(t,e)},r[0])},hC=function(r){if(isArray(r))return r.reduce(function(t,e){return Math.min(t,e)},r[0])},fC=function(r){var t=r.filter(function(o){return!isNaN(o)});if(!t.length)return{min:0,max:0};if(isArray(r[0])){for(var e=[],n=0;n<r.length;n++)e=e.concat(r[n]);t=e}var i=getMax(t),a=getMin(t);return{min:a,max:i}},dC=null,tf=Array.prototype,Dy=tf.splice,ky=tf.indexOf,pC=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n++)for(var i=t[n],a=-1;(a=ky.call(r,i))>-1;)Dy.call(r,a,1);return r},vC=null,Ly=Array.prototype.splice,gC=function(t,e){if(!isArrayLike(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var a=void 0,o=e[n];(n===i||o!==a)&&(a=o,Ly.call(t,o,1))}return t},yC=null,mC=function(r,t,e){if(!isArray(r)&&!isPlainObject(r))return r;var n=e;return each(r,function(i,a){n=t(n,i,a)}),n},bC=null,_C=function(r,t){var e=[];if(!isArrayLike(r))return e;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];t(o,n,r)&&(e.push(o),i.push(n))}return pullAt(r,i),e},xC=null,fc=function(r){return Lo(r,"String")};function EC(r,t){var e;if(isFunction(t))e=function(i,a){return t(i)-t(a)};else{var n=[];isString(t)?n.push(t):isArray(t)&&(n=t),e=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(e),r}var wC=null;function dc(r,t){t===void 0&&(t=new Map);var e=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];t.has(a)||(e.push(a),t.set(a,!0))}return e}var SC=function(r,t){for(var e=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[t];if(!isNil(o)){isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(e.push(l),n[l]=!0)}}}return e};function OC(r,t){return isArray(r)||isString(r)?r[0]===t:!1}var MC=null;function CC(r,t){return isArray(r)||isString(r)?r[r.length-1]===t:!1}var TC=null,Iy=Object.prototype.hasOwnProperty;function AC(r,t){if(!t||!isArray(r))return{};for(var e={},n=isFunction(t)?t:function(s){return s[t]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),Iy.call(e,i)?e[i].push(o):e[i]=[o]}return e}var PC=null;function RC(r,t){if(!t)return{0:r};if(!isFunction(t)){var e=isArray(t)?t:t.replace(/\s+/g,"").split("*");t=function(n){for(var i="_",a=0,o=e.length;a<o;a++)i+=n[e[a]]&&n[e[a]].toString();return i}}return groupBy(r,t)}var DC=function(r,t){if(!t)return[r];var e=groupToMap(r,t),n=[];for(var i in e)n.push(e[i]);return n},ef={};function kC(r){var t=ef[r];if(!t){for(var e=r.toString(16),n=e.length;n<6;n++)e="0"+e;t="#"+e,ef[r]=t}return t}var LC=null;function IC(r){var t=0,e=0,n=0,i=0;return isArray(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,{r1:t,r2:e,r3:n,r4:i}}var NC=null,Ny=function(r){return Lo(r,"Number")},jy=Ny,jC=function(r){return isNumber(r)&&r%1!==0},BC=null,FC=function(r){return isNumber(r)&&r%2===0},zC=null,WC=Number.isInteger?Number.isInteger:function(r){return jy(r)&&r%1===0},GC=null,VC=function(r){return isNumber(r)&&r<0},HC=null,ZC=function(r){return isNumber(r)&&r%2!==0},$C=null,UC=function(r){return isNumber(r)&&r>0},YC=null,KC=function(r,t){if(isArray(r)){for(var e,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=isFunction(t)?t(a):a[t];o>n&&(e=a,n=o)}return e}},XC=function(r,t){if(isArray(r)){for(var e,n=1/0,i=0;i<r.length;i++){var a=r[i],o=isFunction(t)?t(a):a[t];o<n&&(e=a,n=o)}return e}},By=180/Math.PI,qC=function(r){return By*r},QC=null,Fy=Math.PI/180,JC=function(r){return Fy*r},tT=null,eT=null,zy=Object.values?function(r){return Object.values(r)}:function(r){var t=[];return Jh(r,function(e,n){uc(r)&&n==="prototype"||t.push(e)}),t},Wy=zy,nT=function(r,t){return contains(values(r),t)},Gy={}.toString,rT=function(r){return Gy.call(r).replace(/^\[object /,"").replace(/]$/,"")},iT=null,aT=function(r){return isType(r,"Arguments")},oT=null,sT=function(r){return isType(r,"Boolean")},lT=null,cT=function(r){return isType(r,"Date")},uT=null,hT=function(r){return isType(r,"Error")},fT=null;function dT(r){return isNumber(r)&&isFinite(r)}var Vy=Object.prototype,pT=function(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Vy;return r===e},vT=null,gT=function(r){return isType(r,"RegExp")},yT=null,mT=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=r[0],n=1;n<r.length;n++){var i=r[n];isFunction(i)&&(i=i.prototype),mix(e.prototype,i)}},bT=null,pc=function(r){if(typeof r!="object"||r===null)return r;var t;if(hc(r)){t=[];for(var e=0,n=r.length;e<n;e++)typeof r[e]=="object"&&r[e]!=null?t[e]=pc(r[e]):t[e]=r[e]}else{t={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?t[i]=pc(r[i]):t[i]=r[i]}return t},Na=pc,Hy=function(r,t){if(!uc(r))throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=t?t.apply(this,n):n[0],o=e.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return o.set(a,s),s};return e.cache=new Map,e},Zy=5;function nf(r,t,e,n){e=e||0,n=n||Zy;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];a!==null&&isPlainObject(a)?(isPlainObject(r[i])||(r[i]={}),e<n?nf(r[i],a,e+1,n):r[i]=t[i]):isArray(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var _T=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n+=1)nf(r,t[n]);return r},xT=null,ET=function(r,t,e,n){isFunction(t)||(e=t,t=r,r=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var c=new l;return c.constructor=s,c},a=i(t.prototype,r);return r.prototype=mix(a,r.prototype),r.superclass=i(t.prototype,t),mix(a,e),mix(r,n),r},wT=null,$y=Object.prototype.hasOwnProperty;function ST(r){if(isNil(r))return!0;if(isArrayLike(r))return!r.length;var t=getType(r);if(t==="Map"||t==="Set")return!r.size;if(isPrototype(r))return!Object.keys(r).length;for(var e in r)if($y.call(r,e))return!1;return!0}var OT=null,Uy=function(r){return typeof r=="object"&&r!==null},rf=Uy,Yy=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},af=Yy,vc=function(r,t){if(r===t)return!0;if(!r||!t||fc(r)||fc(t))return!1;if(af(r)||af(t)){if(r.length!==t.length)return!1;for(var e=!0,n=0;n<r.length&&(e=vc(r[n],t[n]),!!e);n++);return e}if(rf(r)||rf(t)){var i=Object.keys(r),a=Object.keys(t);if(i.length!==a.length)return!1;for(var e=!0,n=0;n<i.length&&(e=vc(r[i[n]],t[i[n]]),!!e);n++);return e}return!1},Ky=vc,MT=function(r,t,e){return isFunction(e)?!!e(r,t):isEqual(r,t)},CT=function(r,t,e){for(var n=0,i=isString(t)?t.split("."):t;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?e:r},TT=function(r,t,e){var n=r,i=isString(t)?t.split("."):t;return i.forEach(function(a,o){o<i.length-1?(isObject(n[a])||(n[a]=isNumber(i[o+1])?[]:{}),n=n[a]):n[a]=e}),r},Xy=Object.prototype.hasOwnProperty,AT=function(r,t){if(r===null||!isPlainObject(r))return{};var e={};return each(t,function(n){Xy.call(r,n)&&(e[n]=r[n])}),e},PT=function(r,t){return reduce(r,function(e,n,i){return t.includes(i)||(e[i]=n),e},{})},Io={},RT=function(r){return r=r||"g",Io[r]?Io[r]+=1:Io[r]=1,r+Io[r]},No,DT=Hy(function(r,t){t===void 0&&(t={});var e=t.fontSize,n=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return No||(No=document.createElement("canvas").getContext("2d")),No.font=[a,o,i,e+"px",n].join(" "),No.measureText(fc(r)?r:"").width},function(r,t){return t===void 0&&(t={}),(0,w.pr)([r],Wy(t)).join("")}),kT=function(r,t,e,n){n===void 0&&(n="...");var i=16,a=measureTextWidth(n,e),o=isString(r)?r:toString(r),s=t,l=[],c,u;if(measureTextWidth(r,e)<=t)return r;for(;c=o.substr(0,i),u=measureTextWidth(c,e),!(u+a>s&&u>s);)if(l.push(c),s-=u,o=o.substr(i),!o)return l.join("");for(;c=o.substr(0,1),u=measureTextWidth(c,e),!(u+a>s);)if(l.push(c),s-=u,o=o.substr(1),!o)return l.join("");return""+l.join("")+n},LT=function(){function r(){this.map={}}return r.prototype.has=function(t){return this.map[t]!==void 0},r.prototype.get=function(t,e){var n=this.map[t];return n===void 0?e:n},r.prototype.set=function(t,e){this.map[t]=e},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(t){delete this.map[t]},r.prototype.size=function(){return Object.keys(this.map).length},r}(),IT=null,qy=function(t,e,n){for(var i=1/0,a,o=0;o<e.length;o++){var s=e[o].id;!n[s]&&t[s]<=i&&(i=t[s],a=e[o])}return a},Qy=function(t,e,n,i){var a=t.nodes,o=a===void 0?[]:a,s=t.edges,l=s===void 0?[]:s,c=[],u={},h={},f={};o.forEach(function(E,O){var M=E.id;c.push(M),h[M]=1/0,M===e&&(h[M]=0)});for(var d=o.length,p=function(O){var M=qy(h,o,u),k=M.id;if(u[k]=!0,h[k]===1/0)return"continue";var D=[];n?D=yy(k,l):D=ko(k,l),D.forEach(function(N){var rt=N.target,C=N.source,S=rt===k?C:rt,A=i&&N[i]?N[i]:1;h[S]>h[M.id]+A?(h[S]=h[M.id]+A,f[S]=[M.id]):h[S]===h[M.id]+A&&f[S].push(M.id)})},g=0;g<d;g++)p(g);f[e]=[e];var y={};for(var m in h)h[m]!==1/0&&of(e,m,f,y);var b={};for(var m in y)b[m]=y[m][0];return{length:h,path:b,allPath:y}},jo=Qy;function of(r,t,e,n){if(r===t)return[r];if(n[t])return n[t];for(var i=[],a=0,o=e[t];a<o.length;a++){var s=o[a],l=of(r,s,e,n);if(!l)return;for(var c=0,u=l;c<u.length;c++){var h=u[c];hc(h)?i.push((0,w.ev)((0,w.ev)([],h,!0),[t],!1)):i.push([h,t])}}return n[t]=i,n[t]}var gc=function(t,e,n,i,a){var o=jo(t,e,i,a),s=o.length,l=o.path,c=o.allPath;return{length:s[n],path:l[n],allPath:c[n]}},Jy=function(t,e,n,i){var a;if(e===n)return[[e]];var o=t.edges,s=o===void 0?[]:o,l=[e],c=(a={},a[e]=!0,a),u=[],h=[],f=i?dr(e,s,"target"):dr(e,s);for(u.push(f);l.length>0&&u.length>0;){var d=u[u.length-1];if(d.length){var p=d.shift();p&&(l.push(p),c[p]=!0,f=i?dr(p,s,"target"):dr(p,s),u.push(f.filter(function(m){return!c[m]})))}else{var g=l.pop();c[g]=!1,u.pop();continue}if(l[l.length-1]===n){var y=l.map(function(b){return b});h.push(y);var g=l.pop();c[g]=!1,u.pop()}}return h},tm=function(t,e){for(var n=Do(t,e),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},yc=tm,em=function(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=t.nodes,o=a===void 0?[]:a,s=t.edges,l=s===void 0?[]:s,c={},u={};o.forEach(function(O,M){var k=Zh();O.clusterId=k,c[k]={id:k,nodes:[O]},u[O.id]={node:O,idx:M}});var h=Do(t,e),f=[],d={};h.forEach(function(O,M){var k=0,D=o[M].id;d[D]={},O.forEach(function(N,rt){if(N){k+=N;var C=o[rt].id;d[D][C]=N}}),f.push(k)});for(var p=0,g=function(){var M=!1;if(o.forEach(function(k){var D={};Object.keys(d[k.id]).forEach(function(ot){var Lt=d[k.id][ot],Xt=u[ot].node,wt=Xt.clusterId;D[wt]||(D[wt]=0),D[wt]+=Lt});var N=-1/0,rt=[];if(Object.keys(D).forEach(function(ot){N<D[ot]?(N=D[ot],rt=[ot]):N===D[ot]&&rt.push(ot)}),!(rt.length===1&&rt[0]===k.clusterId)){var C=rt.indexOf(k.clusterId);if(C>=0&&rt.splice(C,1),rt&&rt.length){M=!0;var S=c[k.clusterId],A=S.nodes.indexOf(k);S.nodes.splice(A,1);var j=Math.floor(Math.random()*rt.length),Y=c[rt[j]];Y.nodes.push(k),k.clusterId=Y.id}}}),!M)return"break";p++};p<i;){var y=g();if(y==="break")break}Object.keys(c).forEach(function(O){var M=c[O];(!M.nodes||!M.nodes.length)&&delete c[O]});var m=[],b={};l.forEach(function(O){var M=O.source,k=O.target,D=O[n]||1,N=u[M].node.clusterId,rt=u[k].node.clusterId,C="".concat(N,"---").concat(rt);if(b[C])b[C].weight+=D,b[C].count++;else{var S={source:N,target:rt,weight:D,count:1};b[C]=S,m.push(S)}});var E=[];return Object.keys(c).forEach(function(O){E.push(c[O])}),{clusters:E,clusterEdges:m}},nm=em,rm=function(){function r(t){this.arr=t}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new r(i)}},r.prototype.subtract=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new r(i)}},r.prototype.avg=function(t){var e=[];if(t!==0)for(var n in this.arr)e[n]=this.arr[n]/t;return new r(e)},r.prototype.negate=function(){var t=[];for(var e in this.arr)t[e]=-this.arr[e];return new r(t)},r.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-t.arr[a],2);return i}},r.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-t.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var t=[],e=Na(this.arr);e.sort(function(o,s){return o-s});var n=e[e.length-1],i=e[0];for(var a in this.arr)t[a]=(this.arr[a]-i)/(n-i);return new r(t)},r.prototype.norm2=function(){var t;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},r.prototype.dot=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*t.arr[a];return i}else console.error("The two vectors are unequal in length.")},r.prototype.equal=function(t){var e,n=t.arr;if(((e=this.arr)===null||e===void 0?void 0:e.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},r}(),pr=rm,im=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,am=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,sf=function(t,e){t===void 0&&(t=[]),e===void 0&&(e=100);var n={};t.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(im)&&!"".concat(a.properties[o]).match(am)&&isNaN(Number(a.properties[o]))){n.hasOwnProperty(o)&&delete n[o];return}n.hasOwnProperty(o)?n[o]+=1:n[o]=1})});var i=Object.keys(n).sort(function(a,o){return n[o]-n[a]});return i.length<e?i:i.slice(0,e)},om=function(t,e){return e.map(function(n){return t.hasOwnProperty(n)?t[n]:0})},sm=function(t){for(var e=sf(t),n=[],i=0;i<t.length;i++)n[i]=om(t[i].properties,e);return n},Bo=function(t,e){e===void 0&&(e=void 0);var n=[];return t.forEach(function(i){e===void 0&&n.push(i),i[e]!==void 0&&n.push(i[e])}),n},NT={getAllSortProperties:sf,getPropertyWeight:sm,getAllProperties:Bo},wr;(function(r){r.EuclideanDistance="euclideanDistance"})(wr||(wr={}));var lf=function(t,e,n){var i=[];e!=null&&e.length?i=e:(t.forEach(function(o){i=i.concat(Object.keys(o))}),i=dc(i));var a={};return i.forEach(function(o){var s=[];t.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=dc(s))}),a},Fo=function(t,e,n){var i=lf(t,e,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(c){return typeof c=="number"})});return t.forEach(function(l,c){var u=[];Object.keys(i).forEach(function(h){var f=l[h],d=i[h],p=d.findIndex(function(m){return f===m}),g=[];if(s)g.push(f);else for(var y=0;y<d.length;y++)y===p?g.push(1):g.push(0);u=u.concat(g)}),a[c]=u}),a},mc=function(t,e,n,i){n===void 0&&(n=wr.EuclideanDistance);var a=0;switch(n){case wr.EuclideanDistance:a=new pr(t).euclideanDistance(new pr(e));break;default:break}return a},jT={getAllKeyValueMap:lf,oneHot:Fo,getDistance:mc},cf=function(t,e,n,i){for(var a=e.length,o=2*i,s=0,l=0;l<a;l++)for(var c=t[l].clusterId,u=0;u<a;u++){var h=t[u].clusterId;if(c===h){var f=e[l][u]||0,d=n[l]||0,p=n[u]||0;s+=f-d*p/o}}return s*=1/o,s},bc=function(t,e){t===void 0&&(t=[]);for(var n=t.length,i=new pr([]),a=0;a<n;a++)i=i.add(new pr(e[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new pr(e[a]),c=l.squareEuclideanDistance(o);s+=c}var u=[];t.forEach(function(){u.push([])});for(var a=0;a<n;a++){var l=new pr(e[a]);t[a].clusterInertial=0;for(var h=0;h<n;h++){if(a===h){u[a][h]=0;continue}var f=new pr(e[h]);u[a][h]=l.squareEuclideanDistance(f),t[a].clusterInertial+=u[a][h]}}for(var d=0,p=2*n*s,a=0;a<n;a++)for(var g=t[a].clusterId,h=0;h<n;h++){var y=t[h].clusterId;if(!(a===h||g!==y)){var m=t[a].clusterInertial*t[h].clusterInertial/Math.pow(p,2)-u[a][h]/p;d+=m}}return Number(d.toFixed(4))},lm=function(t,e,n,i,a,o,s,l,c){e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),c===void 0&&(c=1);var u=t.nodes,h=u===void 0?[]:u,f=t.edges,d=f===void 0?[]:f,p=[];if(a){h.forEach(function(Ct,$t){Ct.properties=Ct.properties||{},Ct.originIndex=$t});var g=[];h.every(function(Ct){return Ct.hasOwnProperty("nodeType")})&&(g=Array.from(new Set(h.map(function(Ct){return Ct.nodeType}))),h.forEach(function(Ct){Ct.properties.nodeType=g.findIndex(function($t){return $t===Ct.nodeType})}));var y=Bo(h,o);p=Fo(y,s,l)}var m=1,b={},E={};h.forEach(function(Ct,$t){var ie=String(m++);Ct.clusterId=ie,b[ie]={id:ie,nodes:[Ct]},E[Ct.id]={node:Ct,idx:$t}});var O=Do(t,e),M=[],k={},D=0;O.forEach(function(Ct,$t){var ie=0,ye=h[$t].id;k[ye]={},Ct.forEach(function(ve,Ee){if(ve){ie+=ve;var Oe=h[Ee].id;k[ye][Oe]=ve,D+=ve}}),M.push(ie)}),D/=2;for(var N=1/0,rt=1/0,C=0,S=[],A={};;){a&&h.every(function(Ct){return Ct.hasOwnProperty("properties")})?N=cf(h,O,M,D)+bc(h,p)*c:N=cf(h,O,M,D),C===0&&(rt=N,S=h,A=b);var j=N>0&&N>rt&&N-rt<i;if(N>rt&&(S=h.map(function(Ct){return{node:Ct,clusterId:Ct.clusterId}}),A=Na(b),rt=N),j||C>100)break;C++,Object.keys(b).forEach(function(Ct){var $t=0;d.forEach(function(ie){var ye=ie.source,ve=ie.target,Ee=E[ye].node.clusterId,Oe=E[ve].node.clusterId;(Ee===Ct&&Oe!==Ct||Oe===Ct&&Ee!==Ct)&&($t=$t+(ie[n]||1))}),b[Ct].sumTot=$t}),h.forEach(function(Ct,$t){var ie=b[Ct.clusterId],ye=0,ve,Ee=M[$t]/(2*D),Oe=0,Le=ie.nodes;Le.forEach(function(Xn){var Fn=E[Xn.id].idx;Oe+=O[$t][Fn]||0});var an=Oe-ie.sumTot*Ee,He=Le.filter(function(Xn){return Xn.id!==Ct.id}),qe=[];He.forEach(function(Xn,Fn){qe[Fn]=p[Xn.originIndex]});var Qe=bc(He,p)*c,mr=k[Ct.id];if(Object.keys(mr).forEach(function(Xn){var Fn=E[Xn].node,Ta=Fn.clusterId;if(Ta!==Ct.clusterId){var br=b[Ta],Lr=br.nodes;if(!(!Lr||!Lr.length)){var Ae=0;Lr.forEach(function(ke){var je=E[ke.id].idx;Ae+=O[$t][je]||0});var We=Ae-br.sumTot*Ee,Re=Lr.concat([Ct]),Ne=[];Re.forEach(function(ke,je){Ne[je]=p[ke.originIndex]});var on=bc(Re,p)*c,we=We-an;a&&(we=We+on-(an+Qe)),we>ye&&(ye=we,ve=br)}}}),ye>0){ve.nodes.push(Ct);var Ie=Ct.clusterId;Ct.clusterId=ve.id;var kr=ie.nodes.indexOf(Ct);ie.nodes.splice(kr,1);var Kn=0,xo=0;d.forEach(function(Xn){var Fn=Xn.source,Ta=Xn.target,br=E[Fn].node.clusterId,Lr=E[Ta].node.clusterId;(br===ve.id&&Lr!==ve.id||Lr===ve.id&&br!==ve.id)&&(Kn=Kn+(Xn[n]||1)),(br===Ie&&Lr!==Ie||Lr===Ie&&br!==Ie)&&(xo=xo+(Xn[n]||1))}),ve.sumTot=Kn,ie.sumTot=xo}})}var Y={},ot=0;Object.keys(A).forEach(function(Ct){var $t=A[Ct];if(!$t.nodes||!$t.nodes.length){delete A[Ct];return}var ie=String(ot+1);ie!==Ct&&($t.id=ie,$t.nodes=$t.nodes.map(function(ye){return{id:ye.id,clusterId:ie}}),A[ie]=$t,Y[Ct]=ie,delete A[Ct],ot++)}),S.forEach(function(Ct){var $t=Ct.node,ie=Ct.clusterId;$t&&($t.clusterId=ie,$t.clusterId&&Y[$t.clusterId]&&($t.clusterId=Y[$t.clusterId]))});var Lt=[],Xt={};d.forEach(function(Ct){var $t=Ct.source,ie=Ct.target,ye=Ct[n]||1,ve=E[$t].node.clusterId,Ee=E[ie].node.clusterId;if(!(!ve||!Ee)){var Oe="".concat(ve,"---").concat(Ee);if(Xt[Oe])Xt[Oe].weight+=ye,Xt[Oe].count++;else{var Le={source:ve,target:Ee,weight:ye,count:1};Xt[Oe]=Le,Lt.push(Le)}}});var wt=[];return Object.keys(A).forEach(function(Ct){wt.push(A[Ct])}),{clusters:wt,clusterEdges:Lt}},uf=lm,cm=function(t,e,n,i,a,o,s,l){return e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),l===void 0&&(l=1),uf(t,e,n,i,!0,a,o,s,l)},um=cm,hm=function(t,e){var n;e===void 0&&(e=1);for(var i=Na(t),a=i.nodes,o=a===void 0?[]:a,s=i.edges,l=s===void 0?[]:s,c=function(){var f=cc({nodes:o,edges:l}),d=Object.keys(f);d.sort(function(y,m){var b,E;return((b=f[y])===null||b===void 0?void 0:b.degree)-((E=f[m])===null||E===void 0?void 0:E.degree)});var p=d[0];if(!o.length||((n=f[p])===null||n===void 0?void 0:n.degree)>=e)return"break";var g=o.findIndex(function(y){return y.id===p});o.splice(g,1),l=l.filter(function(y){return!(y.source===p||y.target===p)})};;){var u=c();if(u==="break")break}return{nodes:o,edges:l}},fm=hm,hf=function(t,e,n){var i=[];switch(t){case wr.EuclideanDistance:i=e[n];break;default:i=[];break}return i},dm=function(t,e,n,i,a,o){e===void 0&&(e=3),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=["id"]),o===void 0&&(o=wr.EuclideanDistance);var s=t.nodes,l=s===void 0?[]:s,c=t.edges,u=c===void 0?[]:c,h={clusters:[{id:"0",nodes:l}],clusterEdges:[]};if(o===wr.EuclideanDistance&&!l.every(function(ie){return ie.hasOwnProperty(n)}))return h;var f=[],d=[];if(o===wr.EuclideanDistance&&(f=Bo(l,n),d=Fo(f,i,a)),!d.length)return h;for(var p=dc(d.map(function(ie){return ie.join("")})),g=Math.min(e,l.length,p.length),y=0;y<l.length;y++)l[y].originIndex=y;for(var m=[],b=[],E=[],y=0;y<g;y++)if(y===0){var O=Math.floor(Math.random()*l.length);switch(o){case wr.EuclideanDistance:m[y]=d[O];break;default:m[y]=[];break}b.push(O),E[y]=[l[O]],l[O].clusterId=String(y)}else{for(var M=-1/0,k=0,D=function(ve){if(!b.includes(ve)){for(var Ee=0,Oe=0;Oe<m.length;Oe++){var Le=0;switch(o){case wr.EuclideanDistance:Le=mc(d[l[ve].originIndex],m[Oe],o);break;default:break}Ee+=Le}var an=Ee/m.length;an>M&&!m.find(function(He){return Ky(He,hf(o,d,l[ve].originIndex))})&&(M=an,k=ve)}},N=0;N<l.length;N++)D(N);m[y]=hf(o,d,k),b.push(k),E[y]=[l[k]],l[k].clusterId=String(y)}for(var rt=0;;){for(var y=0;y<l.length;y++){var C=0,S=1/0;if(!(rt===0&&b.includes(y))){for(var A=0;A<m.length;A++){var j=0;switch(o){case wr.EuclideanDistance:j=mc(d[y],m[A],o);break;default:break}j<S&&(S=j,C=A)}if(l[y].clusterId!==void 0)for(var Y=E[Number(l[y].clusterId)].length-1;Y>=0;Y--)E[Number(l[y].clusterId)][Y].id===l[y].id&&E[Number(l[y].clusterId)].splice(Y,1);l[y].clusterId=String(C),E[C].push(l[y])}}for(var ot=!1,y=0;y<E.length;y++){for(var Lt=E[y],Xt=new pr([]),A=0;A<Lt.length;A++)Xt=Xt.add(new pr(d[Lt[A].originIndex]));var wt=Xt.avg(Lt.length);wt.equal(new pr(m[y]))||(ot=!0,m[y]=wt.getArr())}if(rt++,l.every(function(ie){return ie.clusterId!==void 0})&&ot||rt>=1e3)break}var Ct=[],$t={};return u.forEach(function(ie){var ye,ve,Ee=ie.source,Oe=ie.target,Le=(ye=l.find(function(Qe){return Qe.id===Ee}))===null||ye===void 0?void 0:ye.clusterId,an=(ve=l.find(function(Qe){return Qe.id===Oe}))===null||ve===void 0?void 0:ve.clusterId,He="".concat(Le,"---").concat(an);if($t[He])$t[He].count++;else{var qe={source:Le,target:an,count:1};$t[He]=qe,Ct.push(qe)}}),{clusters:E,clusterEdges:Ct}},pm=dm,vm=function(t,e){var n=new pr(e),i=n.norm2(),a=new pr(t),o=a.norm2(),s=n.dot(a),l=i*o,c=l?s/l:0;return c},ff=vm,gm=function(t,e,n,i,a){t===void 0&&(t=[]),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=[]);var o=Na(t.filter(function(f){return f.id!==e.id})),s=t.findIndex(function(f){return f.id===e.id}),l=Bo(t,n),c=Fo(l,i,a),u=c[s],h=[];return o.forEach(function(f,d){if(f.id!==e.id){var p=c[d],g=ff(p,u);h.push(g),f.cosineSimilarity=g}}),o.sort(function(f,d){return d.cosineSimilarity-f.cosineSimilarity}),{allCosineSimilarity:h,similarNodes:o}},ym=gm,mm=function(){function r(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var i=n[e];this.parent[i]=i}}return r.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},r.prototype.union=function(t,e){var n=this.find(t),i=this.find(e);n!==i&&(n<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},r.prototype.connected=function(t,e){return this.find(t)===this.find(e)},r}(),bm=mm,_m=function(t,e){return t-e},xm=function(){function r(t){t===void 0&&(t=_m),this.compareFn=t,this.list=[]}return r.prototype.getLeft=function(t){return 2*t+1},r.prototype.getRight=function(t){return 2*t+2},r.prototype.getParent=function(t){return t===0?null:Math.floor((t-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},r.prototype.insert=function(t){if(t!==null){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},r.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},r.prototype.moveDown=function(t){var e,n=t,i=this.getLeft(t),a=this.getRight(t),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},r}(),Em=xm,wm=function(t,e){var n=[],i=t.nodes,a=i===void 0?[]:i,o=t.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],c=new Set;c.add(l);var u=function(y,m){return e?y.weight-m.weight:0},h=new Em(u);for(ko(l.id,s).forEach(function(g){h.insert(g)});!h.isEmpty();){var f=h.delMin(),d=f.source,p=f.target;c.has(d)&&c.has(p)||(n.push(f),c.has(d)||(c.add(d),ko(d,s).forEach(function(g){h.insert(g)})),c.has(p)||(c.add(p),ko(p,s).forEach(function(g){h.insert(g)})))}return n},df=function(t,e){var n=[],i=t.nodes,a=i===void 0?[]:i,o=t.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});e&&l.sort(function(d,p){return d.weight-p.weight});for(var c=new bm(a.map(function(d){return d.id}));l.length>0;){var u=l.shift(),h=u.source,f=u.target;c.connected(h,f)||(n.push(u),c.union(h,f))}return n},Sm=function(t,e,n){var i={prim:wm,kruskal:df};return n?i[n](t,e):df(t,e)},Om=Sm,Mm=function(t,e,n){typeof e!="number"&&(e=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=t.nodes,l=s===void 0?[]:s,c=t.edges,u=c===void 0?[]:c,h=l.length,f,d={},p={},g=0;g<h;++g){var y=l[g],m=y.id;d[m]=1/h,p[m]=1/h}for(var b=cc(t);o>0&&i>e;){a=0;for(var g=0;g<h;++g){var y=l[g],m=y.id;if(f=0,b[y.id].inDegree===0)d[m]=0;else{for(var E=dr(m,u,"source"),O=0;O<E.length;++O){var M=E[O],k=b[M].outDegree;k>0&&(f+=p[M]/k)}d[m]=n*f,a+=d[m]}}a=(1-a)/h,i=0;for(var g=0;g<h;++g){var y=l[g],m=y.id;f=d[m]+a,i+=Math.abs(f-p[m]),p[m]=f}o-=1}return p},pf=Mm,Cm=-1,zo=-1,vf="-1",zr="-1",gf=-1,BT="-1",yf=function(){function r(t,e,n,i){t===void 0&&(t=Cm),e===void 0&&(e=zo),n===void 0&&(n=zo),i===void 0&&(i=vf),this.id=t,this.from=e,this.to=n,this.label=i}return r}(),Tm=function(){function r(t,e){t===void 0&&(t=zo),e===void 0&&(e=zr),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},r}(),mf=function(){function r(t,e,n){t===void 0&&(t=zo),e===void 0&&(e=!0),n===void 0&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new Tm(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},r.prototype.addEdge=function(t,e,n,i){if((this.edgeIdAutoIncrease||t===void 0)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var a=new yf(t,e,n,i);if(this.edges.push(a),this.edgeMap[t]=a,this.nodeMap[e].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new yf(t,n,e,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},r}(),Li=function(){function r(t,e,n,i,a){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||zr,edgeLabel:i||vf,nodeLabel2:a||zr}}return r.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(t){return!this.equalTo(t)},r}(),bf=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(t){var e=this.dfsEdgeList.length,n=t.length;if(e!==n)return!1;for(var i=0;i<e;i++)if(this.dfsEdgeList[i]!==t[i])return!1;return!0},r.prototype.notEqualTo=function(t){return!this.equalTo(t)},r.prototype.pushBack=function(t,e,n,i,a){return this.dfsEdgeList.push(new Li(t,e,n,i,a)),this.dfsEdgeList},r.prototype.toGraph=function(t,e){t===void 0&&(t=gf),e===void 0&&(e=!1);var n=new mf(t,!0,e);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,c=s.edgeLabel,u=s.nodeLabel2;l!==zr&&n.addNode(a,l),u!==zr&&n.addNode(o,u),l!==zr&&u!==l&&n.addEdge(void 0,a,o,c)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,n=e-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(t===void 0||o===t)&&(this.rmpath.push(n),t=a)}return this.rmpath},r.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},r}(),Wo=function(){function r(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(t){return this.nodesUsed[t.id]===1},r.prototype.hasEdge=function(t){return this.edgesUsed[t.id]===1},r}(),Am=function(){function r(t){var e=t.graphs,n=t.minSupport,i=n===void 0?2:n,a=t.minNodeNum,o=a===void 0?1:a,s=t.maxNodeNum,l=s===void 0?4:s,c=t.top,u=c===void 0?10:c,h=t.directed,f=h===void 0?!1:h,d=t.verbose,p=d===void 0?!1:d;this.graphs=e,this.dfsCode=new bf,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=u,this.directed=f,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(t,e){var n=this,i=[],a=t.nodeMap;return e.edges.forEach(function(o){(n.directed||e.label<=a[o.to].label)&&i.push(o)}),i},r.prototype.findBackwardEdge=function(t,e,n,i){if(!this.directed&&e===n)return null;for(var a=t.nodeMap,o=a[n.to],s=o.edges,l=s.length,c=0;c<l;c++){var u=s[c];if(!(i.hasEdge(u)||u.to!==e.from)){if(this.directed){if(a[e.from].label<a[n.to].label||a[e.from].label===a[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&a[e.to].label<=a[n.to].label)return u}}return null},r.prototype.findForwardPureEdges=function(t,e,n,i){for(var a=[],o=e.to,s=t.nodeMap[o].edges,l=s.length,c=0;c<l;c++){var u=s[c],h=t.nodeMap[u.to];n<=h.label&&!i.hasNode(h)&&a.push(u)}return a},r.prototype.findForwardRmpathEdges=function(t,e,n,i){for(var a=[],o=t.nodeMap,s=o[e.to].label,l=o[e.from],c=l.edges,u=c.length,h=0;h<u;h++){var f=c[h],d=o[f.to].label;e.to===f.to||n>d||i.hasNode(o[f.to])||(e.label<f.label||e.label===f.label&&s<=d)&&a.push(f)}return a},r.prototype.getSupport=function(t){var e={};return t.forEach(function(n){e[n.graphId]||(e[n.graphId]=!0)}),Object.keys(e).length},r.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(n){var i=t[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!e){e={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<e.nodeLabel1||a===e.nodeLabel1&&o<e.edgeLabel||a===e.nodeLabel1&&o===e.edgeLabel&&s<e.nodeLabel2)&&(e={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),e},r.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),e.dfsEdgeList.length===1)return!0;var n=this.directed,i=e.toGraph(gf,n),a=i.nodeMap,o=new bf,s={};i.nodes.forEach(function(h){var f=t.findForwardRootEdges(i,h);f.forEach(function(d){var p=a[d.to],g="".concat(h.label,"-").concat(d.label,"-").concat(p.label);s[g]||(s[g]={projected:[],nodeLabel1:h.label,edgeLabel:d.label,nodeLabel2:p.label});var y={graphId:i.id,edge:d,preNode:null};s[g].projected.push(y)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new Li(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var c=function h(f){for(var d=o.buildRmpath(),p=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,g=o.dfsEdgeList[d[0]].toNode,y={},m=!1,b=0,E=n?-1:0,O=function(Xt){if(m)return"break";f.forEach(function(wt){var Ct=new Wo(wt),$t=t.findBackwardEdge(i,Ct.edges[d[Xt]],Ct.edges[d[0]],Ct);$t&&(y[$t.label]||(y[$t.label]={projected:[],edgeLabel:$t.label}),y[$t.label].projected.push({graphId:i.id,edge:y,preNode:wt}),b=o.dfsEdgeList[d[Xt]].fromNode,m=!0)})},M=d.length-1;M>E;M--){var k=O(M);if(k==="break")break}if(m){var D=t.findMinLabel(y);o.dfsEdgeList.push(new Li(g,b,zr,D.edgeLabel,zr));var N=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[N]!==o.dfsEdgeList[N]?!1:h(y[D.edgeLabel].projected)}var rt={};m=!1;var C=0;f.forEach(function(Lt){var Xt=new Wo(Lt),wt=t.findForwardPureEdges(i,Xt.edges[d[0]],p,Xt);wt.length>0&&(m=!0,C=g,wt.forEach(function(Ct){var $t="".concat(Ct.label,"-").concat(a[Ct.to].label);rt[$t]||(rt[$t]={projected:[],edgeLabel:Ct.label,nodeLabel2:a[Ct.to].label}),rt[$t].projected.push({graphId:i.id,edge:Ct,preNode:Lt})}))});for(var S=d.length,A=function(Xt){if(m)return"break";var wt=d[Xt];f.forEach(function(Ct){var $t=new Wo(Ct),ie=t.findForwardRmpathEdges(i,$t.edges[wt],p,$t);ie.length>0&&(m=!0,C=o.dfsEdgeList[wt].fromNode,ie.forEach(function(ye){var ve="".concat(ye.label,"-").concat(a[ye.to].label);rt[ve]||(rt[ve]={projected:[],edgeLabel:ye.label,nodeLabel2:a[ye.to].label}),rt[ve].projected.push({graphId:i.id,edge:ye,preNode:Ct})}))})},M=0;M<S;M++){var j=A(M);if(j==="break")break}if(!m)return!0;var Y=t.findMinLabel(rt);o.dfsEdgeList.push(new Li(C,g+1,zr,Y.edgeLabel,Y.nodeLabel2));var ot=o.dfsEdgeList.length-1;return e.dfsEdgeList[ot]!==o.dfsEdgeList[ot]?!1:h(rt["".concat(Y.edgeLabel,"-").concat(Y.nodeLabel2)].projected)},u="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return c(s[u].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Na(t))}},r.prototype.subGraphMining=function(t){var e=this,n=this.getSupport(t);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},c={};t.forEach(function(u){for(var h=e.graphs[u.graphId],f=h.nodeMap,d=new Wo(u),p=a.length-1;p>=0;p--){var g=e.findBackwardEdge(h,d.edges[a[p]],d.edges[a[0]],d);if(g){var y="".concat(e.dfsCode.dfsEdgeList[a[p]].fromNode,"-").concat(g.label);c[y]||(c[y]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[a[p]].fromNode,edgeLabel:g.label}),c[y].projected.push({graphId:u.graphId,edge:g,preNode:u})}}if(!(i>=e.maxNodeNum)){var m=e.findForwardPureEdges(h,d.edges[a[0]],s,d);m.forEach(function(E){var O="".concat(o,"-").concat(E.label,"-").concat(f[E.to].label);l[O]||(l[O]={projected:[],fromNodeId:o,edgeLabel:E.label,nodeLabel2:f[E.to].label}),l[O].projected.push({graphId:u.graphId,edge:E,preNode:u})});for(var b=function(O){var M=e.findForwardRmpathEdges(h,d.edges[a[O]],s,d);M.forEach(function(k){var D="".concat(e.dfsCode.dfsEdgeList[a[O]].fromNode,"-").concat(k.label,"-").concat(f[k.to].label);l[D]||(l[D]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[a[O]].fromNode,edgeLabel:k.label,nodeLabel2:f[k.to].label}),l[D].projected.push({graphId:u.graphId,edge:k,preNode:u})})},p=0;p<a.length;p++)b(p)}}),Object.keys(c).forEach(function(u){var h=c[u],f=h.toNodeId,d=h.edgeLabel;e.dfsCode.dfsEdgeList.push(new Li(o,f,"-1",d,"-1")),e.subGraphMining(c[u].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(u){var h=l[u],f=h.fromNodeId,d=h.edgeLabel,p=h.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Li(f,o+1,zr,d,p)),e.subGraphMining(l[u].projected),e.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={},l={};return Object.keys(t).forEach(function(c){var u=t[c],h=u.nodeMap;u.nodes.forEach(function(f,d){var p=f.label,g="".concat(c,"-").concat(p);if(!s[g]){var y=a[p]||0;y++,a[p]=y}s[g]={graphKey:c,label:p},f.edges.forEach(function(m){var b=p,E=h[m.to].label;if(!e&&b>E){var O=E;E=b,b=O}var M=m.label,k="".concat(c,"-").concat(b,"-").concat(M,"-").concat(E),D="".concat(b,"-").concat(M,"-").concat(E);if(!o[D]){var N=o[D]||0;N++,o[D]=N}l[k]={graphId:c,nodeLabel1:b,edgeLabel:M,nodeLabel2:E}})})}),Object.keys(a).forEach(function(c){var u=a[c];if(!(u<n)){var h={nodes:[],edges:[]};h.nodes.push({id:"0",label:c}),i.push(h)}}),i},r.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=this.directed,i={};Object.keys(e).forEach(function(a){var o=e[a],s=o.nodeMap;o.nodes.forEach(function(l){var c=t.findForwardRootEdges(o,l);c.forEach(function(u){var h=s[u.to],f="".concat(l.label,"-").concat(u.label,"-").concat(h.label);i[f]||(i[f]={projected:[],nodeLabel1:l.label,edgeLabel:u.label,nodeLabel2:h.label});var d={graphId:a,edge:u,preNode:null};i[f].projected.push(d)})})}),Object.keys(i).forEach(function(a){var o=i[a],s=o.projected,l=o.nodeLabel1,c=o.edgeLabel,u=o.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Li(0,1,l,c,u)),t.subGraphMining(s),t.dfsCode.dfsEdgeList.pop()})}},r}(),Pm=function(t,e,n,i){var a={};return Object.keys(t).forEach(function(o,s){var l=t[o],c=new mf(s,!0,e),u={};l.nodes.forEach(function(h,f){c.addNode(f,h[n]),u[h.id]=f}),l.edges.forEach(function(h,f){var d=u[h.source],p=u[h.target];c.addEdge(-1,d,p,h[i])}),c&&c.getNodeNum()&&(a[c.id]=c)}),a},Rm=function(t,e,n){var i=[];return t.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[e]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},_f="cluster",Dm=function(t){var e=t.graphs,n=t.directed,i=n===void 0?!1:n,a=t.nodeLabelProp,o=a===void 0?_f:a,s=t.edgeLabelProp,l=s===void 0?_f:s,c=Pm(e,i,o,l),u=t.minSupport,h=t.maxNodeNum,f=t.minNodeNum,d=t.verbose,p=t.top,g={graphs:c,minSupport:u,maxNodeNum:h,minNodeNum:f,top:p,verbose:d,directed:i},y=new Am(g);y.run();var m=Rm(y.frequentSubgraphs,o,l);return m},km=Dm,xf=function(t,e,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=t.nodes;return e.forEach(function(s,l){a.push(Ef(o,s,l,n,i))}),a},Ef=function(t,e,n,i,a){var o=[n],s=[],l={};return e.forEach(function(c,u){if(c<=a&&n!==u){o.push(u),s.push(t[u]);var h=t[u][i];l[h]?(l[h].count++,l[h].dists.push(c)):l[h]={count:1,dists:[c]}}}),Object.keys(l).forEach(function(c){l[c].dists=l[c].dists.sort(function(u,h){return u-h})}),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},Lm=function(t,e,n,i,a){var o=Math.ceil(n/e),s={},l=0;return i.forEach(function(c,u){for(var h=0,f=0,d=c.nodeIdxs,p=c.neighborNum-1;h<o;){for(var g=d[1+Math.floor(Math.random()*p)],y=0;(s["".concat(u,"-").concat(g)]||s["".concat(g,"-").concat(u)])&&(g=Math.floor(Math.random()*e),y++,!(y>2*e)););if(y<2*e&&(s["".concat(u,"-").concat(g)]={start:u,end:g,distance:a[u][g]},h++,l++,l>=n))return s;if(f++,f>2*e)break}if(h<o){var m=o-h;o=(o+m)/(e-u-1)}}),s},Go=function(t,e,n,i){var a=n.nodes;return i||(i={}),Object.keys(t).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var c=t[o],u=(s=e[c.start])===null||s===void 0?void 0:s.nodeIdxs,h=(l=e[c.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!u||!h)){var f=new Set(h),d=u.filter(function(b){return f.has(b)});if(!(!d||!d.length)){for(var p={},g=d.length,y=0;y<g;y++){var m=a[d[y]];i[o].nodes.push(m),p[m.id]=!0}n.edges.forEach(function(b){p[b.source]&&p[b.target]&&i[o].edges.push(b)})}}}}),i},Vo=function(t,e,n,i){var a,o,s={};t.nodes.forEach(function(c){s[c.id]=c});var l=0;return!(!((a=e==null?void 0:e.edges)===null||a===void 0)&&a.length)||((o=e==null?void 0:e.nodes)===null||o===void 0?void 0:o.length)<2?0:(t.edges.forEach(function(c){var u=s[c.source][n],h=s[c.target][n],f=e==null?void 0:e.nodes[0][n],d=e==null?void 0:e.nodes[1][n],p=e==null?void 0:e.edges[0][i];c[i]===p&&(u===f&&h===d||u===d&&h===f)&&l++}),l)},Im=function(t,e,n){for(var i=1/0,a=0,o=function(c){var u=t[c],h=Object.keys(u).sort(function(b,E){return u[b]-u[E]}),f=10,d=[];h.forEach(function(b,E){d[E%f]||(d[E%f]={graphs:[],totalCount:0,aveCount:0}),d[E%f].graphs.push(b),d[E%f].totalCount+=u[b]});var p=0,g=[];d.forEach(function(b){var E=b.totalCount/b.graphs.length;b.aveCount=E,g.push(E);var O=0,M=b.length;b.graphs.forEach(function(k,D){var N=u[k];b.graphs.forEach(function(rt,C){D!==C&&(O+=Math.abs(N-u[rt]))})}),O/=M*(M-1)/2,p+=O}),p/=d.length;var y=0;g.forEach(function(b,E){g.forEach(function(O,M){E!==M&&(y+=Math.abs(b-O))}),y/=g.length*(g.length-1)/2});var m=y-p;i<m&&(i=m,a=c)},s=0;s<e;s++)o(s);return{structure:n[a],structureCountMap:t[a]}},wf=function(t,e){var n={},i={};return t.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[e];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},Sf=function(t,e,n){var i={},a={};return t.forEach(function(o,s){i["".concat(Zh)]={idx:s,edge:o};var l=o[e];a[l]||(a[l]=[]),a[l].push(o);var c=n[o.source];c&&(c.degree++,c.outDegree++);var u=n[o.target];u&&(u.degree++,u.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},Of=function(t,e,n){var i=e.length,a={};return e.forEach(function(o,s){for(var l=n?0:s+1,c=t[s].id,u=l;u<i;u++)if(s!==u){var h=t[u].id,f=o[u];a["".concat(c,"-").concat(h)]=f,n||(a["".concat(h,"-").concat(c)]=f)}}),a},Nm=function(t,e,n,i,a,o,s,l,c,u,h){var f,d="".concat(e.id,"-").concat(n.id);if(u&&u[d])return u[d];var p=h?h[d]:void 0;if(!p){var g=(f={},f[d]={start:i[e.id].idx,end:i[n.id].idx,distance:a},f);h=Go(g,o,t,h),p=h[d]}return Vo(p,s,l,c)},Mf=function(t,e,n,i){var a,o,s,l=(a=t[e])===null||a===void 0?void 0:a.degree,c=(o=t[e])===null||o===void 0?void 0:o.inDegree,u=(s=t[e])===null||s===void 0?void 0:s.outDegree;return t[e]===void 0&&(l=1/0,c=1/0,u=1/0,i[e].forEach(function(h){var f=n[h.id].degree;l>f&&(l=f);var d=n[h.id].inDegree;c>d&&(c=d);var p=n[h.id].outDegree;u>p&&(u=p)}),t[e]={degree:l,inDegree:c,outDegree:u}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:c,minPatternNodeLabelOutDegree:u}},jm=function(t,e,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!t||!t.nodes)){var c=t.nodes.length;if(c){var u=yc(t,n),h=yc(e,n),f=Of(t.nodes,u,n),d=Of(e.nodes,h,n),p=wf(t.nodes,o),g=p.nodeMap,y=p.nodeLabelMap,m=wf(e.nodes,o),b=m.nodeMap,E=m.nodeLabelMap;Sf(t.edges,s,g);var O=Sf(e.edges,s,b).edgeLabelMap,M=[];h==null||h.forEach(function(Ae){M=M.concat(Ae)}),a||(a=Math.max.apply(Math,(0,w.ev)((0,w.ev)([],M,!1),[2],!1))),i||(i=a);var k=xf(t,u,o,i),D=xf(e,h,o,i),N=Math.min(100,c*(c-1)/2),rt=Lm(i,c,N,k,u),C=Go(rt,k,t),S=10,A=1,j=1,Y=4,ot={graphs:C,nodeLabelProp:o,edgeLabelProp:s,minSupport:A,minNodeNum:j,maxNodeNum:Y,directed:n},Lt=km(ot).slice(0,S),Xt=Lt.length,wt=[];Lt.forEach(function(Ae,We){wt[We]={},Object.keys(C).forEach(function(Re){var Ne=C[Re],on=Vo(Ne,Ae,o,s);wt[We][Re]=on})});var Ct=Im(wt,Xt,Lt),$t=Ct.structure,ie=Ct.structureCountMap,ye=e.nodes[0],ve=[],Ee=(l=e.nodes[0])===null||l===void 0?void 0:l[o],Oe=-1/0;e.nodes.forEach(function(Ae){var We=Ae[o],Re=y[We];(Re==null?void 0:Re.length)>Oe&&(Oe=Re.length,ve=Re,Ee=We,ye=Ae)});var Le={},an={},He={},qe={},Qe={},mr={};Object.keys(E).forEach(function(Ae,We){Qe[Ae]=[],n&&(mr[Ae]=[]);var Re=-1/0,Ne=E[Ae],on={};Ne.forEach(function(Be){var De=d["".concat(ye.id,"-").concat(Be.id)];if(De&&Qe[Ae].push(De),Re<De&&(Re=De),on["".concat(ye.id,"-").concat(Be.id)]={start:0,end:b[Be.id].idx,distance:De},n){var sn=d["".concat(Be.id,"-").concat(ye.id)];sn&&mr[Ae].push(sn)}}),Qe[Ae]=Qe[Ae].sort(function(Be,De){return Be-De}),n&&(mr[Ae]=mr[Ae].sort(function(Be,De){return Be-De})),an=Go(on,D,e,an);var we=[];if(Object.keys(on).forEach(function(Be){if(He[Be]){we.push(He[Be]);return}var De=an[Be];He[Be]=Vo(De,$t,o,s),we.push(He[Be])}),we=we.sort(function(Be,De){return De-Be}),qe["".concat(ye.id,"-").concat(Ae)]=we,Ae!==Ee)for(var ke=(ve==null?void 0:ve.length)||0,je=function(De){var sn=ve[De],sr=k[g[sn.id].idx],fn=sr.nodeLabelCountMap[Ae],Ki=E[Ae].length;if(!fn||fn.count<Ki)return ve.splice(De,1),"continue";for(var Aa=!1,zn=0;zn<Ki;zn++)if(fn.dists[zn]>Qe[Ae][zn]){Aa=!0;break}if(Aa)return ve.splice(De,1),"continue";var _r={};sr.neighbors.forEach(function(Wn){var Ir=f["".concat(sn.id,"-").concat(Wn.id)];_r["".concat(sn.id,"-").concat(Wn.id)]={start:g[sn.id].idx,end:g[Wn.id].idx,distance:Ir}}),C=Go(_r,k,t,C);var Zr=[];Object.keys(_r).forEach(function(Wn){if(ie[Wn]){Zr.push(ie[Wn]);return}var Ir=C[Wn];ie[Wn]=Vo(Ir,$t,o,s),Zr.push(ie[Wn])}),Zr=Zr.sort(function(Wn,Ir){return Ir-Wn});for(var Pi=!1,zn=0;zn<Ki;zn++)if(Zr[zn]<we[zn]){Pi=!0;break}if(Pi)return ve.splice(De,1),"continue"},Sn=ke-1;Sn>=0;Sn--)je(Sn)});var Ie=[];ve==null||ve.forEach(function(Ae){for(var We=g[Ae.id].idx,Re=Ef(t.nodes,u[We],We,o,a),Ne=Re.neighbors,on=Ne.length,we=!1,ke=on-1;ke>=0;ke--){if(Ne.length+1<e.nodes.length){we=!0;return}var je=Ne[ke],Sn=je[o];if(!E[Sn]||!E[Sn].length){Ne.splice(ke,1);continue}if(!Qe[Sn]||!Qe[Sn].length){Ne.splice(ke,1);continue}var Be="".concat(Ae.id,"-").concat(je.id),De=f[Be],sn=Qe[Sn].length-1,sr=Qe[Sn][sn];if(De>sr){Ne.splice(ke,1);continue}if(n){var fn="".concat(je.id,"-").concat(Ae.id),Ki=f[fn];sn=mr[Sn].length-1;var Aa=mr[Sn][sn];if(Ki>Aa){Ne.splice(ke,1);continue}}var zn=ie[Be]?ie[Be]:Nm(t,Ae,je,g,De,k,$t,o,s,ie,C),_r="".concat(ye.id,"-").concat(Sn),Zr=qe[_r][qe[_r].length-1];if(zn<Zr){Ne.splice(ke,1);continue}var Pi=Mf(Le,Sn,b,E),Wn=Pi.minPatternNodeLabelDegree,Ir=Pi.minPatternNodeLabelInDegree,ii=Pi.minPatternNodeLabelOutDegree;if(g[je.id].degree<Wn){Ne.splice(ke,1);continue}}we||Ie.push({nodes:[Ae].concat(Ne)})});var kr=jo(e,ye.id,!1).length,Kn={};n?(Object.keys(kr).forEach(function(Ae){var We=b[Ae].node[o];Kn[We]?Kn[We].push(kr[Ae]):Kn[We]=[kr[Ae]]}),Object.keys(Kn).forEach(function(Ae){Kn[Ae].sort(function(We,Re){return We-Re})})):Kn=Qe;for(var xo=Ie.length,Xn=function(We){var Re=Ie[We],Ne=Re.nodes[0],on={},we={};Re.nodes.forEach(function(Ue,lr){we[Ue.id]={idx:lr,node:Ue,degree:0,inDegree:0,outDegree:0};var mn=Ue[o];on[mn]?on[mn]++:on[mn]=1});var ke=[],je={};t.edges.forEach(function(Ue){we[Ue.source]&&we[Ue.target]&&(ke.push(Ue),je[Ue[s]]?je[Ue[s]]++:je[Ue[s]]=1,we[Ue.source].degree++,we[Ue.target].degree++,we[Ue.source].outDegree++,we[Ue.target].inDegree++)});for(var Sn=Object.keys(O).length,Be=!1,De=0;De<Sn;De++){var sn=Object.keys(O)[De];if(!je[sn]||je[sn]<O[sn].length){Be=!0;break}}if(Be)return Ie.splice(We,1),"continue";var sr=ke.length;if(sr<e.edges.length)return Ie.splice(We,1),"break";for(var fn=!1,Ki=function(lr){var mn=ke[lr],$r=mn[s],Xi=O[$r];if(!Xi||!Xi.length)return je[$r]--,Xi&&je[$r]<Xi.length?(fn=!0,"break"):(ke.splice(lr,1),we[mn.source].degree--,we[mn.target].degree--,we[mn.source].outDegree--,we[mn.target].inDegree--,"continue");var og=we[mn.source].node[o],sg=we[mn.target].node[o],xh=!1;if(Xi.forEach(function(lg){var cg=b[lg.source].node,ug=b[lg.target].node;cg[o]===og&&ug[o]===sg&&(xh=!0),!n&&cg[o]===sg&&ug[o]===og&&(xh=!0)}),!xh)return je[$r]--,Xi&&je[$r]<Xi.length?(fn=!0,"break"):(ke.splice(lr,1),we[mn.source].degree--,we[mn.target].degree--,we[mn.source].outDegree--,we[mn.target].inDegree--,"continue")},De=sr-1;De>=0;De--){var Aa=Ki(De);if(Aa==="break")break}if(fn)return Ie.splice(We,1),"continue";Re.edges=ke;var zn=jo(Re,Re.nodes[0].id,!1).length;if(Object.keys(zn).reverse().forEach(function(Ue){if(!(Ue===Re.nodes[0].id||fn)){if(zn[Ue]===1/0){var lr=we[Ue].node[o];if(on[lr]--,on[lr]<E[lr].length){fn=!0;return}var mn=Re.nodes.indexOf(we[Ue].node);Re.nodes.splice(mn,1),we[Ue]=void 0;return}var $r=g[Ue].node[o];if(!Kn[$r]||!Kn[$r].length||zn[Ue]>Kn[$r][Kn[$r].length-1]){var lr=we[Ue].node[o];if(on[lr]--,on[lr]<E[lr].length){fn=!0;return}var mn=Re.nodes.indexOf(we[Ue].node);Re.nodes.splice(mn,1),we[Ue]=void 0}}}),fn)return Ie.splice(We,1),"continue";for(var _r=!0,Zr=0;_r&&!fn;){_r=!1;var Pi=n?we[Ne.id].degree<b[ye.id].degree||we[Ne.id].inDegree<b[ye.id].inDegree||we[Ne.id].outDegree<b[ye.id].outDegree:we[Ne.id].degree<b[ye.id].degree;if(Pi){fn=!0;break}if(on[Ne[o]]<E[Ne[o]].length){fn=!0;break}for(var Wn=Re.nodes.length,Ir=Wn-1;Ir>=0;Ir--){var ii=Re.nodes[Ir],ig=we[ii.id].degree,z3=we[ii.id].inDegree,W3=we[ii.id].outDegree,G3=ii[o],_h=Mf(Le,G3,b,E),ag=_h.minPatternNodeLabelDegree,V3=_h.minPatternNodeLabelInDegree,H3=_h.minPatternNodeLabelOutDegree,Z3=n?ig<ag||z3<V3||W3<H3:ig<ag;if(Z3){if(on[ii[o]]--,on[ii[o]]<E[ii[o]].length){fn=!0;break}Re.nodes.splice(Ir,1),we[ii.id]=void 0,_r=!0}}if(fn||!_r&&Zr!==0)break;sr=ke.length;for(var Jl=sr-1;Jl>=0;Jl--){var ai=ke[Jl];if(!we[ai.source]||!we[ai.target]){ke.splice(Jl,1);var tc=ai[s];if(je[tc]--,we[ai.source]&&(we[ai.source].degree--,we[ai.source].outDegree--),we[ai.target]&&(we[ai.target].degree--,we[ai.target].inDegree--),O[tc]&&je[tc]<O[tc].length){fn=!0;break}_r=!0}}Zr++}if(fn||fn||Re.nodes.length<e.nodes.length||ke.length<e.edges.length)return Ie.splice(We,1),"continue"},Fn=xo-1;Fn>=0;Fn--){var Ta=Xn(Fn);if(Ta==="break")break}for(var br=Ie.length,Lr=function(We){var Re=Ie[We],Ne={};Re.edges.forEach(function(ke){var je="".concat(ke.source,"-").concat(ke.target,"-").concat(ke.label);Ne[je]?Ne[je]++:Ne[je]=1});for(var on=function(je){var Sn=Ie[je],Be={};Sn.edges.forEach(function(sn){var sr="".concat(sn.source,"-").concat(sn.target,"-").concat(sn.label);Be[sr]?Be[sr]++:Be[sr]=1});var De=!0;Object.keys(Be).length!==Object.keys(Ne).length?De=!1:Object.keys(Ne).forEach(function(sn){Be[sn]!==Ne[sn]&&(De=!1)}),De&&Ie.splice(je,1)},we=br-1;we>We;we--)on(we);br=Ie.length},Fn=0;Fn<=br-1;Fn++)Lr(Fn);return Ie}}},Bm=jm,Fm=function(){function r(t){t===void 0&&(t=10),this.linkedList=new Hh,this.maxStep=t}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r}(),zm=Fm,Wm=Qh,FT={getAdjMatrix:Do,breadthFirstSearch:_y,connectedComponent:Uh,getDegree:cc,getInDegree:Ey,getOutDegree:wy,detectCycle:Qh,detectDirectedCycle:Wm,detectAllCycles:My,detectAllDirectedCycle:qh,detectAllUndirectedCycle:Xh,depthFirstSearch:Kh,dijkstra:jo,findAllPath:Jy,findShortestPath:gc,floydWarshall:yc,labelPropagation:nm,louvain:uf,iLouvain:um,kCore:fm,kMeans:pm,cosineSimilarity:ff,nodesCosineSimilarity:ym,minimumSpanningTree:Om,pageRank:pf,getNeighbors:dr,Stack:zm,GADDI:Bm};function St(r){if(r.id!==void 0)return r.id;if(r.source!==void 0&&r.target!==void 0)return`${r.source}-${r.target}`;throw new Error(Kr("The datum does not have available id."))}function Ho(r){return r.combo}function Cf(r,t){const e={nodes:(r.nodes||[]).map(St),edges:(r.edges||[]).map(St),combos:(r.combos||[]).map(St)};return t?Object.values(e).flat():e}const Tf=(r,t,e)=>{var n;switch(e.type){case"degree":{const i=new Map;return(n=r.nodes)===null||n===void 0||n.forEach(a=>{const o=t(St(a),e.direction).length;i.set(St(a),o)}),i}case"betweenness":return Gm(r,e.directed,e.weightPropertyName);case"closeness":return Vm(r,e.directed,e.weightPropertyName);case"eigenvector":return Zm(r,e.directed);case"pagerank":return Hm(r,e.epsilon,e.linkProb);default:return Af(r)}},Af=r=>{var t;const e=new Map;return(t=r.nodes)===null||t===void 0||t.forEach(n=>{e.set(St(n),0)}),e},Gm=(r,t,e)=>{const n=Af(r),{nodes:i=[]}=r;return i.forEach(a=>{i.forEach(o=>{if(a!==o){const{allPath:s}=gc(r,St(a),St(o),t,e),l=s.length;s.flat().forEach(c=>{c!==St(a)&&c!==St(o)&&n.set(c,n.get(c)+1/l)})}})}),n},Vm=(r,t,e)=>{const n=new Map,{nodes:i=[]}=r;return i.forEach(a=>{const o=i.reduce((s,l)=>{if(a!==l){const{length:c}=gc(r,St(a),St(l),t,e);s+=c}return s},0);n.set(St(a),1/o)}),n},Hm=(r,t,e)=>{var n;const i=new Map,a=pf(r,t,e);return(n=r.nodes)===null||n===void 0||n.forEach(o=>{i.set(St(o),a[St(o)])}),i},Zm=(r,t)=>{const{nodes:e=[]}=r,n=$m(r,t),i=Um(n,e.length),a=new Map;return e.forEach((o,s)=>{a.set(St(o),i[s])}),a},$m=(r,t)=>{const{nodes:e=[],edges:n=[]}=r,i=Array(e.length).fill(null).map(()=>Array(e.length).fill(0));return n.forEach(({source:a,target:o})=>{const s=e.findIndex(c=>St(c)===a),l=e.findIndex(c=>St(c)===o);t?i[s][l]=1:(i[s][l]=1,i[l][s]=1)}),i},Um=(r,t,e=100,n=1e-6)=>{let i=Array(t).fill(1),a=1/0;for(let o=0;o<e&&a>n;o++){const s=Array(t).fill(0);for(let c=0;c<t;c++)for(let u=0;u<t;u++)s[c]+=r[c][u]*i[u];const l=Math.sqrt(s.reduce((c,u)=>c+u*u,0));for(let c=0;c<t;c++)s[c]/=l;a=Math.sqrt(s.reduce((c,u,h)=>c+(u-i[h])*u,0)),i=s}return i};function ui(r,t,e,n=cn){const i=new Map(r.map(f=>[e(f),f])),a=new Map(t.map(f=>[e(f),f])),o=new Set(i.keys()),s=new Set(a.keys()),l=[],c=[],u=[],h=[];return s.forEach(f=>{o.has(f)?n(i.get(f),a.get(f))?h.push(a.get(f)):c.push(a.get(f)):l.push(a.get(f))}),o.forEach(f=>{s.has(f)||u.push(i.get(f))}),{enter:l,exit:u,keep:h,update:c}}function Ii(r,t,e){const n=i=>{e&&!e(i)||(i.style.visibility=t)};r.forEach(i=>{n(i)})}function Ym(r,t,e){const n={},i=a=>(a in n||(n[a]=0),`${t}-${a}-${n[a]++}`);return e.map(a=>typeof a=="string"?{type:a,key:i(a)}:typeof a=="function"?a.call(r):a.key?a:Object.assign(Object.assign({},a),{key:i(a.type)}))}class _c{constructor(t){this.extensions=[],this.extensionMap={},this.context=t}setExtensions(t){const e=Ym(this.context.graph,this.category,t),{enter:n,update:i,exit:a,keep:o}=ui(this.extensions,e,s=>s.key);this.createExtensions(n),this.updateExtensions([...i,...o]),this.destroyExtensions(a),this.extensions=e}createExtension(t){const{category:e}=this,{key:n,type:i}=t,a=Yr(e,i);if(!a)return Zn.warn(`The extension ${i} of ${e} is not registered.`);const o=new a(this.context,t);this.extensionMap[n]=o}createExtensions(t){t.forEach(e=>this.createExtension(e))}updateExtension(t){const{key:e}=t,n=this.extensionMap[e];n&&n.update(t)}updateExtensions(t){t.forEach(e=>this.updateExtension(e))}destroyExtension(t){const e=this.extensionMap[t];e&&(e.destroy(),delete this.extensionMap[t])}destroyExtensions(t){t.forEach(({key:e})=>this.destroyExtension(e))}destroy(){Object.values(this.extensionMap).forEach(t=>t.destroy()),this.context={},this.extensions=[],this.extensionMap={}}}class xc{constructor(t,e){this.events=[],this.destroyed=!1,this.context=t,this.options=e}update(t){this.options=Object.assign(this.options,t)}destroy(){this.context={},this.options={},this.destroyed=!0}}class Qn extends xc{}class Zo extends Qn{constructor(t,e){super(t,Object.assign({},Zo.defaultOptions,e)),this.isOverlapping=(n,i)=>i.some(a=>n.intersects(a)),this.occupiedBounds=[],this.detectLabelCollision=n=>{const i=this.context.viewport,a={show:[],hide:[]};return this.occupiedBounds=[],n.forEach(o=>{const s=o.getShape("label").getRenderBounds();i.isInViewport(s,!0)&&!this.isOverlapping(s,this.occupiedBounds)?(a.show.push(o),this.occupiedBounds.push(ci(s,this.options.padding))):a.hide.push(o)}),a},this.hideLabelIfExceedViewport=(n,i)=>{const{exit:a}=ui(n,i,o=>o.id);a==null||a.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(n,i)=>{const{model:a}=this.context,o=a.getData(),s=a.getRelatedEdgesData.bind(a);return n.map(c=>(this.nodeCentralities.has(c.id)||(this.nodeCentralities=Tf(o,s,i)),{node:c,centrality:this.nodeCentralities.get(c.id)})).sort((c,u)=>u.centrality-c.centrality).map(c=>c.node)},this.sortLabelElementsInView=n=>{const{sort:i,sortNode:a,sortCombo:o,sortEdge:s}=this.options,{model:l}=this.context;if((0,Se.Z)(i))return n.sort((g,y)=>i(l.getElementDataById(g.id),l.getElementDataById(y.id)));const{node:c=[],edge:u=[],combo:h=[]}=Ao(n,g=>g.type),f=(0,Se.Z)(o)?h.sort((g,y)=>o(...l.getComboData([g.id,y.id]))):h,d=(0,Se.Z)(a)?c.sort((g,y)=>a(...l.getNodeData([g.id,y.id]))):this.sortNodesByCentrality(c,a),p=(0,Se.Z)(s)?u.sort((g,y)=>s(...l.getEdgeData([g.id,y.id]))):u;return[...f,...d,...p]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=n=>{var i;if(((i=n.data)===null||i===void 0?void 0:i.stage)==="zIndex")return;if(!this.validate(n)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}const a=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,a),this.labelElementsInView=a;const o=this.sortLabelElementsInView(this.labelElementsInView),{show:s,hide:l}=this.detectLabelCollision(o);for(let c=s.length-1;c>=0;c--)this.showLabel(s[c]);l.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=n=>{const i=n.getShape("label");i&&Ii(i,"hidden"),this.hiddenElements.set(n.id,n)},this.showLabel=n=>{const i=n.getShape("label");i&&Ii(i,"visible"),n.toFront(),this.hiddenElements.delete(n.id)},this.onTransform=Wh(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=n=>{this.enableToggle&&this.onToggleVisibility(n)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=n=>{this.onToggleVisibility(n),this.enableToggle=!0},this.bindEvents()}update(t){this.unbindEvents(),super.update(t),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:t}=this.context.element,e=[];for(const n in t){const i=t[n];i.isVisible()&&i.getShape("label")&&e.push(i)}return e}getLabelElementsInView(){const t=this.context.viewport;return this.getLabelElements().filter(e=>t.isInViewport(e.getShape("key").getRenderBounds()))}bindEvents(){const{graph:t}=this.context;t.on(he.BEFORE_RENDER,this.onBeforeRender),t.on(he.AFTER_RENDER,this.onAfterRender),t.on(he.AFTER_DRAW,this.toggle),t.on(he.AFTER_LAYOUT,this.toggle),t.on(he.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:t}=this.context;t.off(he.BEFORE_RENDER,this.onBeforeRender),t.off(he.AFTER_RENDER,this.onAfterRender),t.off(he.AFTER_DRAW,this.toggle),t.off(he.AFTER_LAYOUT,this.toggle),t.off(he.AFTER_TRANSFORM,this.onTransform)}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}destroy(){this.unbindEvents(),super.destroy()}}Zo.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};var Jn=G(83787);const Pf=[0,0,0];function Ce(r,t){return r.map((e,n)=>e+t[n])}function Fe(r,t){return r.map((e,n)=>e-t[n])}function Sr(r,t){return typeof t=="number"?r.map(e=>e*t):r.map((e,n)=>e*t[n])}function Or(r,t){return typeof t=="number"?r.map(e=>e/t):r.map((e,n)=>e/t[n])}function Km(r,t){return r.reduce((e,n,i)=>e+n*t[i],0)}function Xm(r,t){const e=ja(r),n=ja(t);return[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]}function hi(r,t){return r.map(e=>e*t)}function $e(r,t){return Math.sqrt(r.reduce((e,n,i)=>e+Math.pow(n-t[i]||0,2),0))}function $o(r,t){return r.reduce((e,n,i)=>e+Math.abs(n-t[i]),0)}function qr(r){const t=r.reduce((e,n)=>e+Math.pow(n,2),0);return r.map(e=>e/Math.sqrt(t))}function Ec(r,t,e=!1){const n=r[0]*t[1]-r[1]*t[0];let i=Math.acos(Sr(r,t).reduce((a,o)=>a+o,0)/($e(r,Pf)*$e(t,Pf)));return e&&n<0&&(i=2*Math.PI-i),i}function zT(r,t){return r.every((e,n)=>e===t[n])}function Uo(r,t=!0){return t?[-r[1],r[0]]:[r[1],-r[0]]}function wc(r,t){return r.map(e=>e%t)}function Ni(r){return[r[0],r[1]]}function ja(r){return ay(r)?[r[0],r[1],0]:r}function Rf(r){const[t,e]=r;return!t&&!e?0:Math.atan2(e,t)}function Df(r,t){const[e,n]=r,[i,a]=t,o=Fe(e,n),s=Fe(i,a);return Xm(o,s).every(l=>l===0)}function Sc(r,t,e=!1){if(Df(r,t))return;const[n,i]=r,[a,o]=t,s=((n[0]-a[0])*(a[1]-o[1])-(n[1]-a[1])*(a[0]-o[0]))/((n[0]-i[0])*(a[1]-o[1])-(n[1]-i[1])*(a[0]-o[0])),l=o[0]-a[0]?(n[0]-a[0]+s*(i[0]-n[0]))/(o[0]-a[0]):(n[1]-a[1]+s*(i[1]-n[1]))/(o[1]-a[1]);if(!(!e&&(!jr(s,0,1)||!jr(l,0,1))))return[n[0]+s*(i[0]-n[0]),n[1]+s*(i[1]-n[1])]}function kf(r){if(Array.isArray(r))return jr(r[0],0,1)&&jr(r[1],0,1)?r:[.5,.5];const t=r.split("-"),e=t.includes("left")?0:t.includes("right")?1:.5,n=t.includes("top")?0:t.includes("bottom")?1:.5;return[e,n]}function gn(r){const{x:t=0,y:e=0,z:n=0}=r.style||{};return[+t,+e,+n]}function qm(r){const{x:t,y:e,z:n}=r.style||{};return t!==void 0||e!==void 0||n!==void 0}function Lf(r,t){const[e,n]=t,{min:i,max:a}=r;return[i[0]+e*(a[0]-i[0]),i[1]+n*(a[1]-i[1])]}function Qr(r,t="center"){const e=kf(t);return Lf(r,e)}function WT(r,t){const e=parseAnchor(t);return Lf(r,e)}const GT=r=>{const[t,e]=r;return{left:Math.min(t[0],e[0]),right:Math.max(t[0],e[0]),top:Math.min(t[1],e[1]),bottom:Math.max(t[1],e[1])}};function Cn(r){var t;return[r.x,r.y,(t=r.z)!==null&&t!==void 0?t:0]}function Mr(r){var t;return{x:r[0],y:r[1],z:(t=r[2])!==null&&t!==void 0?t:0}}function VT(r){return r.sort((t,e)=>t[0]-e[0]||t[1]-e[1])}function HT(r){const t=new Set;return r.filter(e=>{const n=e.join(",");return t.has(n)?!1:(t.add(n),!0)})}function Ba(r,t=0){return r.map(e=>parseFloat(e.toFixed(t)))}function fi(r,t,e,n=!1){if(cn(r,t))return r;const i=n?Fe(r,t):Fe(t,r),a=qr(i),o=[a[0]*e,a[1]*e];return Ce(Ni(r),o)}function If(r,t){return r[1]===t[1]}function Qm(r,t){return r[0]===t[0]}function Jm(r,t){return If(r,t)||Qm(r,t)}function Nf(r,t,e){return Df([r,t],[t,e])}function jf(r,t){return[2*t[0]-r[0],2*t[1]-r[1]]}function Bf(r,t,e,n=!0,i=!1){for(let a=0;a<e.length;a++){let o=e[a],s=e[(a+1)%e.length];n&&(o=Ce(t,o),s=Ce(t,s));const l=i?jf(r,t):r,c=Sc([t,l],[o,s]);if(c)return{point:c,line:[o,s]}}return{point:t,line:void 0}}function t1(r,t,e,n){const i=r[0],a=r[1];let o=!1;e===void 0&&(e=0),n===void 0&&(n=t.length);const s=n-e;for(let l=0,c=s-1;l<s;c=l++){const u=t[l+e][0],h=t[l+e][1],f=t[c+e][0],d=t[c+e][1];h>a!=d>a&&i<(f-u)*(a-h)/(d-h)+u&&(o=!o)}return o}function e1(r,t,e=!1){const n=Qr(t,"center"),i=[Qr(t,"left-top"),Qr(t,"right-top"),Qr(t,"right-bottom"),Qr(t,"left-bottom")];return Bf(r,n,i,!1,e).point}function Yo(r,t,e=!1){const n=t.center,i=e?jf(r,n):r,a=Fe(i,t.center),o=Math.atan2(a[1],a[0]);if(isNaN(o))return n;const s=Br(t)/2,l=Fr(t)/2,c=n[0]+s*Math.cos(o),u=n[1]+l*Math.sin(o);return[c,u]}function n1(r,t){let e=1/0,n=[r[0],t[0]];return r.forEach(i=>{t.forEach(a=>{const o=$e(i,a);o<e&&(e=o,n=[i,a])})}),n}function r1(r,t){let e=1/0,n=[[0,0],[0,0]];return t.forEach(i=>{const a=i1(r,i);a<e&&(e=a,n=i)}),n}function i1(r,t){const e=Ff(r,t);return $e(r,e)}function Ff(r,t){const[e,n]=t[0],[i,a]=t[1],[o,s]=r,l=i-e,c=a-n;if(l===0&&c===0)return[e,n];let u=((o-e)*l+(s-n)*c)/(l*l+c*c);u>1?u=1:u<0&&(u=0);const h=e+u*l,f=n+u*c;return[h,f]}function a1(r){const t=r.reduce((e,n)=>Ce(e,n),[0,0]);return Or(t,r.length)}function Oc(r,t=!0){const e=a1(r);return r.sort(([n,i],[a,o])=>{const s=Math.atan2(i-e[1],n-e[0]),l=Math.atan2(o-e[1],a-e[0]);return t?l-s:s-l})}function zf(r,t){return[r,[r[0],t[1]],t,[t[0],r[1]]]}class un{constructor(t,e,n){if(this.phase=e,this.pointerByTouch=[],this.initialDistance=null,this.emitter=t,un.instance)return un.callbacks[this.phase].push(n),un.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),un.instance=this,un.callbacks[this.phase].push(n)}bindEvents(){const{emitter:t}=this;t.on(Zt.POINTER_DOWN,this.onPointerDown),t.on(Zt.POINTER_MOVE,this.onPointerMove),t.on(Zt.POINTER_UP,this.onPointerUp)}updatePointerPosition(t,e,n){const i=this.pointerByTouch.findIndex(a=>a.pointerId===t);i>=0&&(this.pointerByTouch[i]={x:e,y:n,pointerId:t})}onPointerDown(t){const{x:e,y:n}=t.client||{};if(!(e===void 0||n===void 0)&&(this.pointerByTouch.push({x:e,y:n,pointerId:t.pointerId}),t.pointerType==="touch"&&this.pointerByTouch.length===2)){un.isPinching=!0;const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(i*i+a*a),un.callbacks.pinchstart.forEach(o=>o(t,{scale:0}))}}onPointerMove(t){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;const{x:e,y:n}=t.client||{};if(e===void 0||n===void 0)return;this.updatePointerPosition(t.pointerId,e,n);const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,s=Math.sqrt(i*i+a*a)/this.initialDistance;un.callbacks.pinchmove.forEach(l=>l(t,{scale:(s-1)*5}))}onPointerUp(t){var e;un.callbacks.pinchend.forEach(n=>n(t,{scale:0})),un.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(e=un.instance)===null||e===void 0||e.tryDestroy()}destroy(){this.emitter.off(Zt.POINTER_DOWN,this.onPointerDown),this.emitter.off(Zt.POINTER_MOVE,this.onPointerMove),this.emitter.off(Zt.POINTER_UP,this.onPointerUp),un.instance=null}off(t,e){const n=un.callbacks[t].indexOf(e);n>-1&&un.callbacks[t].splice(n,1),this.tryDestroy()}tryDestroy(){Object.values(un.callbacks).every(t=>t.length===0)&&this.destroy()}}un.isPinching=!1,un.instance=null,un.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const Wf=r=>r.map(t=>(0,ae.Z)(t)?t.toLocaleLowerCase():t);class ra{constructor(t){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=e=>{e!=null&&e.key&&(this.recordKey.add(e.key),this.trigger(e))},this.onKeyUp=e=>{e!=null&&e.key&&this.recordKey.delete(e.key)},this.onWheel=e=>{this.triggerExtendKey(Zt.WHEEL,e)},this.onDrag=e=>{this.triggerExtendKey(Zt.DRAG,e)},this.handlePinch=(e,n)=>{this.triggerExtendKey(Zt.PINCH,Object.assign(Object.assign({},e),n))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=t,this.bindEvents()}bind(t,e){t.length!==0&&(t.includes(Zt.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new un(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(t,e))}unbind(t,e){this.map.forEach((n,i)=>{cn(i,t)&&(!e||e===n)&&this.map.delete(i)})}unbindAll(){this.map.clear()}match(t){const e=Wf(Array.from(this.recordKey)).sort(),n=Wf(t).sort();return cn(e,n)}bindEvents(){var t;const{emitter:e}=this;e.on(Zt.KEY_DOWN,this.onKeyDown),e.on(Zt.KEY_UP,this.onKeyUp),e.on(Zt.WHEEL,this.onWheel),e.on(Zt.DRAG,this.onDrag),(t=globalThis.addEventListener)===null||t===void 0||t.call(globalThis,"focus",this.onFocus)}trigger(t){this.map.forEach((e,n)=>{this.match(n)&&e(t)})}triggerExtendKey(t,e){this.map.forEach((n,i)=>{i.includes(t)&&cn(Array.from(this.recordKey),i.filter(a=>a!==t))&&n(e)})}destroy(){var t,e;this.unbindAll(),this.emitter.off(Zt.KEY_DOWN,this.onKeyDown),this.emitter.off(Zt.KEY_UP,this.onKeyUp),this.emitter.off(Zt.WHEEL,this.onWheel),this.emitter.off(Zt.DRAG,this.onDrag),(t=this.pinchHandler)===null||t===void 0||t.off("pinchmove",this.boundHandlePinch),(e=globalThis.removeEventListener)===null||e===void 0||e.call(globalThis,"blur",this.onFocus)}}class Fa extends Qn{constructor(t,e){super(t,(0,Jn.Z)({},Fa.defaultOptions,e)),this.shortcut=new ra(t.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(t){if(!this.validate(t)||!this.isKeydown()||this.startPoint)return;const{canvas:e,graph:n}=this.context,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/n.getZoom()),this.rectShape=new x.UL({id:"g6-brush-select",style:i}),e.appendChild(this.rectShape),this.startPoint=[t.canvas.x,t.canvas.y]}onPointerMove(t){var e;if(!this.startPoint)return;const{immediately:n,mode:i}=this.options;this.endPoint=Ko(t),(e=this.rectShape)===null||e===void 0||e.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),n&&i==="default"&&this.updateElementsStates(zf(this.startPoint,this.endPoint))}onPointerUp(t){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=Ko(t),this.updateElementsStates(zf(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:t}=this.context,e=Object.values(t.getData()).reduce((n,i)=>Object.assign({},n,i.reduce((a,o)=>{var s;const l=(s=o.states||[])===null||s===void 0?void 0:s.filter(c=>c!==this.options.state);return a[St(o)]=l,a},{})),{});t.setElementState(e,this.options.animation)}updateElementsStates(t){const{graph:e}=this.context,{enableElements:n,state:i,mode:a,onSelect:o}=this.options,s=this.selector(e,t,n);let l={};switch(a){case"union":s.forEach(c=>{l[c]=[...e.getElementState(c),i]});break;case"diff":s.forEach(c=>{const u=e.getElementState(c);l[c]=u.includes(i)?u.filter(h=>h!==i):[...u,i]});break;case"intersect":s.forEach(c=>{const u=e.getElementState(c);l[c]=u.includes(i)?[i]:[]});break;case"default":default:s.forEach(c=>{l[c]=[i]});break}(0,Se.Z)(o)&&(l=o(l)),e.setElementState(l,this.options.animation)}selector(t,e,n){if(!n||n.length===0)return[];const i=[],a=t.getData();if(n.forEach(o=>{a[`${o}s`].forEach(s=>{const l=St(s);t.getElementVisibility(l)!=="hidden"&&t1(t.getElementPosition(l),e)&&i.push(l)})}),n.includes("edge")){const o=a.edges;o==null||o.forEach(s=>{const{source:l,target:c}=s;i.includes(l)&&i.includes(c)&&i.push(St(s))})}return i}clearBrush(){var t;(t=this.rectShape)===null||t===void 0||t.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:t}=this.options,e=Array.isArray(t)?t:[t];return this.shortcut.match(e.filter(n=>n!=="drag"))}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}bindEvents(){const{graph:t}=this.context;t.on(Zt.POINTER_DOWN,this.onPointerDown),t.on(Zt.POINTER_MOVE,this.onPointerMove),t.on(Zt.POINTER_UP,this.onPointerUp),t.on(Ur.CLICK,this.clearStates)}unbindEvents(){const{graph:t}=this.context;t.off(Zt.POINTER_DOWN,this.onPointerDown),t.off(Zt.POINTER_MOVE,this.onPointerMove),t.off(Zt.POINTER_UP,this.onPointerUp),t.off(Ur.CLICK,this.clearStates)}update(t){this.unbindEvents(),this.options=(0,Jn.Z)(this.options,t),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}Fa.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const Ko=r=>[r.canvas.x,r.canvas.y],Jr=.8,ji=["node","edge","combo"];function ia(r,t,e,n,i=0){n==="TB"&&t(r,i);const a=e(r);if(a)for(const o of a)ia(o,t,e,n,i+1);n==="BT"&&t(r,i)}function o1(r,t,e){const n=[[r,0]];for(;n.length;){const[i,a]=n.shift();t(i,a);const o=e(i);if(o)for(const s of o)n.push([s,a+1])}}function Gf(r,t,e,n,i="both"){if(t==="combo"||t==="node")return Mc(r,e,n,i);const a=r.getEdgeData(e);if(!a)return[];const o=Mc(r,a.source,n-1,i),s=Mc(r,a.target,n-1,i);return Array.from(new Set([...o,...s,e]))}function Mc(r,t,e,n="both"){const i=new Set,a=new Set,o=new Set;return o1(t,(s,l)=>{l>e||(o.add(s),r.getRelatedEdgesData(s,n).forEach(c=>{const u=St(c);!a.has(u)&&l<e&&(o.add(u),a.add(u))}))},s=>r.getRelatedEdgesData(s,n).map(l=>l.source===s?l.target:l.source).filter(l=>i.has(l)?!1:(i.add(l),!0))),Array.from(o)}function Cc(r){return r.states||[]}var Xo=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class qo extends Qn{constructor(t,e){super(t,Object.assign({},qo.defaultOptions,e)),this.onClickSelect=n=>Xo(this,void 0,void 0,function*(){var i,a;this.validate(n)&&(yield this.updateState(n),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,n))}),this.onClickCanvas=n=>Xo(this,void 0,void 0,function*(){var i,a;this.validate(n)&&(yield this.clearState(),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,n))}),this.shortcut=new ra(t.graph),this.bindEvents()}bindEvents(){const{graph:t}=this.context;this.unbindEvents(),ji.forEach(e=>{t.on(`${e}:${Zt.CLICK}`,this.onClickSelect)}),t.on(Ur.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:t,trigger:e}=this.options;return t&&this.shortcut.match(e)}getNeighborIds(t){const{target:e,targetType:n}=t,{graph:i}=this.context,{degree:a}=this.options;return Gf(i,n,e.id,typeof a=="function"?a(t):a).filter(o=>o!==e.id)}updateState(t){return Xo(this,void 0,void 0,function*(){const{state:e,unselectedState:n,neighborState:i,animation:a}=this.options;if(!e&&!i&&!n)return;const{target:o}=t,{graph:s}=this.context,l=s.getElementData(o.id),c=Cc(l).includes(e)?"unselect":"select",u={},h=this.isMultipleSelect,f=[o.id],d=this.getNeighborIds(t);if(h)if(Object.assign(u,this.getDataStates()),c==="select"){const p=(g,y)=>{g.forEach(m=>{const b=new Set(s.getElementState(m));b.add(y),b.delete(n),u[m]=Array.from(b)})};p(f,e),p(d,i),n&&Object.keys(u).forEach(g=>{const y=u[g];!y.includes(e)&&!y.includes(i)&&!y.includes(n)&&u[g].push(n)})}else{const p=u[o.id];u[o.id]=p.filter(g=>g!==e&&g!==i),p.includes(n)||u[o.id].push(n),d.forEach(g=>{u[g]=u[g].filter(y=>y!==i),u[g].includes(e)||u[g].push(n)})}else if(c==="select"){Object.assign(u,this.getClearStates(!!n));const p=(g,y)=>{g.forEach(m=>{u[m]||(u[m]=s.getElementState(m)),u[m].push(y)})};p(f,e),p(d,i),n&&Object.keys(u).forEach(g=>{!f.includes(g)&&!d.includes(g)&&u[g].push(n)})}else Object.assign(u,this.getClearStates());yield s.setElementState(u,a)})}getDataStates(){const{graph:t}=this.context,{nodes:e,edges:n,combos:i}=t.getData(),a={};return[...e,...n,...i].forEach(o=>{a[St(o)]=Cc(o)}),a}getClearStates(t=!1){const{graph:e}=this.context,{state:n,unselectedState:i,neighborState:a}=this.options,o=new Set([n,i,a]),{nodes:s,edges:l,combos:c}=e.getData(),u={};return[...s,...l,...c].forEach(h=>{const f=Cc(h),d=f.filter(p=>!o.has(p));(t||d.length!==f.length)&&(u[St(h)]=d)}),u}clearState(){return Xo(this,void 0,void 0,function*(){const{graph:t}=this.context;yield t.setElementState(this.getClearStates(),this.options.animation)})}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}unbindEvents(){const{graph:t}=this.context;ji.forEach(e=>{t.off(`${e}:${Zt.CLICK}`,this.onClickSelect)}),t.off(Ur.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}qo.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};function $n(r){var t;return!!(!((t=r.style)===null||t===void 0)&&t.collapsed)}var Un=function(r,t,e){for(var n=0,i=(0,ae.Z)(t)?t.split("."):t;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?e:r},za=function(r,t,e){var n=r,i=(0,ae.Z)(t)?t.split("."):t;return i.forEach(function(a,o){o<i.length-1?((0,Vn.Z)(n[a])||(n[a]=(0,pt.Z)(i[o+1])?[]:{}),n=n[a]):n[a]=e}),r},s1=function(r){var t=kh(r);return t.charAt(0).toLowerCase()+t.substring(1)},l1=s1;function Wa(r,t){if(!r.startsWith(t))return!1;const e=r[t.length];return e>="A"&&e<="Z"}function Vf(r,t){return`${t}${Co(r)}`}function Hf(r,t,e=!0){if(!t||!Wa(r,t))return r;const n=r.slice(t.length);return e?l1(n):n}function dn(r,t){const e=Object.entries(r).reduce((n,[i,a])=>(i==="className"||i==="class"||Wa(i,t)&&Object.assign(n,{[Hf(i,t)]:a}),n),{});if("opacity"in r){const n=Vf("opacity",t),i=r.opacity;if(n in r){const a=r[n];Object.assign(e,{opacity:i*a})}else Object.assign(e,{opacity:i})}return e}function Tc(r,t){const e=t.length;return Object.keys(r).reduce((n,i)=>{if(i.startsWith(t)){const a=i.slice(e);n[a]=r[i]}return n},{})}function Zf(r,t){const e=typeof t=="string"?[t]:t,n={};return Object.keys(r).forEach(i=>{e.find(a=>i.startsWith(a))||(n[i]=r[i])}),n}function ZT(r,t,e){return Object.entries(r).reduce((n,[i,a])=>(Wa(i,t)?n[Vf(Hf(i,t,!1),e)]=a:n[i]=a,n),{})}function tr(r=0){if(typeof r=="number")return[r,r,r];const[t,e=t,n=t]=r;return[t,e,n]}var c1=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};function $f(r,t){const{datum:e,graph:n}=t;return typeof r=="function"?r.call(n,e):Object.fromEntries(Object.entries(r).map(([i,a])=>typeof a=="function"?[i,a.call(n,e)]:[i,a]))}function bn(r,t){const e=(r==null?void 0:r.style)||{},n=(t==null?void 0:t.style)||{};for(const i in e)i in n||(n[i]=e[i]);return Object.assign({},r,t,{style:n})}function u1(r){const{x:t,y:e,z:n,class:i,className:a,transform:o,transformOrigin:s,zIndex:l,visibility:c}=r;return c1(r,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}function h1(r,t){const e=tr(r);let n={};return t.text&&!t.fontSize&&(n={fontSize:Math.min(...e)*.5}),t.src&&(!t.width||!t.height)&&(n={width:e[0]*.5,height:e[1]*.5}),n}function Uf(r){if(r)return typeof r=="string"||typeof r=="function"||Array.isArray(r)?{type:"group",field:t=>t.id,color:r,invert:!1}:r}function f1(r,t){if(!t)return{};const{type:e,color:n,field:i,invert:a}=t,o=l=>{const c=typeof n=="string"?Yr("palette",n):n;if(typeof c=="function"){const u={};return l.forEach(([h,f])=>{u[h]=c(a?1-f:f)}),u}else if(Array.isArray(c)){const u=a?[...c].reverse():c,h={};return l.forEach(([f,d])=>{h[f]=u[d%c.length]}),h}return{}},s=(l,c)=>{var u;return typeof l=="string"?(u=c.data)===null||u===void 0?void 0:u[l]:l==null?void 0:l(c)};if(e==="group"){const l=Ao(r,f=>{if(!i)return"default";const d=s(i,f);return d?String(d):"default"}),c=Object.keys(l),u=o(c.map((f,d)=>[f,d])),h={};return Object.entries(l).forEach(([f,d])=>{d.forEach(p=>{h[St(p)]=u[f]})}),h}else if(e==="value"){const[l,c]=r.reduce(([h,f],d)=>{const p=s(i,d);if(typeof p!="number")throw new Error(Kr(`Palette field ${i} is not a number`));return[Math.min(h,p),Math.max(f,p)]},[1/0,-1/0]),u=c-l;return o(r.map(h=>[h.id,(s(i,h)-l)/u]))}}function Yf(r){const t=typeof r=="string"?Yr("palette",r):r;if(typeof t!="function")return t}function Kf(r,t){let e=2*r;return typeof t=="string"?e=r*Number(t.replace("%",""))/100:typeof t=="number"&&(e=t),isNaN(e)&&(e=2*r),e}function Xf(r,t,e=1,n=!1){const i=n?e:1,a=(r.max[0]-r.min[0])*i;return Kf(a,t)}function d1(r,t,e=1){const n=$e(r[0],r[1])*e;return Kf(n,t)}var p1={}.toString,v1=function(r){return p1.call(r).replace(/^\[object /,"").replace(/]$/,"")},g1=v1,y1=Object.prototype,m1=function(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||y1;return r===e},b1=m1,_1=Object.prototype.hasOwnProperty;function x1(r){if((0,Nt.Z)(r))return!0;if(Ra(r))return!r.length;var t=g1(r);if(t==="Map"||t==="Set")return!r.size;if(b1(r))return!Object.keys(r).length;for(var e in r)if(_1.call(r,e))return!1;return!0}var Wr=x1;class Ga extends x.b_{constructor(t){qf(t.style),super(t),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(t,e,n,i,a){var o,s,l,c,u,h,f,d;const p=this.shapeMap[t];if(n===!1){p&&((o=a==null?void 0:a.beforeDestroy)===null||o===void 0||o.call(a,p),i.removeChild(p),delete this.shapeMap[t],(s=a==null?void 0:a.afterDestroy)===null||s===void 0||s.call(a,p));return}const g=typeof e=="string"?Yr(ea.SHAPE,e):e;if(!g)throw new Error(Kr(`Shape ${e} not found`));if(!p||p.destroyed||!(p instanceof g)){p&&((l=a==null?void 0:a.beforeDestroy)===null||l===void 0||l.call(a,p),p==null||p.destroy(),(c=a==null?void 0:a.afterDestroy)===null||c===void 0||c.call(a,p)),(u=a==null?void 0:a.beforeCreate)===null||u===void 0||u.call(a);const y=new g({className:t,style:n});return i.appendChild(y),this.shapeMap[t]=y,(h=a==null?void 0:a.afterCreate)===null||h===void 0||h.call(a,y),y}return(f=a==null?void 0:a.beforeUpdate)===null||f===void 0||f.call(a,p),cu(p,n),(d=a==null?void 0:a.afterUpdate)===null||d===void 0||d.call(a,p),p}update(t={}){const e=Object.assign({},this.attributes,t);qf(e),C_(this,e),this.render(e,this),this.setVisibility()}bindEvents(){}getGraphicStyle(t){return u1(t)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(t,e){if(t.length===0)return null;const n=[];if(t[0].x!==void 0||t[0].y!==void 0||t[0].z!==void 0){const{x:a=0,y:o=0,z:s=0}=this.attributes;t.forEach(l=>{const{x:c=a,y:u=o,z:h=s}=l;Object.assign(l,{transform:h?[["translate3d",c,u,h]]:[["translate",c,u]]})})}const i=super.animate(t,e);if(i&&(Ac(this,i),n.push(i)),Array.isArray(t)&&t.length>0){const a=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(t[0]).some(o=>!a.includes(o))){Object.entries(this.shapeMap).forEach(([s,l])=>{const c=`get${Co(s)}Style`,u=this[c];if((0,Se.Z)(u)){const h=t.map(d=>u.call(this,Object.assign(Object.assign({},this.attributes),d))),f=l.animate(sc(h),e);f&&(Ac(l,f),n.push(f))}});const o=(s,l)=>{if(!Wr(s)){const c=`get${Co(l)}Style`,u=this[c];if((0,Se.Z)(u)){const h=t.map(f=>u.call(this,Object.assign(Object.assign({},this.attributes),f)));Object.entries(h[0]).map(([f])=>{const d=h.map(g=>g[f]),p=s[f];if(p){const g=p.animate(sc(d),e);g&&(Ac(p,g),n.push(g))}})}}};this.compositeShapes.forEach(([s,l])=>{const c=Tc(this.shapeMap,l);o(c,s)})}}return oc(n)}getShape(t){return this.shapeMap[t]}setVisibility(){const{visibility:t}=this.attributes;Ii(this,t)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function Ac(r,t){t==null||t.finished.then(()=>{const e=r.activeAnimations.findIndex(n=>n===t);e>-1&&r.activeAnimations.splice(e,1)})}function qf(r){if(!r)return{};if("x"in r||"y"in r||"z"in r){const{x:t=0,y:e=0,z:n,transform:i}=r,a=jh(t,e,n,i);a&&(r.transform=a)}return r}var E1=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class di extends Ga{constructor(t){super(bn({style:di.defaultStyleProps},t))}isTextStyle(t){return Wa(t,"label")}isBackgroundStyle(t){return Wa(t,"background")}getTextStyle(t){const e=this.getGraphicStyle(t),{padding:n}=e,i=E1(e,["padding"]);return Zf(i,"background")}getBackgroundStyle(t){if(t.background===!1)return!1;const e=this.getGraphicStyle(t),{wordWrap:n,wordWrapWidth:i,padding:a}=e,o=dn(e,"background"),{min:[s,l],center:[c,u],halfExtents:[h,f]}=this.shapeMap.text.getGeometryBounds(),[d,p,g,y]=xr(a),m=h*2+y+p,{width:b,height:E}=o;b&&E?Object.assign(o,{x:c-Number(b)/2,y:u-Number(E)/2}):Object.assign(o,{x:s-y,y:l-d,width:n?Math.min(m,i+y+p):m,height:f*2+d+g});const{radius:O}=o;if(typeof O=="string"&&O.endsWith("%")){const M=Number(O.replace("%",""))/100;o.radius=Math.min(+o.width,+o.height)*M}return o}render(t=this.parsedAttributes,e=this){this.upsert("text",x.xv,this.getTextStyle(t),e),this.upsert("background",x.UL,this.getBackgroundStyle(t),e)}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}di.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class aa extends Ga{constructor(t){super(bn({style:aa.defaultStyleProps},t))}getBadgeStyle(t){return this.getGraphicStyle(t)}render(t=this.parsedAttributes,e=this){this.upsert("label",di,this.getBadgeStyle(t),e)}getGeometryBounds(){const t=this.getShape("label");return(t.getShape("background")||t.getShape("text")).getGeometryBounds()}}aa.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};function w1(r,t=!0){const e=[];return r.forEach((n,i)=>{e.push([i===0?"M":"L",...n])}),t&&e.push(["Z"]),e}const Qf={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function S1(r){const t=r.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),e=[];let n="",i={};for(;t.length>0;){let a=t.shift();a in Qf?n=a:t.unshift(a),i={type:n},Qf[n].forEach(l=>{a=t.shift(),i[l]=a}),n==="M"?n="L":n==="m"&&(n="l");const[o,...s]=Object.values(i);e.push([o,...s.map(Number)])}return e}function O1(r){const t=[];return(typeof r=="string"?S1(r):r).forEach(n=>{const i=n[0];if(i==="Z"){t.push(t[0]);return}if(i!=="A")for(let a=1;a<n.length;a=a+2)t.push([n[a],n[a+1],0]);else{const a=n.length;t.push([n[a-2],n[a-1],0])}}),t}const Jf=r=>{if(r.length<2)return[["M",0,0],["L",0,0]];const t=r[0],e=r[1],n=r[r.length-1],i=r[r.length-2];r.unshift(i,n),r.push(t,e);const a=[["M",n[0],n[1]]];for(let o=1;o<r.length-2;o+=1){const[s,l]=r[o-1],[c,u]=r[o],[h,f]=r[o+1],[d,p]=o!==r.length-2?r[o+2]:[h,f],g=c+(h-s)/6,y=u+(f-l)/6,m=h-(d-c)/6,b=f-(p-u)/6;a.push(["C",g,y,m,b,h,f])}return a};function M1(r,t,e,n,i,a,o){const[s,l]=Qr(r,t),c={textAlign:t==="left"?"right":t==="right"?"left":"center",textBaseline:t==="top"?"bottom":t==="bottom"?"top":"middle",transform:[["translate",s+e,l+n]]};if(t==="center"||!i)return c;const u=O1(a);if(!u||u.length<=3)return c;const h=u.map((p,g)=>{const y=p,m=u[(g+1)%u.length];return cn(y,m)?null:[y,m]}).filter(Boolean),f=r1([s,l],h),d=Ff([s,l],f);if(d&&f&&(c.transform=[["translate",d[0]+e,d[1]+n]],o)){const p=Math.atan((f[0][1]-f[1][1])/(f[0][0]-f[1][0]));c.transform.push(["rotate",p/Math.PI*180]),c.textAlign="center",(t==="right"||t==="left")&&(p>0?c.textBaseline=t==="right"?"bottom":"top":c.textBaseline=t==="right"?"top":"bottom")}return c}var C1=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class Va extends Ga{constructor(t){super(bn({style:Va.defaultStyleProps},t))}getLabelStyle(t){if(!t.label||!t.d||t.d.length===0)return!1;const e=dn(this.getGraphicStyle(t),"label"),{maxWidth:n,offsetX:i,offsetY:a,autoRotate:o,placement:s,closeToPath:l}=e,c=C1(e,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),u=this.shapeMap.key,h=u==null?void 0:u.getRenderBounds();return Object.assign(M1(h,s,i,a,l,t.d,o),{wordWrapWidth:Xf(h,n)},c)}getKeyStyle(t){return this.getGraphicStyle(t)}render(t,e){this.upsert("key",x.y$,this.getKeyStyle(t),e),this.upsert("label",di,this.getLabelStyle(t),e)}}Va.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function T1(r){const t=[],e=n=>{n!=null&&n.children.length&&n.children.forEach(i=>{t.push(i),e(i)})};return e(r),t}function A1(r){const t=[];let e=r.parentNode;for(;e;)t.push(e),e=e.parentNode;return t}class Pc extends x.Ee{constructor(t){super(t),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},oa=this,this.isMutationObserved=!0,this.addEventListener(x.Dk.MOUNTED,this.onMounted),this.addEventListener(x.Dk.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:t,clipPath:e,width:n=0,height:i=0}=this.attributes;if(t&&n&&i){const[a,o]=this.getBounds().min,s={x:a,y:o,radius:t,width:n,height:i};if(e)Object.assign(this.parsedStyle.clipPath.style,s);else{const l=new x.UL({style:s});this.style.clipPath=l}}else e&&(this.style.clipPath=null)}}const Rc=new WeakMap;let oa=null;const Dc=r=>{if(oa&&A1(oa).includes(r)){const t=Rc.get(r);t?t.includes(oa)||t.push(oa):Rc.set(r,[oa])}},kc=r=>{const t=Rc.get(r);t&&t.forEach(e=>e.handleRadius())};class td extends Ga{constructor(t){super(t)}isImage(){const{src:t}=this.attributes;return!!t}getIconStyle(t=this.attributes){const{width:e=0,height:n=0}=t,i=this.getGraphicStyle(t);return this.isImage()?Object.assign({x:-e/2,y:-n/2},i):Object.assign({textBaseline:"middle",textAlign:"center"},i)}render(t=this.attributes,e=this){this.upsert("icon",this.isImage()?Pc:x.xv,this.getIconStyle(t),e)}}class ed extends Ga{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(t,e){const n=super.animate(t,e);return n&&(n.onframe=()=>this.onframe(),n.finished.then(()=>this.onframe())),n}}var Qo=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class Cr extends ed{constructor(t){super(bn({style:Cr.defaultStyleProps},t)),this.type="node"}getSize(t=this.attributes){const{size:e}=t;return tr(e)}getKeyStyle(t){const e=this.getGraphicStyle(t);return Object.assign(Zf(e,["label","halo","icon","badge","port"]))}getLabelStyle(t){if(t.label===!1||!t.labelText)return!1;const e=dn(this.getGraphicStyle(t),"label"),{placement:n,maxWidth:i,offsetX:a,offsetY:o}=e,s=Qo(e,["placement","maxWidth","offsetX","offsetY"]),l=this.getShape("key").getLocalBounds();return Object.assign(mp(l,n,a,o),{wordWrapWidth:Xf(l,i)},s)}getHaloStyle(t){if(t.halo===!1)return!1;const e=this.getKeyStyle(t),{fill:n}=e,i=Qo(e,["fill"]),a=dn(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign(Object.assign({},i),{stroke:n}),a)}getIconStyle(t){if(t.icon===!1||!t.iconText&&!t.iconSrc)return!1;const e=dn(this.getGraphicStyle(t),"icon");return Object.assign(h1(t.size,e),e)}getBadgesStyle(t){var e;const n=Tc(this.shapeMap,"badge-"),i={};if(Object.keys(n).forEach(h=>{i[h]=!1}),t.badge===!1||!(!((e=t.badges)===null||e===void 0)&&e.length))return i;const{badges:a=[],badgePalette:o,opacity:s=1}=t,l=Qo(t,["badges","badgePalette","opacity"]),c=Yf(o),u=dn(this.getGraphicStyle(l),"badge");return a.forEach((h,f)=>{i[f]=Object.assign(Object.assign({backgroundFill:c?c[f%(c==null?void 0:c.length)]:void 0,opacity:s},u),this.getBadgeStyle(h))}),i}getBadgeStyle(t){const e=this.getShape("key"),{placement:n="top",offsetX:i,offsetY:a}=t,o=Qo(t,["placement","offsetX","offsetY"]),s=mp(e.getLocalBounds(),n,i,a,!0);return Object.assign(Object.assign({},s),o)}getPortsStyle(t){var e;const n=this.getPorts(),i={};if(Object.keys(n).forEach(s=>{i[s]=!1}),t.port===!1||!(!((e=t.ports)===null||e===void 0)&&e.length))return i;const a=dn(this.getGraphicStyle(t),"port"),{ports:o=[]}=t;return o.forEach((s,l)=>{const c=s.key||l,u=Object.assign(Object.assign({},a),s);if(vp(u))i[c]=!1;else{const[h,f]=this.getPortXY(t,s);i[c]=Object.assign({transform:[["translate",h,f]]},u)}}),i}getPortXY(t,e){const{placement:n="left"}=e,i=this.getShape("key");return ou(P1(this.context,i),n)}getPorts(){return Tc(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(t,e=!1){const n=this.getShape("key").getBounds();return e1(t,n,e)}drawHaloShape(t,e){const n=this.getHaloStyle(t),i=this.getShape("key");this.upsert("halo",i.constructor,n,e)}drawIconShape(t,e){const n=this.getIconStyle(t);this.upsert("icon",td,n,e),Dc(this)}drawBadgeShapes(t,e){const n=this.getBadgesStyle(t);Object.keys(n).forEach(i=>{const a=n[i];this.upsert(`badge-${i}`,aa,a,e)})}drawPortShapes(t,e){const n=this.getPortsStyle(t);Object.keys(n).forEach(i=>{const a=n[i],o=`port-${i}`;this.upsert(o,x.Cd,a,e)})}drawLabelShape(t,e){const n=this.getLabelStyle(t);this.upsert("label",di,n,e)}_drawKeyShape(t,e){return this.drawKeyShape(t,e)}render(t=this.parsedAttributes,e=this){this._drawKeyShape(t,e),this.getShape("key")&&(this.drawHaloShape(t,e),this.drawIconShape(t,e),this.drawBadgeShapes(t,e),this.drawLabelShape(t,e),this.drawPortShapes(t,e))}update(t){super.update(t),t&&("x"in t||"y"in t||"z"in t)&&kc(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}Cr.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};function P1(r,t){if(!r)return t.getLocalBounds();const e=r.canvas.getLayer(),n=t.cloneNode();Ii(n,"hidden"),e.appendChild(n);const i=n.getLocalBounds();return n.destroy(),i}class Bi extends Cr{constructor(t){super(bn({style:Bi.defaultStyleProps},t))}drawKeyShape(t,e){return this.upsert("key",x.Cd,this.getKeyStyle(t),e)}getKeyStyle(t){const e=super.getKeyStyle(t);return Object.assign(Object.assign({},e),{r:Math.min(...this.getSize(t))/2})}getIconStyle(t){const e=super.getIconStyle(t),{r:n}=this.getShape("key").attributes,i=n*2*Jr;return e?Object.assign({width:i,height:i},e):!1}getIntersectPoint(t,e=!1){const n=this.getShape("key").getBounds();return Yo(t,n,e)}}Bi.defaultStyleProps={size:32};class Jo extends Cr{constructor(t){super(t)}get parsedAttributes(){return this.attributes}drawKeyShape(t,e){return this.upsert("key",x.mg,this.getKeyStyle(t),e)}getKeyStyle(t){const e=super.getKeyStyle(t);return Object.assign(Object.assign({},e),{points:this.getPoints(t)})}getIntersectPoint(t,e=!1){var n,i;const{points:a}=this.getShape("key").attributes,o=[+(((n=this.attributes)===null||n===void 0?void 0:n.x)||0),+(((i=this.attributes)===null||i===void 0?void 0:i.y)||0)];return Bf(t,o,a,!0,e).point}}class R1 extends Jo{constructor(t){super(t)}getPoints(t){const[e,n]=this.getSize(t);return O_(e,n)}}var D1=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class ts extends Bi{constructor(t){super(bn({style:ts.defaultStyleProps},t))}parseOuterR(){const{size:t}=this.parsedAttributes;return Math.min(...tr(t))/2}parseInnerR(){const{innerR:t}=this.parsedAttributes;return(0,ae.Z)(t)?parseInt(t)/100*this.parseOuterR():t}drawDonutShape(t,e){const{donuts:n}=t;if(!(n!=null&&n.length))return;const i=n.map(h=>(0,pt.Z)(h)?{value:h}:h),a=dn(this.getGraphicStyle(t),"donut"),o=Yf(t.donutPalette);if(!o)return;const s=i.reduce((h,f)=>{var d;return h+((d=f.value)!==null&&d!==void 0?d:0)},0),l=this.parseOuterR(),c=this.parseInnerR();let u=0;i.forEach((h,f)=>{const{value:d=0,color:p=o[f%o.length]}=h,g=D1(h,["value","color"]),y=(s===0?1/i.length:d/s)*360;this.upsert(`round${f}`,x.y$,Object.assign(Object.assign(Object.assign({},a),{d:I1(l,c,u,u+y),fill:p}),g),e),u+=y})}render(t,e=this){super.render(t,e),this.drawDonutShape(t,e)}}ts.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const es=(r,t,e,n)=>[r+Math.sin(n)*e,t-Math.cos(n)*e],k1=(r,t,e,n)=>n<=0||e<=n?[["M",r-e,t],["A",e,e,0,1,1,r+e,t],["A",e,e,0,1,1,r-e,t],["Z"]]:[["M",r-e,t],["A",e,e,0,1,1,r+e,t],["A",e,e,0,1,1,r-e,t],["Z"],["M",r+n,t],["A",n,n,0,1,0,r-n,t],["A",n,n,0,1,0,r+n,t],["Z"]],L1=(r,t,e,n,i,a)=>{const[o,s]=[i/360*2*Math.PI,a/360*2*Math.PI],l=[es(r,t,n,o),es(r,t,e,o),es(r,t,e,s),es(r,t,n,s)],c=s-o>Math.PI?1:0;return[["M",l[0][0],l[0][1]],["L",l[1][0],l[1][1]],["A",e,e,0,c,1,l[2][0],l[2][1]],["L",l[3][0],l[3][1]],["A",n,n,0,c,0,l[0][0],l[0][1]],["Z"]]},I1=(r=0,t=0,e,n)=>{const[i,a]=[0,0];return Math.abs(e-n)%360<1e-6?k1(i,a,r,t):L1(i,a,r,t,e,n)};class ns extends Cr{constructor(t){super(bn({style:ns.defaultStyleProps},t))}drawKeyShape(t,e){return this.upsert("key",x.Pj,this.getKeyStyle(t),e)}getKeyStyle(t){const e=super.getKeyStyle(t),[n,i]=this.getSize(t);return Object.assign(Object.assign({},e),{rx:n/2,ry:i/2})}getIconStyle(t){const e=super.getIconStyle(t),{rx:n,ry:i}=this.getShape("key").attributes,a=Math.min(+n,+i)*2*Jr;return e?Object.assign({width:a,height:a},e):!1}getIntersectPoint(t,e=!1){const n=this.getShape("key").getBounds();return Yo(t,n,e)}}ns.defaultStyleProps={size:[45,35]};class N1 extends Jo{constructor(t){super(t)}getOuterR(t){return t.outerR||Math.min(...this.getSize(t))/2}getPoints(t){return T_(this.getOuterR(t))}getIconStyle(t){const e=super.getIconStyle(t),n=this.getOuterR(t)*Jr;return e?Object.assign({width:n,height:n},e):!1}}function pi(r){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pi(r)}function j1(r,t){if(pi(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(pi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function B1(r){var t=j1(r,"string");return pi(t)=="symbol"?t:t+""}function nd(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,B1(n.key),n)}}function Lc(r,t,e){return t&&nd(r.prototype,t),e&&nd(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ic(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function rs(r){return rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rs(r)}function rd(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(rd=function(){return!!r})()}function F1(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function z1(r,t){if(t&&(pi(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F1(r)}function id(r,t,e){return t=rs(t),z1(r,rd()?Reflect.construct(t,e||[],rs(r).constructor):t.apply(r,e))}function Nc(r,t){return Nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Nc(r,t)}function ad(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Nc(r,t)}function sa(r){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sa(r)}function W1(r,t){if(sa(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(sa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function od(r){var t=W1(r,"string");return sa(t)=="symbol"?t:t+""}function er(r,t,e){return(t=od(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function G1(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function sd(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,od(n.key),n)}}function V1(r,t,e){return t&&sd(r.prototype,t),e&&sd(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function is(r){return is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},is(r)}function ld(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ld=function(){return!!r})()}function H1(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Z1(r,t){if(t&&(sa(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H1(r)}function $1(r,t,e){return t=is(t),Z1(r,ld()?Reflect.construct(t,e||[],is(r).constructor):t.apply(r,e))}function jc(r,t){return jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},jc(r,t)}function U1(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&jc(r,t)}function Y1(r){if(Array.isArray(r))return r}function K1(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(e=e.call(r)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function cd(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function X1(r,t){if(r){if(typeof r=="string")return cd(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?cd(r,t):void 0}}function q1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ha(r,t){return Y1(r)||K1(r,t)||X1(r,t)||q1()}function Q1(r,t){var e=t.cx,n=e===void 0?0:e,i=t.cy,a=i===void 0?0:i,o=t.r;r.arc(n,a,o,0,Math.PI*2,!1)}function J1(r,t){var e=t.cx,n=e===void 0?0:e,i=t.cy,a=i===void 0?0:i,o=t.rx,s=t.ry;if(r.ellipse)r.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,c=o>s?1:o/s,u=o>s?s/o:1;r.save(),r.scale(c,u),r.arc(n,a,l,0,Math.PI*2)}}function tb(r,t){var e=t.x1,n=t.y1,i=t.x2,a=t.y2,o=t.markerStart,s=t.markerEnd,l=t.markerStartOffset,c=t.markerEndOffset,u=0,h=0,f=0,d=0,p=0,g,y;o&&(0,x.RV)(o)&&l&&(g=i-e,y=a-n,p=Math.atan2(y,g),u=Math.cos(p)*(l||0),h=Math.sin(p)*(l||0)),s&&(0,x.RV)(s)&&c&&(g=e-i,y=n-a,p=Math.atan2(y,g),f=Math.cos(p)*(c||0),d=Math.sin(p)*(c||0)),r.moveTo(e+u,n+h),r.lineTo(i+f,a+d)}function eb(r,t){var e=t.markerStart,n=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.d,s=o.absolutePath,l=o.segments,c=0,u=0,h=0,f=0,d=0,p,g;if(e&&(0,x.RV)(e)&&i){var y=e.parentNode.getStartTangent(),m=Ha(y,2),b=m[0],E=m[1];p=b[0]-E[0],g=b[1]-E[1],d=Math.atan2(g,p),c=Math.cos(d)*(i||0),u=Math.sin(d)*(i||0)}if(n&&(0,x.RV)(n)&&a){var O=n.parentNode.getEndTangent(),M=Ha(O,2),k=M[0],D=M[1];p=k[0]-D[0],g=k[1]-D[1],d=Math.atan2(g,p),h=Math.cos(d)*(a||0),f=Math.sin(d)*(a||0)}for(var N=0;N<s.length;N++){var rt=s[N],C=rt[0],S=s[N+1],A=N===0&&(c!==0||u!==0),j=(N===s.length-1||S&&(S[0]==="M"||S[0]==="Z"))&&h!==0&&f!==0,Y=A?[c,u]:[0,0],ot=Ha(Y,2),Lt=ot[0],Xt=ot[1],wt=j?[h,f]:[0,0],Ct=Ha(wt,2),$t=Ct[0],ie=Ct[1];switch(C){case"M":r.moveTo(rt[1]+Lt,rt[2]+Xt);break;case"L":r.lineTo(rt[1]+$t,rt[2]+ie);break;case"Q":r.quadraticCurveTo(rt[1],rt[2],rt[3]+$t,rt[4]+ie);break;case"C":r.bezierCurveTo(rt[1],rt[2],rt[3],rt[4],rt[5]+$t,rt[6]+ie);break;case"A":{var ye=l[N].arcParams,ve=ye.cx,Ee=ye.cy,Oe=ye.rx,Le=ye.ry,an=ye.startAngle,He=ye.endAngle,qe=ye.xRotation,Qe=ye.sweepFlag;if(r.ellipse)r.ellipse(ve,Ee,Oe,Le,qe,an,He,!!(1-Qe));else{var mr=Oe>Le?Oe:Le,Ie=Oe>Le?1:Oe/Le,kr=Oe>Le?Le/Oe:1;r.translate(ve,Ee),r.rotate(qe),r.scale(Ie,kr),r.arc(0,0,mr,an,He,!!(1-Qe)),r.scale(1/Ie,1/kr),r.rotate(-qe),r.translate(-ve,-Ee)}j&&r.lineTo(rt[6]+h,rt[7]+f);break}case"Z":r.closePath();break}}}function nb(r,t){var e=t.markerStart,n=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.points.points,s=o.length,l=o[0][0],c=o[0][1],u=o[s-1][0],h=o[s-1][1],f=0,d=0,p=0,g=0,y=0,m,b;e&&(0,x.RV)(e)&&i&&(m=o[1][0]-o[0][0],b=o[1][1]-o[0][1],y=Math.atan2(b,m),f=Math.cos(y)*(i||0),d=Math.sin(y)*(i||0)),n&&(0,x.RV)(n)&&a&&(m=o[s-1][0]-o[0][0],b=o[s-1][1]-o[0][1],y=Math.atan2(b,m),p=Math.cos(y)*(a||0),g=Math.sin(y)*(a||0)),r.moveTo(l+(f||p),c+(d||g));for(var E=1;E<s-1;E++){var O=o[E];r.lineTo(O[0],O[1])}r.lineTo(u,h)}function rb(r,t){var e=t.markerStart,n=t.markerEnd,i=t.markerStartOffset,a=t.markerEndOffset,o=t.points.points,s=o.length,l=o[0][0],c=o[0][1],u=o[s-1][0],h=o[s-1][1],f=0,d=0,p=0,g=0,y=0,m,b;e&&(0,x.RV)(e)&&i&&(m=o[1][0]-o[0][0],b=o[1][1]-o[0][1],y=Math.atan2(b,m),f=Math.cos(y)*(i||0),d=Math.sin(y)*(i||0)),n&&(0,x.RV)(n)&&a&&(m=o[s-2][0]-o[s-1][0],b=o[s-2][1]-o[s-1][1],y=Math.atan2(b,m),p=Math.cos(y)*(a||0),g=Math.sin(y)*(a||0)),r.moveTo(l+f,c+d);for(var E=1;E<s-1;E++){var O=o[E];r.lineTo(O[0],O[1])}r.lineTo(u+p,h+g)}function ib(r,t){var e=t.x,n=e===void 0?0:e,i=t.y,a=i===void 0?0:i,o=t.radius,s=t.width,l=t.height,c=s,u=l,h=o&&o.some(function(M){return M!==0});if(!h)r.rect(n,a,c,u);else{var f=s>0?1:-1,d=l>0?1:-1,p=f+d===0,g=o.map(function(M){return(0,ue.Z)(M,0,Math.min(Math.abs(c)/2,Math.abs(u)/2))}),y=Ha(g,4),m=y[0],b=y[1],E=y[2],O=y[3];r.moveTo(f*m+n,a),r.lineTo(c-f*b+n,a),b!==0&&r.arc(c-f*b+n,d*b+a,b,-d*Math.PI/2,f>0?0:Math.PI,p),r.lineTo(c+n,u-d*E+a),E!==0&&r.arc(c-f*E+n,u-d*E+a,E,f>0?0:Math.PI,d>0?Math.PI/2:1.5*Math.PI,p),r.lineTo(f*O+n,u+a),O!==0&&r.arc(f*O+n,u-d*O+a,O,d>0?Math.PI/2:-Math.PI/2,f>0?Math.PI:0,p),r.lineTo(n,d*m+a),m!==0&&r.arc(f*m+n,d*m+a,m,f>0?Math.PI:0,d>0?Math.PI*1.5:Math.PI/2,p)}}var ab=function(r){function t(){var e;G1(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=$1(this,t,[].concat(i)),e.name="canvas-path-generator",e}return U1(t,r),V1(t,[{key:"init",value:function(){var n,i=(n={},er(er(er(er(er(er(er(er(er(er(n,x.bn.CIRCLE,Q1),x.bn.ELLIPSE,J1),x.bn.RECT,ib),x.bn.LINE,tb),x.bn.POLYLINE,rb),x.bn.POLYGON,nb),x.bn.PATH,eb),x.bn.TEXT,void 0),x.bn.GROUP,void 0),x.bn.IMAGE,void 0),er(er(er(n,x.bn.HTML,void 0),x.bn.MESH,void 0),x.bn.FRAGMENT,void 0));this.context.pathGeneratorFactory=i}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(x.F6);function vi(r){"@babel/helpers - typeof";return vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vi(r)}function ob(r,t){if(vi(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(vi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function ud(r){var t=ob(r,"string");return vi(t)=="symbol"?t:t+""}function nr(r,t,e){return(t=ud(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function hd(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function fd(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ud(n.key),n)}}function dd(r,t,e){return t&&fd(r.prototype,t),e&&fd(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function as(r){return as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},as(r)}function pd(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(pd=function(){return!!r})()}function sb(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function lb(r,t){if(t&&(vi(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sb(r)}function cb(r,t,e){return t=as(t),lb(r,pd()?Reflect.construct(t,e||[],as(r).constructor):t.apply(r,e))}function Bc(r,t){return Bc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Bc(r,t)}function ub(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Bc(r,t)}function vd(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function gd(r,t){if(r){if(typeof r=="string")return vd(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?vd(r,t):void 0}}function hb(r,t){var e=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=gd(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){e=e.call(r)},n:function(){var c=e.next();return o=c.done,c},e:function(c){s=!0,a=c},f:function(){try{o||e.return==null||e.return()}finally{if(s)throw a}}}}function Fc(){"use strict";Fc=function(){return t};var r,t={},e=Object.prototype,n=e.hasOwnProperty,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(C,S,A,j){return Object.defineProperty(C,S,{value:A,enumerable:!j,configurable:!j,writable:!j})}try{l({},"")}catch(C){l=function(A,j,Y){return A[j]=Y}}function c(C,S,A,j){var Y=S&&S.prototype instanceof f?S:f,ot=Object.create(Y.prototype);return l(ot,"_invoke",function(Lt,Xt,wt){var Ct=1;return function($t,ie){if(Ct===3)throw Error("Generator is already running");if(Ct===4){if($t==="throw")throw ie;return{value:r,done:!0}}for(wt.method=$t,wt.arg=ie;;){var ye=wt.delegate;if(ye){var ve=M(ye,wt);if(ve){if(ve===h)continue;return ve}}if(wt.method==="next")wt.sent=wt._sent=wt.arg;else if(wt.method==="throw"){if(Ct===1)throw Ct=4,wt.arg;wt.dispatchException(wt.arg)}else wt.method==="return"&&wt.abrupt("return",wt.arg);Ct=3;var Ee=u(Lt,Xt,wt);if(Ee.type==="normal"){if(Ct=wt.done?4:2,Ee.arg===h)continue;return{value:Ee.arg,done:wt.done}}Ee.type==="throw"&&(Ct=4,wt.method="throw",wt.arg=Ee.arg)}}}(C,A,new N(j||[])),!0),ot}function u(C,S,A){try{return{type:"normal",arg:C.call(S,A)}}catch(j){return{type:"throw",arg:j}}}t.wrap=c;var h={};function f(){}function d(){}function p(){}var g={};l(g,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(rt([])));m&&m!==e&&n.call(m,a)&&(g=m);var b=p.prototype=f.prototype=Object.create(g);function E(C){["next","throw","return"].forEach(function(S){l(C,S,function(A){return this._invoke(S,A)})})}function O(C,S){function A(Y,ot,Lt,Xt){var wt=u(C[Y],C,ot);if(wt.type!=="throw"){var Ct=wt.arg,$t=Ct.value;return $t&&vi($t)=="object"&&n.call($t,"__await")?S.resolve($t.__await).then(function(ie){A("next",ie,Lt,Xt)},function(ie){A("throw",ie,Lt,Xt)}):S.resolve($t).then(function(ie){Ct.value=ie,Lt(Ct)},function(ie){return A("throw",ie,Lt,Xt)})}Xt(wt.arg)}var j;l(this,"_invoke",function(Y,ot){function Lt(){return new S(function(Xt,wt){A(Y,ot,Xt,wt)})}return j=j?j.then(Lt,Lt):Lt()},!0)}function M(C,S){var A=S.method,j=C.i[A];if(j===r)return S.delegate=null,A==="throw"&&C.i.return&&(S.method="return",S.arg=r,M(C,S),S.method==="throw")||A!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+A+"' method")),h;var Y=u(j,C.i,S.arg);if(Y.type==="throw")return S.method="throw",S.arg=Y.arg,S.delegate=null,h;var ot=Y.arg;return ot?ot.done?(S[C.r]=ot.value,S.next=C.n,S.method!=="return"&&(S.method="next",S.arg=r),S.delegate=null,h):ot:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,h)}function k(C){this.tryEntries.push(C)}function D(C){var S=C[4]||{};S.type="normal",S.arg=r,C[4]=S}function N(C){this.tryEntries=[[-1]],C.forEach(k,this),this.reset(!0)}function rt(C){if(C!=null){var S=C[a];if(S)return S.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var A=-1,j=function Y(){for(;++A<C.length;)if(n.call(C,A))return Y.value=C[A],Y.done=!1,Y;return Y.value=r,Y.done=!0,Y};return j.next=j}}throw new TypeError(vi(C)+" is not iterable")}return d.prototype=p,l(b,"constructor",p),l(p,"constructor",d),d.displayName=l(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(C){var S=typeof C=="function"&&C.constructor;return!!S&&(S===d||(S.displayName||S.name)==="GeneratorFunction")},t.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,p):(C.__proto__=p,l(C,s,"GeneratorFunction")),C.prototype=Object.create(b),C},t.awrap=function(C){return{__await:C}},E(O.prototype),l(O.prototype,o,function(){return this}),t.AsyncIterator=O,t.async=function(C,S,A,j,Y){Y===void 0&&(Y=Promise);var ot=new O(c(C,S,A,j),Y);return t.isGeneratorFunction(S)?ot:ot.next().then(function(Lt){return Lt.done?Lt.value:ot.next()})},E(b),l(b,s,"Generator"),l(b,a,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),t.keys=function(C){var S=Object(C),A=[];for(var j in S)A.unshift(j);return function Y(){for(;A.length;)if((j=A.pop())in S)return Y.value=j,Y.done=!1,Y;return Y.done=!0,Y}},t.values=rt,N.prototype={constructor:N,reset:function(S){if(this.prev=this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!S)for(var A in this)A.charAt(0)==="t"&&n.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=r)},stop:function(){this.done=!0;var S=this.tryEntries[0][4];if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var A=this;function j($t){Lt.type="throw",Lt.arg=S,A.next=$t}for(var Y=A.tryEntries.length-1;Y>=0;--Y){var ot=this.tryEntries[Y],Lt=ot[4],Xt=this.prev,wt=ot[1],Ct=ot[2];if(ot[0]===-1)return j("end"),!1;if(!wt&&!Ct)throw Error("try statement without catch or finally");if(ot[0]!=null&&ot[0]<=Xt){if(Xt<wt)return this.method="next",this.arg=r,j(wt),!0;if(Xt<Ct)return j(Ct),!1}}},abrupt:function(S,A){for(var j=this.tryEntries.length-1;j>=0;--j){var Y=this.tryEntries[j];if(Y[0]>-1&&Y[0]<=this.prev&&this.prev<Y[2]){var ot=Y;break}}ot&&(S==="break"||S==="continue")&&ot[0]<=A&&A<=ot[2]&&(ot=null);var Lt=ot?ot[4]:{};return Lt.type=S,Lt.arg=A,ot?(this.method="next",this.next=ot[2],h):this.complete(Lt)},complete:function(S,A){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&A&&(this.next=A),h},finish:function(S){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j[2]===S)return this.complete(j[4],j[3]),D(j),h}},catch:function(S){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j[0]===S){var Y=j[4];if(Y.type==="throw"){var ot=Y.arg;D(j)}return ot}}throw Error("illegal catch attempt")},delegateYield:function(S,A,j){return this.delegate={i:rt(S),r:A,n:j},this.method==="next"&&(this.arg=r),h}},t}function yd(r,t,e,n,i,a,o){try{var s=r[a](o),l=s.value}catch(c){return void e(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function fb(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var a=r.apply(t,e);function o(l){yd(a,n,i,o,s,"next",l)}function s(l){yd(a,n,i,o,s,"throw",l)}o(void 0)})}}function db(r){if(Array.isArray(r))return r}function pb(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(e=e.call(r)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function vb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gi(r,t){return db(r)||pb(r,t)||gd(r,t)||vb()}var la=G(44173),gb=G(74873);function md(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function bd(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?md(Object(e),!0).forEach(function(n){nr(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):md(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var yb=st.Ue(),mb=st.Ue(),bb=st.Ue(),_b=vt.create(),_d=function(){function r(){var t=this;hd(this,r),this.isHit=function(e,n,i,a){var o=t.context.pointInPathPickerFactory[e.nodeName];if(o){var s=vt.invert(_b,i),l=st.fF(mb,st.t8(bb,n[0],n[1],0),s);if(o(e,new x.E9(l[0],l[1]),a,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(e,n){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),a=t.context.pathGeneratorFactory[e.nodeName];return a&&(i.beginPath(),a(i,e.parsedStyle),i.closePath()),i.isPointInPath(n.x,n.y)}}return dd(r,[{key:"apply",value:function(e,n){var i,a=this,o=e.renderingService,s=e.renderingContext;this.context=e,this.runtime=n;var l=(i=s.root)===null||i===void 0?void 0:i.ownerDocument;o.hooks.pick.tapPromise(r.tag,function(){var c=fb(Fc().mark(function u(h){return Fc().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",a.pick(l,h));case 1:case"end":return d.stop()}},u)}));return function(u){return c.apply(this,arguments)}}()),o.hooks.pickSync.tap(r.tag,function(c){return a.pick(l,c)})}},{key:"pick",value:function(e,n){var i=n.topmost,a=n.position,o=a.x,s=a.y,l=st.t8(yb,o,s,0),c=e.elementsFromBBox(l[0],l[1],l[0],l[1]),u=[],h=hb(c),f;try{for(h.s();!(f=h.n()).done;){var d=f.value,p=d.getWorldTransform(),g=this.isHit(d,l,p,!1);if(g){var y=(0,x.Oi)(d);if(y){var m=y.parsedStyle.clipPath,b=this.isHit(m,l,m.getWorldTransform(),!0);if(b){if(i)return n.picked=[d],n;u.push(d)}}else{if(i)return n.picked=[d],n;u.push(d)}}}}catch(E){h.e(E)}finally{h.f()}return n.picked=u,n}}])}();_d.tag="CanvasPicker";function xb(r,t,e){var n=r.parsedStyle,i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.r,c=n.fill,u=n.stroke,h=n.lineWidth,f=h===void 0?1:h,d=n.increasedLineWidthForHitTesting,p=d===void 0?0:d,g=n.pointerEvents,y=g===void 0?"auto":g,m=(f+p)/2,b=(0,la.TE)(a,s,t.x,t.y),E=(0,x.L1)(y,c,u),O=gi(E,2),M=O[0],k=O[1];return M&&k||e?b<=l+m:M?b<=l:k?b>=l-m&&b<=l+m:!1}function os(r,t,e,n){return r/(e*e)+t/(n*n)}function Eb(r,t,e){var n=r.parsedStyle,i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.rx,c=n.ry,u=n.fill,h=n.stroke,f=n.lineWidth,d=f===void 0?1:f,p=n.increasedLineWidthForHitTesting,g=p===void 0?0:p,y=n.pointerEvents,m=y===void 0?"auto":y,b=t.x,E=t.y,O=(0,x.L1)(m,u,h),M=gi(O,2),k=M[0],D=M[1],N=(d+g)/2,rt=(b-a)*(b-a),C=(E-s)*(E-s);return k&&D||e?os(rt,C,l+N,c+N)<=1:k?os(rt,C,l,c)<=1:D?os(rt,C,l-N,c-N)>=1&&os(rt,C,l+N,c+N)<=1:!1}function Fi(r,t,e,n,i,a){return i>=r&&i<=r+e&&a>=t&&a<=t+n}function wb(r,t,e,n,i,a,o){var s=i/2;return Fi(r-s,t-s,e,i,a,o)||Fi(r+e-s,t-s,i,n,a,o)||Fi(r+s,t+n-s,e,i,a,o)||Fi(r-s,t+s,i,n,a,o)}function ss(r,t,e,n,i,a,o,s){var l=(Math.atan2(s-t,o-r)+Math.PI*2)%(Math.PI*2),c={x:r+e*Math.cos(l),y:t+e*Math.sin(l)};return(0,la.TE)(c.x,c.y,o,s)<=a/2}function yi(r,t,e,n,i,a,o){var s=Math.min(r,e),l=Math.max(r,e),c=Math.min(t,n),u=Math.max(t,n),h=i/2;return a>=s-h&&a<=l+h&&o>=c-h&&o<=u+h?(0,la._x)(r,t,e,n,a,o)<=i/2:!1}function xd(r,t,e,n,i){var a=r.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=r[o][0],l=r[o][1],c=r[o+1][0],u=r[o+1][1];if(yi(s,l,c,u,t,e,n))return!0}if(i){var h=r[0],f=r[a-1];if(yi(h[0],h[1],f[0],f[1],t,e,n))return!0}return!1}var Sb=1e-6;function zc(r){return Math.abs(r)<Sb?0:r<0?-1:1}function Ob(r,t,e){return(e[0]-r[0])*(t[1]-r[1])===(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}function Ed(r,t,e){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(Ob(o,s,[t,e]))return!0;zc(o[1]-e)>0!=zc(s[1]-e)>0&&zc(t-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function wd(r,t,e){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=Ed(a,t,e),n)break}return n}function Mb(r,t,e){var n=r.parsedStyle,i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.lineWidth,c=l===void 0?1:l,u=n.increasedLineWidthForHitTesting,h=u===void 0?0:u,f=n.pointerEvents,d=f===void 0?"auto":f,p=n.fill,g=n.stroke,y=(0,x.L1)(d,p,g),m=gi(y,2),b=m[1];return!b&&!e||!c?!1:yi(i,a,o,s,c+h,t.x,t.y)}function Cb(r,t,e,n,i){for(var a=!1,o=t/2,s=0;s<r.length;s++){var l=r[s],c=l.currentPoint,u=l.params,h=l.prePoint,f=l.box;if(!(f&&!Fi(f.x-o,f.y-o,f.width+t,f.height+t,e,n)))switch(l.command){case"L":case"Z":if(a=yi(h[0],h[1],c[0],c[1],t,e,n),a)return!0;break;case"Q":var d=(0,la.Y1)(h[0],h[1],u[1],u[2],u[3],u[4],e,n);if(a=d<=t/2,a)return!0;break;case"C":var p=(0,la.ph)(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],e,n,i);if(a=p<=t/2,a)return!0;break;case"A":l.cubicParams||(l.cubicParams=(0,gb.W)(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0));for(var g=l.cubicParams,y=h,m=0;m<g.length;m+=6){var b=(0,la.ph)(y[0],y[1],g[m],g[m+1],g[m+2],g[m+3],g[m+4],g[m+5],e,n,i);if(y=[g[m+4],g[m+5]],a=b<=t/2,a)return!0}break}}return a}function Tb(r,t,e,n,i,a){var o=r.parsedStyle,s=o.lineWidth,l=s===void 0?1:s,c=o.increasedLineWidthForHitTesting,u=c===void 0?0:c,h=o.stroke,f=o.fill,d=o.d,p=o.pointerEvents,g=p===void 0?"auto":p,y=d.segments,m=d.hasArc,b=d.polylines,E=d.polygons,O=(0,x.L1)(g,(E==null?void 0:E.length)&&f,h),M=gi(O,2),k=M[0],D=M[1],N=(0,x.gz)(r),rt=!1;return k||e?(m?rt=n(r,t):rt=wd(E,t.x,t.y)||wd(b,t.x,t.y),rt):((D||e)&&(rt=Cb(y,l+u,t.x,t.y,N)),rt)}function Ab(r,t,e){var n=r.parsedStyle,i=n.stroke,a=n.fill,o=n.lineWidth,s=o===void 0?1:o,l=n.increasedLineWidthForHitTesting,c=l===void 0?0:l,u=n.points,h=n.pointerEvents,f=h===void 0?"auto":h,d=(0,x.L1)(f,a,i),p=gi(d,2),g=p[0],y=p[1],m=!1;return(y||e)&&(m=xd(u.points,s+c,t.x,t.y,!0)),!m&&(g||e)&&(m=Ed(u.points,t.x,t.y)),m}function Pb(r,t,e){var n=r.parsedStyle,i=n.lineWidth,a=i===void 0?1:i,o=n.increasedLineWidthForHitTesting,s=o===void 0?0:o,l=n.points,c=n.pointerEvents,u=c===void 0?"auto":c,h=n.fill,f=n.stroke,d=(0,x.L1)(u,h,f),p=gi(d,2),g=p[1];return!g&&!e||!a?!1:xd(l.points,a+s,t.x,t.y,!1)}function Rb(r,t,e,n,i){var a=r.parsedStyle,o=a.radius,s=a.fill,l=a.stroke,c=a.lineWidth,u=c===void 0?1:c,h=a.increasedLineWidthForHitTesting,f=h===void 0?0:h,d=a.x,p=d===void 0?0:d,g=a.y,y=g===void 0?0:g,m=a.width,b=a.height,E=a.pointerEvents,O=E===void 0?"auto":E,M=(0,x.L1)(O,s,l),k=gi(M,2),D=k[0],N=k[1],rt=o&&o.some(function(j){return j!==0}),C=u+f;if(rt){var A=!1;return(N||e)&&(A=Db(p,y,m,b,o.map(function(j){return(0,ue.Z)(j,0,Math.min(Math.abs(m)/2,Math.abs(b)/2))}),C,t.x,t.y)),!A&&(D||e)&&(A=n(r,t)),A}else{var S=C/2;if(D&&N||e)return Fi(p-S,y-S,m+S,b+S,t.x,t.y);if(D)return Fi(p,y,m,b,t.x,t.y);if(N)return wb(p,y,m,b,C,t.x,t.y)}return!1}function Db(r,t,e,n,i,a,o,s){var l=gi(i,4),c=l[0],u=l[1],h=l[2],f=l[3];return yi(r+c,t,r+e-u,t,a,o,s)||yi(r+e,t+u,r+e,t+n-h,a,o,s)||yi(r+e-h,t+n,r+f,t+n,a,o,s)||yi(r,t+n-f,r,t+c,a,o,s)||ss(r+e-u,t+u,u,1.5*Math.PI,2*Math.PI,a,o,s)||ss(r+e-h,t+n-h,h,0,.5*Math.PI,a,o,s)||ss(r+f,t+n-f,f,.5*Math.PI,Math.PI,a,o,s)||ss(r+c,t+c,c,Math.PI,1.5*Math.PI,a,o,s)}function kb(r,t,e,n,i,a){var o=r.parsedStyle,s=o.pointerEvents,l=s===void 0?"auto":s,c=o.x,u=c===void 0?0:c,h=o.y,f=h===void 0?0:h,d=o.width,p=o.height;if(l==="non-transparent-pixel"){var g=i.config.offscreenCanvas,y=a.offscreenCanvasCreator.getOrCreateCanvas(g),m=a.offscreenCanvasCreator.getOrCreateContext(g,{willReadFrequently:!0});y.width=d,y.height=p,i.defaultStyleRendererFactory[x.bn.IMAGE].render(m,bd(bd({},r.parsedStyle),{},{x:0,y:0}),r,void 0,void 0,void 0);var b=m.getImageData(t.x-u,t.y-f,1,1).data;return b.every(function(E){return E!==0})}return!0}function Lb(r,t,e,n){var i=r.getGeometryBounds();return t.x>=i.min[0]&&t.y>=i.min[1]&&t.x<=i.max[0]&&t.y<=i.max[1]}var Ib=function(r){function t(){var e;hd(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=cb(this,t,[].concat(i)),e.name="canvas-picker",e}return ub(t,r),dd(t,[{key:"init",value:function(){var n,i=(n={},nr(nr(nr(nr(nr(nr(nr(nr(nr(nr(n,x.bn.CIRCLE,xb),x.bn.ELLIPSE,Eb),x.bn.RECT,Rb),x.bn.LINE,Mb),x.bn.POLYLINE,Pb),x.bn.POLYGON,Ab),x.bn.PATH,Tb),x.bn.TEXT,Lb),x.bn.GROUP,null),x.bn.IMAGE,kb),nr(nr(n,x.bn.HTML,null),x.bn.MESH,null));this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new _d)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(x.F6);function ca(r){"@babel/helpers - typeof";return ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(r)}function Nb(r,t){if(ca(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(ca(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Sd(r){var t=Nb(r,"string");return ca(t)=="symbol"?t:t+""}function Yn(r,t,e){return(t=Sd(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Od(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Wc(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Od(Object(e),!0).forEach(function(n){Yn(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Od(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function ua(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Md(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Sd(n.key),n)}}function ha(r,t,e){return t&&Md(r.prototype,t),e&&Md(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function ls(r){return ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ls(r)}function Cd(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Cd=function(){return!!r})()}function jb(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Bb(r,t){if(t&&(ca(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jb(r)}function cs(r,t,e){return t=ls(t),Bb(r,Cd()?Reflect.construct(t,e||[],ls(r).constructor):t.apply(r,e))}function Gc(r,t){return Gc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Gc(r,t)}function us(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Gc(r,t)}function Fb(r){if(Array.isArray(r))return r}function zb(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(e=e.call(r)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Vc(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function Td(r,t){if(r){if(typeof r=="string")return Vc(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Vc(r,t):void 0}}function Wb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(r,t){return Fb(r)||zb(r,t)||Td(r,t)||Wb()}function Gb(r){if(Array.isArray(r))return Vc(r)}function Vb(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Hb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zb(r){return Gb(r)||Vb(r)||Td(r)||Hb()}function Gr(r,t){if(!{}.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var $b=0;function Ub(r){return"__private_"+$b+++"_"+r}function Za(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function mi(r){"@babel/helpers - typeof";return mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mi(r)}function Yb(r,t){if(mi(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(mi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Ad(r){var t=Yb(r,"string");return mi(t)=="symbol"?t:t+""}function Pd(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Ad(n.key),n)}}function $a(r,t,e){return t&&Pd(r.prototype,t),e&&Pd(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function fs(r){return fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fs(r)}function Rd(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Rd=function(){return!!r})()}function Kb(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Xb(r,t){if(t&&(mi(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kb(r)}function qb(r,t,e){return t=fs(t),Xb(r,Rd()?Reflect.construct(t,e||[],fs(r).constructor):t.apply(r,e))}function Hc(r,t){return Hc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Hc(r,t)}function Qb(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Hc(r,t)}function Ua(){"use strict";Ua=function(){return t};var r,t={},e=Object.prototype,n=e.hasOwnProperty,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(C,S,A,j){return Object.defineProperty(C,S,{value:A,enumerable:!j,configurable:!j,writable:!j})}try{l({},"")}catch(C){l=function(A,j,Y){return A[j]=Y}}function c(C,S,A,j){var Y=S&&S.prototype instanceof f?S:f,ot=Object.create(Y.prototype);return l(ot,"_invoke",function(Lt,Xt,wt){var Ct=1;return function($t,ie){if(Ct===3)throw Error("Generator is already running");if(Ct===4){if($t==="throw")throw ie;return{value:r,done:!0}}for(wt.method=$t,wt.arg=ie;;){var ye=wt.delegate;if(ye){var ve=M(ye,wt);if(ve){if(ve===h)continue;return ve}}if(wt.method==="next")wt.sent=wt._sent=wt.arg;else if(wt.method==="throw"){if(Ct===1)throw Ct=4,wt.arg;wt.dispatchException(wt.arg)}else wt.method==="return"&&wt.abrupt("return",wt.arg);Ct=3;var Ee=u(Lt,Xt,wt);if(Ee.type==="normal"){if(Ct=wt.done?4:2,Ee.arg===h)continue;return{value:Ee.arg,done:wt.done}}Ee.type==="throw"&&(Ct=4,wt.method="throw",wt.arg=Ee.arg)}}}(C,A,new N(j||[])),!0),ot}function u(C,S,A){try{return{type:"normal",arg:C.call(S,A)}}catch(j){return{type:"throw",arg:j}}}t.wrap=c;var h={};function f(){}function d(){}function p(){}var g={};l(g,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(rt([])));m&&m!==e&&n.call(m,a)&&(g=m);var b=p.prototype=f.prototype=Object.create(g);function E(C){["next","throw","return"].forEach(function(S){l(C,S,function(A){return this._invoke(S,A)})})}function O(C,S){function A(Y,ot,Lt,Xt){var wt=u(C[Y],C,ot);if(wt.type!=="throw"){var Ct=wt.arg,$t=Ct.value;return $t&&mi($t)=="object"&&n.call($t,"__await")?S.resolve($t.__await).then(function(ie){A("next",ie,Lt,Xt)},function(ie){A("throw",ie,Lt,Xt)}):S.resolve($t).then(function(ie){Ct.value=ie,Lt(Ct)},function(ie){return A("throw",ie,Lt,Xt)})}Xt(wt.arg)}var j;l(this,"_invoke",function(Y,ot){function Lt(){return new S(function(Xt,wt){A(Y,ot,Xt,wt)})}return j=j?j.then(Lt,Lt):Lt()},!0)}function M(C,S){var A=S.method,j=C.i[A];if(j===r)return S.delegate=null,A==="throw"&&C.i.return&&(S.method="return",S.arg=r,M(C,S),S.method==="throw")||A!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+A+"' method")),h;var Y=u(j,C.i,S.arg);if(Y.type==="throw")return S.method="throw",S.arg=Y.arg,S.delegate=null,h;var ot=Y.arg;return ot?ot.done?(S[C.r]=ot.value,S.next=C.n,S.method!=="return"&&(S.method="next",S.arg=r),S.delegate=null,h):ot:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,h)}function k(C){this.tryEntries.push(C)}function D(C){var S=C[4]||{};S.type="normal",S.arg=r,C[4]=S}function N(C){this.tryEntries=[[-1]],C.forEach(k,this),this.reset(!0)}function rt(C){if(C!=null){var S=C[a];if(S)return S.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var A=-1,j=function Y(){for(;++A<C.length;)if(n.call(C,A))return Y.value=C[A],Y.done=!1,Y;return Y.value=r,Y.done=!0,Y};return j.next=j}}throw new TypeError(mi(C)+" is not iterable")}return d.prototype=p,l(b,"constructor",p),l(p,"constructor",d),d.displayName=l(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(C){var S=typeof C=="function"&&C.constructor;return!!S&&(S===d||(S.displayName||S.name)==="GeneratorFunction")},t.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,p):(C.__proto__=p,l(C,s,"GeneratorFunction")),C.prototype=Object.create(b),C},t.awrap=function(C){return{__await:C}},E(O.prototype),l(O.prototype,o,function(){return this}),t.AsyncIterator=O,t.async=function(C,S,A,j,Y){Y===void 0&&(Y=Promise);var ot=new O(c(C,S,A,j),Y);return t.isGeneratorFunction(S)?ot:ot.next().then(function(Lt){return Lt.done?Lt.value:ot.next()})},E(b),l(b,s,"Generator"),l(b,a,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),t.keys=function(C){var S=Object(C),A=[];for(var j in S)A.unshift(j);return function Y(){for(;A.length;)if((j=A.pop())in S)return Y.value=j,Y.done=!1,Y;return Y.done=!0,Y}},t.values=rt,N.prototype={constructor:N,reset:function(S){if(this.prev=this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!S)for(var A in this)A.charAt(0)==="t"&&n.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=r)},stop:function(){this.done=!0;var S=this.tryEntries[0][4];if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var A=this;function j($t){Lt.type="throw",Lt.arg=S,A.next=$t}for(var Y=A.tryEntries.length-1;Y>=0;--Y){var ot=this.tryEntries[Y],Lt=ot[4],Xt=this.prev,wt=ot[1],Ct=ot[2];if(ot[0]===-1)return j("end"),!1;if(!wt&&!Ct)throw Error("try statement without catch or finally");if(ot[0]!=null&&ot[0]<=Xt){if(Xt<wt)return this.method="next",this.arg=r,j(wt),!0;if(Xt<Ct)return j(Ct),!1}}},abrupt:function(S,A){for(var j=this.tryEntries.length-1;j>=0;--j){var Y=this.tryEntries[j];if(Y[0]>-1&&Y[0]<=this.prev&&this.prev<Y[2]){var ot=Y;break}}ot&&(S==="break"||S==="continue")&&ot[0]<=A&&A<=ot[2]&&(ot=null);var Lt=ot?ot[4]:{};return Lt.type=S,Lt.arg=A,ot?(this.method="next",this.next=ot[2],h):this.complete(Lt)},complete:function(S,A){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&A&&(this.next=A),h},finish:function(S){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j[2]===S)return this.complete(j[4],j[3]),D(j),h}},catch:function(S){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j[0]===S){var Y=j[4];if(Y.type==="throw"){var ot=Y.arg;D(j)}return ot}}throw Error("illegal catch attempt")},delegateYield:function(S,A,j){return this.delegate={i:rt(S),r:A,n:j},this.method==="next"&&(this.arg=r),h}},t}function Jb(r,t,e){return(t=Ad(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Dd(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function bi(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Dd(Object(e),!0).forEach(function(n){Jb(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Dd(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function t2(r){if(Array.isArray(r))return r}function e2(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(e=e.call(r)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function kd(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function n2(r,t){if(r){if(typeof r=="string")return kd(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?kd(r,t):void 0}}function r2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i2(r,t){return t2(r)||e2(r,t)||n2(r,t)||r2()}function Ld(r,t,e,n,i,a,o){try{var s=r[a](o),l=s.value}catch(c){return void e(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function Id(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var a=r.apply(t,e);function o(l){Ld(a,n,i,o,s,"next",l)}function s(l){Ld(a,n,i,o,s,"throw",l)}o(void 0)})}}var a2=function(){function r(){Za(this,r),this.cacheStore=new Map}return $a(r,[{key:"onRefAdded",value:function(e){}},{key:"has",value:function(e){return this.cacheStore.has(e)}},{key:"put",value:function(e,n,i){return this.cacheStore.has(e)?!1:(this.cacheStore.set(e,{value:n,counter:new Set([i])}),this.onRefAdded(i),!0)}},{key:"get",value:function(e,n){var i=this.cacheStore.get(e);return i?(i.counter.has(n)||(i.counter.add(n),this.onRefAdded(n)),i.value):null}},{key:"update",value:function(e,n,i){var a=this.cacheStore.get(e);return a?(a.value=bi(bi({},a.value),n),a.counter.has(i)||(a.counter.add(i),this.onRefAdded(i)),!0):!1}},{key:"release",value:function(e,n){var i=this.cacheStore.get(e);return i?(i.counter.delete(n),i.counter.size<=0&&this.cacheStore.delete(e),!0):!1}},{key:"releaseRef",value:function(e){var n=this;Array.from(this.cacheStore.keys()).forEach(function(i){n.release(i,e)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),Zc=[],$c=[],Uc=function(){function r(){Za(this,r)}return $a(r,null,[{key:"stop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.api;r.rafId&&(e.cancelAnimationFrame(r.rafId),r.rafId=null)}},{key:"executeTask",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.api;Zc.length<=0&&$c.length<=0||($c.forEach(function(n){return n()}),$c=Zc.splice(0,r.TASK_NUM_PER_FRAME),r.rafId=e.requestAnimationFrame(function(){r.executeTask(e)}))}},{key:"sliceImage",value:function(e,n,i,a){for(var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:r.api,l=e.naturalWidth||e.width,c=e.naturalHeight||e.height,u=n-o,h=i-o,f=Math.ceil(l/u),d=Math.ceil(c/h),p={tileSize:[n,i],gridSize:[d,f],tiles:Array(d).fill(null).map(function(){return Array(f).fill(null)})},g=function(b){for(var E=function(k){Zc.push(function(){var D=k*u,N=b*h,rt=[Math.min(n,l-D),Math.min(i,c-N)],C=rt[0],S=rt[1],A=s.createCanvas();A.width=n,A.height=i;var j=A.getContext("2d");j.drawImage(e,D,N,C,S,0,0,C,S),p.tiles[b][k]={x:D,y:N,tileX:k,tileY:b,data:A},a()})},O=0;O<f;O++)E(O)},y=0;y<d;y++)g(y);return r.stop(),r.executeTask(),p}}])}();Uc.TASK_NUM_PER_FRAME=10;var rr=new a2;rr.onRefAdded=function(t){var e=this;t.addEventListener(x.Dk.DESTROY,function(){e.releaseRef(t)},{once:!0})};var Yc=function(){function r(t,e){Za(this,r),this.gradientCache={},this.patternCache={},this.context=t,this.runtime=e}return $a(r,[{key:"getImageSync",value:function(e,n,i){var a=(0,ae.Z)(e)?e:e.src;if(rr.has(a)){var o=rr.get(a,n);if(o.img.complete)return i==null||i(o),o}return this.getOrCreateImage(e,n).then(function(s){i==null||i(s)}).catch(function(s){console.error(s)}),null}},{key:"getOrCreateImage",value:function(e,n){var i=this,a=(0,ae.Z)(e)?e:e.src;if(!(0,ae.Z)(e)&&!rr.has(a)){var o={img:e,size:[e.naturalWidth||e.width,e.naturalHeight||e.height],tileSize:ds(e)};rr.put(a,o,n)}if(rr.has(a)){var s=rr.get(a,n);return s.img.complete?Promise.resolve(s):new Promise(function(l,c){s.img.addEventListener("load",function(){s.size=[s.img.naturalWidth||s.img.width,s.img.naturalHeight||s.img.height],s.tileSize=ds(s.img),l(s)}),s.img.addEventListener("error",function(u){c(u)})})}return new Promise(function(l,c){var u=i.context.config.createImage();if(u){var h={img:u,size:[0,0],tileSize:ds(u)};rr.put(a,h,n),u.onload=function(){h.size=[u.naturalWidth||u.width,u.naturalHeight||u.height],h.tileSize=ds(h.img),l(h)},u.onerror=function(f){c(f)},u.crossOrigin="Anonymous",u.src=a}})}},{key:"createDownSampledImage",value:function(){var t=Id(Ua().mark(function n(i,a){var o,s,l,c,u,h,f,d,p,g,y,m,b,E;return Ua().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,this.getOrCreateImage(i,a);case 2:if(o=M.sent,typeof o.downSamplingRate=="undefined"){M.next=5;break}return M.abrupt("return",o);case 5:if(s=this.context.config.enableLargeImageOptimization,l=typeof s=="boolean"?{}:s,c=l.maxDownSampledImageSize,u=c===void 0?2048:c,h=l.downSamplingRateThreshold,f=h===void 0?.5:h,d=this.runtime.globalThis.createImageBitmap,p=i2(o.size,2),g=p[0],y=p[1],m=o.img,b=Math.min((u+u)/(g+y),Math.max(.01,Math.min(f,.5))),E=bi(bi({},o),{},{downSamplingRate:b}),rr.update(o.img.src,E,a),!d){M.next=25;break}return M.prev=14,M.next=17,d(o.img,{resizeWidth:g*b,resizeHeight:y*b});case 17:m=M.sent,M.next=23;break;case 20:M.prev=20,M.t0=M.catch(14),b=1;case 23:M.next=26;break;case 25:b=1;case 26:return E=bi(bi({},this.getImageSync(i,a)),{},{downSampled:m,downSamplingRate:b}),rr.update(o.img.src,E,a),M.abrupt("return",E);case 29:case"end":return M.stop()}},n,this,[[14,20]])}));function e(n,i){return t.apply(this,arguments)}return e}()},{key:"createImageTiles",value:function(){var t=Id(Ua().mark(function n(i,a,o,s){var l,c,u,h,f;return Ua().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.getOrCreateImage(i,s);case 2:return l=p.sent,c=s.ownerDocument.defaultView,u=c.requestAnimationFrame,h=c.cancelAnimationFrame,Uc.api={requestAnimationFrame:u,cancelAnimationFrame:h,createCanvas:function(){return x.jB.createCanvas()}},f=bi(bi({},l),Uc.sliceImage(l.img,l.tileSize[0],l.tileSize[0],o)),rr.update(l.img.src,f,s),p.abrupt("return",f);case 8:case"end":return p.stop()}},n,this)}));function e(n,i,a,o){return t.apply(this,arguments)}return e}()},{key:"releaseImage",value:function(e,n){rr.release((0,ae.Z)(e)?e:e.src,n)}},{key:"releaseImageRef",value:function(e){rr.releaseRef(e)}},{key:"getOrCreatePatternSync",value:function(e,n,i,a,o,s,l){var c=this.generatePatternKey(n);if(c&&this.patternCache[c])return this.patternCache[c];var u=n.image,h=n.repetition,f=n.transform,d,p=!1;if((0,ae.Z)(u)){var g=this.getImageSync(u,e,l);d=g==null?void 0:g.img}else a?(d=a,p=!0):d=u;var y=d&&i.createPattern(d,h);if(y){var m;f?m=(0,x.G0)((0,x.G$)(f),new x.s$({})):m=vt.identity(vt.create()),p&&vt.scale(m,m,[1/o,1/o,1]),y.setTransform({a:m[0],b:m[1],c:m[4],d:m[5],e:m[12]+s[0],f:m[13]+s[1]})}return c&&y&&(this.patternCache[c]=y),y}},{key:"getOrCreateGradient",value:function(e,n){var i=this.generateGradientKey(e),a=e.type,o=e.steps,s=e.min,l=e.width,c=e.height,u=e.angle,h=e.cx,f=e.cy,d=e.size;if(this.gradientCache[i])return this.gradientCache[i];var p=null;if(a===x.GL.LinearGradient){var g=(0,x.Rx)(s,l,c,u),y=g.x1,m=g.y1,b=g.x2,E=g.y2;p=n.createLinearGradient(y,m,b,E)}else if(a===x.GL.RadialGradient){var O=(0,x.o6)(s,l,c,h,f,d),M=O.x,k=O.y,D=O.r;p=n.createRadialGradient(M,k,0,M,k,D)}return p&&(o.forEach(function(N){var rt=N.offset,C=N.color;if(rt.unit===x.Cm.kPercentage){var S;(S=p)===null||S===void 0||S.addColorStop(rt.value/100,C.toString())}}),this.gradientCache[i]=p),this.gradientCache[i]}},{key:"generateGradientKey",value:function(e){var n=e.type,i=e.min,a=e.width,o=e.height,s=e.steps,l=e.angle,c=e.cx,u=e.cy,h=e.size;return"gradient-".concat(n,"-").concat((l==null?void 0:l.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(o,"-").concat(s.map(function(f){var d=f.offset,p=f.color;return"".concat(d).concat(p)}).join("-"))}},{key:"generatePatternKey",value:function(e){var n=e.image,i=e.repetition;if((0,ae.Z)(n))return"pattern-".concat(n,"-").concat(i);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(i)}}])}();Yc.isSupportTile=!!x.jB.createCanvas();function ds(r){if(!r.complete)return[0,0];var t=r.naturalWidth||r.width,e=r.naturalHeight||r.height,n=256;return[256,512].forEach(function(i){var a=Math.ceil(e/i),o=Math.ceil(t/i);a*o<1e3&&(n=i)}),[n,n]}var Nd=function(){function r(){Za(this,r)}return $a(r,[{key:"apply",value:function(e){var n=e.renderingService,i=e.renderingContext,a=e.imagePool,o=i.root.ownerDocument.defaultView,s=function(h,f,d){var p=h.parsedStyle,g=p.width,y=p.height;g&&!y?h.setAttribute("height",d/f*g):!g&&y&&h.setAttribute("width",f/d*y)},l=function(h){var f=h.target,d=f.nodeName,p=f.attributes;if(d===x.bn.IMAGE){var g=p.src,y=p.keepAspectRatio;a.getImageSync(g,f,function(m){var b=m.img,E=b.width,O=b.height;y&&s(f,E,O),f.renderable.dirty=!0,n.dirtify()})}},c=function(h){var f=h.target,d=h.attrName,p=h.prevValue,g=h.newValue;f.nodeName!==x.bn.IMAGE||d!=="src"||(p!==g&&a.releaseImage(p,f),(0,ae.Z)(g)&&a.getOrCreateImage(g,f).then(function(y){var m=y.img,b=m.width,E=m.height;f.attributes.keepAspectRatio&&s(f,b,E),f.renderable.dirty=!0,n.dirtify()}).catch(function(){}))};n.hooks.init.tap(r.tag,function(){o.addEventListener(x.Dk.MOUNTED,l),o.addEventListener(x.Dk.ATTR_MODIFIED,c)}),n.hooks.destroy.tap(r.tag,function(){o.removeEventListener(x.Dk.MOUNTED,l),o.removeEventListener(x.Dk.ATTR_MODIFIED,c)})}}])}();Nd.tag="LoadImage";var o2=function(r){function t(){var e;Za(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=qb(this,t,[].concat(i)),e.name="image-loader",e}return Qb(t,r),$a(t,[{key:"init",value:function(n){this.context.imagePool=new Yc(this.context,n),this.addRenderingPlugin(new Nd)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(x.F6);var hn=Ub("renderState"),jd=function(){function r(t){ua(this,r),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,hn,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=vt.create(),this.dprMatrix=vt.create(),this.tmpMat4=vt.create(),this.vec3a=st.Ue(),this.vec3b=st.Ue(),this.vec3c=st.Ue(),this.vec3d=st.Ue(),this.canvasRendererPluginOptions=t}return ha(r,[{key:"apply",value:function(e,n){var i=this;this.context=e;var a=this.context,o=a.config,s=a.camera,l=a.renderingService,c=a.renderingContext,u=a.rBushRoot,h=a.pathGeneratorFactory,f=o.renderer.getConfig().enableRenderingOptimization;o.renderer.getConfig().enableDirtyCheck=!1,o.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=u,this.pathGeneratorFactory=h;var d=e.contextService,p=c.root.ownerDocument.defaultView,g=function(E){var O=E.target,M=O.rBushNode;M.aabb&&i.removedRBushNodeAABBs.push(M.aabb)},y=function(E){var O=E.target,M=O.rBushNode;M.aabb&&i.removedRBushNodeAABBs.push(M.aabb)};l.hooks.init.tap(r.tag,function(){p.addEventListener(x.Dk.UNMOUNTED,g),p.addEventListener(x.Dk.CULLED,y);var b=d.getDPR(),E=o.width,O=o.height,M=d.getContext();i.clearRect(M,0,0,E*b,O*b,o.background)}),l.hooks.destroy.tap(r.tag,function(){p.removeEventListener(x.Dk.UNMOUNTED,g),p.removeEventListener(x.Dk.CULLED,y),i.renderQueue=[],i.removedRBushNodeAABBs=[],Gr(i,hn)[hn]={restoreStack:[],prevObject:null,currentContext:null}}),l.hooks.beginFrame.tap(r.tag,function(){var b,E=d.getContext(),O=d.getDPR(),M=o.width,k=o.height,D=i.canvasRendererPluginOptions,N=D.dirtyObjectNumThreshold,rt=D.dirtyObjectRatioThreshold,C=l.getStats(),S=C.total,A=C.rendered,j=A/S;i.clearFullScreen=i.clearFullScreenLastFrame||!((b=p.context.renderingPlugins[1])!==null&&b!==void 0&&b.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||A>N&&j>rt,E&&(typeof E.resetTransform=="function"?E.resetTransform():E.setTransform(1,0,0,1,0,0),i.clearFullScreen&&i.clearRect(E,0,0,M*O,k*O,o.background))});var m=function(E,O){for(var M=[E];M.length>0;){var k,D=M.pop();D.isVisible()&&!D.isCulled()&&(f?i.renderDisplayObjectOptimized(D,O,i.context,Gr(i,hn)[hn],n):i.renderDisplayObject(D,O,i.context,Gr(i,hn)[hn],n));for(var N=((k=D.sortable)===null||k===void 0||(k=k.sorted)===null||k===void 0?void 0:k.length)>0?D.sortable.sorted:D.childNodes,rt=N.length-1;rt>=0;rt--)M.push(N[rt])}};l.hooks.endFrame.tap(r.tag,function(){if(c.root.childNodes.length===0){i.clearFullScreenLastFrame=!0;return}f=o.renderer.getConfig().enableRenderingOptimization,Gr(i,hn)[hn]={restoreStack:[],prevObject:null,currentContext:Gr(i,hn)[hn].currentContext},Gr(i,hn)[hn].currentContext.clear(),i.clearFullScreenLastFrame=!1;var b=d.getContext(),E=d.getDPR();if(vt.fromScaling(i.dprMatrix,[E,E,1]),vt.multiply(i.vpMatrix,i.dprMatrix,s.getOrthoMatrix()),i.clearFullScreen)f?(b.save(),m(c.root,b),b.restore()):m(c.root,b),i.removedRBushNodeAABBs=[];else{var O=i.safeMergeAABB.apply(i,[i.mergeDirtyAABBs(i.renderQueue)].concat(Zb(i.removedRBushNodeAABBs.map(function(Oe){var Le=Oe.minX,an=Oe.minY,He=Oe.maxX,qe=Oe.maxY,Qe=new x.mN;return Qe.setMinMax([Le,an,0],[He,qe,0]),Qe}))));if(i.removedRBushNodeAABBs=[],x.mN.isEmpty(O)){i.renderQueue=[];return}var M=i.convertAABB2Rect(O),k=M.x,D=M.y,N=M.width,rt=M.height,C=st.fF(i.vec3a,[k,D,0],i.vpMatrix),S=st.fF(i.vec3b,[k+N,D,0],i.vpMatrix),A=st.fF(i.vec3c,[k,D+rt,0],i.vpMatrix),j=st.fF(i.vec3d,[k+N,D+rt,0],i.vpMatrix),Y=Math.min(C[0],S[0],j[0],A[0]),ot=Math.min(C[1],S[1],j[1],A[1]),Lt=Math.max(C[0],S[0],j[0],A[0]),Xt=Math.max(C[1],S[1],j[1],A[1]),wt=Math.floor(Y),Ct=Math.floor(ot),$t=Math.ceil(Lt-Y),ie=Math.ceil(Xt-ot);b.save(),i.clearRect(b,wt,Ct,$t,ie,o.background),b.beginPath(),b.rect(wt,Ct,$t,ie),b.clip(),b.setTransform(i.vpMatrix[0],i.vpMatrix[1],i.vpMatrix[4],i.vpMatrix[5],i.vpMatrix[12],i.vpMatrix[13]);var ye=o.renderer.getConfig(),ve=ye.enableDirtyRectangleRenderingDebug;ve&&p.dispatchEvent(new x.Aw(x.$6.DIRTY_RECTANGLE,{dirtyRect:{x:wt,y:Ct,width:$t,height:ie}}));var Ee=i.searchDirtyObjects(O);Ee.sort(function(Oe,Le){return Oe.sortable.renderOrder-Le.sortable.renderOrder}).forEach(function(Oe){Oe&&Oe.isVisible()&&!Oe.isCulled()&&i.renderDisplayObject(Oe,b,i.context,Gr(i,hn)[hn],n)}),b.restore(),i.renderQueue.forEach(function(Oe){i.saveDirtyAABB(Oe)}),i.renderQueue=[]}Gr(i,hn)[hn].restoreStack.forEach(function(){b.restore()}),Gr(i,hn)[hn].restoreStack=[]}),l.hooks.render.tap(r.tag,function(b){i.clearFullScreen||i.renderQueue.push(b)})}},{key:"clearRect",value:function(e,n,i,a,o,s){e.clearRect(n,i,a,o),s&&(e.fillStyle=s,e.fillRect(n,i,a,o))}},{key:"renderDisplayObjectOptimized",value:function(e,n,i,a,o){var s=e.nodeName,l=!1,c=!1,u=this.context.styleRendererFactory[s],h=this.pathGeneratorFactory[s],f=e.parsedStyle.clipPath;if(f){l=!a.prevObject||!vt.exactEquals(f.getWorldTransform(),a.prevObject.getWorldTransform()),l&&(this.applyWorldTransform(n,f),a.prevObject=null);var d=this.pathGeneratorFactory[f.nodeName];d&&(n.save(),c=!0,n.beginPath(),d(n,f.parsedStyle),n.closePath(),n.clip())}if(u){l=!a.prevObject||!vt.exactEquals(e.getWorldTransform(),a.prevObject.getWorldTransform()),l&&this.applyWorldTransform(n,e);var p=!a.prevObject;if(!p){var g=a.prevObject.nodeName;s===x.bn.TEXT?p=g!==x.bn.TEXT:s===x.bn.IMAGE?p=g!==x.bn.IMAGE:p=g===x.bn.TEXT||g===x.bn.IMAGE}u.applyStyleToContext(n,e,p,a),a.prevObject=e}h&&(n.beginPath(),h(n,e.parsedStyle),s!==x.bn.LINE&&s!==x.bn.PATH&&s!==x.bn.POLYLINE&&n.closePath()),u&&u.drawToContext(n,e,Gr(this,hn)[hn],this,o),c&&n.restore(),e.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(e,n,i,a,o){var s=e.nodeName,l=a.restoreStack[a.restoreStack.length-1];l&&!(e.compareDocumentPosition(l)&x.NB.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),a.restoreStack.pop());var c=this.context.styleRendererFactory[s],u=this.pathGeneratorFactory[s],h=e.parsedStyle.clipPath;if(h){this.applyWorldTransform(n,h);var f=this.pathGeneratorFactory[h.nodeName];f&&(n.save(),a.restoreStack.push(e),n.beginPath(),f(n,h.parsedStyle),n.closePath(),n.clip())}c&&(this.applyWorldTransform(n,e),n.save(),this.applyAttributesToContext(n,e)),u&&(n.beginPath(),u(n,e.parsedStyle),s!==x.bn.LINE&&s!==x.bn.PATH&&s!==x.bn.POLYLINE&&n.closePath()),c&&(c.render(n,e.parsedStyle,e,i,this,o),n.restore()),e.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(e,n){var i=n.parsedStyle,a=i.stroke,o=i.fill,s=i.opacity,l=i.lineDash,c=i.lineDashOffset;l&&e.setLineDash(l),(0,Nt.Z)(c)||(e.lineDashOffset=c),(0,Nt.Z)(s)||(e.globalAlpha*=s),!(0,Nt.Z)(a)&&!Array.isArray(a)&&!a.isNone&&(e.strokeStyle=n.attributes.stroke),!(0,Nt.Z)(o)&&!Array.isArray(o)&&!o.isNone&&(e.fillStyle=n.attributes.fill)}},{key:"convertAABB2Rect",value:function(e){var n=e.getMin(),i=e.getMax(),a=Math.floor(n[0]),o=Math.floor(n[1]),s=Math.ceil(i[0]),l=Math.ceil(i[1]),c=s-a,u=l-o;return{x:a,y:o,width:c,height:u}}},{key:"mergeDirtyAABBs",value:function(e){var n=new x.mN;return e.forEach(function(i){var a=i.getRenderBounds();n.add(a);var o=i.renderable.dirtyRenderBounds;o&&n.add(o)}),n}},{key:"searchDirtyObjects",value:function(e){var n=e.getMin(),i=hs(n,2),a=i[0],o=i[1],s=e.getMax(),l=hs(s,2),c=l[0],u=l[1],h=this.rBush.search({minX:a,minY:o,maxX:c,maxY:u});return h.map(function(f){var d=f.displayObject;return d})}},{key:"saveDirtyAABB",value:function(e){var n=e.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new x.mN);var i=e.getRenderBounds();i&&n.dirtyRenderBounds.update(i.center,i.halfExtents)}},{key:"applyWorldTransform",value:function(e,n,i){i?(vt.copy(this.tmpMat4,n.getLocalTransform()),vt.multiply(this.tmpMat4,i,this.tmpMat4),vt.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(vt.copy(this.tmpMat4,n.getWorldTransform()),vt.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),e.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var e=new x.mN,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.forEach(function(o){e.add(o)}),e}}])}();jd.tag="CanvasRenderer";function ps(r,t,e,n,i,a,o){var s,l;if(r.image.nodeName==="rect"){var c=r.image.parsedStyle,u=c.width,h=c.height;l=n.contextService.getDPR();var f=n.config.offscreenCanvas;s=a.offscreenCanvasCreator.getOrCreateCanvas(f),s.width=u*l,s.height=h*l;var d=a.offscreenCanvasCreator.getOrCreateContext(f),p={restoreStack:[],prevObject:null,currentContext:new Map};r.image.forEach(function(y){i.renderDisplayObject(y,d,n,p,a)}),p.restoreStack.forEach(function(){d.restore()})}var g=o.getOrCreatePatternSync(t,r,e,s,l,t.getGeometryBounds().min,function(){t.renderable.dirty=!0,n.renderingService.dirtify()});return g}function vs(r,t,e,n){var i;if(r.type===x.GL.LinearGradient||r.type===x.GL.RadialGradient){var a=t.getGeometryBounds(),o=a&&a.halfExtents[0]*2||1,s=a&&a.halfExtents[1]*2||1,l=a&&a.min||[0,0];i=n.getOrCreateGradient(Wc(Wc({type:r.type},r.value),{},{min:l,width:o,height:s}),e)}return i}var gs=["shadowBlur","shadowOffsetX","shadowOffsetY"],Bd=["lineCap","lineJoin","miterLimit"],pn={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},Fd={};function Je(r,t,e,n){var i=n.has(t)?n.get(t):pn[t];return i!==e&&(t==="lineDash"?r.setLineDash(e):r[t]=e,n.set(t,e)),i}var s2=function(){function r(t){ua(this,r),this.imagePool=t}return ha(r,[{key:"applyAttributesToContext",value:function(e,n){}},{key:"render",value:function(e,n,i,a,o,s){}},{key:"applyCommonStyleToContext",value:function(e,n,i,a){var o=i?Fd:a.prevObject.parsedStyle,s=n.parsedStyle;(i||s.opacity!==o.opacity)&&Je(e,"globalAlpha",(0,Nt.Z)(s.opacity)?pn.globalAlpha:s.opacity,a.currentContext),(i||s.blend!==o.blend)&&Je(e,"globalCompositeOperation",(0,Nt.Z)(s.blend)?pn.globalCompositeOperation:s.blend,a.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(e,n,i,a){var o=i?Fd:a.prevObject.parsedStyle,s=n.parsedStyle,l=s.lineWidth,c=l===void 0?pn.lineWidth:l,u=s.fill&&!s.fill.isNone,h=s.stroke&&!s.stroke.isNone&&c>0;if(h){if(i||n.attributes.stroke!==a.prevObject.attributes.stroke){var f=!(0,Nt.Z)(s.stroke)&&!Array.isArray(s.stroke)&&!s.stroke.isNone?n.attributes.stroke:pn.strokeStyle;Je(e,"strokeStyle",f,a.currentContext)}(i||s.lineWidth!==o.lineWidth)&&Je(e,"lineWidth",(0,Nt.Z)(s.lineWidth)?pn.lineWidth:s.lineWidth,a.currentContext),(i||s.lineDash!==o.lineDash)&&Je(e,"lineDash",s.lineDash||pn.lineDash,a.currentContext),(i||s.lineDashOffset!==o.lineDashOffset)&&Je(e,"lineDashOffset",(0,Nt.Z)(s.lineDashOffset)?pn.lineDashOffset:s.lineDashOffset,a.currentContext);for(var d=0;d<Bd.length;d++){var p=Bd[d];(i||s[p]!==o[p])&&Je(e,p,(0,Nt.Z)(s[p])?pn[p]:s[p],a.currentContext)}}if(u&&(i||n.attributes.fill!==a.prevObject.attributes.fill)){var g=!(0,Nt.Z)(s.fill)&&!Array.isArray(s.fill)&&!s.fill.isNone?n.attributes.fill:pn.fillStyle;Je(e,"fillStyle",g,a.currentContext)}}},{key:"applyStyleToContext",value:function(e,n,i,a){var o=n.nodeName;this.applyCommonStyleToContext(e,n,i,a),o===x.bn.IMAGE||this.applyStrokeFillStyleToContext(e,n,i,a)}},{key:"applyShadowAndFilterStyleToContext",value:function(e,n,i,a){var o=n.parsedStyle;if(i){Je(e,"shadowColor",o.shadowColor.toString(),a.currentContext);for(var s=0;s<gs.length;s++){var l=gs[s];Je(e,l,o[l]||pn[l],a.currentContext)}}o.filter&&o.filter.length&&Je(e,"filter",n.attributes.filter,a.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(e,n,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(n){Je(e,"shadowColor",pn.shadowColor,a.currentContext);for(var s=0;s<gs.length;s++){var l=gs[s];Je(e,l,pn[l],a.currentContext)}}if(i)if(n&&o){var c=e.filter;!(0,Nt.Z)(c)&&c.indexOf("drop-shadow")>-1&&Je(e,"filter",c.replace(/drop-shadow\([^)]*\)/,"").trim()||pn.filter,a.currentContext)}else Je(e,"filter",pn.filter,a.currentContext)}},{key:"fillToContext",value:function(e,n,i,a,o){var s=this,l=n.parsedStyle,c=l.fill,u=l.fillRule,h=null;if(Array.isArray(c)&&c.length>0)c.forEach(function(d){var p=Je(e,"fillStyle",vs(d,n,e,s.imagePool),i.currentContext);h=h!=null?h:p,u?e.fill(u):e.fill()});else{if((0,x.R)(c)){var f=ps(c,n,e,n.ownerDocument.defaultView.context,a,o,this.imagePool);f&&(e.fillStyle=f,h=!0)}u?e.fill(u):e.fill()}h!==null&&Je(e,"fillStyle",h,i.currentContext)}},{key:"strokeToContext",value:function(e,n,i,a,o){var s=this,l=n.parsedStyle.stroke,c=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(f){var d=Je(e,"strokeStyle",vs(f,n,e,s.imagePool),i.currentContext);c=c!=null?c:d,e.stroke()});else{if((0,x.R)(l)){var u=ps(l,n,e,n.ownerDocument.defaultView.context,a,o,this.imagePool);if(u){var h=Je(e,"strokeStyle",u,i.currentContext);c=c!=null?c:h}}e.stroke()}c!==null&&Je(e,"strokeStyle",c,i.currentContext)}},{key:"drawToContext",value:function(e,n,i,a,o){var s,l=n.nodeName,c=n.parsedStyle,u=c.opacity,h=u===void 0?pn.globalAlpha:u,f=c.fillOpacity,d=f===void 0?pn.fillOpacity:f,p=c.strokeOpacity,g=p===void 0?pn.strokeOpacity:p,y=c.lineWidth,m=y===void 0?pn.lineWidth:y,b=c.fill&&!c.fill.isNone,E=c.stroke&&!c.stroke.isNone&&m>0;if(!(!b&&!E)){var O=!(0,Nt.Z)(c.shadowColor)&&c.shadowBlur>0,M=c.shadowType==="inner",k=((s=c.fill)===null||s===void 0?void 0:s.alpha)===0,D=!!(c.filter&&c.filter.length),N=O&&E&&(l===x.bn.PATH||l===x.bn.LINE||l===x.bn.POLYLINE||k||M),rt=null;if(b){N||this.applyShadowAndFilterStyleToContext(e,n,O,i);var C=h*d;rt=Je(e,"globalAlpha",C,i.currentContext),this.fillToContext(e,n,i,a,o),N||this.clearShadowAndFilterStyleForContext(e,O,D,i)}if(E){var S=!1,A=h*g,j=Je(e,"globalAlpha",A,i.currentContext);if(rt=b?rt:j,N&&(this.applyShadowAndFilterStyleToContext(e,n,O,i),S=!0,M)){var Y=e.globalCompositeOperation;e.globalCompositeOperation="source-atop",this.strokeToContext(e,n,i,a,o),e.globalCompositeOperation=Y,this.clearShadowAndFilterStyleForContext(e,O,D,i,!0)}this.strokeToContext(e,n,i,a,o),S&&this.clearShadowAndFilterStyleForContext(e,O,D,i)}rt!==null&&Je(e,"globalAlpha",rt,i.currentContext)}}}])}(),Kc=function(r){function t(){return ua(this,t),cs(this,t,arguments)}return us(t,r),ha(t,[{key:"render",value:function(n,i,a,o,s,l){var c=i.fill,u=i.fillRule,h=i.opacity,f=h===void 0?1:h,d=i.fillOpacity,p=d===void 0?1:d,g=i.stroke,y=i.strokeOpacity,m=y===void 0?1:y,b=i.lineWidth,E=b===void 0?1:b,O=i.lineCap,M=i.lineJoin,k=i.shadowType,D=i.shadowColor,N=i.shadowBlur,rt=i.filter,C=i.miterLimit,S=c&&!c.isNone,A=g&&!g.isNone&&E>0,j=(c==null?void 0:c.alpha)===0,Y=!!(rt&&rt.length),ot=!(0,Nt.Z)(D)&&N>0,Lt=a.nodeName,Xt=k==="inner",wt=A&&ot&&(Lt===x.bn.PATH||Lt===x.bn.LINE||Lt===x.bn.POLYLINE||j||Xt);S&&(n.globalAlpha=f*p,wt||ys(a,n,ot),zd(n,a,c,u,o,s,l,this.imagePool),wt||this.clearShadowAndFilter(n,Y,ot)),A&&(n.globalAlpha=f*m,n.lineWidth=E,(0,Nt.Z)(C)||(n.miterLimit=C),(0,Nt.Z)(O)||(n.lineCap=O),(0,Nt.Z)(M)||(n.lineJoin=M),wt&&(Xt&&(n.globalCompositeOperation="source-atop"),ys(a,n,!0),Xt&&(Xc(n,a,g,o,s,l,this.imagePool),n.globalCompositeOperation=pn.globalCompositeOperation,this.clearShadowAndFilter(n,Y,!0))),Xc(n,a,g,o,s,l,this.imagePool))}},{key:"clearShadowAndFilter",value:function(n,i,a){if(a&&(n.shadowColor="transparent",n.shadowBlur=0),i){var o=n.filter;!(0,Nt.Z)(o)&&o.indexOf("drop-shadow")>-1&&(n.filter=o.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(s2);function ys(r,t,e){var n=r.parsedStyle,i=n.filter,a=n.shadowColor,o=n.shadowBlur,s=n.shadowOffsetX,l=n.shadowOffsetY;i&&i.length&&(t.filter=r.style.filter),e&&(t.shadowColor=a.toString(),t.shadowBlur=o||0,t.shadowOffsetX=s||0,t.shadowOffsetY=l||0)}function zd(r,t,e,n,i,a,o,s){var l=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(e)?e.forEach(function(c){r.fillStyle=vs(c,t,r,s),l||(n?r.fill(n):r.fill())}):((0,x.R)(e)&&(r.fillStyle=ps(e,t,r,i,a,o,s)),l||(n?r.fill(n):r.fill()))}function Xc(r,t,e,n,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(e)?e.forEach(function(l){r.strokeStyle=vs(l,t,r,o),s||r.stroke()}):((0,x.R)(e)&&(r.strokeStyle=ps(e,t,r,n,i,a,o)),s||r.stroke())}function l2(r,t){var e=hs(r,4),n=e[0],i=e[1],a=e[2],o=e[3],s=hs(t,4),l=s[0],c=s[1],u=s[2],h=s[3],f=Math.max(n,l),d=Math.max(i,c),p=Math.min(n+a,l+u),g=Math.min(i+o,c+h);return p<=f||g<=d?null:[f,d,p-f,g-d]}function c2(r,t){var e=st.fF(st.Ue(),[r[0],r[1],0],t),n=st.fF(st.Ue(),[r[0]+r[2],r[1],0],t),i=st.fF(st.Ue(),[r[0],r[1]+r[3],0],t),a=st.fF(st.Ue(),[r[0]+r[2],r[1]+r[3],0],t);return[Math.min(e[0],n[0],i[0],a[0]),Math.min(e[1],n[1],i[1],a[1]),Math.max(e[0],n[0],i[0],a[0])-Math.min(e[0],n[0],i[0],a[0]),Math.max(e[1],n[1],i[1],a[1])-Math.min(e[1],n[1],i[1],a[1])]}var u2=function(r){function t(){return ua(this,t),cs(this,t,arguments)}return us(t,r),ha(t,[{key:"renderDownSampled",value:function(n,i,a,o){var s=o.src,l=o.imageCache;if(!l.downSampled){this.imagePool.createDownSampledImage(s,a).then(function(){a.ownerDocument&&(a.renderable.dirty=!0,a.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(c){console.error(c)});return}n.drawImage(l.downSampled,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}},{key:"renderTile",value:function(n,i,a,o){var s=o.src,l=o.imageCache,c=o.imageRect,u=o.drawRect,h=l.size,f=n.getTransform(),d=f.a,p=f.b,g=f.c,y=f.d,m=f.e,b=f.f;if(n.resetTransform(),!(l!=null&&l.gridSize)){this.imagePool.createImageTiles(s,[],function(){a.ownerDocument&&(a.renderable.dirty=!0,a.ownerDocument.defaultView.context.renderingService.dirtify())},a).catch(function(ot){console.error(ot)});return}for(var E=[h[0]/c[2],h[1]/c[3]],O=[l.tileSize[0]/E[0],l.tileSize[1]/E[1]],M=[Math.floor((u[0]-c[0])/O[0]),Math.ceil((u[0]+u[2]-c[0])/O[0])],k=M[0],D=M[1],N=[Math.floor((u[1]-c[1])/O[1]),Math.ceil((u[1]+u[3]-c[1])/O[1])],rt=N[0],C=N[1],S=rt;S<=C;S++)for(var A=k;A<=D;A++){var j=l.tiles[S][A];if(j){var Y=[Math.floor(c[0]+j.tileX*O[0]),Math.floor(c[1]+j.tileY*O[1]),Math.ceil(O[0]),Math.ceil(O[1])];n.drawImage(j.data,Y[0],Y[1],Y[2],Y[3])}}n.setTransform(d,p,g,y,m,b)}},{key:"render",value:function(n,i,a){var o=i.x,s=o===void 0?0:o,l=i.y,c=l===void 0?0:l,u=i.width,h=i.height,f=i.src,d=i.shadowColor,p=i.shadowBlur,g=this.imagePool.getImageSync(f,a),y=g==null?void 0:g.img,m=u,b=h;if(y){m||(m=y.width),b||(b=y.height);var E=!(0,Nt.Z)(d)&&p>0;ys(a,n,E);try{var O=a.ownerDocument.defaultView.getContextService().getDomElement(),M=O.width,k=O.height,D=n.getTransform(),N=D.a,rt=D.b,C=D.c,S=D.d,A=D.e,j=D.f,Y=vt.fromValues(N,C,0,0,rt,S,0,0,0,0,1,0,A,j,0,1),ot=c2([s,c,m,b],Y),Lt=l2([0,0,M,k],ot);if(!Lt)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){t.renderFull(n,i,a,{image:y,drawRect:[s,c,m,b]});return}var Xt=ot[2]/g.size[0];if(Xt<(g.downSamplingRate||.5)){this.renderDownSampled(n,i,a,{src:f,imageCache:g,drawRect:[s,c,m,b]});return}if(!Yc.isSupportTile){t.renderFull(n,i,a,{image:y,drawRect:[s,c,m,b]});return}this.renderTile(n,i,a,{src:f,imageCache:g,imageRect:ot,drawRect:Lt})}catch(wt){}}}},{key:"drawToContext",value:function(n,i,a,o,s){this.render(n,i.parsedStyle,i)}}],[{key:"renderFull",value:function(n,i,a,o){n.drawImage(o.image,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}}])}(Kc),h2=function(r){function t(){return ua(this,t),cs(this,t,arguments)}return us(t,r),ha(t,[{key:"render",value:function(n,i,a,o,s,l){a.getBounds();var c=i.lineWidth,u=c===void 0?1:c,h=i.textAlign,f=h===void 0?"start":h,d=i.textBaseline,p=d===void 0?"alphabetic":d,g=i.lineJoin,y=g===void 0?"miter":g,m=i.miterLimit,b=m===void 0?10:m,E=i.letterSpacing,O=E===void 0?0:E,M=i.stroke,k=i.fill,D=i.fillRule,N=i.fillOpacity,rt=N===void 0?1:N,C=i.strokeOpacity,S=C===void 0?1:C,A=i.opacity,j=A===void 0?1:A,Y=i.metrics,ot=i.x,Lt=ot===void 0?0:ot,Xt=i.y,wt=Xt===void 0?0:Xt,Ct=i.dx,$t=i.dy,ie=i.shadowColor,ye=i.shadowBlur,ve=Y.font,Ee=Y.lines,Oe=Y.height,Le=Y.lineHeight,an=Y.lineMetrics;n.font=ve,n.lineWidth=u,n.textAlign=f==="middle"?"center":f;var He=p;He==="alphabetic"&&(He="bottom"),n.lineJoin=y,(0,Nt.Z)(b)||(n.miterLimit=b);var qe=wt;p==="middle"?qe+=-Oe/2-Le/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?qe+=-Oe:(p==="top"||p==="hanging")&&(qe+=-Le);var Qe=Lt+(Ct||0);qe+=$t||0,Ee.length===1&&(He==="bottom"?(He="middle",qe-=.5*Oe):He==="top"&&(He="middle",qe+=.5*Oe)),n.textBaseline=He;var mr=!(0,Nt.Z)(ie)&&ye>0;ys(a,n,mr);for(var Ie=0;Ie<Ee.length;Ie++){var kr=u/2+Qe;qe+=Le,!(0,Nt.Z)(M)&&!M.isNone&&u&&this.drawLetterSpacing(n,a,Ee[Ie],an[Ie],f,kr,qe,O,k,D,rt,M,S,j,!0,o,s,l),(0,Nt.Z)(k)||this.drawLetterSpacing(n,a,Ee[Ie],an[Ie],f,kr,qe,O,k,D,rt,M,S,j,!1,o,s,l)}}},{key:"drawLetterSpacing",value:function(n,i,a,o,s,l,c,u,h,f,d,p,g,y,m,b,E,O){if(u===0){m?this.strokeText(n,i,a,l,c,p,g,b,E,O):this.fillText(n,i,a,l,c,h,f,d,y,b,E,O);return}var M=n.textAlign;n.textAlign="left";var k=l;s==="center"||s==="middle"?k=l-o.width/2:(s==="right"||s==="end")&&(k=l-o.width);for(var D=Array.from(a),N=n.measureText(a).width,rt=0,C=0;C<D.length;++C){var S=D[C];m?this.strokeText(n,i,S,k,c,p,g,b,E,O):this.fillText(n,i,S,k,c,h,f,d,y,b,E,O),rt=n.measureText(a.substring(C+1)).width,k+=N-rt+u,N=rt}n.textAlign=M}},{key:"fillText",value:function(n,i,a,o,s,l,c,u,h,f,d,p){zd(n,i,l,c,f,d,p,this.imagePool,!0);var g,y=!(0,Nt.Z)(u)&&u!==1;y&&(g=n.globalAlpha,n.globalAlpha=u*h),n.fillText(a,o,s),y&&(n.globalAlpha=g)}},{key:"strokeText",value:function(n,i,a,o,s,l,c,u,h,f){Xc(n,i,l,u,h,f,this.imagePool,!0);var d,p=!(0,Nt.Z)(c)&&c!==1;p&&(d=n.globalAlpha,n.globalAlpha=c),n.strokeText(a,o,s),p&&(n.globalAlpha=d)}},{key:"drawToContext",value:function(n,i,a,o,s){this.render(n,i.parsedStyle,i,i.ownerDocument.defaultView.context,o,s)}}])}(Kc),f2=function(r){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ua(this,t),e=cs(this,t),e.name="canvas-renderer",e.options=n,e}return us(t,r),ha(t,[{key:"init",value:function(){var n,i=Wc({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),a=this.context.imagePool,o=new Kc(a),s=(n={},Yn(Yn(Yn(Yn(Yn(Yn(Yn(Yn(Yn(Yn(n,x.bn.CIRCLE,o),x.bn.ELLIPSE,o),x.bn.RECT,o),x.bn.IMAGE,new u2(a)),x.bn.TEXT,new h2(a)),x.bn.LINE,o),x.bn.POLYLINE,o),x.bn.POLYGON,o),x.bn.PATH,o),x.bn.GROUP,void 0),Yn(Yn(Yn(n,x.bn.HTML,void 0),x.bn.MESH,void 0),x.bn.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=s,this.context.styleRendererFactory=s,this.addRenderingPlugin(new jd(i))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(x.F6);function Wd(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function fa(r){"@babel/helpers - typeof";return fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fa(r)}function d2(r,t){if(fa(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(fa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function p2(r){var t=d2(r,"string");return fa(t)=="symbol"?t:t+""}function Gd(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,p2(n.key),n)}}function Vd(r,t,e){return t&&Gd(r.prototype,t),e&&Gd(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function ms(r){return ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ms(r)}function Hd(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Hd=function(){return!!r})()}function v2(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function g2(r,t){if(t&&(fa(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v2(r)}function y2(r,t,e){return t=ms(t),g2(r,Hd()?Reflect.construct(t,e||[],ms(r).constructor):t.apply(r,e))}function qc(r,t){return qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},qc(r,t)}function m2(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&qc(r,t)}var Zd=function(){function r(){Wd(this,r)}return Vd(r,[{key:"apply",value:function(e,n){var i=this,a=e.renderingService,o=e.renderingContext,s=e.config;this.context=e;var l=o.root.ownerDocument.defaultView,c=function(N){a.hooks.pointerMove.call(N)},u=function(N){a.hooks.pointerUp.call(N)},h=function(N){a.hooks.pointerDown.call(N)},f=function(N){a.hooks.pointerOver.call(N)},d=function(N){a.hooks.pointerOut.call(N)},p=function(N){a.hooks.pointerCancel.call(N)},g=function(N){a.hooks.pointerWheel.call(N)},y=function(N){a.hooks.click.call(N)},m=function(N){n.globalThis.document.addEventListener("pointermove",c,!0),N.addEventListener("pointerdown",h,!0),N.addEventListener("pointerleave",d,!0),N.addEventListener("pointerover",f,!0),n.globalThis.addEventListener("pointerup",u,!0),n.globalThis.addEventListener("pointercancel",p,!0)},b=function(N){N.addEventListener("touchstart",h,!0),N.addEventListener("touchend",u,!0),N.addEventListener("touchmove",c,!0),N.addEventListener("touchcancel",p,!0)},E=function(N){n.globalThis.document.addEventListener("mousemove",c,!0),N.addEventListener("mousedown",h,!0),N.addEventListener("mouseout",d,!0),N.addEventListener("mouseover",f,!0),n.globalThis.addEventListener("mouseup",u,!0)},O=function(N){n.globalThis.document.removeEventListener("pointermove",c,!0),N.removeEventListener("pointerdown",h,!0),N.removeEventListener("pointerleave",d,!0),N.removeEventListener("pointerover",f,!0),n.globalThis.removeEventListener("pointerup",u,!0),n.globalThis.removeEventListener("pointercancel",p,!0)},M=function(N){N.removeEventListener("touchstart",h,!0),N.removeEventListener("touchend",u,!0),N.removeEventListener("touchmove",c,!0),N.removeEventListener("touchcancel",p,!0)},k=function(N){n.globalThis.document.removeEventListener("mousemove",c,!0),N.removeEventListener("mousedown",h,!0),N.removeEventListener("mouseout",d,!0),N.removeEventListener("mouseover",f,!0),n.globalThis.removeEventListener("mouseup",u,!0)};a.hooks.init.tap(r.tag,function(){var D=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(D.style.msContentZooming="none",D.style.msTouchAction="none"):l.supportsPointerEvents&&(D.style.touchAction="none"),l.supportsPointerEvents?m(D):E(D),l.supportsTouchEvents&&b(D),s.useNativeClickEvent&&D.addEventListener("click",y,!0),D.addEventListener("wheel",g,{passive:!0,capture:!0})}),a.hooks.destroy.tap(r.tag,function(){var D=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(D.style.msContentZooming="",D.style.msTouchAction=""):l.supportsPointerEvents&&(D.style.touchAction=""),l.supportsPointerEvents?O(D):k(D),l.supportsTouchEvents&&M(D),s.useNativeClickEvent&&D.removeEventListener("click",y,!0),D.removeEventListener("wheel",g,!0)})}}])}();Zd.tag="DOMInteraction";var b2=function(r){function t(){var e;Wd(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=y2(this,t,[].concat(i)),e.name="dom-interaction",e}return m2(t,r),Vd(t,[{key:"init",value:function(){this.addRenderingPlugin(new Zd)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(x.F6);function $d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function da(r){"@babel/helpers - typeof";return da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},da(r)}function _2(r,t){if(da(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(da(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function x2(r){var t=_2(r,"string");return da(t)=="symbol"?t:t+""}function Ud(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,x2(n.key),n)}}function Yd(r,t,e){return t&&Ud(r.prototype,t),e&&Ud(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function bs(r){return bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bs(r)}function Kd(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Kd=function(){return!!r})()}function E2(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function w2(r,t){if(t&&(da(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E2(r)}function S2(r,t,e){return t=bs(t),w2(r,Kd()?Reflect.construct(t,e||[],bs(r).constructor):t.apply(r,e))}function Qc(r,t){return Qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Qc(r,t)}function O2(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Qc(r,t)}var M2="g-canvas-camera",Xd=function(){function r(){$d(this,r),this.displayObjectHTMLElementMap=new WeakMap}return Yd(r,[{key:"joinTransformMatrix",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([e[0],e[1],e[4],e[5],e[12]+n[0],e[13]+n[1]].join(","),")")}},{key:"apply",value:function(e,n){var i=this,a=e.camera,o=e.renderingContext,s=e.renderingService;this.context=e;var l=o.root.ownerDocument.defaultView,c=l.context.eventService.nativeHTMLMap,u=function(m,b){b.style.transform=i.joinTransformMatrix(m.getWorldTransform(),m.getOrigin())},h=function(m){var b=m.target;if(b.nodeName===x.bn.HTML){i.$camera||(i.$camera=i.createCamera(a));var E=i.getOrCreateEl(b);i.$camera.appendChild(E),Object.keys(b.attributes).forEach(function(O){i.updateAttribute(O,b)}),u(b,E),c.set(E,b)}},f=function(m){var b=m.target;if(b.nodeName===x.bn.HTML&&i.$camera){var E=i.getOrCreateEl(b);E&&(E.remove(),c.delete(E))}},d=function(m){var b=m.target;if(b.nodeName===x.bn.HTML){var E=m.attrName;i.updateAttribute(E,b)}},p=function(m){var b=m.target,E=b.nodeName===x.bn.FRAGMENT?b.childNodes:[b];E.forEach(function(O){if(O.nodeName===x.bn.HTML){var M=i.getOrCreateEl(O);u(O,M)}})},g=function(){if(i.$camera){var m=i.context.config,b=m.width,E=m.height;i.$camera.parentElement.style.width="".concat(b||0,"px"),i.$camera.parentElement.style.height="".concat(E||0,"px")}};s.hooks.init.tap(r.tag,function(){l.addEventListener(x.$6.RESIZE,g),l.addEventListener(x.Dk.MOUNTED,h),l.addEventListener(x.Dk.UNMOUNTED,f),l.addEventListener(x.Dk.ATTR_MODIFIED,d),l.addEventListener(x.Dk.BOUNDS_CHANGED,p)}),s.hooks.endFrame.tap(r.tag,function(){i.$camera&&o.renderReasons.has(x.Rr.CAMERA_CHANGED)&&(i.$camera.style.transform=i.joinTransformMatrix(a.getOrthoMatrix()))}),s.hooks.destroy.tap(r.tag,function(){i.$camera&&i.$camera.remove(),l.removeEventListener(x.$6.RESIZE,g),l.removeEventListener(x.Dk.MOUNTED,h),l.removeEventListener(x.Dk.UNMOUNTED,f),l.removeEventListener(x.Dk.ATTR_MODIFIED,d),l.removeEventListener(x.Dk.BOUNDS_CHANGED,p)})}},{key:"createCamera",value:function(e){var n=this.context.config,i=n.document,a=n.width,o=n.height,s=this.context.contextService.getDomElement(),l=s.parentNode;if(l){var c=M2,u=l.querySelector("#".concat(c));if(!u){var h=(i||document).createElement("div");h.style.overflow="hidden",h.style.pointerEvents="none",h.style.position="absolute",h.style.left="0px",h.style.top="0px",h.style.width="".concat(a||0,"px"),h.style.height="".concat(o||0,"px");var f=(i||document).createElement("div");u=f,f.id=c,f.style.position="absolute",f.style.left="".concat(s.offsetLeft||0,"px"),f.style.top="".concat(s.offsetTop||0,"px"),f.style.transformOrigin="left top",f.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),f.style.pointerEvents="none",f.style.width="100%",f.style.height="100%",h.appendChild(f),l.appendChild(h)}return u}return null}},{key:"getOrCreateEl",value:function(e){var n=this.context.config.document,i=this.displayObjectHTMLElementMap.get(e);return i||(i=(n||document).createElement("div"),e.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(e,i),e.id&&(i.id=e.id),e.name&&i.setAttribute("name",e.name),e.className&&(i.className=e.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),i}},{key:"updateAttribute",value:function(e,n){var i=this.getOrCreateEl(n);switch(e){case"innerHTML":var a=n.parsedStyle.innerHTML;(0,ae.Z)(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(n.parsedStyle.x,"px");break;case"y":i.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var o=n.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(o[0].buildCSSText(null,null,"")," ").concat(o[1].buildCSSText(null,null,""));break;case"width":var s=n.parsedStyle.width;i.style.width=(0,pt.Z)(s)?"".concat(s,"px"):s.toString();break;case"height":var l=n.parsedStyle.height;i.style.height=(0,pt.Z)(l)?"".concat(l,"px"):l.toString();break;case"zIndex":var c=n.parsedStyle.zIndex;i.style["z-index"]="".concat(c);break;case"visibility":var u=n.parsedStyle.visibility;i.style.visibility=u;break;case"pointerEvents":var h=n.parsedStyle.pointerEvents,f=h===void 0?"auto":h;i.style.pointerEvents=f;break;case"opacity":var d=n.parsedStyle.opacity;i.style.opacity="".concat(d);break;case"fill":var p=n.parsedStyle.fill,g="";(0,x.qA)(p)?p.isNone?g="transparent":g=n.getAttribute("fill"):Array.isArray(p)?g=n.getAttribute("fill"):(0,x.R)(p),i.style.background=g;break;case"stroke":var y=n.parsedStyle.stroke,m="";(0,x.qA)(y)?y.isNone?m="transparent":m=n.getAttribute("stroke"):Array.isArray(y)?m=n.getAttribute("stroke"):(0,x.R)(y),i.style["border-color"]=m,i.style["border-style"]="solid";break;case"lineWidth":var b=n.parsedStyle.lineWidth;i.style["border-width"]="".concat(b||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var E=n.style.filter;i.style.filter=E;break;default:!(0,Nt.Z)(n.style[e])&&n.style[e]!==""&&(i.style[e]=n.style[e])}}}])}();Xd.tag="HTMLRendering";var C2=function(r){function t(){var e;$d(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=S2(this,t,[].concat(i)),e.name="html-renderer",e}return O2(t,r),Yd(t,[{key:"init",value:function(){this.addRenderingPlugin(new Xd)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(x.F6);function Jc(){"use strict";Jc=function(){return t};var r,t={},e=Object.prototype,n=e.hasOwnProperty,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(C,S,A,j){return Object.defineProperty(C,S,{value:A,enumerable:!j,configurable:!j,writable:!j})}try{l({},"")}catch(C){l=function(A,j,Y){return A[j]=Y}}function c(C,S,A,j){var Y=S&&S.prototype instanceof f?S:f,ot=Object.create(Y.prototype);return l(ot,"_invoke",function(Lt,Xt,wt){var Ct=1;return function($t,ie){if(Ct===3)throw Error("Generator is already running");if(Ct===4){if($t==="throw")throw ie;return{value:r,done:!0}}for(wt.method=$t,wt.arg=ie;;){var ye=wt.delegate;if(ye){var ve=M(ye,wt);if(ve){if(ve===h)continue;return ve}}if(wt.method==="next")wt.sent=wt._sent=wt.arg;else if(wt.method==="throw"){if(Ct===1)throw Ct=4,wt.arg;wt.dispatchException(wt.arg)}else wt.method==="return"&&wt.abrupt("return",wt.arg);Ct=3;var Ee=u(Lt,Xt,wt);if(Ee.type==="normal"){if(Ct=wt.done?4:2,Ee.arg===h)continue;return{value:Ee.arg,done:wt.done}}Ee.type==="throw"&&(Ct=4,wt.method="throw",wt.arg=Ee.arg)}}}(C,A,new N(j||[])),!0),ot}function u(C,S,A){try{return{type:"normal",arg:C.call(S,A)}}catch(j){return{type:"throw",arg:j}}}t.wrap=c;var h={};function f(){}function d(){}function p(){}var g={};l(g,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(rt([])));m&&m!==e&&n.call(m,a)&&(g=m);var b=p.prototype=f.prototype=Object.create(g);function E(C){["next","throw","return"].forEach(function(S){l(C,S,function(A){return this._invoke(S,A)})})}function O(C,S){function A(Y,ot,Lt,Xt){var wt=u(C[Y],C,ot);if(wt.type!=="throw"){var Ct=wt.arg,$t=Ct.value;return $t&&pi($t)=="object"&&n.call($t,"__await")?S.resolve($t.__await).then(function(ie){A("next",ie,Lt,Xt)},function(ie){A("throw",ie,Lt,Xt)}):S.resolve($t).then(function(ie){Ct.value=ie,Lt(Ct)},function(ie){return A("throw",ie,Lt,Xt)})}Xt(wt.arg)}var j;l(this,"_invoke",function(Y,ot){function Lt(){return new S(function(Xt,wt){A(Y,ot,Xt,wt)})}return j=j?j.then(Lt,Lt):Lt()},!0)}function M(C,S){var A=S.method,j=C.i[A];if(j===r)return S.delegate=null,A==="throw"&&C.i.return&&(S.method="return",S.arg=r,M(C,S),S.method==="throw")||A!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+A+"' method")),h;var Y=u(j,C.i,S.arg);if(Y.type==="throw")return S.method="throw",S.arg=Y.arg,S.delegate=null,h;var ot=Y.arg;return ot?ot.done?(S[C.r]=ot.value,S.next=C.n,S.method!=="return"&&(S.method="next",S.arg=r),S.delegate=null,h):ot:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,h)}function k(C){this.tryEntries.push(C)}function D(C){var S=C[4]||{};S.type="normal",S.arg=r,C[4]=S}function N(C){this.tryEntries=[[-1]],C.forEach(k,this),this.reset(!0)}function rt(C){if(C!=null){var S=C[a];if(S)return S.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var A=-1,j=function Y(){for(;++A<C.length;)if(n.call(C,A))return Y.value=C[A],Y.done=!1,Y;return Y.value=r,Y.done=!0,Y};return j.next=j}}throw new TypeError(pi(C)+" is not iterable")}return d.prototype=p,l(b,"constructor",p),l(p,"constructor",d),d.displayName=l(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(C){var S=typeof C=="function"&&C.constructor;return!!S&&(S===d||(S.displayName||S.name)==="GeneratorFunction")},t.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,p):(C.__proto__=p,l(C,s,"GeneratorFunction")),C.prototype=Object.create(b),C},t.awrap=function(C){return{__await:C}},E(O.prototype),l(O.prototype,o,function(){return this}),t.AsyncIterator=O,t.async=function(C,S,A,j,Y){Y===void 0&&(Y=Promise);var ot=new O(c(C,S,A,j),Y);return t.isGeneratorFunction(S)?ot:ot.next().then(function(Lt){return Lt.done?Lt.value:ot.next()})},E(b),l(b,s,"Generator"),l(b,a,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),t.keys=function(C){var S=Object(C),A=[];for(var j in S)A.unshift(j);return function Y(){for(;A.length;)if((j=A.pop())in S)return Y.value=j,Y.done=!1,Y;return Y.done=!0,Y}},t.values=rt,N.prototype={constructor:N,reset:function(S){if(this.prev=this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!S)for(var A in this)A.charAt(0)==="t"&&n.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=r)},stop:function(){this.done=!0;var S=this.tryEntries[0][4];if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var A=this;function j($t){Lt.type="throw",Lt.arg=S,A.next=$t}for(var Y=A.tryEntries.length-1;Y>=0;--Y){var ot=this.tryEntries[Y],Lt=ot[4],Xt=this.prev,wt=ot[1],Ct=ot[2];if(ot[0]===-1)return j("end"),!1;if(!wt&&!Ct)throw Error("try statement without catch or finally");if(ot[0]!=null&&ot[0]<=Xt){if(Xt<wt)return this.method="next",this.arg=r,j(wt),!0;if(Xt<Ct)return j(Ct),!1}}},abrupt:function(S,A){for(var j=this.tryEntries.length-1;j>=0;--j){var Y=this.tryEntries[j];if(Y[0]>-1&&Y[0]<=this.prev&&this.prev<Y[2]){var ot=Y;break}}ot&&(S==="break"||S==="continue")&&ot[0]<=A&&A<=ot[2]&&(ot=null);var Lt=ot?ot[4]:{};return Lt.type=S,Lt.arg=A,ot?(this.method="next",this.next=ot[2],h):this.complete(Lt)},complete:function(S,A){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&A&&(this.next=A),h},finish:function(S){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j[2]===S)return this.complete(j[4],j[3]),D(j),h}},catch:function(S){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j[0]===S){var Y=j[4];if(Y.type==="throw"){var ot=Y.arg;D(j)}return ot}}throw Error("illegal catch attempt")},delegateYield:function(S,A,j){return this.delegate={i:rt(S),r:A,n:j},this.method==="next"&&(this.arg=r),h}},t}function qd(r,t,e,n,i,a,o){try{var s=r[a](o),l=s.value}catch(c){return void e(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function T2(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var a=r.apply(t,e);function o(l){qd(a,n,i,o,s,"next",l)}function s(l){qd(a,n,i,o,s,"throw",l)}o(void 0)})}}var A2=function(){function r(t){Ic(this,r),this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return Lc(r,[{key:"init",value:function(){var e=this.canvasConfig,n=e.container,i=e.canvas;if(i)this.$canvas=i,n&&i.parentElement!==n&&n.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=(0,ae.Z)(n)?document.getElementById(n):n,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(e,n){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*e,this.$canvas.height=this.dpr*n,(0,x.$p)(this.$canvas,e,n)),this.renderingContext.renderReasons.add(x.Rr.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(e){this.$container&&this.$container.style&&(this.$container.style.cursor=e)}},{key:"toDataURL",value:function(){var t=T2(Jc().mark(function n(){var i,a,o,s=arguments;return Jc().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=s.length>0&&s[0]!==void 0?s[0]:{},a=i.type,o=i.encoderOptions,c.abrupt("return",this.context.canvas.toDataURL(a,o));case 3:case"end":return c.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()}])}(),P2=function(r){function t(){var e;Ic(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=id(this,t,[].concat(i)),e.name="canvas-context-register",e}return ad(t,r),Lc(t,[{key:"init",value:function(){this.context.ContextService=A2}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(x.F6),Ya=function(r){function t(e){var n;return Ic(this,t),n=id(this,t,[e]),n.registerPlugin(new P2),n.registerPlugin(new o2),n.registerPlugin(new ab),n.registerPlugin(new f2),n.registerPlugin(new b2),n.registerPlugin(new Ib),n.registerPlugin(new C2),n}return ad(t,r),Lc(t)}(x.I8),Ka=G(23413),tn=G(71154),R2=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class Xa extends Cr{constructor(t){super(Object.assign(Object.assign({},t),{style:Object.assign({},Xa.defaultStyleProps,t.style)})),this.rootPointerEvent=new x.nR(null),this.forwardEvents=e=>{const n=this.context.canvas,i=n.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(e,i).forEach(o=>{const s=this.bootstrapEvent(this.rootPointerEvent,o,i,e);za(n.context.eventService,"mappingTable.pointerupoutside",[]),n.context.eventService.mapEvent(s)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[Zt.CLICK,Zt.POINTER_DOWN,Zt.POINTER_MOVE,Zt.POINTER_UP,Zt.POINTER_OVER,Zt.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(t=this.parsedAttributes,e=this){this.drawKeyShape(t,e),this.drawPortShapes(t,e)}getKeyStyle(t){const e=(0,Ka.Z)(t,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:n=0,dy:i=0}=e,a=R2(e,["dx","dy"]),[o,s]=this.getSize(t);return Object.assign(Object.assign({x:n,y:i},a),{width:o,height:s})}drawKeyShape(t,e){const n=this.getKeyStyle(t),{x:i,y:a,width:o=0,height:s=0}=n,l=this.upsert("key-container",x.UL,{x:i,y:a,width:o,height:s,opacity:0},e);return this.upsert("key",x.k9,n,l)}connectedCallback(){if(!(this.context.canvas.getRenderer("main")instanceof Ya))return;const n=this.getDomElement();this.events.forEach(i=>{n.addEventListener(i,this.forwardEvents)})}attributeChangedCallback(t,e,n){t==="zIndex"&&e!==n&&(this.getDomElement().style.zIndex=n)}destroy(){const t=this.getDomElement();this.events.forEach(e=>{t.removeEventListener(e,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(t,e){const n=[];if(e.isTouchEvent(t))for(let i=0;i<t.changedTouches.length;i++){const a=t.changedTouches[i];(0,tn.Z)(a.button)&&(a.button=0),(0,tn.Z)(a.buttons)&&(a.buttons=1),(0,tn.Z)(a.isPrimary)&&(a.isPrimary=t.touches.length===1&&t.type==="touchstart"),(0,tn.Z)(a.width)&&(a.width=a.radiusX||1),(0,tn.Z)(a.height)&&(a.height=a.radiusY||1),(0,tn.Z)(a.tiltX)&&(a.tiltX=0),(0,tn.Z)(a.tiltY)&&(a.tiltY=0),(0,tn.Z)(a.pointerType)&&(a.pointerType="touch"),(0,tn.Z)(a.pointerId)&&(a.pointerId=a.identifier||0),(0,tn.Z)(a.pressure)&&(a.pressure=a.force||.5),(0,tn.Z)(a.twist)&&(a.twist=0),(0,tn.Z)(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=t.type,n.push(a)}else if(e.isMouseEvent(t)){const i=t;(0,tn.Z)(i.isPrimary)&&(i.isPrimary=!0),(0,tn.Z)(i.width)&&(i.width=1),(0,tn.Z)(i.height)&&(i.height=1),(0,tn.Z)(i.tiltX)&&(i.tiltX=0),(0,tn.Z)(i.tiltY)&&(i.tiltY=0),(0,tn.Z)(i.pointerType)&&(i.pointerType="mouse"),(0,tn.Z)(i.pointerId)&&(i.pointerId=1),(0,tn.Z)(i.pressure)&&(i.pressure=.5),(0,tn.Z)(i.twist)&&(i.twist=0),(0,tn.Z)(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,n.push(i)}else n.push(t);return n}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}bootstrapEvent(t,e,n,i){t.view=n,t.originalEvent=null,t.nativeEvent=i,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);const{x:a,y:o}=this.getViewportXY(e);t.viewport.x=a,t.viewport.y=o;const[s,l]=this.context.canvas.getCanvasByViewport([a,o]);return t.canvas.x=s,t.canvas.y=l,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t}getViewportXY(t){let e,n;const{offsetX:i,offsetY:a,clientX:o,clientY:s}=t;if(!(0,Nt.Z)(i)&&!(0,Nt.Z)(a))e=i,n=a;else{const l=this.eventService.client2Viewport({x:o,y:s});e=l.x,n=l.y}return{x:e,y:n}}onframe(){super.onframe();const{opacity:t}=this.attributes;this.getDomElement().style.opacity=`${t}`}}Xa.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var Qd=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class _s extends Cr{constructor(t){super(bn({style:_s.defaultStyleProps},t))}getKeyStyle(t){const[e,n]=this.getSize(t),i=super.getKeyStyle(t),{fillOpacity:a,opacity:o=a}=i,s=Qd(i,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:o},s),{width:e,height:n,x:-e/2,y:-n/2})}getBounds(){return this.getShape("key").getBounds()}getHaloStyle(t){if(t.halo===!1)return!1;const e=this.getShape("key").attributes,{fill:n,stroke:i}=e,a=Qd(e,["fill","stroke"]),o=dn(this.getGraphicStyle(t),"halo"),s=Number(o.lineWidth),[l,c]=Ce(this.getSize(t),[s,s]),{lineWidth:u}=o,h={fill:"transparent",lineWidth:u/2,width:l-u/2,height:c-u/2,x:-(l-u/2)/2,y:-(c-u/2)/2};return Object.assign(Object.assign({},o),h)}getIconStyle(t){const e=super.getIconStyle(t),[n,i]=this.getSize(t);return e?Object.assign({width:n*Jr,height:i*Jr},e):!1}drawKeyShape(t,e){const n=this.upsert("key",Pc,this.getKeyStyle(t),e);return Dc(this),n}drawHaloShape(t,e){this.upsert("halo",x.UL,this.getHaloStyle(t),e)}update(t){super.update(t),t&&("x"in t||"y"in t||"z"in t)&&kc(this)}}_s.defaultStyleProps={size:32};class D2 extends Cr{constructor(t){super(t)}getKeyStyle(t){const[e,n]=this.getSize(t);return Object.assign(Object.assign({},super.getKeyStyle(t)),{width:e,height:n,x:-e/2,y:-n/2})}getIconStyle(t){const e=super.getIconStyle(t),{width:n,height:i}=this.getShape("key").attributes;return e?Object.assign({width:n*Jr,height:i*Jr},e):!1}drawKeyShape(t,e){return this.upsert("key",x.UL,this.getKeyStyle(t),e)}}class k2 extends Jo{constructor(t){super(t)}getInnerR(t){return t.innerR||this.getOuterR(t)*3/8}getOuterR(t){return Math.min(...this.getSize(t))/2}getPoints(t){return x_(this.getOuterR(t),this.getInnerR(t))}getIconStyle(t){const e=super.getIconStyle(t),n=this.getInnerR(t)*2*Jr;return e?Object.assign({width:n,height:n},e):!1}getPortXY(t,e){const{placement:n="top"}=e,i=this.getShape("key").getLocalBounds(),a=E_(this.getOuterR(t),this.getInnerR(t));return ou(i,n,a,!1)}}class xs extends Jo{constructor(t){super(bn({style:xs.defaultStyleProps},t))}getPoints(t){const{direction:e}=t,[n,i]=this.getSize(t);return w_(n,i,e)}getPortXY(t,e){const{direction:n}=t,{placement:i="top"}=e,a=this.getShape("key").getLocalBounds(),[o,s]=this.getSize(t),l=S_(o,s,n);return ou(a,i,l,!1)}getIconStyle(t){const{icon:e,iconText:n,iconSrc:i,direction:a}=t;if(e===!1||Wr(n||i))return!1;const o=dn(this.getGraphicStyle(t),"icon"),s=this.getShape("key").getLocalBounds(),[l,c]=cy(s,a),u=uy(s,a)*2*Jr;return Object.assign({x:l,y:c,width:u,height:u},o)}}xs.defaultStyleProps={size:40,direction:"up"};var Jd=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class pa extends Cr{constructor(t){super(bn({style:pa.defaultStyleProps},t)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(t){const{collapsed:e,childrenNode:n=[]}=t;return n.length===0?this.getEmptyKeySize(t):e?this.getCollapsedKeySize(t):this.getExpandedKeySize(t)}getEmptyKeySize(t){const{padding:e,collapsedSize:n}=t,[i,a,o,s]=xr(e);return Ce(tr(n),[s+a,i+o,0])}getCollapsedKeySize(t){return tr(t.collapsedSize)}getExpandedKeySize(t){const e=this.getContentBBox(t);return[Br(e),Fr(e),0]}getContentBBox(t){const{childrenNode:e=[],padding:n}=t,i=e.map(o=>this.context.element.getElement(o)).filter(Boolean);if(i.length===0){const o=new x.mN,{x:s=0,y:l=0,size:c}=t,[u,h]=tr(c);return o.setMinMax([s-u/2,l-h/2,0],[s+u/2,l+h/2,0]),o}const a=ka(i.map(o=>o.getBounds()));return n?ci(a,n):a}drawCollapsedMarkerShape(t,e){const n=this.getCollapsedMarkerStyle(t);this.upsert("collapsed-marker",td,n,e),Dc(this)}getCollapsedMarkerStyle(t){if(!t.collapsed||!t.collapsedMarker)return!1;const e=dn(this.getGraphicStyle(t),"collapsedMarker"),{type:n}=e,i=Jd(e,["type"]),a=this.getShape("key"),[o,s]=Qr(a.getLocalBounds(),"center"),l=Object.assign(Object.assign({},i),{x:o,y:s});if(n){const c=this.getCollapsedMarkerText(n,t);Object.assign(l,{text:c})}return l}getCollapsedMarkerText(t,e){const{childrenData:n=[]}=e,{model:i}=this.context;return t==="descendant-count"?i.getDescendantsData(this.id).length.toString():t==="child-count"?n.length.toString():t==="node-count"?i.getDescendantsData(this.id).filter(a=>i.getElementType(St(a))==="node").length.toString():(0,Se.Z)(t)?t(n):""}getComboPosition(t){const{x:e=0,y:n=0,collapsed:i,childrenData:a=[]}=t;if(a.length===0)return[+e,+n,0];if(i){const{model:o}=this.context,s=o.getDescendantsData(this.id).filter(l=>!o.isCombo(St(l)));if(s.length>0&&s.some(qm)){const l=s.reduce((c,u)=>Ce(c,gn(u)),[0,0,0]);return Or(l,s.length)}return[+e,+n,0]}return this.getContentBBox(t).center}getComboStyle(t){const[e,n]=this.getComboPosition(t);return{x:e,y:n,transform:[["translate",e,n]]}}updateComboPosition(t){const e=this.getComboStyle(t);Object.assign(this.style,e);const{x:n,y:i}=e;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:i}}),kc(this)}render(t,e=this){super.render(t,e),this.drawCollapsedMarkerShape(t,e)}update(t={}){super.update(t),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(t,e){const n=super.animate(this.attributes.collapsed?t:t.map(i=>{var{x:a,y:o,z:s,transform:l}=i,c=Jd(i,["x","y","z","transform"]);return c}),e);return n&&new Proxy(n,{set:(i,a,o)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,o))})}}pa.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class L2 extends pa{constructor(t){super(t)}drawKeyShape(t,e){return this.upsert("key",x.Cd,this.getKeyStyle(t),e)}getKeyStyle(t){const{collapsed:e}=t,n=super.getKeyStyle(t),[i]=this.getKeySize(t);return Object.assign(Object.assign(Object.assign({},n),e&&dn(n,"collapsed")),{r:i/2})}getCollapsedKeySize(t){const[e,n]=tr(t.collapsedSize),i=Math.max(e,n)/2;return[i*2,i*2,0]}getExpandedKeySize(t){const e=this.getContentBBox(t),[n,i]=si(e),a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2))/2;return[a*2,a*2,0]}getIntersectPoint(t,e=!1){const n=this.getShape("key").getBounds();return Yo(t,n,e)}}class I2 extends pa{constructor(t){super(t)}drawKeyShape(t,e){return this.upsert("key",x.UL,this.getKeyStyle(t),e)}getKeyStyle(t){const e=super.getKeyStyle(t),[n,i]=this.getKeySize(t);return Object.assign(Object.assign(Object.assign({},e),t.collapsed&&dn(e,"collapsed")),{width:n,height:i,x:-n/2,y:-i/2})}}var N2=function(r,t){if(!Ra(r))return r;for(var e=[],n=0;n<r.length;n++){var i=r[n];t(i,n)&&e.push(i)}return e},j2=N2,B2=function(r,t){return Ra(r)?r.indexOf(t)>-1:!1},F2=B2,z2=function(r,t){return t===void 0&&(t=[]),j2(r,function(e){return!F2(t,e)})},W2=z2;const G2={padding:10};function tp(r,t,e,n,i,a){const{padding:o}=Object.assign(G2,a),s=li(e,o),l=li(n,o),c=[r,...i,t];let u=null;const h=[];for(let f=0,d=c.length;f<d-1;f++){const p=f+1,g=c[f],y=c[p],m=Jm(g,y);let b=null;if(f===0)if(p===d-1)if(s.intersects(l))b=eu(g,y,s,l);else if(!Ro(g,s)&&!Ro(y,l)){const E=ki(g,s),O=ki(y,l);b=np(E,O,jn(E,O)),b.points.unshift(E),b.points.push(O)}else m||(b=H2(g,y,s,l));else Er(y,s)?b=eu(g,y,s,li(y,o),u):m||(b=Es(g,y,s));else p===d-1?Er(g,l)?b=eu(g,y,li(g,o),l,u):m||(b=rp(g,y,l,u)):m||(b=np(g,y,u));b?(h.push(...b.points),u=b.direction):u=jn(g,y),p<d-1&&h.push(y)}return h.map(Ni)}const V2={N:"S",S:"N",W:"E",E:"W"},ep={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function jn(r,t){const[e,n]=r,[i,a]=t;return e===i?n>a?"N":"S":n===a?e>i?"W":"E":null}function tu(r,t){return t==="N"||t==="S"?Fr(r):Br(r)}function np(r,t,e){const n=[r[0],t[1]],i=[t[0],r[1]],a=jn(r,n),o=jn(r,i),s=e?V2[e]:null,l=a===e||a!==s&&o!==e?n:i;return{points:[l],direction:jn(l,t)}}function Es(r,t,e){if(Ro(r,e)){const n=qa(r,t,e);return{points:[n],direction:jn(n,t)}}else{const n=ki(r,e),a=["left","right"].includes(La(r,e))?[t[0],n[1]]:[n[0],t[1]];return{points:[a],direction:jn(a,t)}}}function rp(r,t,e,n){const i=Ro(t,e)?t:ki(t,e),a=[[i[0],r[1]],[r[0],i[1]]],o=a.filter(l=>ly(l,e)&&!Gh(l,e,!0)),s=o.filter(l=>jn(l,r)!==n);if(s.length>0){const l=s.find(c=>jn(r,c)===n)||s[0];return{points:[l],direction:jn(l,t)}}else{const l=W2(a,o)[0],c=fi(t,l,tu(e,n)/2);return{points:[qa(c,r,e),c],direction:jn(c,t)}}}function H2(r,t,e,n){let i=Es(r,t,e);const a=ja(i.points[0]);if(Er(a,n)){i=Es(t,r,n);const o=ja(i.points[0]);if(Er(o,e)){const s=fi(r,a,tu(e,jn(r,a))/2),l=fi(t,o,tu(n,jn(t,o))/2),c=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=Es(r,c,e),h=rp(c,t,n,u.direction);i.points=[u.points[0],h.points[0]],i.direction=h.direction}}return i}function eu(r,t,e,n,i){const o=ka([e,n]),s=$e(t,o.center)>$e(r,o.center),[l,c]=s?[t,r]:[r,t],u=Fr(o)+Br(o);let h;if(i){const p=[l[0]+u*Math.cos(ep[i]),l[1]+u*Math.sin(ep[i])];h=fi(ki(p,o),p,.01)}else h=fi(ki(l,o),l,-.01);let f=qa(h,c,o),d=[Ba(h,2),Ba(f,2)];if(cn(Ba(h),Ba(f))){const p=Ec(Fe(h,l),[1,0,0])+Math.PI/2;f=[c[0]+u*Math.cos(p),c[1]+u*Math.sin(p),0],f=Ba(fi(ki(f,o),c,-.01),2);const g=qa(h,f,o);d=[h,g,f]}return{points:s?d.reverse():d,direction:jn(s?h:f,t)}}function qa(r,t,e){let n=[r[0],t[1]];return Er(n,e)&&(n=[t[0],r[1]]),n}function ip(r,t,e,n,i){let l=typeof t=="number"?t:.5;t==="start"&&(l=0),t==="end"&&(l=.99);const c=Cn(r.getPoint(l)),u=Cn(r.getPoint(l+.01));let h=t==="start"?"left":t==="end"?"right":"center";if(If(c,u)||!e){const[m,b]=ap(r,l,n,i);return{transform:[["translate",m,b]],textAlign:h}}let f=Math.atan2(u[1]-c[1],u[0]-c[0]);u[0]<c[0]&&(h=h==="center"?h:h==="left"?"right":"left",n*=-1,f+=Math.PI);const[p,g]=ap(r,l,n,i,f),y=[["translate",p,g],["rotate",f/Math.PI*180]];return{textAlign:h,transform:y}}function Z2(r,t,e,n,i){var a,o;const s=((a=r.badge)===null||a===void 0?void 0:a.getGeometryBounds().halfExtents[0])*2||0,l=((o=r.label)===null||o===void 0?void 0:o.getGeometryBounds().halfExtents[0])*2||0;return ip(r.key,e,!0,(l?(l/2+s/2)*(t==="suffix"?1:-1):0)+n,i)}function ap(r,t,e,n,i){const[a,o]=Cn(r.getPoint(t));let s=e,l=n;return i&&(s=e*Math.cos(i)-n*Math.sin(i),l=e*Math.sin(i)+n*Math.cos(i)),[a+s,o+l]}function nu(r,t,e,n){if(cn(r,t))return r;const i=Fe(t,r),a=[r[0]+e*i[0],r[1]+e*i[1]],o=qr(Uo(i,!1));return a[0]+=n*o[0],a[1]+=n*o[1],a}function $2(r){return(0,pt.Z)(r)?[r,-r]:r}function U2(r){return(0,pt.Z)(r)?[r,1-r]:r}function Y2(r,t,e){return[["M",r[0],r[1]],["Q",e[0],e[1],t[0],t[1]]]}function op(r,t,e){return[["M",r[0],r[1]],["C",e[0][0],e[0][1],e[1][0],e[1][1],t[0],t[1]]]}function ru(r,t=0,e=!1){const n=r.length-1,i=r[0],a=r[n],o=r.slice(1,n),s=[["M",i[0],i[1]]];return o.forEach((l,c)=>{const u=o[c-1]||i,h=o[c+1]||a;if(!Nf(u,l,h)&&t){const[f,d]=K2(u,l,h,t);s.push(["L",f[0],f[1]],["Q",l[0],l[1],d[0],d[1]],["L",d[0],d[1]])}else s.push(["L",l[0],l[1]])}),s.push(["L",a[0],a[1]]),e&&s.push(["Z"]),s}function K2(r,t,e,n){const i=$o(r,t),a=$o(e,t),o=Math.min(n,Math.min(i,a)/2),s=[t[0]-o/i*(t[0]-r[0]),t[1]-o/i*(t[1]-r[1])],l=[t[0]-o/a*(t[0]-e[0]),t[1]-o/a*(t[1]-e[1])];return[s,l]}const X2=r=>{const t=Math.PI/2,e=Fr(r)/2,n=Br(r)/2,i=Math.atan2(e,n)/2,a=Math.atan2(n,e)/2;return{top:[-t-a,-t+a],"top-right":[-t+a,-i],"right-top":[-t+a,-i],right:[-i,i],"bottom-right":[i,t-a],"right-bottom":[i,t-a],bottom:[t-a,t+a],"bottom-left":[t+a,Math.PI-i],"left-bottom":[t+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-t-a],"left-top":[Math.PI+i,-t-a]}};function sp(r,t,e,n,i){const a=li(r),o=r.getCenter();let s=n&&xi(n),l=i&&xi(i);if(!s||!l){const c=X2(a),u=c[t][0],h=c[t][1],[f,d]=si(a),p=Math.max(f,d),g=Ce(o,[p*Math.cos(u),p*Math.sin(u),0]),y=Ce(o,[p*Math.cos(h),p*Math.sin(h),0]);s=lu(r,g),l=lu(r,y),e||([s,l]=[l,s])}return[s,l]}function q2(r,t,e,n,i,a){const o=r.getPorts()[i||a],s=r.getPorts()[a||i];let[l,c]=sp(r,t,e,o,s);const u=Q2(r,l,c,n);return o&&(l=Ja(o,u[0])),s&&(c=Ja(s,u.at(-1))),op(l,c,u)}function Q2(r,t,e,n){const i=r.getCenter();if(cn(t,e)){const a=Fe(t,i),o=[n*Math.sign(a[0])||n/2,n*Math.sign(a[1])||-n/2,0];return[Ce(t,o),Ce(e,Sr(o,[1,-1,1]))]}return[fi(i,t,$e(i,t)+n),fi(i,e,$e(i,e)+n)]}function J2(r,t,e,n,i,a,o){const s=su(r),l=s[a||o],c=s[o||a];let[u,h]=sp(r,e,n,l,c);const f=t_(r,u,h,i);return l&&(u=Ja(l,f[0])),c&&(h=Ja(c,f.at(-1))),ru([u,...f,h],t)}function t_(r,t,e,n){const i=[],a=li(r);if(cn(t,e))switch(La(t,a)){case"left":i.push([t[0]-n,t[1]]),i.push([t[0]-n,t[1]+n]),i.push([t[0],t[1]+n]);break;case"right":i.push([t[0]+n,t[1]]),i.push([t[0]+n,t[1]+n]),i.push([t[0],t[1]+n]);break;case"top":i.push([t[0],t[1]-n]),i.push([t[0]+n,t[1]-n]),i.push([t[0]+n,t[1]]);break;case"bottom":i.push([t[0],t[1]+n]),i.push([t[0]+n,t[1]+n]),i.push([t[0]+n,t[1]]);break}else{const o=La(t,a),s=La(e,a);if(o===s){const l=o;let c,u;switch(l){case"left":c=Math.min(t[0],e[0])-n,i.push([c,t[1]]),i.push([c,e[1]]);break;case"right":c=Math.max(t[0],e[0])+n,i.push([c,t[1]]),i.push([c,e[1]]);break;case"top":u=Math.min(t[1],e[1])-n,i.push([t[0],u]),i.push([e[0],u]);break;case"bottom":u=Math.max(t[1],e[1])+n,i.push([t[0],u]),i.push([e[0],u]);break}}else{const l=(f,d)=>({left:[d[0]-n,d[1]],right:[d[0]+n,d[1]],top:[d[0],d[1]-n],bottom:[d[0],d[1]+n]})[f],c=l(o,t),u=l(s,e),h=qa(c,u,a);i.push(c,h,u)}}return i}function iu(r,t){const e=new Set,n=new Set,i=new Set;return r.forEach(a=>{t(a).forEach(s=>{e.add(s),r.includes(s.source)&&r.includes(s.target)?n.add(s):i.add(s)})}),{edges:Array.from(e),internal:Array.from(n),external:Array.from(i)}}function lp(r,t){const e=[];let n=r;for(;n;){e.push(n);const i=t(St(n));if(i)n=i;else break}if(e.some(i=>{var a;return(a=i.style)===null||a===void 0?void 0:a.collapsed})){const i=e.reverse().findIndex($n);return e[i]||e.at(-1)}return r}function e_(r,t){return t||(r<4?10:r===4?12:r*2.5)}const n_=(r,t)=>{const e=Math.max(r,t)/2;return[["M",-r/2,0],["A",e,e,0,1,0,2*e-r/2,0],["A",e,e,0,1,0,-r/2,0],["Z"]]},cp=(r,t)=>[["M",-r/2,0],["L",r/2,-t/2],["L",r/2,t/2],["Z"]],r_=(r,t)=>[["M",-r/2,0],["L",0,-t/2],["L",r/2,0],["L",0,t/2],["Z"]],i_=(r,t)=>[["M",-r/2,0],["L",r/2,-t/2],["L",4*r/5-r/2,0],["L",r/2,t/2],["Z"]],a_=(r,t)=>[["M",-r/2,-t/2],["L",r/2,-t/2],["L",r/2,t/2],["L",-r/2,t/2],["Z"]],o_=(r,t)=>{const e=r/2,n=r/7,i=r-n;return[["M",-e,0],["L",0,-t/2],["L",0,t/2],["Z"],["M",i-e,-t/2],["L",i+n-e,-t/2],["L",i+n-e,t/2],["L",i-e,t/2],["Z"]]},s_=(r,t)=>[["M",r/2,-t/2],["L",-r/2,0],["L",r/2,0],["L",-r/2,0],["L",r/2,t/2]];var ws=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class _i extends ed{constructor(t){super(bn({style:_i.defaultStyleProps},t)),this.type="edge"}get sourceNode(){const{sourceNode:t}=this.parsedAttributes;return this.context.element.getElement(t)}get targetNode(){const{targetNode:t}=this.parsedAttributes;return this.context.element.getElement(t)}getKeyStyle(t){const e=this.getGraphicStyle(t),{loop:n}=e,i=ws(e,["loop"]),{sourceNode:a,targetNode:o}=this,l={d:n&&y_(a,o)?this.getLoopPath(t):this.getKeyPath(t)};return x.y$.PARSED_STYLE_LIST.forEach(c=>{c in i&&(l[c]=i[c])}),l}getLoopPath(t){const{sourcePort:e,targetPort:n}=t,i=this.sourceNode,a=li(i),o=Math.max(Br(a),Fr(a)),{placement:s,clockwise:l,dist:c=o}=dn(this.getGraphicStyle(t),"loop");return q2(i,s,l,c,e,n)}getEndpoints(t,e=!0,n=[]){const{sourcePort:i,targetPort:a}=t,{sourceNode:o,targetNode:s}=this,[l,c]=b_(o,s,i,a);if(!e){const d=l?xi(l):o.getCenter(),p=c?xi(c):s.getCenter();return[d,p]}const u=typeof n=="function"?n():n,h=yp(l||o,u[0]||c||s),f=yp(c||s,u[u.length-1]||l||o);return[h,f]}getHaloStyle(t){if(t.halo===!1)return!1;const e=this.getKeyStyle(t),n=dn(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign({},e),n)}getLabelStyle(t){if(t.label===!1||!t.labelText)return!1;const e=dn(this.getGraphicStyle(t),"label"),{placement:n,offsetX:i,offsetY:a,autoRotate:o,maxWidth:s}=e,l=ws(e,["placement","offsetX","offsetY","autoRotate","maxWidth"]),c=ip(this.shapeMap.key,n,o,i,a),u=this.shapeMap.key.getLocalBounds(),h=d1([u.min,u.max],s);return Object.assign({wordWrapWidth:h},c,l)}getBadgeStyle(t){if(t.badge===!1||!t.badgeText)return!1;const e=dn(t,"badge"),{offsetX:n,offsetY:i,placement:a}=e,o=ws(e,["offsetX","offsetY","placement"]);return Object.assign(o,Z2(this.shapeMap,a,t.labelPlacement,n,i))}drawArrow(t,e){var n;const i=e==="start",o=t[e==="start"?"startArrow":"endArrow"],s=this.shapeMap.key;if(o){const l=this.getArrowStyle(t,i),[c,u,h]=i?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],f=s.parsedStyle[c];if(f)f.attr(l);else{const d=l.src?x.Ee:x.y$,p=new d({style:l});s.style[c]=p}s.style[u]=t[h]||l.width/2+ +l.lineWidth}else{const l=i?"markerStart":"markerEnd";(n=s.style[l])===null||n===void 0||n.destroy(),s.style[l]=null}}getArrowStyle(t,e){const n=this.getShape("key").attributes,i=e?"startArrow":"endArrow",a=dn(this.getGraphicStyle(t),i),{size:o,type:s}=a,l=ws(a,["size","type"]),[c,u]=tr(e_(n.lineWidth,o)),f=((0,Se.Z)(s)?s:U[s]||cp)(c,u);return Object.assign((0,Ka.Z)(n,["stroke","strokeOpacity","fillOpacity"]),{width:c,height:u},Object.assign({},f&&{d:f,fill:s==="simple"?"":n.stroke}),l)}drawLabelShape(t,e){const n=this.getLabelStyle(t);this.upsert("label",di,n,e)}drawHaloShape(t,e){const n=this.getHaloStyle(t);this.upsert("halo",x.y$,n,e)}drawBadgeShape(t,e){const n=this.getBadgeStyle(t);this.upsert("badge",aa,n,e)}drawSourceArrow(t){this.drawArrow(t,"start")}drawTargetArrow(t){this.drawArrow(t,"end")}drawKeyShape(t,e){const n=this.getKeyStyle(t);return this.upsert("key",x.y$,n,e)}render(t=this.parsedAttributes,e=this){this.drawKeyShape(t,e),this.getShape("key")&&(this.drawSourceArrow(t),this.drawTargetArrow(t),this.drawLabelShape(t,e),this.drawHaloShape(t,e),this.drawBadgeShape(t,e))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(t,e){const n=super.animate(t,e);return n&&new Proxy(n,{set:(i,a,o)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,o))})}}_i.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class zi extends _i{constructor(t){super(bn({style:zi.defaultStyleProps},t))}getKeyPath(t){const[e,n]=this.getEndpoints(t),{controlPoints:i,curvePosition:a,curveOffset:o}=t,s=this.getControlPoints(e,n,U2(a),$2(o),i);return op(e,n,s)}getControlPoints(t,e,n,i,a){return(a==null?void 0:a.length)===2?a:[nu(t,e,n[0],i[0]),nu(t,e,n[1],i[1])]}}zi.defaultStyleProps={curvePosition:.5,curveOffset:20};class Ss extends zi{constructor(t){super(bn({style:Ss.defaultStyleProps},t))}getControlPoints(t,e,n,i){const a=e[0]-t[0];return[[t[0]+a*n[0]+i[0],t[1]],[e[0]-a*n[1]+i[1],e[1]]]}}Ss.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class Os extends zi{constructor(t){super(bn({style:Os.defaultStyleProps},t))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(t){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(t);const e=gn(this.ref),n=this.sourceNode.getIntersectPoint(e,!0),i=this.targetNode.getIntersectPoint(e);return[n,i]}toRadialCoordinate(t){const e=gn(this.ref),n=$e(t,e),i=Rf(Fe(t,e));return[n,i]}getControlPoints(t,e,n,i){const[a,o]=this.toRadialCoordinate(t),[s]=this.toRadialCoordinate(e),l=s-a;return[[t[0]+(l*n[0]+i[0])*Math.cos(o),t[1]+(l*n[0]+i[0])*Math.sin(o)],[e[0]-(l*n[1]-i[0])*Math.cos(o),e[1]-(l*n[1]-i[0])*Math.sin(o)]]}}Os.defaultStyleProps={curvePosition:.5,curveOffset:20};class Ms extends zi{constructor(t){super(bn({style:Ms.defaultStyleProps},t))}getControlPoints(t,e,n,i){const a=e[1]-t[1];return[[t[0],t[1]+a*n[0]+i[0]],[e[0],e[1]-a*n[1]+i[1]]]}}Ms.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class Cs extends _i{constructor(t){super(bn({style:Cs.defaultStyleProps},t))}getKeyPath(t){const[e,n]=this.getEndpoints(t);return[["M",e[0],e[1]],["L",n[0],n[1]]]}}Cs.defaultStyleProps={};const l_={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:$o},ti=r=>`${Math.round(r[0])}|||${Math.round(r[1])}`;function Wi(r,t){const e=n=>Math.round(n/t);return(0,pt.Z)(r)?e(r):r.map(e)}function c_(r,t){const e=Math.abs(r-t);return e>Math.PI?2*Math.PI-e:e}function up(r,t){const e=t[0]-r[0],n=t[1]-r[1];return!e&&!n?0:Math.atan2(n,e)}function hp(r,t,e,n){const i=up(r,t),a=e[ti(r)],s=up(a||n,r);return c_(s,i)}const u_=(r,t)=>{const{offset:e,gridSize:n}=t,i={};return r.forEach(a=>{if(!a||a.destroyed||!a.isVisible())return;const o=ci(a.getRenderBounds(),e);for(let s=Wi(o.min[0],n);s<=Wi(o.max[0],n);s+=1)for(let l=Wi(o.min[1],n);l<=Wi(o.max[1],n);l+=1)i[`${s}|||${l}`]=!0}),i};function fp(r,t,e){return Math.min(...t.map(n=>e(r,n)))}function h_(r,t,e){let n=r[0],i=e(r[0],t);for(let a=0;a<r.length;a++){const o=r[a],s=e(o,t);s<i&&(n=o,i=s)}return n}const dp=(r,t,e,n)=>{if(!t)return[r];const{directionMap:i,offset:a}=n,o=ci(t.getRenderBounds(),a),s=Object.keys(i).reduce((l,c)=>{if(e.includes(c)){const u=i[c],[h,f]=si(o),d=[r[0]+u.stepX*h,r[1]+u.stepY*f],p=hy(o);for(let g=0;g<p.length;g++){const y=Sc([r,d],p[g]);y&&Gh(y,o)&&l.push(y)}}return l},[]);return Er(r,o)||s.push(r),s.map(l=>Wi(l,n.gridSize))},f_=(r,t,e,n,i,a,o)=>{const s=[];let l=[a[0]===n[0]?n[0]:r[0]*o,a[1]===n[1]?n[1]:r[1]*o];s.unshift(l);let c=r,u=t[ti(c)];for(;u;){const d=u,p=c;hp(d,p,t,e)&&(l=[d[0]===p[0]?l[0]:d[0]*o,d[1]===p[1]?l[1]:d[1]*o],s.unshift(l)),u=t[ti(d)],c=d}const h=i.map(d=>[d[0]*o,d[1]*o]),f=h_(h,l,$o);return s.unshift(f),s};function d_(r,t,e,n){const i=Ni(r.getCenter()),a=Ni(t.getCenter()),o=Object.assign(l_,n),{gridSize:s}=o,l=o.enableObstacleAvoidance?e:[r,t],c=u_(l,o),u=Wi(i,s),h=Wi(a,s),f=dp(i,r,o.startDirections,o),d=dp(a,t,o.endDirections,o);f.forEach(N=>delete c[ti(N)]),d.forEach(N=>delete c[ti(N)]);const p={},g={},y={},m={},b={},E=new p_;for(let N=0;N<f.length;N++){const rt=f[N],C=ti(rt);p[C]=rt,m[C]=0,b[C]=fp(rt,d,o.distFunc),E.add({id:C,value:b[C]})}const O=d.map(N=>ti(N));let M=o.maximumLoops,k,D=1/0;for(const[N,rt]of Object.entries(p))b[N]<=D&&(D=b[N],k=rt);for(;Object.keys(p).length>0&&M>0;){const N=E.minId(!1);if(N)k=p[N];else break;const rt=ti(k);if(O.includes(rt))return f_(k,y,u,a,f,h,s);delete p[rt],E.remove(rt),g[rt]=!0;for(const C of Object.values(o.directionMap)){const S=Ce(k,[C.stepX,C.stepY]),A=ti(S);if(g[A])continue;const j=hp(k,S,y,u);if(j>o.maxAllowedDirectionChange||c[A])continue;p[A]||(p[A]=S);const Y=o.penalties[j],ot=o.distFunc(k,S)+(isNaN(Y)?s:Y),Lt=m[rt]+ot,Xt=m[A];Xt&&Lt>=Xt||(y[A]=k,m[A]=Lt,b[A]=Lt+fp(S,d,o.distFunc),E.add({id:A,value:b[A]}))}M-=1}return[]}class p_{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(t,e){let n=0,i=e-1;for(;i-n>1;){const a=Math.floor((n+i)/2);if(this.arr[a].value>t.value)i=a;else if(this.arr[a].value<t.value)n=a;else{this.arr.splice(a,0,t),this.map[t.id]=!0;return}}this.arr.splice(i,0,t),this.map[t.id]=!0}add(t){delete this.map[t.id];const e=this.arr.length;if(!e||this.arr[e-1].value<t.value){this.arr.push(t),this.map[t.id]=!0;return}this._innerAdd(t,e)}remove(t){this.map[t]&&delete this.map[t]}_clearAndGetMinId(){let t;for(let e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t}_findFirstId(){for(;this.arr.length;){const t=this.arr.shift();if(this.map[t.id])return t.id}}minId(t){return t?this._clearAndGetMinId():this._findFirstId()}}class Ts extends _i{constructor(t){super(bn({style:Ts.defaultStyleProps},t))}getControlPoints(t){const{router:e}=t,{sourceNode:n,targetNode:i}=this,[a,o]=this.getEndpoints(t,!1);let s=[];if(!e)s=t.controlPoints;else if(e.type==="shortest-path"){const l=this.context.element.getNodes();s=d_(n,i,l,e),s.length||(s=tp(a,o,n,i,t.controlPoints,{padding:e.offset}))}else e.type==="orth"&&(s=tp(a,o,n,i,t.controlPoints,e));return s}getPoints(t){const e=this.getControlPoints(t),[n,i]=this.getEndpoints(t,!0,e);return[n,...e,i]}getKeyPath(t){const e=this.getPoints(t);return ru(e,t.radius)}getLoopPath(t){const{sourcePort:e,targetPort:n,radius:i}=t,a=this.sourceNode,o=li(a),s=Math.max(Br(o),Fr(o))/4,{placement:l,clockwise:c,dist:u=s}=dn(this.getGraphicStyle(t),"loop");return J2(a,i,l,c,u,e,n)}}Ts.defaultStyleProps={radius:0,controlPoints:[],router:!1};class As extends _i{constructor(t){super(bn({style:As.defaultStyleProps},t))}getKeyPath(t){const{curvePosition:e,curveOffset:n}=t,[i,a]=this.getEndpoints(t),o=t.controlPoint||nu(i,a,e,n);return Y2(i,a,o)}}As.defaultStyleProps={curvePosition:.5,curveOffset:30};var v_=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};function Qa(r){return r instanceof Cr&&r.type==="node"}function pp(r){return r instanceof _i}function au(r){return r instanceof pa}function g_(r){return Qa(r)||pp(r)||au(r)}function y_(r,t){return!r||!t?!1:r===t}const m_={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function ou(r,t,e=m_,n=!0){const i=[.5,.5],a=(0,ae.Z)(t)?Un(e,t.toLocaleLowerCase(),i):t;if(!n&&(0,ae.Z)(t))return a;const[o,s]=a||i;return[r.min[0]+Br(r)*o,r.min[1]+Fr(r)*s]}function su(r){if(!r)return{};const t=r.getPorts();return(r.attributes.ports||[]).forEach((n,i)=>{var a;const{key:o,placement:s}=n;vp(n)&&(t[a=o||i]||(t[a]=Qr(r.getShape("key").getBounds(),s)))}),t}function vp(r){const{r:t}=r;return!t||Number(t)===0}function xi(r){return na(r)?r:r.getPosition()}function b_(r,t,e,n){const i=gp(r,t,e,n),a=gp(t,r,n,e);return[i,a]}function gp(r,t,e,n){const i=su(r);if(e)return i[e];const a=Object.values(i);if(a.length===0)return;const o=a.map(c=>xi(c)),s=__(t,n),[l]=n1(o,s);return a.find(c=>xi(c)===l)}function __(r,t){const e=su(r);if(t)return[xi(e[t])];const n=Object.values(e);return n.length>0?n.map(i=>xi(i)):[r.getCenter()]}function yp(r,t){return au(r)||Qa(r)?lu(r,t):Ja(r,t)}function Ja(r,t){if(!r||!t)return[0,0,0];if(na(r))return r;if(r.attributes.linkToCenter)return r.getPosition();const e=na(t)?t:Qa(t)?t.getCenter():t.getPosition();return Yo(e,r.getBounds())}function lu(r,t){if(!r||!t)return[0,0,0];const e=na(t)?t:Qa(t)?t.getCenter():t.getPosition();return r.getIntersectPoint(e)||r.getCenter()}function mp(r,t="bottom",e=0,n=0,i=!1){const a=t.split("-"),[o,s]=Qr(r,t),[l,c]=i?["bottom","top"]:["top","bottom"],u=a.includes("top")?c:a.includes("bottom")?l:"middle",h=a.includes("left")?"right":a.includes("right")?"left":"center";return{transform:[["translate",o+e,s+n]],textBaseline:u,textAlign:h}}function x_(r,t){return[[0,-r],[t*Math.cos(3*Math.PI/10),-t*Math.sin(3*Math.PI/10)],[r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],[t*Math.cos(Math.PI/10),t*Math.sin(Math.PI/10)],[r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],[0,t],[-r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],[-t*Math.cos(Math.PI/10),t*Math.sin(Math.PI/10)],[-r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],[-t*Math.cos(3*Math.PI/10),-t*Math.sin(3*Math.PI/10)]]}function E_(r,t){const e={};return e.top=[0,-r],e.left=[-r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],e["left-bottom"]=[-r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],e.bottom=[0,t],e["right-bottom"]=[r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],e.right=e.default=[r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],e}function w_(r,t,e){const n=t/2,i=r/2,a={up:[[-i,n],[i,n],[0,-n]],left:[[-i,0],[i,n],[i,-n]],right:[[-i,n],[-i,-n],[i,0]],down:[[-i,-n],[i,-n],[0,n]]};return a[e]||a.up}function S_(r,t,e){const n=t/2,i=r/2,a={};return e==="down"?(a.bottom=a.default=[0,n],a.right=[i,-n],a.left=[-i,-n]):e==="left"?(a.top=[i,-n],a.bottom=[i,n],a.left=a.default=[-i,0]):e==="right"?(a.top=[-i,-n],a.bottom=[-i,n],a.right=a.default=[i,0]):(a.left=[-i,n],a.top=a.default=[0,-n],a.right=[i,n]),a}function $T(r,t){return[[r/2,-t/2],[r/2,t/2],[-r/2,t/2],[-r/2,-t/2]]}function O_(r,t){return[[0,-t/2],[r/2,0],[0,t/2],[-r/2,0]]}function M_(r){return Un(r,["style","visibility"])!=="hidden"}function C_(r,t){const{zIndex:e,transform:n,transformOrigin:i,visibility:a,cursor:o,clipPath:s,component:l}=t,c=v_(t,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(r.attributes,c),n&&r.setAttribute("transform",n),(0,pt.Z)(e)&&r.setAttribute("zIndex",e),i&&r.setAttribute("transformOrigin",i),a&&r.setAttribute("visibility",a),o&&r.setAttribute("cursor",o),s&&r.setAttribute("clipPath",s),l&&r.setAttribute("component",l)}function cu(r,t){"update"in r?r.update(t):r.attr(t)}function T_(r){return[[0,r],[r*Math.sqrt(3)/2,r/2],[r*Math.sqrt(3)/2,-r/2],[0,-r],[-r*Math.sqrt(3)/2,-r/2],[-r*Math.sqrt(3)/2,r/2]]}function A_(r){za(r,"__to_be_destroyed__",!0)}function Ps(r){return Un(r,"__to_be_destroyed__",!1)}var P_=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Rs extends Qn{constructor(t,e){super(t,Object.assign({},Rs.defaultOptions,e)),this.onCollapseExpand=n=>P_(this,void 0,void 0,function*(){if(!this.validate(n))return;const{target:i}=n;if(!g_(i))return;const a=i.id,{model:o,graph:s}=this.context,l=o.getElementDataById(a);if(!l)return!1;const{onCollapse:c,onExpand:u,animation:h,align:f}=this.options;$n(l)?(yield s.expandElement(a,{animation:h,align:f}),u==null||u(a)):(yield s.collapseElement(a,{animation:h,align:f}),c==null||c(a))}),this.bindEvents()}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}bindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;t.on(`node:${e}`,this.onCollapseExpand),t.on(`combo:${e}`,this.onCollapseExpand)}unbindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;t.off(`node:${e}`,this.onCollapseExpand),t.off(`combo:${e}`,this.onCollapseExpand)}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}destroy(){this.unbindEvents(),super.destroy()}}Rs.defaultOptions={enable:!0,animation:!0,trigger:Zt.DBLCLICK,align:!0};var Ds={},R_=function(r){return r=r||"g",Ds[r]?Ds[r]+=1:Ds[r]=1,r+Ds[r]},ks=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};const D_="g6-create-edge-assist-edge-id",Ls="g6-create-edge-assist-node-id";class Is extends Qn{constructor(t,e){super(t,Object.assign({},Is.defaultOptions,e)),this.drop=n=>ks(this,void 0,void 0,function*(){const{targetType:i}=n;["combo","node"].includes(i)&&this.source?yield this.handleCreateEdge(n):yield this.cancelEdge()}),this.handleCreateEdge=n=>ks(this,void 0,void 0,function*(){var i,a,o;if(!this.validate(n))return;const{graph:s,canvas:l,batch:c,element:u}=this.context,{style:h}=this.options;if(this.source){this.createEdge(n),yield this.cancelEdge();return}c.startBatch(),l.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([n.target.id])[0];const f=s.getElementData(this.source);s.addNodeData([{id:Ls,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:(i=f.style)===null||i===void 0?void 0:i.x,y:(a=f.style)===null||a===void 0?void 0:a.y}}]),s.addEdgeData([{id:D_,source:this.source,target:Ls,style:Object.assign({pointerEvents:"none"},h)}]),yield(o=u.draw({animation:!1}))===null||o===void 0?void 0:o.finished}),this.updateAssistEdge=n=>ks(this,void 0,void 0,function*(){var i;if(!this.source)return;const{model:a,element:o}=this.context;a.translateNodeTo(Ls,[n.canvas.x,n.canvas.y]),yield(i=o.draw({animation:!1,silence:!0}))===null||i===void 0?void 0:i.finished}),this.createEdge=n=>{var i,a;const{graph:o}=this.context,{style:s,onFinish:l,onCreate:c}=this.options;if(((i=n.target)===null||i===void 0?void 0:i.id)===void 0||this.source===void 0)return;const h=(a=this.getSelectedNodeIDs([n.target.id]))===null||a===void 0?void 0:a[0],f=`${this.source}-${h}-${R_()}`,d=c({id:f,source:this.source,target:h,style:s});o.addEdgeData([d]),l(d)},this.cancelEdge=()=>ks(this,void 0,void 0,function*(){var n;if(!this.source)return;const{graph:i,element:a,batch:o}=this.context;i.removeNodeData([Ls]),this.source=void 0,yield(n=a.draw({animation:!1}))===null||n===void 0?void 0:n.finished,o.endBatch()}),this.bindEvents()}update(t){super.update(t),this.bindEvents()}bindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;this.unbindEvents(),e==="click"?(t.on(fr.CLICK,this.handleCreateEdge),t.on(Di.CLICK,this.handleCreateEdge),t.on(Ur.CLICK,this.cancelEdge),t.on(To.CLICK,this.cancelEdge)):(t.on(fr.DRAG_START,this.handleCreateEdge),t.on(Di.DRAG_START,this.handleCreateEdge),t.on(Zt.POINTER_UP,this.drop)),t.on(Zt.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(e=>e.id).concat(t)))}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}unbindEvents(){const{graph:t}=this.context;t.off(fr.CLICK,this.handleCreateEdge),t.off(Di.CLICK,this.handleCreateEdge),t.off(Ur.CLICK,this.cancelEdge),t.off(To.CLICK,this.cancelEdge),t.off(fr.DRAG_START,this.handleCreateEdge),t.off(Di.DRAG_START,this.handleCreateEdge),t.off(Zt.POINTER_UP,this.drop),t.off(Zt.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}Is.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:r=>r,onFinish:()=>{}};function k_(r,t,e){var n;return function(){var i=this,a=arguments,o=function(){n=null,e||r.apply(i,a)},s=e&&!n;clearTimeout(n),n=setTimeout(o,t),s&&r.apply(i,a)}}var to=k_,bp=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Ns extends Qn{constructor(t,e){super(t,Object.assign({},Ns.defaultOptions,e)),this.isDragging=!1,this.onDragStart=n=>{this.validate(n)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=n=>{var i,a,o,s;if(!this.isDragging||un.isPinching)return;const l=(a=(i=n.movement)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:n.dx,c=(s=(o=n.movement)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:n.dy;l|c&&this.translate([l,c],!1)},this.onDragEnd=()=>{var n,i;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(i=(n=this.options).onFinish)===null||i===void 0||i.call(n)},this.invokeOnFinish=to(()=>{var n,i;(i=(n=this.options).onFinish)===null||i===void 0||i.call(n)},300),this.shortcut=new ra(t.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}bindEvents(){const{trigger:t}=this.options;if((0,Vn.Z)(t)){const{up:e=[],down:n=[],left:i=[],right:a=[]}=t;this.shortcut.bind(e,o=>this.onTranslate([0,1],o)),this.shortcut.bind(n,o=>this.onTranslate([0,-1],o)),this.shortcut.bind(i,o=>this.onTranslate([1,0],o)),this.shortcut.bind(a,o=>this.onTranslate([-1,0],o))}else{const{graph:e}=this.context;e.on(Zt.DRAG_START,this.onDragStart),e.on(Zt.DRAG,this.onDrag),e.on(Zt.DRAG_END,this.onDragEnd)}}onTranslate(t,e){return bp(this,void 0,void 0,function*(){if(!this.validate(e))return;const{sensitivity:n}=this.options,i=n*-1;yield this.translate(Sr(t,i),this.options.animation),this.invokeOnFinish()})}translate(t,e){return bp(this,void 0,void 0,function*(){t=this.clampByDirection(t),t=this.clampByRange(t),yield this.context.graph.translateBy(t,e)})}clampByDirection([t,e]){const{direction:n}=this.options;return n==="x"?e=0:n==="y"&&(t=0),[t,e]}clampByRange([t,e]){const{viewport:n,canvas:i}=this.context,[a,o]=i.getSize(),[s,l,c,u]=xr(this.options.range),h=[o*s,a*l,o*c,a*u],f=ci(lc(n.getCanvasCenter()),h),d=Fe(n.getViewportCenter(),[t,e,0]);if(!Er(d,f)){const{min:[p,g],max:[y,m]}=f;(d[0]<p&&t>0||d[0]>y&&t<0)&&(t=0),(d[1]<g&&e>0||d[1]>m&&e<0)&&(e=0)}return[t,e]}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return typeof e=="function"?e(t):!!e}unbindEvents(){this.shortcut.unbindAll();const{graph:t}=this.context;t.off(Zt.DRAG_START,this.onDragStart),t.off(Zt.DRAG,this.onDrag),t.off(Zt.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}Ns.defaultOptions={enable:r=>"targetType"in r?r.targetType==="canvas":!0,sensitivity:10,direction:"both",range:1/0};var _p=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class eo extends Qn{constructor(t,e){super(t,Object.assign({},eo.defaultOptions,e)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=n=>_p(this,void 0,void 0,function*(){var i;if(this.options.dropEffect!=="link")return;const{model:a,element:o}=this.context,s=n.target.id;this.target.forEach(l=>{const c=a.getParentData(l,Ge);c&&St(c)===s&&a.refreshComboData(s),a.setParent(l,s,Ge)}),yield(i=o==null?void 0:o.draw({animation:!0}))===null||i===void 0?void 0:i.finished}),this.setCursor=n=>{if(this.isDragging)return;const{type:i}=n,{canvas:a}=this.context,{cursor:o}=this.options;i===Zt.POINTER_ENTER?a.setCursor((o==null?void 0:o.grab)||"grab"):a.setCursor((o==null?void 0:o.default)||"default")},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}bindEvents(){const{graph:t,canvas:e}=this.context,n=e.getLayer().getContextService().$canvas;n&&(n.addEventListener("blur",this.onDragEnd),n.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{t.on(`${i}:${Zt.DRAG_START}`,this.onDragStart),t.on(`${i}:${Zt.DRAG}`,this.onDrag),t.on(`${i}:${Zt.DRAG_END}`,this.onDragEnd),t.on(`${i}:${Zt.POINTER_ENTER}`,this.setCursor),t.on(`${i}:${Zt.POINTER_LEAVE}`,this.setCursor)}),["link"].includes(this.options.dropEffect)&&(t.on(Di.DROP,this.onDrop),t.on(Ur.DROP,this.onDrop))}getSelectedNodeIDs(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(e=>e.id).concat(t)))}getDelta(t){const e=this.context.graph.getZoom();return Or([t.dx,t.dy],e)}onDragStart(t){var e;if(this.enable=this.validate(t),!this.enable)return;const{batch:n,canvas:i,graph:a}=this.context;i.setCursor(((e=this.options.cursor)===null||e===void 0?void 0:e.grabbing)||"grabbing"),this.isDragging=!0,n.startBatch();const o=t.target.id;a.getElementState(o).includes(this.options.state)?this.target=this.getSelectedNodeIDs([o]):this.target=[o],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(t){if(!this.enable)return;const e=this.getDelta(t);this.options.shadow?this.moveShadow(e):this.moveElement(this.target,e)}onDragEnd(){var t,e,n;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:o=0,y:s=0}=this.shadow.attributes,[l,c]=Fe([+o,+s],this.shadowOrigin);this.moveElement(this.target,[l,c])}this.showEdges(),(e=(t=this.options).onFinish)===null||e===void 0||e.call(t,this.target);const{batch:i,canvas:a}=this.context;i.endBatch(),a.setCursor(((n=this.options.cursor)===null||n===void 0?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[]}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}moveElement(t,e){return _p(this,void 0,void 0,function*(){const{graph:n,model:i}=this.context,{dropEffect:a}=this.options;a==="move"&&t.forEach(o=>i.refreshComboData(o)),n.translateElementBy(Object.fromEntries(t.map(o=>[o,e])),!1)})}moveShadow(t){if(!this.shadow)return;const{x:e=0,y:n=0}=this.shadow.attributes,[i,a]=t;this.shadow.attr({x:+e+i,y:+n+a})}createShadow(t){const e=dn(this.options,"shadow"),n=ka(t.map(c=>this.context.element.getElement(c).getBounds())),[i,a]=n.min;this.shadowOrigin=[i,a];const[o,s]=si(n),l={width:o,height:s,x:i,y:a};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},e),l),{visibility:"visible"})):(this.shadow=new x.UL({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},e),l),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:t,shadow:e}=this.options;if(t==="none"||e)return;const{graph:n}=this.context;t==="all"?this.hiddenEdges=n.getEdgeData().map(St):this.hiddenEdges=Array.from(new Set(this.target.map(i=>n.getRelatedEdgesData(i,t).map(St)).flat())),n.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:t,canvas:e}=this.context,n=e.getLayer().getContextService().$canvas;n&&(n.removeEventListener("blur",this.onDragEnd),n.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{t.off(`${i}:${Zt.DRAG_START}`,this.onDragStart),t.off(`${i}:${Zt.DRAG}`,this.onDrag),t.off(`${i}:${Zt.DRAG_END}`,this.onDragEnd),t.off(`${i}:${Zt.POINTER_ENTER}`,this.setCursor),t.off(`${i}:${Zt.POINTER_LEAVE}`,this.setCursor)}),t.off(`combo:${Zt.DROP}`,this.onDrop),t.off(`canvas:${Zt.DROP}`,this.onDrop)}destroy(){var t;this.unbindEvents(),(t=this.shadow)===null||t===void 0||t.destroy(),super.destroy()}}eo.defaultOptions={animation:!0,enable:r=>["node","combo"].includes(r.targetType),dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var uu=G(72137);class js{constructor(t,e){this.context=t,this.options=e||{}}}var L_=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},I_=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};function UT(r){const{type:t}=r;return!!(["comboCombined","comboForce"].includes(t)||t==="antv-dagre"&&r.sortByCombo)}function N_(r){const{type:t}=r;return["compact-box","mindmap","dendrogram","indented"].includes(t)}function YT(r){return isNumber(r.x)&&isNumber(r.y)}function j_(r){return!Array.isArray(r)&&(r==null?void 0:r.preLayout)}function Bs(r){const{nodes:t,edges:e}=r,n={nodes:[],edges:[],combos:[]};return t.forEach(i=>{const a=i.data._isCombo?n.combos:n.nodes,{x:o,y:s,z:l=0}=i.data;a==null||a.push({id:i.id,style:{x:o,y:s,z:l}})}),e.forEach(i=>{const{id:a,source:o,target:s,data:{points:l=[],controlPoints:c=l.slice(1,l.length-1)}}=i;n.edges.push({id:a,source:o,target:s,style:Object.assign({},c!=null&&c.length?{controlPoints:c.map(Cn)}:{})})}),n}function B_(r,t){class e extends js{constructor(i,a){if(super(i,a),this.instance=new r({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const o=this.instance;this.stop=o.stop.bind(o),this.tick=s=>{const l=o.tick(s);return Bs(l)}}}execute(i,a){return L_(this,void 0,void 0,function*(){return Bs(yield this.instance.execute(this.graphData2LayoutModel(i),this.transformOptions((0,Jn.Z)({},this.options,a))))})}transformOptions(i){const{onTick:a}=i;return a&&(i.onTick=o=>a(Bs(o))),i}graphData2LayoutModel(i){const{nodes:a=[],edges:o=[],combos:s=[]}=i,l=a.map(d=>{const p=St(d),{data:g,style:y,combo:m}=d,b=I_(d,["data","style","combo"]),E={id:p,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),{data:g}),m?{parentId:m}:{}),{style:y}),b)};return y!=null&&y.x&&Object.assign(E.data,{x:y.x}),y!=null&&y.y&&Object.assign(E.data,{y:y.y}),y!=null&&y.z&&Object.assign(E.data,{z:y.z}),E}),c=new Map(l.map(d=>[d.id,d])),u=o.filter(d=>{const{source:p,target:g}=d;return c.has(p)&&c.has(g)}).map(d=>{const{source:p,target:g,data:y,style:m}=d;return{id:St(d),source:p,target:g,data:Object.assign({},y),style:Object.assign({},m)}}),h=s.map(d=>({id:St(d),data:Object.assign({_isCombo:!0},d.data),style:Object.assign({},d.style)})),f=new uu.k({nodes:[...l,...h],edges:u});return t.model.model.hasTreeStructure(Ge)&&(f.attachTreeStructure(Ge),l.forEach(d=>{const p=t.model.model.getParent(d.id,Ge);p&&f.hasNode(p.id)&&f.setParent(d.id,p.id,Ge)})),f}}return e}function hu(r,t,...e){if(t in r)return r[t](...e);if("instance"in r){const n=r.instance;if(t in n)return n[t](...e)}return null}function xp(r,t){if(t in r)return r[t];if("instance"in r){const e=r.instance;if(t in e)return e[t]}return null}var F_=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class z_ extends eo{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(t=>["d3-force","d3-force-3d"].includes(t==null?void 0:t.id))}validate(t){return this.context.layout?this.forceLayoutInstance?super.validate(t):(Zn.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1):!1}moveElement(t,e){return F_(this,void 0,void 0,function*(){const n=this.forceLayoutInstance;this.context.graph.getNodeData(t).forEach((i,a)=>{const{x:o=0,y:s=0}=i.style||{};n&&hu(n,"setFixedPosition",t[a],[...Ce([+o,+s],e)])})})}onDragStart(t){if(this.enable=this.validate(t),!this.enable)return;this.target=this.getSelectedNodeIDs([t.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const e=this.forceLayoutInstance;e&&xp(e,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(n=>{const{x:i=0,y:a=0}=n.style||{};e&&hu(e,"setFixedPosition",St(n),[+i,+a])})}onDrag(t){if(!this.enable)return;const e=this.getDelta(t);this.moveElement(this.target,e)}onDragEnd(){const t=this.forceLayoutInstance;t&&xp(t,"simulation").alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(e=>{t&&hu(t,"setFixedPosition",St(e),[null,null,null])})}}var Ep=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Fs extends Qn{constructor(t,e){super(t,Object.assign({},Fs.defaultOptions,e)),this.isZoomEvent=n=>!!(n.data&&"scale"in n.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=n=>Ep(this,void 0,void 0,function*(){if(!this.validate(n))return;const{graph:i}=this.context,{state:a,nodeFilter:o,edgeFilter:s,comboFilter:l}=this.options,c=(a?i.getElementDataByState("node",a):i.getNodeData()).filter(o),u=(a?i.getElementDataByState("edge",a):i.getEdgeData()).filter(s),h=(a?i.getElementDataByState("combo",a):i.getComboData()).filter(l),f=this.isZoomEvent(n)?this.zoom=Math.max(.01,Math.min(n.data.scale,10)):this.zoom,d=[...c,...h];d.length>0&&d.forEach(p=>this.fixNodeLike(p,f)),this.updateRelatedEdges(),u.length>0&&u.forEach(p=>this.fixEdge(p,f))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(n,i,a)=>{var o;const s=this.cachedStyles.get(n)||[],l=((o=s.find(c=>c.shape===i))===null||o===void 0?void 0:o.style)||{};return a in l||(l[a]=i.attributes[a],this.cachedStyles.set(n,[...s.filter(c=>c.shape!==i),{shape:i,style:l}])),l[a]},this.scaleEntireElement=(n,i,a)=>{i.setLocalScale(1/a);const o=this.cachedStyles.get(n)||[];o.push({shape:i}),this.cachedStyles.set(n,o)},this.scaleSpecificShapes=(n,i,a)=>{const o=T1(n);(Array.isArray(a)?a:[a]).forEach(l=>{const{shape:c,fields:u}=l,h=typeof c=="function"?c(o):n.getShape(c);if(h){if(!u){this.scaleEntireElement(n.id,h,i);return}u.forEach(f=>{const d=this.getOriginalFieldValue(n.id,h,f);(0,pt.Z)(d)&&(h.style[f]=d/i)})}})},this.skipIfExceedViewport=n=>{const{viewport:i}=this.context;return!(i!=null&&i.isInViewport(n.getRenderBounds(),!1,30))},this.fixNodeLike=(n,i)=>{const a=St(n),{element:o,model:s}=this.context,l=o.getElement(a);if(!l||this.skipIfExceedViewport(l))return;s.getRelatedEdgesData(a).forEach(h=>this.relatedEdgeToUpdate.add(St(h)));const u=this.options[l.type];if(!u){this.scaleEntireElement(a,l,i);return}this.scaleSpecificShapes(l,i,u)},this.fixEdge=(n,i)=>{const a=St(n),o=this.context.element.getElement(a);if(!o||this.skipIfExceedViewport(o))return;const s=this.options.edge;if(!s){o.style.transformOrigin="center",this.scaleEntireElement(a,o,i);return}this.scaleSpecificShapes(o,i,s)},this.updateRelatedEdges=()=>{const{element:n}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(i=>{const a=n.getElement(i);a==null||a.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=n=>Ep(this,void 0,void 0,function*(){var i;!((i=n.data)===null||i===void 0)&&i.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(i=>{i.forEach(({shape:a,style:o})=>{if(Wr(o))a.setLocalScale(1);else{if(this.options.state)return;Object.entries(o).forEach(([s,l])=>a.style[s]=l)}})});const{graph:t,element:e}=this.context,n=Object.keys(Object.fromEntries(this.cachedStyles)).filter(i=>i&&t.getElementType(i)==="node");if(n.length>0){const i=new Set;n.forEach(a=>{t.getRelatedEdgesData(a).forEach(o=>i.add(St(o)))}),i.forEach(a=>{const o=e==null?void 0:e.getElement(a);o==null||o.update({})})}}}bindEvents(){const{graph:t}=this.context;t.on(he.AFTER_DRAW,this.resetTransform),t.on(he.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:t}=this.context;t.off(he.AFTER_DRAW,this.resetTransform),t.off(he.AFTER_TRANSFORM,this.fixElementSize)}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}destroy(){this.unbindEvents(),super.destroy()}}Fs.defaultOptions={enable:r=>r.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var W_=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class zs extends Qn{constructor(t,e){super(t,Object.assign({},zs.defaultOptions,e)),this.focus=n=>W_(this,void 0,void 0,function*(){if(!this.validate(n))return;const{graph:i}=this.context;yield i.focusElement(n.target.id,this.options.animation)}),this.bindEvents()}bindEvents(){const{graph:t}=this.context;this.unbindEvents(),ji.forEach(e=>{t.on(`${e}:${Zt.CLICK}`,this.focus)})}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}unbindEvents(){const{graph:t}=this.context;ji.forEach(e=>{t.off(`${e}:${Zt.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),super.destroy()}}zs.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};class Ws extends Qn{constructor(t,e){super(t,Object.assign({},Ws.defaultOptions,e)),this.isFrozen=!1,this.toggleFrozen=n=>{this.isFrozen=n.type==="dragstart"},this.hoverElement=n=>{if(!this.validate(n))return;const i=n.type===Zt.POINTER_ENTER;this.updateElementsState(n,i);const{onHover:a,onHoverEnd:o}=this.options;i?a==null||a(n):o==null||o(n)},this.updateElementsState=(n,i)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:a}=this.context,{state:o,animation:s,inactiveState:l}=this.options,c=this.getActiveIds(n),u={};if(o&&Object.assign(u,this.getElementsState(c,o,i)),l){const h=Cf(a.getData(),!0).filter(f=>!c.includes(f));Object.assign(u,this.getElementsState(h,l,i))}a.setElementState(u,s)},this.getElementsState=(n,i,a)=>{const{graph:o}=this.context,s={};return n.forEach(l=>{const c=o.getElementState(l);a?s[l]=c.includes(i)?c:[...c,i]:s[l]=c.filter(u=>u!==i)}),s},this.bindEvents()}bindEvents(){const{graph:t}=this.context;this.unbindEvents(),ji.forEach(n=>{t.on(`${n}:${Zt.POINTER_ENTER}`,this.hoverElement),t.on(`${n}:${Zt.POINTER_LEAVE}`,this.hoverElement)});const e=this.context.canvas.document;e.addEventListener(`${Zt.DRAG_START}`,this.toggleFrozen),e.addEventListener(`${Zt.DRAG_END}`,this.toggleFrozen)}getActiveIds(t){const{graph:e}=this.context,{degree:n,direction:i}=this.options,a=t.target.id;return n?Gf(e,t.targetType,a,typeof n=="function"?n(t):n,i):[a]}validate(t){if(this.destroyed||this.isFrozen||Ps(t.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}unbindEvents(){const{graph:t}=this.context;ji.forEach(n=>{t.off(`${n}:${Zt.POINTER_ENTER}`,this.hoverElement),t.off(`${n}:${Zt.POINTER_LEAVE}`,this.hoverElement)});const e=this.context.canvas.document;e.removeEventListener(`${Zt.DRAG_START}`,this.toggleFrozen),e.removeEventListener(`${Zt.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}Ws.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class G_ extends Fa{onPointerDown(t){if(!super.validate(t)||!super.isKeydown()||this.points)return;const{canvas:e}=this.context;this.pathShape=new x.y$({id:"g6-lasso-select",style:this.options.style}),e.appendChild(this.pathShape),this.points=[Ko(t)]}onPointerMove(t){var e;if(!this.points)return;const{immediately:n,mode:i}=this.options;this.points.push(Ko(t)),(e=this.pathShape)===null||e===void 0||e.setAttribute("d",w1(this.points)),n&&i==="default"&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var t;(t=this.pathShape)===null||t===void 0||t.remove(),this.pathShape=void 0,this.points=void 0}}class Gs extends Qn{constructor(t,e){super(t,Object.assign({},Gs.defaultOptions,e)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(n,i,a)=>{n.filter(Boolean).forEach(o=>{i==="hidden"&&!o.isVisible()?this.hiddenShapes.push(o):i==="visible"&&this.hiddenShapes.includes(o)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(o),1):Ii(o,i,a)})},this.filterShapes=(n,i)=>{if((0,Se.Z)(i))return o=>!i(n,o);const a=i==null?void 0:i[n];return o=>o.className?!(a!=null&&a.includes(o.className)):!0},this.hideShapes=n=>{if(!this.validate(n)||!this.isVisible)return;const{element:i}=this.context,{shapes:a={}}=this.options;this.setElementsVisibility(i.getNodes(),"hidden",this.filterShapes("node",a)),this.setElementsVisibility(i.getEdges(),"hidden",this.filterShapes("edge",a)),this.setElementsVisibility(i.getCombos(),"hidden",this.filterShapes("combo",a)),this.isVisible=!1},this.showShapes=to(n=>{if(!this.validate(n)||this.isVisible)return;const{element:i}=this.context;this.setElementsVisibility(i.getNodes(),"visible"),this.setElementsVisibility(i.getEdges(),"visible"),this.setElementsVisibility(i.getCombos(),"visible"),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){const{graph:t}=this.context;t.on(he.BEFORE_TRANSFORM,this.hideShapes),t.on(he.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:t}=this.context;t.off(he.BEFORE_TRANSFORM,this.hideShapes),t.off(he.AFTER_TRANSFORM,this.showShapes)}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}Gs.defaultOptions={enable:!0,debounce:200,shapes:r=>r==="node"};var wp=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Vs extends Qn{constructor(t,e){super(t,Object.assign({},Vs.defaultOptions,e)),this.onWheel=n=>wp(this,void 0,void 0,function*(){this.options.preventDefault&&n.preventDefault();const i=n.deltaX,a=n.deltaY;yield this.scroll([-i,-a],n)}),this.shortcut=new ra(t.graph),this.bindEvents()}update(t){super.update(t),this.bindEvents()}bindEvents(){var t,e;const{trigger:n}=this.options;if(this.shortcut.unbindAll(),(0,Vn.Z)(n)){(t=this.graphDom)===null||t===void 0||t.removeEventListener(Zt.WHEEL,this.onWheel);const{up:i=[],down:a=[],left:o=[],right:s=[]}=n;this.shortcut.bind(i,l=>this.scroll([0,-10],l)),this.shortcut.bind(a,l=>this.scroll([0,10],l)),this.shortcut.bind(o,l=>this.scroll([-10,0],l)),this.shortcut.bind(s,l=>this.scroll([10,0],l))}else(e=this.graphDom)===null||e===void 0||e.addEventListener(Zt.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(t){const{sensitivity:e}=this.options;return t=Sr(t,e),t=this.clampByDirection(t),t=this.clampByRange(t),t}clampByDirection([t,e]){const{direction:n}=this.options;return n==="x"?e=0:n==="y"&&(t=0),[t,e]}clampByRange([t,e]){const{viewport:n,canvas:i}=this.context,[a,o]=i.getSize(),[s,l,c,u]=xr(this.options.range),h=[o*s,a*l,o*c,a*u],f=ci(lc(n.getCanvasCenter()),h),d=Fe(n.getViewportCenter(),[t,e,0]);if(!Er(d,f)){const{min:[p,g],max:[y,m]}=f;(d[0]<p&&t>0||d[0]>y&&t<0)&&(t=0),(d[1]<g&&e>0||d[1]>m&&e<0)&&(e=0)}return[t,e]}scroll(t,e){return wp(this,void 0,void 0,function*(){if(!this.validate(e))return;const{onFinish:n}=this.options,i=this.context.graph,a=this.formatDisplacement(t);yield i.translateBy(a,!1),n==null||n()})}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}destroy(){var t;this.shortcut.destroy(),(t=this.graphDom)===null||t===void 0||t.removeEventListener(Zt.WHEEL,this.onWheel),super.destroy()}}Vs.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var Sp=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Hs extends Qn{constructor(t,e){super(t,Object.assign({},Hs.defaultOptions,e)),this.zoom=(n,i,a)=>Sp(this,void 0,void 0,function*(){if(!this.validate(i))return;const{graph:o}=this.context;let s=this.options.origin;!s&&"viewport"in i&&(s=Cn(i.viewport));const{sensitivity:l,onFinish:c}=this.options,u=1+(0,ue.Z)(n,-50,50)*l/100,h=o.getZoom();yield o.zoomTo(h*u,a,s),c==null||c()}),this.onReset=()=>Sp(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=n=>{this.options.preventDefault&&n.preventDefault()},this.shortcut=new ra(t.graph),this.bindEvents()}update(t){super.update(t),this.bindEvents()}bindEvents(){const{trigger:t}=this.options;if(this.shortcut.unbindAll(),Array.isArray(t))if(t.includes(Zt.PINCH))this.shortcut.bind([Zt.PINCH],e=>{this.zoom(e.scale,e,!1)});else{const e=this.context.canvas.getContainer();e==null||e.addEventListener(Zt.WHEEL,this.preventDefault),this.shortcut.bind([...t,Zt.WHEEL],n=>{const{deltaX:i,deltaY:a}=n;this.zoom(-(a!=null?a:i),n,!1)})}if(typeof t=="object"){const{zoomIn:e=[],zoomOut:n=[],reset:i=[]}=t;this.shortcut.bind(e,a=>this.zoom(10,a,this.options.animation)),this.shortcut.bind(n,a=>this.zoom(-10,a,this.options.animation)),this.shortcut.bind(i,this.onReset)}}validate(t){if(this.destroyed)return!1;const{enable:e}=this.options;return(0,Se.Z)(e)?e(t):!!e}destroy(){var t;this.shortcut.destroy(),(t=this.context.canvas.getContainer())===null||t===void 0||t.removeEventListener(Zt.WHEEL,this.preventDefault),super.destroy()}}Hs.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var Zs=G(81746),V_=G(45978),H_=G(63795),Z_=G(63757),$_=G(5192),U_=G(58745),Y_=G(21183),K_=G(40476),X_=G(70979),q_=G(89469),Q_=G(41733),J_=G(64912),tx=G(29257),ex=G(26629);function nx(r){var t,e,n,i=r||1;function a(s,l){++t>i&&(n=e,o(1),++t),e[s]=l}function o(s){t=0,e=Object.create(null),s||(n=Object.create(null))}return o(),{clear:o,has:function(s){return e[s]!==void 0||n[s]!==void 0},get:function(s){var l=e[s];if(l!==void 0)return l;if((l=n[s])!==void 0)return a(s,l),l},set:function(s,l){e[s]!==void 0?e[s]=l:a(s,l)}}}var fu=new Map;function du(r,t,e){e===void 0&&(e=128);var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=t?t.apply(this,i):i[0];fu.has(r)||fu.set(r,nx(e));var s=fu.get(r);if(s.has(o))return s.get(o);var l=r.apply(this,i);return s.set(o,l),l};return n}var rx=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class $s extends js{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const t=this.context.model.getRootsData();if(!(Wr(t)||t.length>2))return t[0]}formatSize(t){const e=typeof t=="function"?t:()=>t;return n=>tr(e(n))}doLayout(t,e){const{hGap:n,getRibSep:i,vGap:a,nodeSize:o,height:s}=e,{model:l}=this.context,c=this.formatSize(o);let u=c(t)[0]+i(t);const h=(E,O=0)=>{var M;return O+=n*((E.children||[]).length+1),(M=E.children)===null||M===void 0||M.forEach(k=>{var D;(D=l.getNodeLikeDatum(k).children)===null||D===void 0||D.forEach(rt=>{const C=l.getNodeLikeDatum(rt);O=h(C,O)})}),O},f=E=>{if(E.depth===1)return u;const O=l.getParentData(E.id,"tree");if(va(E)){const M=l.getParentData(O.id,"tree"),k=g(E)-g(M);return f(O)+k*n/a}else{const M=(O.children||[]).indexOf(E.id),k=l.getNodeData((O.children||[]).slice(M));return d(O)-k.reduce((D,N)=>D+h(N),0)-c(O)[0]/2}},d=du(E=>{if(pu(E))return c(E)[0]/2;const O=l.getParentData(E.id,"tree");if(va(E))return f(E)+h(E)+c(E)[0]/2;{const M=g(E)-g(O),k=n/a;return f(E)+M*k}},E=>E.id),p=E=>g(l.getParentData(E,"tree")),g=du(E=>{if(pu(E))return s/2;if(va(E)){const O=l.getParentData(E.id,"tree"),M=O.children.indexOf(E.id);if(M===0)return p(O.id)+a;const k=l.getNodeLikeDatum(O.children[M-1]);if(Wr(k.children))return g(k)+a;const D=l.getDescendantsData(k.id);return Math.max(...D.map(N=>va(N)?p(N.id):g(N)))+a}else{if(Wr(E.children))return p(E.id)+a;const O=l.getNodeLikeDatum(E.children.slice(-1)[0]);if(Wr(O.children))return g(O)+a;const M=l.getDescendantsData(E.id).slice(-1)[0];return(va(M)?p(M.id):g(M))+a}},E=>E.id);let y=0;const m={nodes:[],edges:[]},b=E=>{var O;(O=E.children)===null||O===void 0||O.forEach(rt=>b(l.getNodeLikeDatum(rt)));const M=g(E),k=d(E);if(m.nodes.push({id:E.id,x:k,y:M}),pu(E))return;const D=l.getRelatedEdgesData(E.id,"in")[0],N=[f(E),va(E)?M:p(E.id)];m.edges.push({id:St(D),controlPoints:[N],relatedNodeId:E.id}),y=Math.max(y,k+i(E)),E.depth===1&&(u=y)};return b(t),m}placeAlterative(t,e){const n=(e.children||[]).filter((s,l)=>l%2!==0);if(n.length===0)return t;const{model:i}=this.context,a=t.nodes.find(s=>s.id===e.id).y,o=s=>{const l=i.getAncestorsData(s,"tree");if(Wr(l))return!1;const c=l.length===1?s:l[l.length-2].id;return n.includes(c)};t.nodes.forEach(s=>{o(s.id)&&(s.y=2*a-s.y)}),t.edges.forEach(s=>{o(s.relatedNodeId)&&(s.controlPoints=s.controlPoints.map(l=>[l[0],2*a-l[1]]))})}rightToLeft(t,e){return t.nodes.forEach(n=>n.x=e.width-n.x),t.edges.forEach(n=>{n.controlPoints=n.controlPoints.map(i=>[e.width-i[0],i[1]])}),t}execute(t,e){return rx(this,void 0,void 0,function*(){const n=Object.assign(Object.assign(Object.assign({},$s.defaultOptions),this.options),e),{direction:i,nodeSize:a}=n,o=this.getRoot();if(!o)return t;const s=this.formatSize(a);n.vGap||(n.vGap=Math.max(...(t.nodes||[]).map(f=>s(f)[1]))),n.hGap||(n.hGap=Math.max(...(t.nodes||[]).map(f=>s(f)[0])));let l=this.doLayout(o,n);this.placeAlterative(l,o),i==="RL"&&(l=this.rightToLeft(l,n));const{model:c}=this.context,u=[],h=[];return l.nodes.forEach(f=>{const{id:d,x:p,y:g}=f,y=c.getNodeLikeDatum(d);u.push(Op(y,{x:p,y:g}))}),l.edges.forEach(f=>{const{id:d,controlPoints:p}=f,g=c.getEdgeDatum(d);h.push(Op(g,{controlPoints:p}))}),{nodes:u,edges:h}})}}$s.defaultOptions={direction:"RL",getRibSep:()=>60};const Op=(r,t)=>Object.assign(Object.assign({},r),{style:Object.assign(Object.assign({},r.style||{}),t)}),pu=r=>r.depth===0,va=r=>(r.depth||(r.depth=0))%2===0;var ix=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Us extends js{constructor(){super(...arguments),this.id="snake"}formatSize(t,e){const n=typeof e=="function"?e:()=>e;return t.reduce((i,a)=>{const[o,s]=tr(n(a))||[0,0];return[Math.max(i[0],o),Math.max(i[1],s)]},[0,0])}validate(t){const{nodes:e=[],edges:n=[]}=t,i={},a={},o={};e.forEach(f=>{i[f.id]=0,a[f.id]=0,o[f.id]=[]}),n.forEach(f=>{i[f.target]++,a[f.source]++,o[f.source].push(f.target)});const s=new Set,l=f=>{s.has(f)||(s.add(f),o[f].forEach(l))};if(l(e[0].id),s.size!==e.length)return!1;const c=e.filter(f=>i[f.id]===0),u=e.filter(f=>a[f.id]===0);return!(c.length!==1||u.length!==1||e.filter(f=>i[f.id]===1&&a[f.id]===1).length!==e.length-2)}execute(t,e){return ix(this,void 0,void 0,function*(){var n;if(!this.validate(t))return t;const{nodeSize:i,padding:a,sortBy:o,cols:s,colGap:l,rowGap:c,clockwise:u,width:h,height:f}=Object.assign({},Us.defaultOptions,this.options,e),[d,p,g,y]=xr(a),m=this.formatSize(t.nodes||[],i),b=Math.ceil((t.nodes||[]).length/s);let E=l||(h-y-p-s*m[0])/(s-1),O=c||(f-d-g-b*m[1])/(b-1);return(O===1/0||O<0)&&(O=0),(E===1/0||E<0)&&(E=0),{nodes:((o?(n=t.nodes)===null||n===void 0?void 0:n.sort(o):ax(t))||[]).map((D,N)=>{const rt=Math.floor(N/s),C=N%s,S=u?rt%2===0?C:s-1-C:rt%2===0?s-1-C:C,A=y+S*(m[0]+E)+m[0]/2,j=d+rt*(m[1]+O)+m[1]/2;return{id:D.id,style:{x:A,y:j}}})}})}}Us.defaultOptions={padding:0,cols:5,clockwise:!0};function ax(r){const{nodes:t=[],edges:e=[]}=r,n={},i={};t.forEach(s=>{n[s.id]=0,i[s.id]=[]}),e.forEach(s=>{n[s.target]++,i[s.source].push(s.target)});const a=[],o=[];for(t.forEach(s=>{n[s.id]===0&&a.push(s.id)});a.length>0;){const s=a.shift(),l=t.find(c=>c.id===s);o.push(l),i[s].forEach(c=>{n[c]--,n[c]===0&&a.push(c)})}return o}const ox=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],sx=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],lx=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],cx=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],ux=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];var hx=G(15255),vu=G(83845),fx=function(r,t,e){if(!(0,Xr.Z)(r)&&!(0,vu.Z)(r))return r;var n=e;return(0,hx.Z)(r,function(i,a){n=t(n,i,a)}),n},dx=fx,gu=function(r,t){return dx(r,function(e,n,i){return t.includes(i)||(e[i]=n),e},{})};class Tn extends xc{}function ga(r,t=!0,e){const n=document.createElement("div");return n.setAttribute("class",`g6-${r}`),Object.assign(n.style,{position:"absolute",display:"block"}),t&&Object.assign(n.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),e&&Object.assign(n.style,e),n}function yu(r,t="div",e={},n="",i=document.body){const a=document.getElementById(r);a&&a.remove();const o=document.createElement(t);return o.innerHTML=n,o.id=r,Object.assign(o.style,e),i.appendChild(o),o}var px=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Ys extends Tn{constructor(t,e){super(t,Object.assign({},Ys.defaultOptions,e)),this.$element=ga("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(e)}update(t){const e=Object.create(null,{update:{get:()=>super.update}});return px(this,void 0,void 0,function*(){e.update.call(this,t),Object.assign(this.$element.style,gu(this.options,["key","type"]))})}destroy(){super.destroy(),this.$element.remove()}}Ys.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};function mu(r,t,e,n,i,a){const o=r,s=t,l=e-o,c=n-s;let u=i-o,h=a-s,f=u*l+h*c,d=0;f<=0?d=0:(u=l-u,h=c-h,f=u*l+h*c,f<=0?d=0:d=f*f/(l*l+c*c));const p=u*u+h*h-d;return p<0?0:p}function Ei(r,t,e,n){return(r-e)*(r-e)+(t-n)*(t-n)}function Mp(r,t,e,n,i){return Ei(r,t,e,n)<i*i}function vx(r){if(!Number.isFinite(r))return e=>e;if(r===0)return Math.round;const t=Math.pow(10,r);return e=>Math.round(e*t)/t}function Cp(r){const t=Math.min(r.x1,r.x2),e=Math.max(r.x1,r.x2),n=Math.min(r.y1,r.y2),i=Math.max(r.y1,r.y2);return{x:t,y:n,x2:e,y2:i,width:e-t,height:i-n}}class _n{constructor(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}draw(t){t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(t){return new _n(t.x1,t.y1,t.x2,t.y2)}cuts(t,e){if(this.y1===this.y2||e<this.y1&&e<=this.y2||e>this.y1&&e>=this.y2||t>this.x1&&t>=this.x2)return!1;if(t<this.x1&&t<=this.x2)return!0;const n=this.x1+(e-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return t<=n}distSquare(t,e){return mu(this.x1,this.y1,this.x2,this.y2,t,e)}ptClose(t,e,n){if(this.x1<this.x2){if(t<this.x1-n||t>this.x2+n)return!1}else if(t<this.x2-n||t>this.x1+n)return!1;if(this.y1<this.y2){if(e<this.y1-n||e>this.y2+n)return!1}else if(e<this.y2-n||e>this.y1+n)return!1;return!0}}var en;(function(r){r[r.POINT=1]="POINT",r[r.PARALLEL=2]="PARALLEL",r[r.COINCIDENT=3]="COINCIDENT",r[r.NONE=4]="NONE"})(en||(en={}));class bu{constructor(t,e=0,n=0){this.state=t,this.x=e,this.y=n}}function Ks(r,t){const e=(t.x2-t.x1)*(r.y1-t.y1)-(t.y2-t.y1)*(r.x1-t.x1),n=(r.x2-r.x1)*(r.y1-t.y1)-(r.y2-r.y1)*(r.x1-t.x1),i=(t.y2-t.y1)*(r.x2-r.x1)-(t.x2-t.x1)*(r.y2-r.y1);if(i){const a=e/i,o=n/i;return 0<=a&&a<=1&&0<=o&&o<=1?new bu(en.POINT,r.x1+a*(r.x2-r.x1),r.y1+a*(r.y2-r.y1)):new bu(en.NONE)}return new bu(e===0||n===0?en.COINCIDENT:en.PARALLEL)}function Tp(r,t){const e=(t.x2-t.x1)*(r.y1-t.y1)-(t.y2-t.y1)*(r.x1-t.x1),n=(r.x2-r.x1)*(r.y1-t.y1)-(r.y2-r.y1)*(r.x1-t.x1),i=(t.y2-t.y1)*(r.x2-r.x1)-(t.x2-t.x1)*(r.y2-r.y1);if(i){const a=e/i,o=n/i;if(0<=a&&a<=1&&0<=o&&o<=1)return a}return Number.POSITIVE_INFINITY}function gx(r,t){function e(i,a,o,s){let l=Tp(t,new _n(i,a,o,s));return l=Math.abs(l-.5),l>=0&&l<=1?1:0}let n=e(r.x,r.y,r.x2,r.y);return n+=e(r.x,r.y,r.x,r.y2),n>1||(n+=e(r.x,r.y2,r.x2,r.y2),n>1)?!0:(n+=e(r.x2,r.y,r.x2,r.y2),n>0)}var nn;(function(r){r[r.LEFT=0]="LEFT",r[r.TOP=1]="TOP",r[r.RIGHT=2]="RIGHT",r[r.BOTTOM=3]="BOTTOM"})(nn||(nn={}));function Xs(r,t,e){const n=new Set;return r.width<=0?(n.add(nn.LEFT),n.add(nn.RIGHT)):t<r.x?n.add(nn.LEFT):t>r.x+r.width&&n.add(nn.RIGHT),r.height<=0?(n.add(nn.TOP),n.add(nn.BOTTOM)):e<r.y?n.add(nn.TOP):e>r.y+r.height&&n.add(nn.BOTTOM),n}function Ap(r,t){let e=t.x1,n=t.y1;const i=t.x2,a=t.y2,o=Array.from(Xs(r,i,a));if(o.length===0)return!0;let s=Xs(r,e,n);for(;s.size!==0;){for(const l of o)if(s.has(l))return!1;if(s.has(nn.RIGHT)||s.has(nn.LEFT)){let l=r.x;s.has(nn.RIGHT)&&(l+=r.width),n=n+(l-e)*(a-n)/(i-e),e=l}else{let l=r.y;s.has(nn.BOTTOM)&&(l+=r.height),e=e+(l-n)*(i-e)/(a-n),n=l}s=Xs(r,e,n)}return!0}function yx(r,t){let e=Number.POSITIVE_INFINITY,n=0;function i(a,o,s,l){let c=Tp(t,new _n(a,o,s,l));c=Math.abs(c-.5),c>=0&&c<=1&&(n++,c<e&&(e=c))}return i(r.x,r.y,r.x2,r.y),i(r.x,r.y,r.x,r.y2),n>1||(i(r.x,r.y2,r.x2,r.y2),n>1)?e:(i(r.x2,r.y,r.x2,r.y2),n===0?-1:e)}function mx(r,t){let e=0;const n=Ks(r,new _n(t.x,t.y,t.x2,t.y));e+=n.state===en.POINT?1:0;const i=Ks(r,new _n(t.x,t.y,t.x,t.y2));e+=i.state===en.POINT?1:0;const a=Ks(r,new _n(t.x,t.y2,t.x2,t.y2));e+=a.state===en.POINT?1:0;const o=Ks(r,new _n(t.x2,t.y,t.x2,t.y2));return e+=o.state===en.POINT?1:0,{top:n,left:i,bottom:a,right:o,count:e}}class kn{constructor(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(t){return new kn(t.x,t.y,t.width,t.height)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}clone(){return new kn(this.x,this.y,this.width,this.height)}add(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x2,t.x+t.width),a=Math.max(this.y2,t.y+t.height);this.x=e,this.y=n,this.width=i-e,this.height=a-n}addPoint(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x2,t.x),a=Math.max(this.y2,t.y);this.x=e,this.y=n,this.width=i-e,this.height=a-n}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(t){t.rect(this.x,this.y,this.width,this.height)}containsPt(t,e){return t>=this.x&&t<=this.x2&&e>=this.y&&e<=this.y2}get area(){return this.width*this.height}intersects(t){return this.area<=0||t.width<=0||t.height<=0?!1:t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x2&&t.y<this.y2}distSquare(t,e){if(this.containsPt(t,e))return 0;const n=Xs(this,t,e);return n.has(nn.TOP)?n.has(nn.LEFT)?Ei(t,e,this.x,this.y):n.has(nn.RIGHT)?Ei(t,e,this.x2,this.y):(this.y-e)*(this.y-e):n.has(nn.BOTTOM)?n.has(nn.LEFT)?Ei(t,e,this.x,this.y2):n.has(nn.RIGHT)?Ei(t,e,this.x2,this.y2):(e-this.y2)*(e-this.y2):n.has(nn.LEFT)?(this.x-t)*(this.x-t):n.has(nn.RIGHT)?(t-this.x2)*(t-this.x2):0}}function bx(r){if(r.length===0)return null;const t=r[0],e=new kn(t.x,t.y,0,0);for(const n of r)e.addPoint(n);return e}class qs{constructor(t,e,n){this.cx=t,this.cy=e,this.radius=n}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(t){return new qs(t.cx,t.cy,t.radius)}containsPt(t,e){return Ei(this.cx,this.cy,t,e)<this.radius*this.radius}distSquare(t,e){const n=Ei(this.cx,this.cy,t,e);if(n<this.radius*this.radius)return 0;const i=Math.sqrt(n)-this.radius;return i*i}draw(t){t.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}}class Gi{constructor(t,e=0,n=0,i=0,a=0,o=10,s=10,l=new Float32Array(Math.max(0,o*s)).fill(0)){this.pixelGroup=t,this.i=e,this.j=n,this.pixelX=i,this.pixelY=a,this.width=o,this.height=s,this.area=l}createSub(t,e){return new Gi(this.pixelGroup,t.x,t.y,e.x,e.y,t.width,t.height)}static fromPixelRegion(t,e){return new Gi(e,0,0,t.x,t.y,Math.ceil(t.width/e),Math.ceil(t.height/e))}copy(t,e){return new Gi(this.pixelGroup,this.scaleX(e.x),this.scaleY(e.y),e.x,e.y,t.width,t.height,t.area)}boundX(t){return t<this.i?this.i:t>=this.width?this.width-1:t}boundY(t){return t<this.j?this.j:t>=this.height?this.height-1:t}scaleX(t){return this.boundX(Math.floor((t-this.pixelX)/this.pixelGroup))}scaleY(t){return this.boundY(Math.floor((t-this.pixelY)/this.pixelGroup))}scale(t){const e=this.scaleX(t.x),n=this.scaleY(t.y),i=this.boundX(Math.ceil((t.x+t.width-this.pixelX)/this.pixelGroup)),a=this.boundY(Math.ceil((t.y+t.height-this.pixelY)/this.pixelGroup)),o=i-e,s=a-n;return new kn(e,n,o,s)}invertScaleX(t){return Math.round(t*this.pixelGroup+this.pixelX)}invertScaleY(t){return Math.round(t*this.pixelGroup+this.pixelY)}addPadding(t,e){const n=Math.ceil(e/this.pixelGroup),i=this.boundX(t.x-n),a=this.boundY(t.y-n),o=this.boundX(t.x2+n),s=this.boundY(t.y2+n),l=o-i,c=s-a;return new kn(i,a,l,c)}get(t,e){return t<0||e<0||t>=this.width||e>=this.height?Number.NaN:this.area[t+e*this.width]}inc(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]+=n)}set(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]=n)}incArea(t,e){if(t.width<=0||t.height<=0||e===0)return;const n=this.width,i=t.width,a=Math.max(0,t.i),o=Math.max(0,t.j),s=Math.min(t.i+t.width,n),l=Math.min(t.j+t.height,this.height);if(!(l<=0||s<=0||a>=n||l>=this.height))for(let c=o;c<l;c++){const u=(c-t.j)*i,h=c*n;for(let f=a;f<s;f++){const d=t.area[f-t.i+u];d!==0&&(this.area[f+h]+=e*d)}}}fill(t){this.area.fill(t)}fillArea(t,e){const n=t.x+t.y*this.width;for(let i=0;i<t.height;i++){const a=n+i*this.width;this.area.fill(e,a,a+t.width)}}fillHorizontalLine(t,e,n,i){const a=t+e*this.width;this.area.fill(i,a,a+n)}fillVerticalLine(t,e,n,i){const a=t+e*this.width;for(let o=0;o<n;o++)this.area[a+o*this.width]=i}clear(){this.area.fill(0)}toString(){let t="";for(let e=0;e<this.height;e++){const n=e*this.width;for(let i=0;i<this.width;i++){const a=this.area[n+i];t+=a.toFixed(1).padStart(6),t+=" "}t+=`
`}return t}draw(t,e=!0){if(this.width<=0||this.height<=0)return;t.save(),e&&t.translate(this.pixelX,this.pixelY);const n=this.area.reduce((o,s)=>Math.min(o,s),Number.POSITIVE_INFINITY),i=this.area.reduce((o,s)=>Math.max(o,s),Number.NEGATIVE_INFINITY),a=o=>(o-n)/(i-n);t.scale(this.pixelGroup,this.pixelGroup);for(let o=0;o<this.width;o++)for(let s=0;s<this.height;s++){const l=this.area[o+s*this.width];t.fillStyle=`rgba(0, 0, 0, ${a(l)})`,t.fillRect(o,s,1,1)}t.restore()}drawThreshold(t,e,n=!0){if(!(this.width<=0||this.height<=0)){t.save(),n&&t.translate(this.pixelX,this.pixelY),t.scale(this.pixelGroup,this.pixelGroup);for(let i=0;i<this.width;i++)for(let a=0;a<this.height;a++){const o=this.area[i+a*this.width];t.fillStyle=o>e?"black":"white",t.fillRect(i,a,1,1)}t.restore()}}}function Pp(r,t){const e=n=>({x:n.x-t,y:n.y-t,width:n.width+2*t,height:n.height+2*t});return Array.isArray(r)?r.map(e):e(r)}function Rp(r,t,e){return Dp(Object.assign(Cp(r),{distSquare:(n,i)=>mu(r.x1,r.y1,r.x2,r.y2,n,i)}),t,e)}function Dp(r,t,e){const n=Pp(r,e),i=t.scale(n),a=t.createSub(i,n);return _x(a,t,e,(o,s)=>r.distSquare(o,s)),a}function _x(r,t,e,n){const i=e*e;for(let a=0;a<r.height;a++)for(let o=0;o<r.width;o++){const s=t.invertScaleX(r.i+o),l=t.invertScaleY(r.j+a),c=n(s,l);if(c===0){r.set(o,a,i);continue}if(c<i){const u=e-Math.sqrt(c);r.set(o,a,u*u)}}return r}function xx(r,t,e){const n=t.scale(r),i=t.addPadding(n,e),a=t.createSub(i,{x:r.x-e,y:r.y-e}),o=n.x-i.x,s=n.y-i.y,l=i.x2-n.x2,c=i.y2-n.y2,u=i.width-o-l,h=i.height-s-c,f=e*e;a.fillArea({x:o,y:s,width:u+1,height:h+1},f);const d=[0],p=Math.max(s,o,l,c);{const b=t.invertScaleX(n.x+n.width/2);for(let E=1;E<p;E++){const O=t.invertScaleY(n.y-E),M=r.distSquare(b,O);if(M<f){const k=e-Math.sqrt(M);d.push(k*k)}else break}}const g=[],y=Math.max(o,l),m=Math.max(s,l);for(let b=1;b<y;b++){const E=t.invertScaleX(n.x-b),O=[];for(let M=1;M<m;M++){const k=t.invertScaleY(n.y-M),D=r.distSquare(E,k);if(D<f){const N=e-Math.sqrt(D);O.push(N*N)}else O.push(0)}g.push(O)}for(let b=1;b<Math.min(s,d.length);b++){const E=d[b];a.fillHorizontalLine(o,s-b,u+1,E)}for(let b=1;b<Math.min(c,d.length);b++){const E=d[b];a.fillHorizontalLine(o,s+h+b,u+1,E)}for(let b=1;b<Math.min(o,d.length);b++){const E=d[b];a.fillVerticalLine(o-b,s,h+1,E)}for(let b=1;b<Math.min(c,d.length);b++){const E=d[b];a.fillVerticalLine(o+u+b,s,h+1,E)}for(let b=1;b<o;b++){const E=g[b-1],O=o-b;for(let M=1;M<s;M++)a.set(O,s-M,E[M-1]);for(let M=1;M<c;M++)a.set(O,s+h+M,E[M-1])}for(let b=1;b<l;b++){const E=g[b-1],O=o+u+b;for(let M=1;M<s;M++)a.set(O,s-M,E[M-1]);for(let M=1;M<c;M++)a.set(O,s+h+M,E[M-1])}return a}function KT(r,t,e,n){return{x:r,y:t,width:e,height:n}}function XT(r,t,e){return{cx:r,cy:t,radius:e}}function qT(r,t,e,n){return{x1:r,y1:t,x2:e,y2:n}}function Ke(r,t){return{x:r,y:t}}function Ex(r,t,e,n){if(r.length===0)return[];const i=Cx(r);return i.map((a,o)=>{const s=i.slice(0,o);return wx(t,a,s,e,n)}).flat()}function wx(r,t,e,n,i){const a=Ke(t.cx,t.cy),o=Mx(a,e,r);if(o==null)return[];const s=new _n(a.x,a.y,o.cx,o.cy),l=Sx(s,r,n,i);return Ox(l,r)}function Sx(r,t,e,n){const i=[],a=[];a.push(r);let o=!0;for(let s=0;s<e&&o;s++)for(o=!1;!o&&a.length>0;){const l=a.pop(),c=kp(t,l),u=c?mx(l,c):null;if(!c||!u||u.count!==2){o||i.push(l);continue}let h=n,f=Js(c,h,u,!0),d=wi(f,a)||wi(f,i),p=Qs(f,t);for(;!d&&p&&h>=1;)h/=1.5,f=Js(c,h,u,!0),d=wi(f,a)||wi(f,i),p=Qs(f,t);if(f&&!d&&!p&&(a.push(new _n(l.x1,l.y1,f.x,f.y)),a.push(new _n(f.x,f.y,l.x2,l.y2)),o=!0),o)continue;h=n,f=Js(c,h,u,!1);let g=wi(f,a)||wi(f,i);for(p=Qs(f,t);!g&&p&&h>=1;)h/=1.5,f=Js(c,h,u,!1),g=wi(f,a)||wi(f,i),p=Qs(f,t);f&&!g&&(a.push(new _n(l.x1,l.y1,f.x,f.y)),a.push(new _n(f.x,f.y,l.x2,l.y2)),o=!0),o||i.push(l)}for(;a.length>0;)i.push(a.pop());return i}function Ox(r,t){const e=[];for(;r.length>0;){const n=r.pop();if(r.length===0){e.push(n);break}const i=r.pop(),a=new _n(n.x1,n.y1,i.x2,i.y2);kp(t,a)?(e.push(n),r.push(i)):r.push(a)}return e}function Mx(r,t,e){let n=Number.POSITIVE_INFINITY;return t.reduce((i,a)=>{const o=Ei(r.x,r.y,a.cx,a.cy);if(o>n)return i;const s=new _n(r.x,r.y,a.cx,a.cy),l=Tx(e,s);return o*(l+1)*(l+1)<n&&(i=a,n=o*(l+1)*(l+1)),i},null)}function Cx(r){if(r.length<2)return r;let t=0,e=0;return r.forEach(n=>{t+=n.cx,e+=n.cy}),t/=r.length,e/=r.length,r.map(n=>{const i=t-n.cx,a=e-n.cy,o=i*i+a*a;return[n,o]}).sort((n,i)=>n[1]-i[1]).map(n=>n[0])}function Qs(r,t){return t.some(e=>e.containsPt(r.x,r.y))}function wi(r,t){return t.some(e=>!!(Mp(e.x1,e.y1,r.x,r.y,.001)||Mp(e.x2,e.y2,r.x,r.y,.001)))}function kp(r,t){let e=Number.POSITIVE_INFINITY,n=null;for(const i of r){if(!Ap(i,t))continue;const a=yx(i,t);a>=0&&a<e&&(n=i,e=a)}return n}function Tx(r,t){return r.reduce((e,n)=>Ap(n,t)&&gx(n,t)?e+1:e,0)}function Js(r,t,e,n){const i=e.top,a=e.left,o=e.bottom,s=e.right;if(n){if(a.state===en.POINT){if(i.state===en.POINT)return Ke(r.x-t,r.y-t);if(o.state===en.POINT)return Ke(r.x-t,r.y2+t);const f=r.width*r.height;return r.width*((a.y-r.y+(s.y-r.y))*.5)<f*.5?a.y>s.y?Ke(r.x-t,r.y-t):Ke(r.x2+t,r.y-t):a.y<s.y?Ke(r.x-t,r.y2+t):Ke(r.x2+t,r.y2+t)}if(s.state===en.POINT){if(i.state===en.POINT)return Ke(r.x2+t,r.y-t);if(o.state===en.POINT)return Ke(r.x2+t,r.y2+t)}const u=r.height*r.width;return r.height*((i.x-r.x+(s.x-r.x))*.5)<u*.5?i.x>o.x?Ke(r.x-t,r.y-t):Ke(r.x-t,r.y2+t):i.x<o.x?Ke(r.x2+t,r.y-t):Ke(r.x2+t,r.y2+t)}if(a.state===en.POINT){if(i.state===en.POINT)return Ke(r.x2+t,r.y2+t);if(o.state===en.POINT)return Ke(r.x2+t,r.y-t);const u=r.height*r.width;return r.width*((a.y-r.y+(s.y-r.y))*.5)<u*.5?a.y>s.y?Ke(r.x2+t,r.y2+t):Ke(r.x-t,r.y2+t):a.y<s.y?Ke(r.x2+t,r.y-t):Ke(r.x-t,r.y-t)}if(s.state===en.POINT){if(i.state===en.POINT)return Ke(r.x-t,r.y2+t);if(o.state===en.POINT)return Ke(r.x-t,r.y-t)}const l=r.height*r.width;return r.height*((i.x-r.x+(s.x-r.x))*.5)<l*.5?i.x>o.x?Ke(r.x2+t,r.y2+t):Ke(r.x2+t,r.y-t):i.x<o.x?Ke(r.x-t,r.y2+t):Ke(r.x-t,r.y-t)}function Ax(r,t,e,n){if(!(r.closed?e<r.length:e<r.length-1))return!1;const a=r.get(t),o=r.get(e+1);for(let s=t+1;s<=e;s++){const l=r.get(s);if(mu(a.x,a.y,o.x,o.y,l.x,l.y)>n)return!1}return!0}function Px(r=0){return t=>{if(r<0||t.length<3)return t;const e=[];let n=0;const i=r*r;for(;n<t.length;){let a=n+1;for(;Ax(t,n,a,i);)a++;e.push(t.get(n)),n=a}return new Vi(e)}}function Rx(r,t){switch(r){case-2:return(((-t+3)*t-3)*t+1)/6;case-1:return((3*t-6)*t*t+4)/6;case 0:return(((-3*t+3)*t+3)*t+1)/6;case 1:return t*t*t/6;default:throw new Error("unknown error")}}function Dx(r=6){function a(o,s,l){let c=0,u=0;for(let h=-2;h<=1;h++){const f=o.get(s+h),d=Rx(h,l);c+=d*f.x,u+=d*f.y}return{x:c,y:u}}return o=>{if(o.length<3)return o;const s=[],l=o.closed,c=o.length+3-1+(l?0:2);s.push(a(o,2-(l?0:2),0));for(let u=2-(l?0:2);u<c;u++)for(let h=1;h<=r;h++)s.push(a(o,u,h/r));return new Vi(s)}}function kx(r=8){return t=>{let e=r,n=t.length;if(e>1)for(n=Math.floor(t.length/e);n<3&&e>1;)e-=1,n=Math.floor(t.length/e);const i=[];for(let a=0,o=0;o<n;o++,a+=e)i.push(t.get(a));return new Vi(i)}}class Vi{constructor(t=[],e=!0){this.points=t,this.closed=e}get(t){const e=t,n=this.points.length;return t<0?this.closed?this.get(t+n):this.points[0]:t>=n?this.closed?this.get(t-n):this.points[n-1]:this.points[e]}get length(){return this.points.length}toString(t=1/0){const e=this.points;if(e.length===0)return"";const n=typeof t=="function"?t:vx(t);let i="M";for(const a of e)i+=`${n(a.x)},${n(a.y)} L`;return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}draw(t){const e=this.points;if(e.length!==0){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(const n of e)t.lineTo(n.x,n.y);this.closed&&t.closePath()}}sample(t){return kx(t)(this)}simplify(t){return Px(t)(this)}bSplines(t){return Dx(t)(this)}apply(t){return t(this)}containsElements(t){const e=bx(this.points);return e?t.every(n=>e.containsPt(n.cx,n.cy)&&this.withinArea(n.cx,n.cy)):!1}withinArea(t,e){if(this.length===0)return!1;let n=0;const i=this.points[0],a=new _n(i.x,i.y,i.x,i.y);for(let o=1;o<this.points.length;o++){const s=this.points[o];a.x1=a.x2,a.y1=a.y2,a.x2=s.x,a.y2=s.y,a.cuts(t,e)&&n++}return a.x1=a.x2,a.y1=a.y2,a.x2=i.x,a.y2=i.y,a.cuts(t,e)&&n++,n%2===1}}class Lx{constructor(t=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=t}add(t){this.set.add(`${t.x}x${t.y}`),this.arr[this.count++]=t}contains(t){return this.set.has(`${t.x}x${t.y}`)}isFirst(t){if(this.count===0)return!1;const e=this.arr[0];return e!=null&&e.x===t.x&&e.y===t.y}path(){return new Vi(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(t){return this.arr[t]}get length(){return this.count}}const no=0,tl=1,el=2,_u=3;function Ix(r,t){const e=(Math.floor(r.width)+Math.floor(r.height))*2,n=new Lx(e);function i(l,c,u,h){const f=r.get(l,c);return Number.isNaN(f)?Number.NaN:f>t?u+h:u}function a(l,c){let u=no;return u=i(l,c,u,1),u=i(l+1,c,u,2),u=i(l,c+1,u,4),u=i(l+1,c+1,u,8),Number.isNaN(u)?-1:u}let o=tl;function s(l,c){let u=l,h=c,f=r.invertScaleX(u),d=r.invertScaleY(h);for(let p=0;p<r.width*r.height;p++){const g={x:f,y:d};if(n.contains(g)){if(n.isFirst(g))return!0}else n.add(g);const y=a(u,h);switch(y){case-1:return!0;case 0:case 3:case 2:case 7:o=el;break;case 12:case 14:case 4:o=_u;break;case 6:o=o===no?_u:el;break;case 1:case 13:case 5:o=no;break;case 9:o=o===el?no:tl;break;case 10:case 8:case 11:o=tl;break;default:return console.warn("Marching squares invalid state: "+y),!0}switch(o){case no:h--,d-=r.pixelGroup;break;case tl:h++,d+=r.pixelGroup;break;case _u:u--,f-=r.pixelGroup;break;case el:u++,f+=r.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+y),!0}}return!0}for(let l=0;l<r.width;l++)for(let c=0;c<r.height;c++){if(r.get(l,c)<=t)continue;const u=a(l,c);if(!(u<0||u===15)&&s(l,c))return n.path()}return null}const nl={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function ro(r){return r!=null&&typeof r.radius=="number"}function Lp(r,t){if(ro(r)!==ro(t))return!1;if(ro(r)){const n=t;return r.cx===n.cx&&r.cy===n.cy&&r.radius===n.radius}const e=t;return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}var Tr;(function(r){r[r.MEMBERS=0]="MEMBERS",r[r.NON_MEMBERS=1]="NON_MEMBERS",r[r.EDGES=2]="EDGES"})(Tr||(Tr={}));class xu{constructor(t={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new kn(0,0,0,0),this.potentialArea=new Gi(1,0,0,0,0,0,0),this.o=Object.assign({},nl,t)}pushMember(...t){if(t.length!==0){this.dirty.add(Tr.MEMBERS);for(const e of t)this.members.push({raw:e,obj:ro(e)?qs.from(e):kn.from(e),area:null})}}removeMember(t){const e=this.members.findIndex(n=>Lp(n.raw,t));return e<0?!1:(this.members.splice(e,1),this.dirty.add(Tr.MEMBERS),!0)}removeNonMember(t){const e=this.nonMembers.findIndex(n=>Lp(n.raw,t));return e<0?!1:(this.nonMembers.splice(e,1),this.dirty.add(Tr.NON_MEMBERS),!0)}removeEdge(t){const e=this.edges.findIndex(n=>n.obj.equals(t));return e<0?!1:(this.edges.splice(e,1),this.dirty.add(Tr.NON_MEMBERS),!0)}pushNonMember(...t){if(t.length!==0){this.dirty.add(Tr.NON_MEMBERS);for(const e of t)this.nonMembers.push({raw:e,obj:ro(e)?qs.from(e):kn.from(e),area:null})}}pushEdge(...t){if(t.length!==0){this.dirty.add(Tr.EDGES);for(const e of t)this.edges.push({raw:e,obj:_n.from(e),area:null})}}update(){const t=this.dirty.has(Tr.MEMBERS),e=this.dirty.has(Tr.NON_MEMBERS);let n=this.dirty.has(Tr.EDGES);this.dirty.clear();const i=this.members.map(c=>c.obj);if(this.o.virtualEdges&&(t||e)){const c=this.nonMembers.map(f=>f.obj),u=Ex(i,c,this.o.maxRoutingIterations,this.o.morphBuffer),h=new Map(this.virtualEdges.map(f=>[f.obj.toString(),f.area]));this.virtualEdges=u.map(f=>{var d;return{raw:f,obj:f,area:(d=h.get(f.toString()))!==null&&d!==void 0?d:null}}),n=!0}let a=!1;if(t||n){const c=this.virtualEdges.concat(this.edges).map(d=>d.obj),u=jx(i,c),h=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,f=kn.from(Pp(u,h));f.equals(this.activeRegion)||(a=!0,this.activeRegion=f)}if(a){const c=Math.ceil(this.activeRegion.width/this.o.pixelGroup),u=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=Gi.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(h=>h.area=null),this.nonMembers.forEach(h=>h.area=null),this.edges.forEach(h=>h.area=null),this.virtualEdges.forEach(h=>h.area=null)):(c!==this.potentialArea.width||u!==this.potentialArea.height)&&(this.potentialArea=Gi.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const o=new Map,s=c=>{if(c.area){const u=`${c.obj.width}x${c.obj.height}x${c.obj instanceof kn?"R":"C"}`;o.set(u,c.area)}},l=c=>{if(c.area)return;const u=`${c.obj.width}x${c.obj.height}x${c.obj instanceof kn?"R":"C"}`;if(o.has(u)){const f=o.get(u);c.area=this.potentialArea.copy(f,{x:c.obj.x-this.o.nodeR1,y:c.obj.y-this.o.nodeR1});return}const h=c.obj instanceof kn?xx(c.obj,this.potentialArea,this.o.nodeR1):Dp(c.obj,this.potentialArea,this.o.nodeR1);c.area=h,o.set(u,h)};this.members.forEach(s),this.nonMembers.forEach(s),this.members.forEach(l),this.nonMembers.forEach(c=>{this.activeRegion.intersects(c.obj)?l(c):c.area=null}),this.edges.forEach(c=>{c.area||(c.area=Rp(c.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(c=>{c.area||(c.area=Rp(c.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(t){for(const e of this.members)e.obj.draw(t)}drawNonMembers(t){for(const e of this.nonMembers)e.obj.draw(t)}drawEdges(t){for(const e of this.edges)e.obj.draw(t)}drawPotentialArea(t,e=!0){this.potentialArea.draw(t,e)}compute(){if(this.members.length===0)return new Vi([]);this.dirty.size>0&&this.update();const{o:t,potentialArea:e}=this,n=this.members.map(s=>s.area),i=this.virtualEdges.concat(this.edges).map(s=>s.area),a=this.nonMembers.filter(s=>s.area!=null).map(s=>s.area),o=this.members.map(s=>s.obj);return Nx(e,n,i,a,s=>s.containsElements(o),t)}}function Nx(r,t,e,n,i,a={}){const o=Object.assign({},nl,a);let s=o.threshold,l=o.memberInfluenceFactor,c=o.edgeInfluenceFactor,u=o.nonMemberInfluenceFactor;const h=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),f=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1);for(let d=0;d<o.maxMarchingIterations;d++){if(r.clear(),l!==0){const g=l/h;for(const y of t)r.incArea(y,g)}if(c!==0){const g=c/f;for(const y of e)r.incArea(y,g)}if(u!==0){const g=u/h;for(const y of n)r.incArea(y,g)}const p=Ix(r,s);if(p&&i(p))return p;if(s*=.95,d<=o.maxMarchingIterations*.5)l*=1.2,c*=1.2;else if(u!==0&&n.length>0)u*=.8;else break}return new Vi([])}function jx(r,t){if(r.length===0)return new kn(0,0,0,0);const e=kn.from(r[0]);for(const n of r)e.add(n);for(const n of t)e.add(Cp(n));return e}function QT(r,t=[],e=[],n={}){if(r.length===0)return new Vi([]);const i=new xu(n);return i.pushMember(...r),i.pushNonMember(...t),i.pushEdge(...e),i.compute()}var Bx=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class rl extends Tn{constructor(t,e){super(t,(0,Jn.Z)({},rl.defaultOptions,e)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:n,bubbleSetOptions:i}=this.parseOptions();cn(this.bubbleSetOptions,i)||this.init(),this.bubbleSetOptions=Object.assign({},i);const a=Object.assign(Object.assign({},n),{d:this.getPath()});this.shape?this.shape.update(a):(this.shape=new Va({style:a}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=n=>{if(!this.shape)return;const i=St(n.data);[...this.options.members,...this.options.avoidMembers].includes(i)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(i)}))},this.getPath=n=>{const{graph:i}=this.context,a=this.options.members,o=[...this.members.keys()],s=this.options.avoidMembers,l=[...this.avoidMembers.keys()];if(!n&&cn(a,o)&&cn(s,l))return this.path;const{enter:c=[],exit:u=[]}=ui(o,a,y=>y),{enter:h=[],exit:f=[]}=ui(l,s,y=>y);n&&(u.push(n),c.push(n));const d=(y,m,b)=>{y.forEach(E=>{const O=b?this.members:this.avoidMembers,M=b?"pushMember":"pushNonMember",k=b?"removeMember":"removeNonMember";if(m){let D;i.getElementType(E)==="edge"?([D]=zx(i,E),this.bubbleSets.pushEdge(D)):([D]=Fx(i,E),this.bubbleSets[M](D)),O.set(E,D)}else{const D=O.get(E);D&&(i.getElementType(E)==="edge"?this.bubbleSets.removeEdge(D):this.bubbleSets[k](D),O.delete(E))}})};d(u,!1,!0),d(c,!0,!0),d(f,!1,!1),d(h,!0,!1);const g=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=Jf(g.points.map(Cn)),this.path},this.bindEvents(),this.bubbleSets=new xu(this.options)}bindEvents(){this.context.graph.on(he.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(he.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new xu(this.options),this.members=new Map,this.avoidMembers=new Map}parseOptions(){const t=this.options,{type:e,key:n,members:i,avoidMembers:a}=t,o=Bx(t,["type","key","members","avoidMembers"]),s=Object.keys(o).reduce((l,c)=>(c in nl?l.bubbleSetOptions[c]=o[c]:l.style[c]=o[c],l),{style:{},bubbleSetOptions:{}});return Object.assign({type:e,key:n,members:i,avoidMembers:a},s)}addMember(t){const e=Array.isArray(t)?t:[t];e.some(n=>this.options.avoidMembers.includes(n))&&(this.options.avoidMembers=this.options.avoidMembers.filter(n=>!e.includes(n))),this.options.members=[...new Set([...this.options.members,...e])],this.drawBubbleSets()}removeMember(t){const e=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter(n=>!e.includes(n)),this.drawBubbleSets()}updateMember(t){this.options.members=(0,Se.Z)(t)?t(this.options.members):t,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(t){const e=Array.isArray(t)?t:[t];e.some(n=>this.options.members.includes(n))&&(this.options.members=this.options.members.filter(n=>!e.includes(n))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...e])],this.drawBubbleSets()}removeAvoidMember(t){const e=Array.isArray(t)?t:[t];this.options.avoidMembers.some(n=>e.includes(n))&&(this.options.avoidMembers=this.options.avoidMembers.filter(n=>!e.includes(n)),this.drawBubbleSets())}updateAvoidMember(t){this.options.avoidMembers=Array.isArray(t)?t:[t],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(he.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(he.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy()}}rl.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},nl);const Fx=(r,t)=>(Array.isArray(t)?t:[t]).map(n=>{const i=r.getElementRenderBounds(n);return new kn(i.min[0],i.min[1],Br(i),Fr(i))}),zx=(r,t)=>(Array.isArray(t)?t:[t]).map(n=>{const i=r.getEdgeData(n),a=r.getElementPosition(i.source),o=r.getElementPosition(i.target);return _n.from({x1:a[0],y1:a[1],x2:o[0],y2:o[1]})});class JT extends null{constructor(t,e){super(t,e),this.setOptions=n=>{const i={cameraType:"setType",near:"setNear",far:"setFar",fov:"setFov",aspect:"setAspect",projectionMode:"setProjectionMode",distance:"setDistance",minDistance:"setMinDistance",maxDistance:"setMaxDistance",roll:"setRoll",elevation:"setElevation",azimuth:"setAzimuth"},a=(o,s)=>{switch(o){case"projectionMode":return s==="perspective"?1:0;case"cameraType":return{orbiting:0,exploring:1,tracking:2}[s];case"aspect":return typeof s=="number"?s:this.getCanvasAspect();default:return s}};Object.entries(i).forEach(([o,s])=>{const l=n[o];if(l!==void 0){const c=a(o,l);this.context.canvas.getCamera()[s](c)}})},this.bindEvents()}update(t){this.setOptions(t),super.update(t)}bindEvents(){this.context.graph.once(GraphEvent.BEFORE_DRAW,()=>this.setOptions(this.options))}getCanvasAspect(){const[t,e]=this.context.viewport.getCanvasSize();return t/e}}function Wx(r){return`
    <ul class="g6-contextmenu-ul">
      ${r.map(t=>`<li  class="g6-contextmenu-li" value="${t.value}">${t.name}</li>`).join("")}
    </ul>
  `}const Gx=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var Ip=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class il extends Tn{constructor(t,e){super(t,Object.assign({},il.defaultOptions,e)),this.targetElement=null,this.onTriggerEvent=n=>{var i;(i=n.preventDefault)===null||i===void 0||i.call(n),this.show(n)},this.onMenuItemClick=n=>{const{onClick:i,trigger:a}=this.options;if(n.target instanceof HTMLElement&&n.target.className.includes("g6-contextmenu-li")){const o=n.target.getAttribute("value");i==null||i(o,n.target,this.targetElement),this.hide()}a!=="click"&&this.hide()},this.initElement(),this.update(e)}initElement(){this.$element=ga("contextmenu",!1,{zIndex:"99"});const{className:t}=this.options;t&&this.$element.classList.add(t),this.context.canvas.getContainer().appendChild(this.$element),yu("g6-contextmenu-css","style",{},Gx,document.head)}show(t){return Ip(this,void 0,void 0,function*(){const{enable:e,offset:n}=this.options;if(typeof e=="function"&&!e(t)||!e){this.hide();return}const i=yield this.getDOMContent(t);i instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(i)):this.$element.innerHTML=i;const a=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${t.client.x-a.left+n[0]}px`,this.$element.style.top=`${t.client.y-a.top+n[1]}px`,this.$element.style.display="block",this.targetElement=t.target})}hide(){this.$element.style.display="none",this.targetElement=null}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(t){return Ip(this,void 0,void 0,function*(){const{getContent:e,getItems:n}=this.options;return n?Wx(yield n(t)):yield e(t)})}bindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;t.on(`canvas:${e}`,this.onTriggerEvent),t.on(`node:${e}`,this.onTriggerEvent),t.on(`edge:${e}`,this.onTriggerEvent),t.on(`combo:${e}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:t}=this.context,{trigger:e}=this.options;t.off(`canvas:${e}`,this.onTriggerEvent),t.off(`node:${e}`,this.onTriggerEvent),t.off(`edge:${e}`,this.onTriggerEvent),t.off(`combo:${e}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}il.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class al extends Tn{constructor(t,e){super(t,Object.assign({},al.defaultOptions,e)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:n,element:i}=this.context,a=n.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:o,iterRate:s,divRate:l}=this.options;let{lambda:c,divisions:u,iterations:h}=this.options;for(let f=0;f<o;f++){for(let d=0;d<h;d++){const p={};a.forEach(g=>{var y;if(g.source===g.target)return;const m=St(g);p[m]=this.getEdgeForces(g,u,c);for(let b=0;b<u+1;b++)(y=this.edgePoints)[m]||(y[m]=[]),this.edgePoints[m][b]=Ce(this.edgePoints[m][b],p[m][b])})}c/=2,u*=l,h*=s,this.divideEdges(u)}a.forEach(f=>{const d=St(f),p=i.getElement(d);p==null||p.update({d:ru(this.edgePoints[d])})})},this.bindEvents()}get nodeMap(){const t=this.context.model.getNodeData();return Object.fromEntries(t.map(e=>[St(e),Ni(gn(e))]))}divideEdges(t){this.context.model.getEdgeData().forEach(n=>{var i;const a=St(n);(i=this.edgePoints)[a]||(i[a]=[]);const o=this.nodeMap[n.source],s=this.nodeMap[n.target];if(t===1)this.edgePoints[a].push(o),this.edgePoints[a].push(Or(Ce(o,s),2)),this.edgePoints[a].push(s);else{const c=(this.edgePoints[a].length===0?$e(o,s):Ux(this.edgePoints[a]))/(t+1);let u=c;const h=[o];for(let f=1;f<this.edgePoints[a].length;f++){const d=this.edgePoints[a][f-1],p=this.edgePoints[a][f];let g=$e(p,d);for(;g>u;){const y=u/g,m=Ce(d,Sr(Fe(p,d),y));h.push(m),g-=u,u=c}u-=g}h.push(s),this.edgePoints[a]=h}})}getVectorPosition(t){const e=this.nodeMap[t.source],n=this.nodeMap[t.target],[i,a]=Fe(n,e),o=$e(e,n);return{source:e,target:n,vx:i,vy:a,length:o}}measureEdgeCompatibility(t,e){const n=this.getVectorPosition(t),i=this.getVectorPosition(e),a=Vx(n,i),o=Hx(n,i),s=Zx(n,i),l=$x(n,i);return a*o*s*l}getEdgeBundles(){const t={},e=this.options.bundleThreshold,n=this.context.model.getEdgeData();return n.forEach((i,a)=>{n.forEach((o,s)=>{var l,c;if(s<=a)return;this.measureEdgeCompatibility(i,o)>=e&&(t[l=St(i)]||(t[l]=[]),t[St(i)].push(o),t[c=St(o)]||(t[c]=[]),t[St(o)].push(i))})}),t}getSpringForce(t,e){const{pre:n,cur:i,next:a}=t;return Sr(Fe(Ce(n,a),Sr(i,2)),e)}getElectrostaticForce(t,e){Wr(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const n=this.edgeBundles[St(e)];let i=[0,0];return n==null||n.forEach(a=>{const o=this.edgePoints[St(a)][t],s=this.edgePoints[St(e)][t],l=Fe(o,s),c=$e(o,s);i=Ce(i,Sr(l,1/c))}),i}getEdgeForces(t,e,n){const i=this.nodeMap[t.source],a=this.nodeMap[t.target],o=this.options.K/($e(i,a)*(e+1)),s=[[0,0]],l=St(t);for(let c=1;c<e;c++){const u=this.getSpringForce({pre:this.edgePoints[l][c-1],cur:this.edgePoints[l][c],next:this.edgePoints[l][c+1]||[0,0]},o),h=this.getElectrostaticForce(c,t);s.push(Sr(Ce(u,h),n))}return s.push([0,0]),s}bindEvents(){const{graph:t}=this.context;t.on(he.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:t}=this.context;t.off(he.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}al.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const Vx=(r,t)=>Math.abs(Km([r.vx,r.vy],[t.vx,t.vy])/(r.length*t.length)),Hx=(r,t)=>{const e=(r.length+t.length)/2;return 2/(e/Math.min(r.length,t.length)+Math.max(r.length,t.length)/e)},Zx=(r,t)=>{const e=(r.length+t.length)/2,n=Or(Ce(r.source,r.target),2),i=Or(Ce(t.source,t.target),2);return e/(e+$e(n,i))},Np=(r,t)=>{if(t.source[0]===t.target[0])return[t.source[0],r[1]];if(t.source[1]===t.target[1])return[r[0],t.source[1]];const e=(t.source[1]-t.target[1])/(t.source[0]-t.target[0]),n=(e*e*t.source[0]+e*(r[1]-t.source[1])+r[0])/(e*e+1),i=e*(n-t.source[0])+t.source[1];return[n,i]},jp=(r,t)=>{const e=Np(t.source,r),n=Np(t.target,r),i=Or(Ce(e,n),2),a=Or(Ce(r.source,r.target),2);return $e(e,n)===0?0:Math.max(0,1-2*$e(a,i)/$e(e,n))},$x=(r,t)=>Math.min(jp(r,t),jp(t,r)),Ux=r=>{let t=0;for(let e=1;e<r.length;e++)t+=$e(r[e],r[e-1]);return t},Yx={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},Bp=.05;class ol extends Tn{constructor(t,e){super(t,Object.assign({},ol.defaultOptions,e)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=n=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=Cn(n.canvas);this.renderLens(i),this.renderFocusElements()},this.renderLens=n=>{const i=Object.assign({},Yx,this.options.style);this.isLensOn||(this.lens=new Bi({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,Mr(n),{size:this.r*2}),this.lens.update(i)},this.getFilterData=()=>{const{filter:n}=this.options,{model:i}=this.context,a=i.getData();if(!n)return a;const{nodes:o,edges:s,combos:l}=a;return{nodes:o.filter(c=>n(St(c),"node")),edges:s.filter(c=>n(St(c),"edge")),combos:l.filter(c=>n(St(c),"combo"))}},this.getFocusElements=n=>{const{nodes:i,edges:a}=this.getFilterData(),o=i.filter(c=>$e(gn(c),n)<this.r),s=o.map(c=>St(c)),l=a.filter(c=>{const{source:u,target:h}=c,f=s.includes(u),d=s.includes(h);switch(this.options.nodeType){case"both":return f&&d;case"either":return f!==d;case"source":return f&&!d;case"target":return!f&&d;default:return!1}});return{nodes:o,edges:l}},this.renderFocusElements=()=>{const{element:n,graph:i}=this.context;if(!this.isLensOn)return;const a=this.lens.getCenter(),{nodes:o,edges:s}=this.getFocusElements(a),l=new Set,c=u=>{const h=St(u);l.add(h);const f=n.getElement(h);if(!f)return;const d=this.shapes.get(h)||f.cloneNode();d.setPosition(f.getPosition()),d.id=f.id,this.shapes.has(h)?Object.entries(f.attributes).forEach(([y,m])=>{d.style[y]!==m&&(d.style[y]=m)}):(this.canvas.appendChild(d),this.shapes.set(h,d));const p=i.getElementType(h),g=this.getElementStyle(p,u);d.update(g)};o.forEach(c),s.forEach(c),this.shapes.forEach((u,h)=>{l.has(h)||(u.destroy(),this.shapes.delete(h))})},this.scaleRByWheel=n=>{var i;this.options.preventDefault&&n.preventDefault();const{clientX:a,clientY:o,deltaX:s,deltaY:l}=n,{graph:c,canvas:u}=this.context,h=c.getCanvasByClient([a,o]),f=(i=this.lens)===null||i===void 0?void 0:i.getCenter();if(!this.isLensOn||$e(h,f)>this.r)return;const{maxR:d,minR:p}=this.options,g=s+l>0?1/(1-Bp):1-Bp,y=Math.min(...u.getSize())/2;this.r=Math.max(p||0,Math.min(d||y,this.r*g)),this.renderLens(f),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=n=>{var i;const a=Cn(n.canvas),o=(i=this.lens)===null||i===void 0?void 0:i.getCenter();!this.isLensOn||$e(a,o)>this.r||(this.isLensDragging=!0)},this.onDrag=n=>{if(!this.isLensDragging)return;const i=Cn(n.canvas);this.renderLens(i),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(t,e){const n=t==="node"?this.options.nodeStyle:this.options.edgeStyle;return typeof n=="function"?n(e):n}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var t;const{graph:e}=this.context,{trigger:n,scaleRBy:i}=this.options,a=e.getCanvas().getLayer();["click","drag"].includes(n)&&a.addEventListener(Zt.CLICK,this.onEdgeFilter),n==="pointermove"?a.addEventListener(Zt.POINTER_MOVE,this.onEdgeFilter):n==="drag"&&(a.addEventListener(Zt.DRAG_START,this.onDragStart),a.addEventListener(Zt.DRAG,this.onDrag),a.addEventListener(Zt.DRAG_END,this.onDragEnd)),i==="wheel"&&((t=this.graphDom)===null||t===void 0||t.addEventListener(Zt.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var t;const{graph:e}=this.context,{trigger:n,scaleRBy:i}=this.options,a=e.getCanvas().getLayer();["click","drag"].includes(n)&&a.removeEventListener(Zt.CLICK,this.onEdgeFilter),n==="pointermove"?a.removeEventListener(Zt.POINTER_MOVE,this.onEdgeFilter):n==="drag"&&(a.removeEventListener(Zt.DRAG_START,this.onDragStart),a.removeEventListener(Zt.DRAG,this.onDrag),a.removeEventListener(Zt.DRAG_END,this.onDragEnd)),i==="wheel"&&((t=this.graphDom)===null||t===void 0||t.removeEventListener(Zt.WHEEL,this.scaleRByWheel))}update(t){var e;this.unbindEvents(),super.update(t),this.r=(e=t.r)!==null&&e!==void 0?e:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((t,e)=>{t.destroy(),this.shapes.delete(e)}),super.destroy()}}ol.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const Kx={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},Fp=.05,zp=.1;class sl extends Tn{constructor(t,e){super(t,Object.assign({},sl.defaultOptions,e)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=n=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=Cn(n.canvas);this.onMagnify(i)},this.onMagnify=n=>{n.some(isNaN)||(this.renderLens(n),this.renderFocusElements())},this.renderLens=n=>{const i=Object.assign({},Kx,this.options.style);this.isLensOn||(this.lens=new Bi({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,Mr(n),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(i)},this.getDPercent=()=>{const{minD:n,maxD:i}=this.options;return`${Math.round((this.d-n)/(i-n)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:n}=this.context,i=this.lens.getCenter(),a=(this.d+1)*this.r,o=new Map,s=new Map;n.getNodeData().forEach(c=>{const u=gn(c),h=$e(u,i);if(h>this.r)return;const f=a*h/(this.d*h+this.r),[d,p]=u,[g,y]=i,m=(d-g)/h,b=(p-y)/h,E=[g+f*m,y+f*b],O=St(c),M=this.getNodeStyle(c),k=(0,Ka.Z)(n.getElementRenderStyle(O),Object.keys(M));o.set(O,Object.assign(Object.assign({},Mr(E)),M)),s.set(O,Object.assign(Object.assign({},Mr(u)),k))}),this.updateStyle(o,s)},this.getNodeStyle=n=>{const{nodeStyle:i}=this.options;return typeof i=="function"?i(n):i},this.updateStyle=(n,i)=>{const{graph:a,element:o}=this.context,{enter:s,exit:l,keep:c}=ui(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(n.keys()),f=>f),u=new Set,h=(f,d)=>{const p=o.getElement(f);p==null||p.update(d),a.getRelatedEdgesData(f).forEach(g=>{u.add(St(g))})};[...s,...c].forEach(f=>{h(f,n.get(f))}),l.forEach(f=>{h(f,this.prevOriginStyleMap.get(f)),this.prevOriginStyleMap.delete(f)}),u.forEach(f=>{const d=o.getElement(f);d==null||d.update({})}),this.prevMagnifiedStyleMap=n,i.forEach((f,d)=>{this.prevOriginStyleMap.has(d)||this.prevOriginStyleMap.set(d,f)})},this.isWheelValid=n=>{if(this.options.preventDefault&&n.preventDefault(),!this.isLensOn)return!1;const{clientX:i,clientY:a}=n,o=this.context.graph.getCanvasByClient([i,a]),s=this.lens.getCenter();return!($e(o,s)>this.r)},this.scaleR=n=>{const{maxR:i,minR:a}=this.options,o=n?1/(1-Fp):1-Fp,s=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(a||0,Math.min(i||s,this.r*o))},this.scaleD=n=>{const{maxD:i,minD:a}=this.options,o=n?this.d+zp:this.d-zp;this.d=Math.max(a,Math.min(i,o))},this.scaleRByWheel=n=>{if(!this.isWheelValid(n))return;const{deltaX:i,deltaY:a}=n;this.scaleR(i+a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.scaleDByWheel=n=>{if(!this.isWheelValid(n))return;const{deltaX:i,deltaY:a}=n;this.scaleD(i+a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.isDragValid=n=>{if(this.options.preventDefault&&n.preventDefault(),!this.isLensOn)return!1;const i=Cn(n.canvas),a=this.lens.getCenter();return!($e(i,a)>this.r)},this.isLensDragging=!1,this.onDragStart=n=>{this.isDragValid(n)&&(this.isLensDragging=!0)},this.onDrag=n=>{if(!this.isLensDragging)return;const i=Cn(n.canvas);this.onMagnify(i)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=n=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=n;this.scaleR(i-a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.scaleDByDrag=n=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=n;this.scaleD(i-a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var t;const{graph:e}=this.context,{trigger:n,scaleRBy:i,scaleDBy:a}=this.options,o=e.getCanvas().getLayer();if(["click","drag"].includes(n)&&o.addEventListener(Zt.CLICK,this.onCreateFisheye),n==="pointermove"&&o.addEventListener(Zt.POINTER_MOVE,this.onCreateFisheye),n==="drag"||i==="drag"||a==="drag"){o.addEventListener(Zt.DRAG_START,this.onDragStart),o.addEventListener(Zt.DRAG_END,this.onDragEnd);const s=n==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;o.addEventListener(Zt.DRAG,s)}if(i==="wheel"||a==="wheel"){const s=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(t=this.graphDom)===null||t===void 0||t.addEventListener(Zt.WHEEL,s,{passive:!1})}}unbindEvents(){var t;const{graph:e}=this.context,{trigger:n,scaleRBy:i,scaleDBy:a}=this.options,o=e.getCanvas().getLayer();if(["click","drag"].includes(n)&&o.removeEventListener(Zt.CLICK,this.onCreateFisheye),n==="pointermove"&&o.removeEventListener(Zt.POINTER_MOVE,this.onCreateFisheye),n==="drag"||i==="drag"||a==="drag"){o.removeEventListener(Zt.DRAG_START,this.onDragStart),o.removeEventListener(Zt.DRAG_END,this.onDragEnd);const s=n==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;o.removeEventListener(Zt.DRAG,s)}if(i==="wheel"||a==="wheel"){const s=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(t=this.graphDom)===null||t===void 0||t.removeEventListener(Zt.WHEEL,s)}}update(t){var e,n;this.unbindEvents(),super.update(t),this.r=(e=t.r)!==null&&e!==void 0?e:this.r,this.d=(n=t.d)!==null&&n!==void 0?n:this.d,this.bindEvents()}destroy(){var t;this.unbindEvents(),this.isLensOn&&((t=this.lens)===null||t===void 0||t.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}sl.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class ll extends Tn{constructor(t,e){super(t,Object.assign({},ll.defaultOptions,e)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var n,i,a,o;const s=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(s),s?(i=(n=this.options).onEnter)===null||i===void 0||i.call(n):(o=(a=this.options).onExit)===null||o===void 0||o.call(a)},this.shortcut=new ra(t.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:t=[],exit:e=[]}=this.options.trigger;this.shortcut.bind(t,this.request),this.shortcut.bind(e,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(i=>{document.addEventListener(i,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(e=>{document.removeEventListener(e,this.onFullscreenChange,!1)})}setGraphSize(t=!0){var e,n;let i,a;t?(i=((e=globalThis.screen)===null||e===void 0?void 0:e.width)||0,a=((n=globalThis.screen)===null||n===void 0?void 0:n.height)||0,this.graphSize=this.context.graph.getSize()):[i,a]=this.graphSize,this.context.graph.setSize(i,a),this.context.graph.render()}request(){document.fullscreenElement||!Xx()||this.$el.requestFullscreen().catch(t=>{Zn.warn(`Error attempting to enable full-screen: ${t.message} (${t.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(t){this.unbindEvents(),super.update(t),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}ll.defaultOptions={trigger:{},autoFit:!0};function Xx(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}var Eu=G(90134);class cl extends Tn{constructor(t,e){super(t,Object.assign({},cl.defaultOptions,e)),this.$element=ga("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=i=>{const{data:{scale:a,origin:o}}=i;if(!a)return;const s=this.currentScale;this.currentScale=a;const l=a/s,c=Sr(o||this.context.graph.getCanvasCenter(),1-l),u=this.baseSize*a,h=Sr(this.offset,l),f=wc(h,u),d=Ce(f,c);this.$element.style.backgroundSize=`${u}px ${u}px`,this.$element.style.backgroundPosition=`${d[0]}px ${d[1]}px`,this.offset=wc(d,u)},this.followTranslate=i=>{if(!this.options.follow)return;const{data:{translate:a}}=i;a&&this.updateOffset(a)},this.onTransform=i=>{const a=this.parseFollow(this.options.follow);a.zoom&&this.followZoom(i),a.translate&&this.followTranslate(i)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(t){super.update(t),t.size!==void 0&&(this.baseSize=t.size),this.updateStyle()}bindEvents(){const{graph:t}=this.context;t.on(he.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:t,lineWidth:e,border:n,borderLineWidth:i,borderStroke:a,borderStyle:o}=this.options,s=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:n?`${i}px ${o} ${a}`:"none",backgroundImage:`linear-gradient(${t} ${e}px, transparent ${e}px), linear-gradient(90deg, ${t} ${e}px, transparent ${e}px)`,backgroundSize:`${s}px ${s}px`,backgroundRepeat:"repeat"})}updateOffset(t){const e=this.baseSize*this.currentScale;this.offset=wc(Ce(this.offset,t),e),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(t){var e,n;return(0,Eu.Z)(t)?{translate:t,zoom:t}:{translate:(e=t==null?void 0:t.translate)!==null&&e!==void 0?e:!1,zoom:(n=t==null?void 0:t.zoom)!==null&&n!==void 0?n:!1}}destroy(){this.context.graph.off(he.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}cl.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};var wu=G(90494);function Su(r){const t={Added:new Map,Updated:new Map,Removed:new Map};return r.forEach(e=>{const{type:n,value:i}=e,a=St(i);if(n==="NodeAdded"||n==="EdgeAdded"||n==="ComboAdded")t.Added.set(a,e);else if(n==="NodeUpdated"||n==="EdgeUpdated"||n==="ComboUpdated")if(t.Added.has(a))t.Added.set(a,{type:n.replace("Updated","Added"),value:i});else if(t.Updated.has(a)){const{original:o}=t.Updated.get(a);t.Updated.set(a,{type:n,value:i,original:o})}else t.Removed.has(a)||t.Updated.set(a,e);else(n==="NodeRemoved"||n==="EdgeRemoved"||n==="ComboRemoved")&&(t.Added.has(a)?t.Added.delete(a):(t.Updated.has(a)&&t.Updated.delete(a),t.Removed.set(a,e)))}),[...Array.from(t.Added.values()),...Array.from(t.Updated.values()),...Array.from(t.Removed.values())]}function Wp(r){const{NodeAdded:t=[],NodeUpdated:e=[],NodeRemoved:n=[],EdgeAdded:i=[],EdgeUpdated:a=[],EdgeRemoved:o=[],ComboAdded:s=[],ComboUpdated:l=[],ComboRemoved:c=[]}=Ao(r,u=>u.type);return{add:{nodes:t,edges:i,combos:s},update:{nodes:e,edges:a,combos:l},remove:{nodes:n,edges:o,combos:c}}}function Gp(r,t){for(const e in r)(0,Vn.Z)(r[e])&&!Array.isArray(r[e])&&r[e]!==null?(t[e]||(t[e]={}),Gp(r[e],t[e])):t[e]===void 0&&(t[e]=Da(e))}function qx(r,t=!1,e){const n={animation:t,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:a,remove:o}=Wp(Su(r));return["nodes","edges","combos"].forEach(s=>{a[s]&&a[s].forEach(l=>{var c,u;const h=Object.assign({},l.value);let f=Object.assign({},l.original);if(e){const d=e.graph.getElementType(St(l.original)),p=d==="edge"?"stroke":"fill",g=e.element.getElementComputedStyle(d,l.original);f=Object.assign(Object.assign({},l.original),{style:Object.assign({[p]:g[p]},l.original.style)})}Gp(h,f),(c=n.current.update)[s]||(c[s]=[]),n.current.update[s].push(h),(u=n.original.update)[s]||(u[s]=[]),n.original.update[s].push(f)}),i[s]&&i[s].forEach(l=>{var c,u;const h=Object.assign({},l.value);(c=n.current.add)[s]||(c[s]=[]),n.current.add[s].push(h),(u=n.original.remove)[s]||(u[s]=[]),n.original.remove[s].push(h)}),o[s]&&o[s].forEach(l=>{var c,u;const h=Object.assign({},l.value);(c=n.current.remove)[s]||(c[s]=[]),n.current.remove[s].push(h),(u=n.original.add)[s]||(u[s]=[]),n.original.add[s].push(h)})}),n}class ul extends Tn{constructor(t,e){super(t,Object.assign({},ul.defaultOptions,e)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(i,a=!0)=>{var o,s,l;this.freezed=!0,(s=(o=this.options).executeCommand)===null||s===void 0||s.call(o,i);const c=a?i.original:i.current;this.context.graph.addData(c.add),this.context.graph.updateData(c.update),this.context.graph.removeData(Cf(c.remove,!1)),(l=this.context.element)===null||l===void 0||l.draw({silence:!0,animation:i.animation}),this.freezed=!1},this.addCommand=i=>{var a;if(!this.freezed){if(i.type===he.AFTER_DRAW){const{dataChanges:o=[],animation:s=!0}=i.data;if(!((a=this.context.batch)===null||a===void 0)&&a.isBatching){if(!this.batchChanges)return;this.batchChanges.push(o),this.batchAnimation&&(this.batchAnimation=s);return}this.batchChanges=[o],this.batchAnimation=s}this.undoStackPush(qx(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(oi.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=i=>{const{initiate:a}=i.data;this.batchAnimation=!1,a?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new wu.Z;const{graph:n}=this.context;n.on(he.AFTER_DRAW,this.addCommand),n.on(he.BATCH_START,this.initBatchCommand),n.on(he.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var t,e,n,i;const a=this.undoStack.pop();if(a){if(this.executeCommand(a),((e=(t=this.options).beforeAddCommand)===null||e===void 0?void 0:e.call(t,a,!1))===!1)return;this.redoStack.push(a),(i=(n=this.options).afterAddCommand)===null||i===void 0||i.call(n,a,!1),this.notify(oi.UNDO,a)}return this}redo(){const t=this.redoStack.pop();return t&&(this.executeCommand(t,!1),this.undoStackPush(t),this.notify(oi.REDO,t)),this}undoAndCancel(){const t=this.undoStack.pop();return t&&(this.executeCommand(t,!1),this.redoStack=[],this.notify(oi.CANCEL,t)),this}undoStackPush(t){var e,n,i,a;const{stackSize:o}=this.options;o!==0&&this.undoStack.length>=o&&this.undoStack.shift(),((n=(e=this.options).beforeAddCommand)===null||n===void 0?void 0:n.call(e,t,!0))!==!1&&(this.undoStack.push(t),(a=(i=this.options).afterAddCommand)===null||a===void 0||a.call(i,t,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(oi.CLEAR,null)}notify(t,e){this.emitter.emit(t,{cmd:e}),this.emitter.emit(oi.CHANGE,{cmd:e})}on(t,e){this.emitter.on(t,e)}destroy(){const{graph:t}=this.context;t.off(he.AFTER_DRAW,this.addCommand),t.off(he.BATCH_START,this.initBatchCommand),t.off(he.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}ul.defaultOptions={stackSize:0};const Ou={toXy(r,t){if(!t)return[...r];const e=t[0].slice(1),n=t[1].slice(1);return r.map(i=>[i[e],i[n]])},fromXy(r,t){if(!t)return[...r];const e=t[0].slice(1),n=t[1].slice(1);return r.map(([i,a])=>({[e]:i,[n]:a}))}};class Qx{constructor(t,e){this._cells=[],this._cellSize=e,this._reverseCellSize=1/e;for(const n of t){const i=this.coordToCellNum(n[0]),a=this.coordToCellNum(n[1]);this._cells[i]||(this._cells[i]=[]),this._cells[i][a]||(this._cells[i][a]=[]),this._cells[i][a].push(n)}}cellPoints(t,e){var n;return((n=this._cells[t])===null||n===void 0?void 0:n[e])||[]}rangePoints(t){const e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),i=this.coordToCellNum(t[2]),a=this.coordToCellNum(t[3]),o=[];for(let s=e;s<=i;s++)for(let l=n;l<=a;l++){const c=this.cellPoints(s,l);for(const u of c)o.push(u)}return o}removePoint(t){const e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),i=this._cells[e][n],a=i.findIndex(([o,s])=>o===t[0]&&s===t[1]);return a>-1&&i.splice(a,1),i}trunc(t){return Math.trunc(t)}coordToCellNum(t){return this.trunc(t*this._reverseCellSize)}extendBbox(t,e){return[t[0]-e*this._cellSize,t[1]-e*this._cellSize,t[2]+e*this._cellSize,t[3]+e*this._cellSize]}}function Jx(r,t){return new Qx(r,t)}const Vp=+(Math.pow(2,27)+1);function hl(r,t,e){const n=r*t,i=Vp*r,a=i-r,o=i-a,s=r-o,l=Vp*t,c=l-t,u=l-c,h=t-u,p=n-o*u-s*u-o*h,g=s*h-p;return e?(e[0]=g,e[1]=n,e):[g,n]}function tE(r,t,e){const n=r+t,i=n-r,a=n-i,o=t-i,s=r-a;return e?(e[0]=s+o,e[1]=n,e):[s+o,n]}function eE(r,t){const e=r.length;if(e===1){const s=hl(r[0],t);return s[0]?s:[s[1]]}const n=new Array(2*e),i=[.1,.1],a=[.1,.1];let o=0;hl(r[0],t,i),i[0]&&(n[o++]=i[0]);for(let s=1;s<e;++s){hl(r[s],t,a);const l=i[1];tE(l,a[0],i),i[0]&&(n[o++]=i[0]);const c=a[1],u=i[1],h=c+u,f=h-c,d=u-f;i[1]=h,d&&(n[o++]=d)}return i[1]&&(n[o++]=i[1]),o===0&&(n[o++]=0),n.length=o,n}function nE(r,t){const e=r+t,n=e-r,i=e-n,a=t-n,s=r-i+a;return s?[s,e]:[e]}function rE(r,t){const e=r.length|0,n=t.length|0;if(e===1&&n===1)return nE(r[0],-t[0]);const i=e+n,a=new Array(i);let o=0,s=0,l=0;const c=Math.abs;let u=r[s],h=c(u),f=-t[l],d=c(f),p,g;h<d?(g=u,s+=1,s<e&&(u=r[s],h=c(u))):(g=f,l+=1,l<n&&(f=-t[l],d=c(f))),s<e&&h<d||l>=n?(p=u,s+=1,s<e&&(u=r[s],h=c(u))):(p=f,l+=1,l<n&&(f=-t[l],d=c(f)));let y=p+g,m=y-p,b=g-m,E=b,O=y,M,k,D,N,rt;for(;s<e&&l<n;)h<d?(p=u,s+=1,s<e&&(u=r[s],h=c(u))):(p=f,l+=1,l<n&&(f=-t[l],d=c(f))),g=E,y=p+g,m=y-p,b=g-m,b&&(a[o++]=b),M=O+y,k=M-O,D=M-k,N=y-k,rt=O-D,E=rt+N,O=M;for(;s<e;)p=u,g=E,y=p+g,m=y-p,b=g-m,b&&(a[o++]=b),M=O+y,k=M-O,D=M-k,N=y-k,rt=O-D,E=rt+N,O=M,s+=1,s<e&&(u=r[s]);for(;l<n;)p=f,g=E,y=p+g,m=y-p,b=g-m,b&&(a[o++]=b),M=O+y,k=M-O,D=M-k,N=y-k,rt=O-D,E=rt+N,O=M,l+=1,l<n&&(f=-t[l]);return E&&(a[o++]=E),O&&(a[o++]=O),o||(a[o++]=0),a.length=o,a}function iE(r,t){const e=r+t,n=e-r,i=e-n,a=t-n,s=r-i+a;return s?[s,e]:[e]}function aE(r,t){const e=r.length|0,n=t.length|0;if(e===1&&n===1)return iE(r[0],t[0]);const i=e+n,a=new Array(i);let o=0,s=0,l=0;const c=Math.abs;let u=r[s],h=c(u),f=t[l],d=c(f),p,g;h<d?(g=u,s+=1,s<e&&(u=r[s],h=c(u))):(g=f,l+=1,l<n&&(f=t[l],d=c(f))),s<e&&h<d||l>=n?(p=u,s+=1,s<e&&(u=r[s],h=c(u))):(p=f,l+=1,l<n&&(f=t[l],d=c(f)));let y=p+g,m=y-p,b=g-m,E=b,O=y,M,k,D,N,rt;for(;s<e&&l<n;)h<d?(p=u,s+=1,s<e&&(u=r[s],h=c(u))):(p=f,l+=1,l<n&&(f=t[l],d=c(f))),g=E,y=p+g,m=y-p,b=g-m,b&&(a[o++]=b),M=O+y,k=M-O,D=M-k,N=y-k,rt=O-D,E=rt+N,O=M;for(;s<e;)p=u,g=E,y=p+g,m=y-p,b=g-m,b&&(a[o++]=b),M=O+y,k=M-O,D=M-k,N=y-k,rt=O-D,E=rt+N,O=M,s+=1,s<e&&(u=r[s]);for(;l<n;)p=f,g=E,y=p+g,m=y-p,b=g-m,b&&(a[o++]=b),M=O+y,k=M-O,D=M-k,N=y-k,rt=O-D,E=rt+N,O=M,l+=1,l<n&&(f=t[l]);return E&&(a[o++]=E),O&&(a[o++]=O),o||(a[o++]=0),a.length=o,a}const Hp=5,fl=11102230246251565e-32,oE=(3+16*fl)*fl,sE=(7+56*fl)*fl;function lE(r,t,e,n){return function(a,o,s){const l=r(r(t(o[1],s[0]),t(-s[1],o[0])),r(t(a[1],o[0]),t(-o[1],a[0]))),c=r(t(a[1],s[0]),t(-s[1],a[0])),u=n(l,c);return u[u.length-1]}}function cE(r,t,e,n){return function(a,o,s,l){const c=r(r(e(r(t(s[1],l[0]),t(-l[1],s[0])),o[2]),r(e(r(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),e(r(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),r(e(r(t(o[1],l[0]),t(-l[1],o[0])),a[2]),r(e(r(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),e(r(t(a[1],o[0]),t(-o[1],a[0])),l[2])))),u=r(r(e(r(t(s[1],l[0]),t(-l[1],s[0])),a[2]),r(e(r(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),e(r(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),r(e(r(t(o[1],s[0]),t(-s[1],o[0])),a[2]),r(e(r(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),e(r(t(a[1],o[0]),t(-o[1],a[0])),s[2])))),h=n(c,u);return h[h.length-1]}}function uE(r,t,e,n){return function(a,o,s,l,c){const u=r(r(r(e(r(e(r(t(l[1],c[0]),t(-c[1],l[0])),s[2]),r(e(r(t(s[1],c[0]),t(-c[1],s[0])),-l[2]),e(r(t(s[1],l[0]),t(-l[1],s[0])),c[2]))),o[3]),r(e(r(e(r(t(l[1],c[0]),t(-c[1],l[0])),o[2]),r(e(r(t(o[1],c[0]),t(-c[1],o[0])),-l[2]),e(r(t(o[1],l[0]),t(-l[1],o[0])),c[2]))),-s[3]),e(r(e(r(t(s[1],c[0]),t(-c[1],s[0])),o[2]),r(e(r(t(o[1],c[0]),t(-c[1],o[0])),-s[2]),e(r(t(o[1],s[0]),t(-s[1],o[0])),c[2]))),l[3]))),r(e(r(e(r(t(s[1],l[0]),t(-l[1],s[0])),o[2]),r(e(r(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),e(r(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),-c[3]),r(e(r(e(r(t(l[1],c[0]),t(-c[1],l[0])),o[2]),r(e(r(t(o[1],c[0]),t(-c[1],o[0])),-l[2]),e(r(t(o[1],l[0]),t(-l[1],o[0])),c[2]))),a[3]),e(r(e(r(t(l[1],c[0]),t(-c[1],l[0])),a[2]),r(e(r(t(a[1],c[0]),t(-c[1],a[0])),-l[2]),e(r(t(a[1],l[0]),t(-l[1],a[0])),c[2]))),-o[3])))),r(r(e(r(e(r(t(o[1],c[0]),t(-c[1],o[0])),a[2]),r(e(r(t(a[1],c[0]),t(-c[1],a[0])),-o[2]),e(r(t(a[1],o[0]),t(-o[1],a[0])),c[2]))),l[3]),r(e(r(e(r(t(o[1],l[0]),t(-l[1],o[0])),a[2]),r(e(r(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),e(r(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),-c[3]),e(r(e(r(t(s[1],l[0]),t(-l[1],s[0])),o[2]),r(e(r(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),e(r(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),a[3]))),r(e(r(e(r(t(s[1],l[0]),t(-l[1],s[0])),a[2]),r(e(r(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),e(r(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),-o[3]),r(e(r(e(r(t(o[1],l[0]),t(-l[1],o[0])),a[2]),r(e(r(t(a[1],l[0]),t(-l[1],a[0])),-o[2]),e(r(t(a[1],o[0]),t(-o[1],a[0])),l[2]))),s[3]),e(r(e(r(t(o[1],s[0]),t(-s[1],o[0])),a[2]),r(e(r(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),e(r(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),-l[3]))))),h=r(r(r(e(r(e(r(t(l[1],c[0]),t(-c[1],l[0])),s[2]),r(e(r(t(s[1],c[0]),t(-c[1],s[0])),-l[2]),e(r(t(s[1],l[0]),t(-l[1],s[0])),c[2]))),a[3]),e(r(e(r(t(l[1],c[0]),t(-c[1],l[0])),a[2]),r(e(r(t(a[1],c[0]),t(-c[1],a[0])),-l[2]),e(r(t(a[1],l[0]),t(-l[1],a[0])),c[2]))),-s[3])),r(e(r(e(r(t(s[1],c[0]),t(-c[1],s[0])),a[2]),r(e(r(t(a[1],c[0]),t(-c[1],a[0])),-s[2]),e(r(t(a[1],s[0]),t(-s[1],a[0])),c[2]))),l[3]),e(r(e(r(t(s[1],l[0]),t(-l[1],s[0])),a[2]),r(e(r(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),e(r(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),-c[3]))),r(r(e(r(e(r(t(s[1],c[0]),t(-c[1],s[0])),o[2]),r(e(r(t(o[1],c[0]),t(-c[1],o[0])),-s[2]),e(r(t(o[1],s[0]),t(-s[1],o[0])),c[2]))),a[3]),e(r(e(r(t(s[1],c[0]),t(-c[1],s[0])),a[2]),r(e(r(t(a[1],c[0]),t(-c[1],a[0])),-s[2]),e(r(t(a[1],s[0]),t(-s[1],a[0])),c[2]))),-o[3])),r(e(r(e(r(t(o[1],c[0]),t(-c[1],o[0])),a[2]),r(e(r(t(a[1],c[0]),t(-c[1],a[0])),-o[2]),e(r(t(a[1],o[0]),t(-o[1],a[0])),c[2]))),s[3]),e(r(e(r(t(o[1],s[0]),t(-s[1],o[0])),a[2]),r(e(r(t(a[1],s[0]),t(-s[1],a[0])),-o[2]),e(r(t(a[1],o[0]),t(-o[1],a[0])),s[2]))),-c[3])))),f=n(u,h);return f[f.length-1]}}function dl(r){return(r===3?lE:r===4?cE:uE)(aE,hl,eE,rE)}const hE=dl(3),fE=dl(4),Hi=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){const i=(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-n[0])*(e[1]-n[1]),o=i-a;let s;if(i>0){if(a<=0)return o;s=i+a}else if(i<0){if(a>=0)return o;s=-(i+a)}else return o;const l=oE*s;return o>=l||o<=-l?o:hE(t,e,n)},function(t,e,n,i){const a=t[0]-i[0],o=e[0]-i[0],s=n[0]-i[0],l=t[1]-i[1],c=e[1]-i[1],u=n[1]-i[1],h=t[2]-i[2],f=e[2]-i[2],d=n[2]-i[2],p=o*u,g=s*c,y=s*l,m=a*u,b=a*c,E=o*l,O=h*(p-g)+f*(y-m)+d*(b-E),M=(Math.abs(p)+Math.abs(g))*Math.abs(h)+(Math.abs(y)+Math.abs(m))*Math.abs(f)+(Math.abs(b)+Math.abs(E))*Math.abs(d),k=sE*M;return O>k||-O>k?O:fE(t,e,n,i)}];function dE(r){let t=Hi[r.length];return t||(t=Hi[r.length]=dl(r.length)),t.apply(void 0,...r)}function pE(r,t,e,n,i,a,o){return function(...l){switch(l.length){case 0:case 1:return 0;case 2:return n(l[0],l[1]);case 3:return i(l[0],l[1],l[2]);case 4:return a(l[0],l[1],l[2],l[3]);case 5:return o(l[0],l[1],l[2],l[3],l[4])}return r(l)}}function vE(){for(;Hi.length<=Hp;)Hi.push(dl(Hi.length));const r=pE(void 0,dE,...Hi);for(let t=0;t<=Hp;++t)r[t]=Hi[t];return r}var io=vE();const Zp=io[3];function gE(r){const t=r.length;if(t<3){const s=new Array(t);for(let l=0;l<t;++l)s[l]=l;return t===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:s}const e=new Array(t);for(let s=0;s<t;++s)e[s]=s;e.sort((s,l)=>{const c=r[s][0]-r[l][0];return c||r[s][1]-r[l][1]});const n=[e[0],e[1]],i=[e[0],e[1]];for(let s=2;s<t;++s){const l=e[s],c=r[l];let u=n.length;for(;u>1&&Zp(r[n[u-2]],r[n[u-1]],c)<=0;)u-=1,n.pop();for(n.push(l),u=i.length;u>1&&Zp(r[i[u-2]],r[i[u-1]],c)>=0;)u-=1,i.pop();i.push(l)}const a=new Array(i.length+n.length-2);let o=0;for(let s=0,l=n.length;s<l;++s)a[o++]=n[s];for(let s=i.length-2;s>0;--s)a[o++]=i[s];return a}function yE(r,t,e,n){for(let i=0;i<2;++i){const a=r[i],o=t[i],[s,l]=[Math.min(a,o),Math.max(a,o)],c=e[i],u=n[i],[h,f]=[Math.min(c,u),Math.max(c,u)];if(f<s||l<h)return!1}return!0}function mE(r,t,e,n){const i=io(r,e,n),a=io(t,e,n);if(i>0&&a>0||i<0&&a<0)return!1;const o=io(e,r,t),s=io(n,r,t);return o>0&&s>0||o<0&&s<0?!1:i===0&&a===0&&o===0&&s===0?yE(r,t,e,n):!0}function bE(r){const t=[r[0]];let e=r[0];for(let n=1;n<r.length;n++){const i=r[n];(e[0]!==i[0]||e[1]!==i[1])&&t.push(i),e=i}return t}function _E(r){return r.sort(function(t,e){return t[0]-e[0]||t[1]-e[1]})}function Mu(r,t){return Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2)}function $p(r,t,e){const n=[t[0]-r[0],t[1]-r[1]],i=[e[0]-r[0],e[1]-r[1]],a=Mu(r,t),o=Mu(r,e);return(n[0]*i[0]+n[1]*i[1])/Math.sqrt(a*o)}function Up(r,t){for(let e=0;e<t.length-1;e++){const n=[t[e],t[e+1]];if(!(r[0][0]===n[0][0]&&r[0][1]===n[0][1]||r[0][0]===n[1][0]&&r[0][1]===n[1][1])&&mE(r[0],r[1],n[0],n[1]))return!0}return!1}function xE(r){let t=1/0,e=1/0,n=-1/0,i=-1/0;for(let a=r.length-1;a>=0;a--)r[a][0]<t&&(t=r[a][0]),r[a][1]<e&&(e=r[a][1]),r[a][0]>n&&(n=r[a][0]),r[a][1]>i&&(i=r[a][1]);return[n-t,i-e]}function EE(r){return[Math.min(r[0][0],r[1][0]),Math.min(r[0][1],r[1][1]),Math.max(r[0][0],r[1][0]),Math.max(r[0][1],r[1][1])]}function wE(r,t,e){let n=null,i=Kp,a=Kp,o,s;for(let l=0;l<t.length;l++)o=$p(r[0],r[1],t[l]),s=$p(r[1],r[0],t[l]),o>i&&s>a&&!Up([r[0],t[l]],e)&&!Up([r[1],t[l]],e)&&(i=o,a=s,n=t[l]);return n}function Yp(r,t,e,n,i){let a=!1;for(let o=0;o<r.length-1;o++){const s=[r[o],r[o+1]],l=s[0][0]+","+s[0][1]+","+s[1][0]+","+s[1][1];if(Mu(s[0],s[1])<t||i.has(l))continue;let c=0,u=EE(s),h,f,d;do u=n.extendBbox(u,c),h=u[2]-u[0],f=u[3]-u[1],d=wE(s,n.rangePoints(u),r),c++;while(d===null&&(e[0]>h||e[1]>f));h>=e[0]&&f>=e[1]&&i.add(l),d!==null&&(r.splice(o+1,0,d),n.removePoint(d),a=!0)}return a?Yp(r,t,e,n,i):r}function SE(r,t,e){const n=t||20,i=bE(_E(Ou.toXy(r,e)));if(i.length<4){const h=i.concat([i[0]]);return e?Ou.fromXy(h,e):h}const a=xE(i),o=[a[0]*Xp,a[1]*Xp],s=gE(i).reverse().map(h=>i[h]);s.push(s[0]);const l=i.filter(function(h){return s.indexOf(h)<0}),c=Math.ceil(1/(i.length/(a[0]*a[1]))),u=Yp(s,Math.pow(n,2),o,Jx(l,c),new Set);return e?Ou.fromXy(u,e):u}const Kp=Math.cos(90/(180/Math.PI)),Xp=.6;function OE(r,t,e){if(r.length===1)return ME(r[0],t,e);if(r.length===2)return qp(r,t,e);if(r.length===3){const[n,i,a]=Oc(r);if(Nf(n,i,a))return qp([n,a],t,e)}switch(e){case"smooth":return TE(r,t);case"sharp":return AE(r,t);case"rounded":default:return CE(r,t)}}const ME=(r,t,e)=>{if(e==="sharp")return[["M",r[0]-t,r[1]-t],["L",r[0]+t,r[1]-t],["L",r[0]+t,r[1]+t],["L",r[0]-t,r[1]+t],["Z"]];const n=[t,t,0,0,0];return[["M",r[0],r[1]-t],["A",...n,r[0],r[1]+t],["A",...n,r[0],r[1]-t]]},qp=(r,t,e)=>{const n=[t,t,0,0,0],i=e==="sharp"?Ce(r[0],hi(qr(Fe(r[0],r[1])),t)):r[0],a=e==="sharp"?Ce(r[1],hi(qr(Fe(r[1],r[0])),t)):r[1],o=hi(qr(Uo(Fe(i,a),!1)),t),s=hi(o,-1),l=Ce(i,o),c=Ce(a,o),u=Ce(a,s),h=Ce(i,s);return e==="sharp"?[["M",l[0],l[1]],["L",c[0],c[1]],["L",u[0],u[1]],["L",h[0],h[1]],["Z"]]:[["M",l[0],l[1]],["L",c[0],c[1]],["A",...n,u[0],u[1]],["L",h[0],h[1]],["A",...n,l[0],l[1]]]},CE=(r,t)=>{const e=Oc(r).map((s,l)=>{const c=(l-2+r.length)%r.length,u=(l-1+r.length)%r.length,h=(l+1)%r.length,f=r[c],d=r[u],p=r[h],g=Fe(f,d),y=Fe(d,s),m=Fe(s,p),b=(D,N)=>Ec(D,N,!0)<Math.PI,E=b(g,y),O=b(y,m),M=D=>hi(qr(Uo(D,!1)),t),k=M(y);return[{p:Ni(E?Ce(d,M(g)):Ce(d,k)),concave:E&&d},{p:Ni(O?Ce(s,M(m)):Ce(s,k)),concave:O&&s}]}),n=[t,t,0,0,0],i=e.findIndex((s,l)=>!e[(l-1+e.length)%e.length][0].concave&&!e[(l-1+e.length)%e.length][1].concave&&!s[0].concave&&!s[0].concave&&!s[1].concave),a=e.slice(i).concat(e.slice(0,i));let o=[];return a.flatMap((s,l)=>{const c=[],u=a[e.length-1];return l===0&&c.push(["M",...u[1].p]),s[0].concave?o.push(s[0].p,s[1].p):c.push(["A",...n,...s[0].p]),s[1].concave?o.unshift(s[1].p):c.push(["L",...s[1].p]),o.length===3&&(c.pop(),c.push(["C",...o.flat()]),o=[]),c})},TE=(r,t)=>{const e=Oc(r).map((n,i)=>{const a=r[(i+1)%r.length];return{p:n,v:qr(Fe(a,n))}});return e.forEach((n,i)=>{const a=i>0?i-1:r.length-1,o=e[a].v,s=qr(Ce(o,hi(n.v,Ec(o,n.v,!0)<Math.PI?1:-1)));n.p=Ce(n.p,hi(s,t))}),Jf(e.map(n=>n.p))},AE=(r,t)=>{const n=r.map((a,o)=>{const s=r[o===0?r.length-1:o-1],l=ja(hi(qr(Uo(Fe(s,a),!1)),t));return[Ce(s,l),Ce(a,l)]}).flat();return n.map((a,o)=>{if(o%2===0)return null;const s=[n[(o-1)%n.length],n[o%n.length]],l=[n[(o+1)%n.length],n[(o+2)%n.length]];return Sc(s,l,!0)}).filter(Boolean).map((a,o)=>[o===0?"M":"L",a[0],a[1]]).concat([["Z"]])};var PE=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class pl extends Tn{constructor(t,e){super(t,Object.assign({},pl.defaultOptions,e)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new Va({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{const n=!cn(this.optionsCache,this.options);this.shape.update(this.getHullStyle(n))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=n=>{this.shape&&this.options.members.includes(St(n.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(n=!1)=>{const{graph:i}=this.context,a=this.getMember();if(a.length===0)return"";const o=a.map(c=>i.getNodeData(c)),s=SE(o.map(gn),this.options.concavity).slice(1).reverse(),l=s.flatMap(c=>o.filter(u=>cn(gn(u),c)).map(St));return cn(l,this.hullMemberIds)&&!n?this.path:(this.hullMemberIds=l,this.path=OE(s,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(he.AFTER_RENDER,this.drawHull),this.context.graph.on(he.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(t){const e=this.options,{members:n,padding:i,corner:a}=e,o=PE(e,["members","padding","corner"]);return Object.assign(Object.assign({},o),{d:this.getHullPath(t)})}getPadding(){const{graph:t}=this.context;return this.hullMemberIds.reduce((n,i)=>{const{halfExtents:a}=t.getElementRenderBounds(i),o=Math.max(a[0],a[1]);return Math.max(n,o)},0)+this.options.padding}addMember(t){const e=Array.isArray(t)?t:[t];this.options.members=[...new Set([...this.options.members,...e])],this.shape.update({d:this.getHullPath()})}removeMember(t){const e=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter(n=>!e.includes(n)),e.some(n=>this.hullMemberIds.includes(n))&&this.shape.update({d:this.getHullPath()})}updateMember(t){this.options.members=(0,Se.Z)(t)?t(this.options.members):t,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.context.graph.off(he.AFTER_DRAW,this.drawHull),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}pl.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};function Qp(r,t){t(r),r.children&&r.children.forEach(function(e){e&&Qp(e,t)})}function ao(r){vl(r,!0)}function Ar(r){vl(r,!1)}function vl(r,t){var e=t?"visible":"hidden";Qp(r,function(n){n.attr("visibility",e)})}var RE=5,Jp=function(r,t,e,n){e===void 0&&(e=0),n===void 0&&(n=RE),Object.entries(t).forEach(function(i){var a=(0,w.CR)(i,2),o=a[0],s=a[1],l=r;Object.prototype.hasOwnProperty.call(t,o)&&(s?(0,vu.Z)(s)?((0,vu.Z)(r[o])||(l[o]={}),e<n?Jp(r[o],s,e+1,n):l[o]=t[o]):(0,Xr.Z)(s)?(l[o]=[],l[o]=l[o].concat(s)):l[o]=s:l[o]=s)})},xn=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n+=1)Jp(r,t[n]);return r},DE=function(r){(0,w.ZT)(t,r);function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=r.apply(this,(0,w.ev)([],(0,w.CR)(e),!1))||this;return i.isMutationObserved=!0,i.addEventListener(x.Dk.INSERTED,function(){Ar(i)}),i}return t}(x.ZA);function tv(r){var t=r.appendChild(new DE({class:"offscreen"}));return Ar(t),t}function kE(r){for(var t=r;t;){if(t.className==="offscreen")return!0;t=t.parent}return!1}function LE(){vl(this,this.attributes.visibility!=="hidden")}var rn=function(r){(0,w.ZT)(t,r);function t(e,n){n===void 0&&(n={});var i=r.call(this,xn({},{style:n},e))||this;return i.initialized=!1,i._defaultOptions=n,i}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=tv(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)===null||e===void 0||e.destroy()},t.prototype.attributeChangedCallback=function(e){e==="visibility"&&LE.call(this)},t.prototype.update=function(e,n){var i;return this.attr(xn({},this.attributes,e||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,n)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(e,n){},t.prototype.getSubShapeStyle=function(e){var n=e.x,i=e.y,a=e.transform,o=e.transformOrigin,s=e.class,l=e.className,c=e.zIndex,u=(0,w._T)(e,["x","y","transform","transformOrigin","class","className","zIndex"]);return u},t}(x.b_);function Cu(r){return r.toString().charAt(0).toUpperCase()+r.toString().slice(1)}function IE(r){return r.toString().charAt(0).toLowerCase()+r.toString().slice(1)}function NE(r,t){return"".concat(t).concat(Cu(r))}function ev(r,t,e){var n;e===void 0&&(e=!0);var i=t||((n=r.match(/^([a-z][a-z0-9]+)/))===null||n===void 0?void 0:n[0])||"",a=r.replace(new RegExp("^(".concat(i,")")),"");return e?IE(a):a}function jE(r,t){Object.entries(t).forEach(function(e){var n=(0,w.CR)(e,2),i=n[0],a=n[1];(0,w.ev)([r],(0,w.CR)(r.querySelectorAll(i)),!1).filter(function(o){return o.matches(i)}).forEach(function(o){if(o){var s=o;s.style.cssText+=Object.entries(a).reduce(function(l,c){return"".concat(l).concat(c.join(":"),";")},"")}})})}var gl=function(r,t){if(!(r!=null&&r.startsWith(t)))return!1;var e=r[t.length];return e>="A"&&e<="Z"};function Te(r,t,e){e===void 0&&(e=!1);var n={};return Object.entries(r).forEach(function(i){var a=(0,w.CR)(i,2),o=a[0],s=a[1];if(!(o==="className"||o==="class")){if(gl(o,"show")&&gl(ev(o,"show"),t)!==e)o===NE(t,"show")?n[o]=s:n[o.replace(new RegExp(Cu(t)),"")]=s;else if(!gl(o,"show")&&gl(o,t)!==e){var l=ev(o,t);l==="filter"&&typeof s=="function"||(n[l]=s)}}}),n}function ya(r,t){return Object.entries(r).reduce(function(e,n){var i=(0,w.CR)(n,2),a=i[0],o=i[1];return a.startsWith("show")?e["show".concat(t).concat(a.slice(4))]=o:e["".concat(t).concat(Cu(a))]=o,e},{})}function ei(r,t){t===void 0&&(t=["x","y","class","className"]);var e=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],n={},i={};return Object.entries(r).forEach(function(a){var o=(0,w.CR)(a,2),s=o[0],l=o[1];t.includes(s)||(e.indexOf(s)!==-1?i[s]=l:n[s]=l)}),[n,i]}var BE=function(r){if(!(0,Xr.Z)(r))return[];for(var t=[],e=0;e<r.length;e++)t=t.concat(r[e]);return t},FE=BE,Tu=function(r){(0,w.ZT)(t,r);function t(e){e===void 0&&(e={});var n=e.style,i=(0,w._T)(e,["style"]);return r.call(this,(0,w.pi)({style:(0,w.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},i))||this}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=tv(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)===null||e===void 0||e.destroy()},t}(x.xv);function zE(r,t){var e=new Map;return r.forEach(function(n){var i=t(n);e.has(i)||e.set(i,[]),e.get(i).push(n)}),e}function WE(r){throw new Error(r)}var GE=function(){function r(i,a,o,s,l,c,u){i===void 0&&(i=null),a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=[null,null,null,null,null]),c===void 0&&(c=[]),u===void 0&&(u=[]),t.add(this),this._elements=Array.from(i),this._data=a,this._parent=o,this._document=s,this._enter=l[0],this._update=l[1],this._exit=l[2],this._merge=l[3],this._split=l[4],this._transitions=c,this._facetElements=u}r.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new e(a,null,this._elements[0],this._document)},r.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new e(this._elements,null,this._parent,this._document,void 0,void 0,a)},r.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new e([a],null,a,this._document)},r.prototype.append=function(i){var a=this,o=typeof i=="function"?i:function(){return a.createElement(i)},s=[];if(this._data!==null){for(var l=0;l<this._data.length;l++){var c=this._data[l],u=(0,w.CR)(Array.isArray(c)?c:[c,null],2),h=u[0],f=u[1],d=o(h,l);d.__data__=h,f!==null&&(d.__fromElements__=f),this._parent.appendChild(d),s.push(d)}return new e(s,null,this._parent,this._document)}for(var l=0;l<this._elements.length;l++){var p=this._elements[l],h=p.__data__,d=o(h,l);p.appendChild(d),s.push(d)}return new e(s,null,s[0],this._document)},r.prototype.maybeAppend=function(i,a){var o=(0,w.Q_)(this,t,"m",n).call(this,i[0]==="#"?i:"#".concat(i),a);return o.attr("id",i),o},r.prototype.maybeAppendByClassName=function(i,a){var o=i.toString(),s=(0,w.Q_)(this,t,"m",n).call(this,o[0]==="."?o:".".concat(o),a);return s.attr("className",o),s},r.prototype.maybeAppendByName=function(i,a){var o=(0,w.Q_)(this,t,"m",n).call(this,'[name="'.concat(i,'"]'),a);return o.attr("name",i),o},r.prototype.data=function(i,a,o){var s,l;a===void 0&&(a=function(C){return C}),o===void 0&&(o=function(){return null});for(var c=[],u=[],h=new Set(this._elements),f=[],d=new Set,p=new Map(this._elements.map(function(C,S){return[a(C.__data__,S),C]})),g=new Map(this._facetElements.map(function(C,S){return[a(C.__data__,S),C]})),y=zE(this._elements,function(C){return o(C.__data__)}),m=0;m<i.length;m++){var b=i[m],E=a(b,m),O=o(b,m);if(p.has(E)){var M=p.get(E);M.__data__=b,M.__facet__=!1,u.push(M),h.delete(M),p.delete(E)}else if(g.has(E)){var M=g.get(E);M.__data__=b,M.__facet__=!0,u.push(M),g.delete(E)}else if(y.has(E)){var k=y.get(E);f.push([b,k]);try{for(var D=(s=void 0,(0,w.XA)(k)),N=D.next();!N.done;N=D.next()){var M=N.value;h.delete(M)}}catch(C){s={error:C}}finally{try{N&&!N.done&&(l=D.return)&&l.call(D)}finally{if(s)throw s.error}}y.delete(E)}else if(p.has(O)){var M=p.get(O);M.__toData__?M.__toData__.push(b):M.__toData__=[b],d.add(M),h.delete(M)}else c.push(b)}var rt=[new e([],c,this._parent,this._document),new e(u,null,this._parent,this._document),new e(h,null,this._parent,this._document),new e([],f,this._parent,this._document),new e(d,null,this._parent,this._document)];return new e(this._elements,null,this._parent,this._document,rt)},r.prototype.merge=function(i){var a=(0,w.ev)((0,w.ev)([],(0,w.CR)(this._elements),!1),(0,w.CR)(i._elements),!1),o=(0,w.ev)((0,w.ev)([],(0,w.CR)(this._transitions),!1),(0,w.CR)(i._transitions),!1);return new e(a,null,this._parent,this._document,void 0,o)},r.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=e.registry[i];return a?new a:WE("Unknown node type: ".concat(i))},r.prototype.join=function(i,a,o,s,l){i===void 0&&(i=function(p){return p}),a===void 0&&(a=function(p){return p}),o===void 0&&(o=function(p){return p.remove()}),s===void 0&&(s=function(p){return p}),l===void 0&&(l=function(p){return p.remove()});var c=i(this._enter),u=a(this._update),h=o(this._exit),f=s(this._merge),d=l(this._split);return u.merge(c).merge(h).merge(f).merge(d)},r.prototype.remove=function(){for(var i=function(s){var l=a._elements[s],c=a._transitions[s];c?c.then(function(){return l.remove()}):l.remove()},a=this,o=0;o<this._elements.length;o++)i(o);return new e([],null,this._parent,this._document,void 0,this._transitions)},r.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var o=this._elements[a],s=o.__data__;i.call(o,s,a)}return this},r.prototype.attr=function(i,a){var o=typeof a!="function"?function(){return a}:a;return this.each(function(s,l){a!==void 0&&(this[i]=o.call(this,s,l))})},r.prototype.style=function(i,a,o){o===void 0&&(o=!0);var s=typeof a!="function"||!o?function(){return a}:a;return this.each(function(l,c){a!==void 0&&(this.style[i]=s.call(this,l,c))})},r.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(o,s){var l=this;Object.entries(i).forEach(function(c){var u=(0,w.CR)(c,2),h=u[0],f=u[1],d=typeof f!="function"||!a?function(){return f}:f;f!==void 0&&l.attr(h,d.call(l,o,s))})})},r.prototype.update=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},r.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},r.prototype.transition=function(i){var a=this._transitions,o=new Array(this._elements.length);return this.each(function(s,l){o[l]=i.call(this,s,l)}),this._transitions=FE(o),this},r.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},r.prototype.call=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return i.call.apply(i,(0,w.ev)([this._parent,this],(0,w.CR)(a),!1)),this},r.prototype.node=function(){return this._elements[0]},r.prototype.nodes=function(){return this._elements},r.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},r.prototype.parent=function(){return this._parent};var t,e,n;return e=r,t=new WeakSet,n=function(a,o){var s=this._elements[0],l=s.querySelector(a);if(l)return new e([l],null,this._parent,this._document);var c=typeof o=="string"?this.createElement(o):o();return s.appendChild(c),new e([c],null,this._parent,this._document)},r.registry={g:x.ZA,rect:x.UL,circle:x.Cd,path:x.y$,text:Tu,ellipse:x.Pj,image:x.Ee,line:x.x1,polygon:x.mg,polyline:x.aH,html:x.k9},r}();function ge(r){return new GE([r],null,r,r.ownerDocument)}function VE(r,t,e){return r.querySelector(t)?ge(r).select(t):ge(r).append(e)}var Ln=function(){function r(t,e,n,i){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=i}return Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),r.fromRect=function(t){return new r(t.x,t.y,t.width,t.height)},r.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},r.prototype.isPointIn=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},r}();function tA(r){var t=r.getRenderBounds(),e=__read(t.min,2),n=e[0],i=e[1],a=__read(t.max,2),o=a[0],s=a[1],l=o-n,c=s-i;return new Ln(n,i,l,c)}var Pr=function(r,t){var e=function(i){return"".concat(t,"-").concat(i)},n=Object.fromEntries(Object.entries(r).map(function(i){var a=(0,w.CR)(i,2),o=a[0],s=a[1],l=e(s);return[o,{name:l,class:".".concat(l),id:"#".concat(l),toString:function(){return l}}]}));return Object.assign(n,{prefix:e}),n};function An(r){if((0,pt.Z)(r))return[r,r,r,r];if((0,Xr.Z)(r)){var t=r.length;if(t===1)return[r[0],r[0],r[0],r[0]];if(t===2)return[r[0],r[1],r[0],r[1]];if(t===3)return[r[0],r[1],r[2],r[1]];if(t===4)return r}return[0,0,0,0]}function ir(r,t,e,n,i){return n===void 0&&(n=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),r?e(t):(n&&i(t),null)}var nv=Pr({text:"text"},"title");function yl(r){return/\S+-\S+/g.test(r)?r.split("-").map(function(t){return t[0]}):r.length>2?[r[0]]:r.split("")}function HE(r,t){var e=r.attributes,n=e.position,i=e.spacing,a=e.inset,o=e.text,s=r.getBBox(),l=t.getBBox(),c=yl(n),u=(0,w.CR)(An(o?i:0),4),h=u[0],f=u[1],d=u[2],p=u[3],g=(0,w.CR)(An(a),4),y=g[0],m=g[1],b=g[2],E=g[3],O=(0,w.CR)([p+f,h+d],2),M=O[0],k=O[1],D=(0,w.CR)([E+m,y+b],2),N=D[0],rt=D[1];if(c[0]==="l")return new Ln(s.x,s.y,l.width+s.width+M+N,Math.max(l.height+rt,s.height));if(c[0]==="t")return new Ln(s.x,s.y,Math.max(l.width+N,s.width),l.height+s.height+k+rt);var C=(0,w.CR)([t.attributes.width||l.width,t.attributes.height||l.height],2),S=C[0],A=C[1];return new Ln(l.x,l.y,S+s.width+M+N,A+s.height+k+rt)}function ZE(r,t){var e=Object.entries(t).reduce(function(n,i){var a=(0,w.CR)(i,2),o=a[0],s=a[1],l=r.node().attr(o);return l||(n[o]=s),n},{});r.styles(e)}function $E(r){var t,e,n,i,a=r,o=a.width,s=a.height,l=a.position,c=(0,w.CR)([+o/2,+s/2],2),u=c[0],h=c[1],f=(0,w.CR)([+u,+h,"center","middle"],4),d=f[0],p=f[1],g=f[2],y=f[3],m=yl(l);return m.includes("l")&&(t=(0,w.CR)([0,"start"],2),d=t[0],g=t[1]),m.includes("r")&&(e=(0,w.CR)([+o,"end"],2),d=e[0],g=e[1]),m.includes("t")&&(n=(0,w.CR)([0,"top"],2),p=n[0],y=n[1]),m.includes("b")&&(i=(0,w.CR)([+s,"bottom"],2),p=i[0],y=i[1]),{x:d,y:p,textAlign:g,textBaseline:y}}var UE=function(r){(0,w.ZT)(t,r);function t(e){return r.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t.prototype.getAvailableSpace=function(){var e=this,n=this.attributes,i=n.width,a=n.height,o=n.position,s=n.spacing,l=n.inset,c=e.querySelector(nv.text.class);if(!c)return new Ln(0,0,+i,+a);var u=c.getBBox(),h=u.width,f=u.height,d=(0,w.CR)(An(s),4),p=d[0],g=d[1],y=d[2],m=d[3],b=(0,w.CR)([0,0,+i,+a],4),E=b[0],O=b[1],M=b[2],k=b[3],D=yl(o);if(D.includes("i"))return new Ln(E,O,M,k);D.forEach(function(Lt,Xt){var wt,Ct,$t,ie;Lt==="t"&&(wt=(0,w.CR)(Xt===0?[f+y,+a-f-y]:[0,+a],2),O=wt[0],k=wt[1]),Lt==="r"&&(Ct=(0,w.CR)([+i-h-m],1),M=Ct[0]),Lt==="b"&&($t=(0,w.CR)([+a-f-p],1),k=$t[0]),Lt==="l"&&(ie=(0,w.CR)(Xt===0?[h+g,+i-h-g]:[0,+i],2),E=ie[0],M=ie[1])});var N=(0,w.CR)(An(l),4),rt=N[0],C=N[1],S=N[2],A=N[3],j=(0,w.CR)([A+C,rt+S],2),Y=j[0],ot=j[1];return new Ln(E+A,O+rt,M-Y,k-ot)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new Ln(0,0,0,0)},t.prototype.render=function(e,n){var i=this,a=e.width,o=e.height,s=e.position,l=e.spacing,c=(0,w._T)(e,["width","height","position","spacing"]),u=(0,w.CR)(ei(c),1),h=u[0],f=$E(e),d=f.x,p=f.y,g=f.textAlign,y=f.textBaseline;ir(!!c.text,ge(n),function(m){i.title=m.maybeAppendByClassName(nv.text,"text").styles(h).call(ZE,{x:d,y:p,textAlign:g,textBaseline:y}).node()})},t}(rn),Au=function(){};function vr(r,t){return(0,Se.Z)(r)?r.apply(void 0,(0,w.ev)([],(0,w.CR)(t),!1)):r}function YE(r,t){return r.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{})}function KE(r){return typeof r=="boolean"?!1:"enter"in r&&"update"in r&&"exit"in r}function rv(r){if(!r)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],e=Object.fromEntries(Object.entries(r).filter(function(n){var i=(0,w.CR)(n,1),a=i[0];return!t.includes(a)}));return Object.fromEntries(t.map(function(n){return KE(r)?r[n]===!1?[n,!1]:[n,(0,w.pi)((0,w.pi)({},r[n]),e)]:[n,e]}))}function ma(r,t){r?r.finished.then(t):t()}function XE(r,t){r.length===0?t():Promise.all(r.map(function(e){return e==null?void 0:e.finished})).then(t)}function iv(r,t){"update"in r?r.update(t):r.attr(t)}function av(r,t,e){if(t.length===0)return null;if(!e){var n=t.slice(-1)[0];return iv(r,{style:n}),null}return r.animate(t,e)}function qE(r,t){return!(r.nodeName!=="text"||t.nodeName!=="text"||r.attributes.text!==t.attributes.text)}function QE(r,t,e,n){if(n===void 0&&(n="destroy"),qE(r,t))return r.remove(),[null];var i=function(){n==="destroy"?r.destroy():n==="hide"&&Ar(r),t.isVisible()&&ao(t)};if(!e)return i(),[null];var a=e.duration,o=a===void 0?0:a,s=e.delay,l=s===void 0?0:s,c=Math.ceil(+o/2),u=+o/4,h=(0,w.CR)(r.getGeometryBounds().center,2),f=h[0],d=h[1],p=(0,w.CR)(t.getGeometryBounds().center,2),g=p[0],y=p[1],m=(0,w.CR)([(f+g)/2-f,(d+y)/2-d],2),b=m[0],E=m[1],O=r.style.opacity,M=O===void 0?1:O,k=t.style.opacity,D=k===void 0?1:k,N=r.style.transform||"",rt=t.style.transform||"",C=r.animate([{opacity:M,transform:"translate(0, 0) ".concat(N)},{opacity:0,transform:"translate(".concat(b,", ").concat(E,") ").concat(N)}],(0,w.pi)((0,w.pi)({fill:"both"},e),{duration:l+c+u})),S=t.animate([{opacity:0,transform:"translate(".concat(-b,", ").concat(-E,") ").concat(rt),offset:.01},{opacity:D,transform:"translate(0, 0) ".concat(rt)}],(0,w.pi)((0,w.pi)({fill:"both"},e),{duration:c+u,delay:l+c-u}));return ma(S,i),[C,S]}function Rr(r,t,e){var n={},i={};return Object.entries(t).forEach(function(a){var o=(0,w.CR)(a,2),s=o[0],l=o[1];if(!(0,Nt.Z)(l)){var c=r.style[s]||r.parsedStyle[s]||0;c!==l&&(n[s]=c,i[s]=l)}}),e?av(r,[n,i],(0,w.pi)({fill:"both"},e)):(iv(r,i),null)}function JE(r){var t;return((t=r[0])===null||t===void 0?void 0:t.map(function(e,n){return r.map(function(i){return i[n]})}))||[]}function Pu(r,t,e){e===void 0&&(e=!1);var n=r.getBBox(),i=n.width,a=n.height,o=t/Math.max(i,a);return e&&(r.style.transform="scale(".concat(o,")")),o}var ov=function(r,t,e){return[["M",r-e,t],["A",e,e,0,1,0,r+e,t],["A",e,e,0,1,0,r-e,t],["Z"]]},tw=ov,ew=function(r,t,e){return[["M",r-e,t-e],["L",r+e,t-e],["L",r+e,t+e],["L",r-e,t+e],["Z"]]},nw=function(r,t,e){return[["M",r-e,t],["L",r,t-e],["L",r+e,t],["L",r,t+e],["Z"]]},rw=function(r,t,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",r-e,t+n],["L",r,t-n],["L",r+e,t+n],["Z"]]},iw=function(r,t,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",r-e,t-n],["L",r+e,t-n],["L",r,t+n],["Z"]]},aw=function(r,t,e){var n=e/2*Math.sqrt(3);return[["M",r,t-e],["L",r+n,t-e/2],["L",r+n,t+e/2],["L",r,t+e],["L",r-n,t+e/2],["L",r-n,t-e/2],["Z"]]},ow=function(r,t,e){var n=e-1.5;return[["M",r-e,t-n],["L",r+e,t+n],["L",r+e,t-n],["L",r-e,t+n],["Z"]]},sv=function(r,t,e){return[["M",r,t+e],["L",r,t-e]]},sw=function(r,t,e){return[["M",r-e,t-e],["L",r+e,t+e],["M",r+e,t-e],["L",r-e,t+e]]},lw=function(r,t,e){return[["M",r-e/2,t-e],["L",r+e/2,t-e],["M",r,t-e],["L",r,t+e],["M",r-e/2,t+e],["L",r+e/2,t+e]]},cw=function(r,t,e){return[["M",r-e,t],["L",r+e,t],["M",r,t-e],["L",r,t+e]]},uw=function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},lv=function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},hw=lv,fw=function(r,t,e){return[["M",r-e,t],["A",e/2,e/2,0,1,1,r,t],["A",e/2,e/2,0,1,0,r+e,t]]},dw=function(r,t,e){return[["M",r-e-1,t-2.5],["L",r,t-2.5],["L",r,t+2.5],["L",r+e+1,t+2.5]]},pw=function(r,t,e){return[["M",r-e-1,t+2.5],["L",r,t+2.5],["L",r,t-2.5],["L",r+e+1,t-2.5]]},vw=function(r,t,e){return[["M",r-(e+1),t+2.5],["L",r-e/2,t+2.5],["L",r-e/2,t-2.5],["L",r+e/2,t-2.5],["L",r+e/2,t+2.5],["L",r+e+1,t+2.5]]};function gw(r,t){return[["M",r-5,t+2.5],["L",r-5,t],["L",r,t],["L",r,t-3],["L",r,t+3],["L",r+6.5,t+3]]}var yw=function(r,t,e){return[["M",r-e,t-e],["L",r+e,t],["L",r-e,t+e],["Z"]]},gr=Pr({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),mw=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,e,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:yw(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new x.ZA({class:gr.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new x.ZA({class:gr.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Object.defineProperty(t.prototype,"defaultPage",{get:function(){var e=this.attributes.defaultPage;return(0,ue.Z)(e,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var e=this.pageViews,n=(0,w.CR)(JE(e.map(function(h){var f=h.getBBox(),d=f.width,p=f.height;return[d,p]})).map(function(h){return Math.max.apply(Math,(0,w.ev)([],(0,w.CR)(h),!1))}),2),i=n[0],a=n[1],o=this.attributes,s=o.pageWidth,l=s===void 0?i:s,c=o.pageHeight,u=c===void 0?a:c;return{pageWidth:l,pageHeight:u}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var e=r.prototype.getBBox.call(this),n=e.x,i=e.y,a=this.controllerShape,o=this.pageShape,s=o.pageWidth,l=o.pageHeight;return new Ln(n,i,s+a.width,l)},t.prototype.goTo=function(e){var n=this,i=this.attributes.animate,a=this,o=a.currPage,s=a.playState,l=a.playWindow,c=a.pageViews;if(s!=="idle"||e<0||c.length<=0||e>=c.length)return null;c[o].setLocalPosition(0,0),this.prepareFollowingPage(e);var u=(0,w.CR)(this.getFollowingPageDiff(e),2),h=u[0],f=u[1];this.playState="running";var d=av(l,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-h,", ").concat(-f,")")}],i);return ma(d,function(){n.innerCurrPage=e,n.playState="idle",n.setVisiblePages([e]),n.updatePageInfo()}),d},t.prototype.prev=function(){var e=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!e&&i<=0)return null;var a=e?(i-1+n)%n:(0,ue.Z)(i-1,0,n);return this.goTo(a)},t.prototype.next=function(){var e=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!e&&i>=n-1)return null;var a=e?(i+1)%n:(0,ue.Z)(i+1,0,n);return this.goTo(a)},t.prototype.renderClipPath=function(e){var n=this.pageShape,i=n.pageWidth,a=n.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=e.maybeAppendByClassName(gr.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},t.prototype.setVisiblePages=function(e){this.playWindow.children.forEach(function(n,i){e.includes(i)?ao(n):Ar(n)})},t.prototype.adjustControllerLayout=function(){var e=this,n=e.prevBtnGroup,i=e.nextBtnGroup,a=e.pageInfoGroup,o=this.attributes,s=o.orientation,l=o.controllerPadding,c=a.getBBox(),u=c.width,h=c.height,f=(0,w.CR)(s==="horizontal"?[-180,0]:[-90,90],2),d=f[0],p=f[1];n.setLocalEulerAngles(d),i.setLocalEulerAngles(p);var g=n.getBBox(),y=g.width,m=g.height,b=i.getBBox(),E=b.width,O=b.height,M=Math.max(y,u,E),k=s==="horizontal"?{offset:[[0,0],[y/2+l,0],[y+u+l*2,0]],textAlign:"start"}:{offset:[[M/2,-m-l],[M/2,0],[M/2,O+l]],textAlign:"center"},D=(0,w.CR)(k.offset,3),N=(0,w.CR)(D[0],2),rt=N[0],C=N[1],S=(0,w.CR)(D[1],2),A=S[0],j=S[1],Y=(0,w.CR)(D[2],2),ot=Y[0],Lt=Y[1],Xt=k.textAlign,wt=a.querySelector("text");wt&&(wt.style.textAlign=Xt),n.setLocalPosition(rt,C),a.setLocalPosition(A,j),i.setLocalPosition(ot,Lt)},t.prototype.updatePageInfo=function(){var e,n=this,i=n.currPage,a=n.pageViews,o=n.attributes.formatter;a.length<2||((e=this.pageInfoGroup.querySelector(gr.pageInfo.class))===null||e===void 0||e.attr("text",o(i+1,a.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(e){var n=this.currPage;if(n===e)return[0,0];var i=this.attributes.orientation,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=e<n?-1:1;return i==="horizontal"?[l*o,0]:[0,l*s]},t.prototype.prepareFollowingPage=function(e){var n=this,i=n.currPage,a=n.pageViews;if(this.setVisiblePages([e,i]),e!==i){var o=(0,w.CR)(this.getFollowingPageDiff(e),2),s=o[0],l=o[1];a[e].setLocalPosition(s,l)}},t.prototype.renderController=function(e){var n=this,i=this.attributes.controllerSpacing,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=this.pageViews.length>=2,c=e.maybeAppendByClassName(gr.controller,"g");if(vl(c.node(),l),!!l){var u=Te(this.attributes,"button"),h=Te(this.attributes,"pageNum"),f=(0,w.CR)(ei(u),2),d=f[0],p=f[1],g=d.size,y=(0,w._T)(d,["size"]),m=!c.select(gr.prevBtnGroup.class).node(),b=c.maybeAppendByClassName(gr.prevBtnGroup,"g").styles(p);this.prevBtnGroup=b.node();var E=b.maybeAppendByClassName(gr.prevBtn,"path"),O=c.maybeAppendByClassName(gr.nextBtnGroup,"g").styles(p);this.nextBtnGroup=O.node();var M=O.maybeAppendByClassName(gr.nextBtn,"path");[E,M].forEach(function(D){D.styles((0,w.pi)((0,w.pi)({},y),{transformOrigin:"center"})),Pu(D.node(),g,!0)});var k=c.maybeAppendByClassName(gr.pageInfoGroup,"g");this.pageInfoGroup=k.node(),k.maybeAppendByClassName(gr.pageInfo,"text").styles(h),this.updatePageInfo(),c.node().setLocalPosition(o+i,s/2),m&&(this.prevBtnGroup.addEventListener("click",function(){n.prev()}),this.nextBtnGroup.addEventListener("click",function(){n.next()}))}},t.prototype.render=function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o;this.attr("transform","translate(".concat(a,", ").concat(s,")"));var l=ge(n);this.renderClipPath(l),this.renderController(l),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var e=this,n=to(function(){return e.render(e.attributes,e)},50);this.playWindow.addEventListener(x.Dk.INSERTED,n),this.playWindow.addEventListener(x.Dk.REMOVED,n)},t}(rn);function bw(r){var t="default";if((0,Vn.Z)(r)&&r instanceof Image)t="image";else if((0,Se.Z)(r))t="symbol";else if((0,ae.Z)(r)){var e=new RegExp("data:(image|text)");r.match(e)?t="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(r)?t="url":t="symbol"}return t}function _w(r){var t=bw(r);return["base64","url","image"].includes(t)?"image":r&&t==="symbol"?"path":null}var Ve=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o,l=this.getSubShapeStyle(e),c=l.symbol,u=l.size,h=u===void 0?16:u,f=(0,w._T)(l,["symbol","size"]),d=_w(c);ir(!!d,ge(n),function(p){p.maybeAppendByClassName("marker",d).attr("className","marker ".concat(d,"-marker")).call(function(g){if(d==="image"){var y=h*2;g.styles({img:c,width:y,height:y,x:a-h,y:s-h})}else{var y=h/2,m=(0,Se.Z)(c)?c:t.getSymbol(c);g.styles((0,w.pi)({d:m==null?void 0:m(a,s,y)},f))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(e,n){t.MARKER_SYMBOL_MAP.set(e,n)},t.getSymbol=function(e){return t.MARKER_SYMBOL_MAP.get(e)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(rn);Ve.registerSymbol("cross",sw),Ve.registerSymbol("hyphen",uw),Ve.registerSymbol("line",sv),Ve.registerSymbol("plus",cw),Ve.registerSymbol("tick",lw),Ve.registerSymbol("circle",ov),Ve.registerSymbol("point",tw),Ve.registerSymbol("bowtie",ow),Ve.registerSymbol("hexagon",aw),Ve.registerSymbol("square",ew),Ve.registerSymbol("diamond",nw),Ve.registerSymbol("triangle",rw),Ve.registerSymbol("triangle-down",iw),Ve.registerSymbol("line",sv),Ve.registerSymbol("dot",lv),Ve.registerSymbol("dash",hw),Ve.registerSymbol("smooth",fw),Ve.registerSymbol("hv",dw),Ve.registerSymbol("vh",pw),Ve.registerSymbol("hvh",vw),Ve.registerSymbol("vhv",gw);function eA(r,t,e){var n=Math.round((r-e)/t);return e+n*t}function xw(r,t,e){var n=1.4,i=n*e;return[["M",r-e,t-i],["L",r+e,t-i],["L",r+e,t+i],["L",r-e,t+i],["Z"]]}var cv=1.4,uv=.4;function Ew(r,t,e){var n=e,i=n*cv,a=n/2,o=n/6,s=r+i*uv;return[["M",r,t],["L",s,t+a],["L",r+i,t+a],["L",r+i,t-a],["L",s,t-a],["Z"],["M",s,t+o],["L",r+i-2,t+o],["M",s,t-o],["L",r+i-2,t-o]]}function ww(r,t,e){var n=e,i=n*cv,a=n/2,o=n/6,s=t+i*uv;return[["M",r,t],["L",r-a,s],["L",r-a,t+i],["L",r+a,t+i],["L",r+a,s],["Z"],["M",r-o,s],["L",r-o,t+i-2],["M",r+o,s],["L",r+o,t+i-2]]}Ve.registerSymbol("hiddenHandle",xw),Ve.registerSymbol("verticalHandle",Ew),Ve.registerSymbol("horizontalHandle",ww);var nA=function(r,t,e){return r===void 0&&(r="horizontal"),r==="horizontal"?t:e};function rA(r,t,e,n){var i;n===void 0&&(n=4);var a=__read(r,2),o=a[0],s=a[1],l=__read(t,2),c=l[0],u=l[1],h=__read(e,2),f=h[0],d=h[1],p=__read([c,u],2),g=p[0],y=p[1],m=y-g;return g>y&&(i=__read([y,g],2),g=i[0],y=i[1]),m>s-o?[o,s]:g<o?f===o&&d===y?[o,y]:[o,m+o]:y>s?d===s&&f===g?[g,s]:[s-m,s]:[g,y]}function Ru(r,t,e){return r===void 0&&(r="horizontal"),r==="horizontal"?t:e}function iA(r){var t=r&&r.getRenderBounds();if(!t)return{width:0,height:0};var e=t.getMax(),n=t.getMin();return{width:e[0]-n[0],height:e[1]-n[1]}}function hv(r){var t=r.getLocalBounds(),e=t.min,n=t.max,i=(0,w.CR)([e,n],2),a=(0,w.CR)(i[0],2),o=a[0],s=a[1],l=(0,w.CR)(i[1],2),c=l[0],u=l[1];return{x:o,y:s,width:c-o,height:u-s,left:o,bottom:u,top:s,right:c}}function aA(r,t){var e=select(r).append("text").node();return e.attr(__assign(__assign({},t),{visibility:"hidden"})),e}function Sw(r,t){var e=(0,w.CR)(r,2),n=e[0],i=e[1],a=(0,w.CR)(t,2),o=a[0],s=a[1];return n!==o&&i===s}function oA(r,t){var e=__read(r,2),n=e[0],i=e[1],a=__read(t,2),o=a[0],s=a[1];return n===o&&i!==s}function Ow(r,t){var e,n,i=t.attributes;try{for(var a=(0,w.XA)(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=(0,w.CR)(o.value,2),l=s[0],c=s[1];l!=="id"&&l!=="className"&&r.attr(l,c)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}function ni(r){return typeof r=="function"?r():(0,ae.Z)(r)||(0,pt.Z)(r)?new Tu({style:{text:String(r)}}):r}var ml,Du;function sA(r){Du=r}var Mw=du(function(r,t){var e=t.fontSize,n=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Du?Du(r,e):(ml||(ml=x.GZ.offscreenCanvasCreator.getOrCreateContext(void 0)),ml.font=[a,o,i,"".concat(e,"px"),n].join(" "),ml.measureText(r).width)},function(r,t){return[r,Object.values(t||fv(r)).join()].join("")},4096),fv=function(r){var t=r.style.fontFamily||"sans-serif",e=r.style.fontWeight||"normal",n=r.style.fontStyle||"normal",i=r.style.fontVariant,a=r.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:t,fontWeight:e,fontStyle:n,fontVariant:i}};function dv(r){return r.nodeName==="text"?r:r.nodeName==="g"&&r.children.length===1&&r.children[0].nodeName==="text"?r.children[0]:null}function pv(r,t){var e=dv(r);e&&e.attr(t)}function ku(r,t,e){e===void 0&&(e="..."),pv(r,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:e})}var ar=Pr({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function Cw(r){var t=r.querySelector(ar.marker.class);return t?t.style:{}}var Tw=function(r){(0,w.ZT)(t,r);function t(e){return r.call(this,e,{span:[1,1],marker:function(){return new x.Cd({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(t.prototype,"showValue",{get:function(){var e=this.attributes.valueText;return e?typeof e=="string"||typeof e=="number"?e!=="":typeof e=="function"?!0:e.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var e=this.labelGroup,n=this.valueGroup,i=this.attributes.markerSize,a=e.node().getBBox(),o=a.width,s=a.height,l=n.node().getBBox(),c=l.width,u=l.height;return{markerWidth:i,labelWidth:o,valueWidth:c,height:Math.max(i,s,u)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var e=this.attributes.span;if(!e)return[1,1];var n=(0,w.CR)(An(e),2),i=n[0],a=n[1],o=this.showValue?a:0,s=i+o;return[i/s,o/s]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var e,n=this.attributes,i=n.markerSize,a=n.width,o=this.actualSpace,s=o.markerWidth,l=o.height,c=this.actualSpace,u=c.labelWidth,h=c.valueWidth,f=(0,w.CR)(this.spacing,2),d=f[0],p=f[1];if(a){var g=a-i-d-p,y=(0,w.CR)(this.span,2),m=y[0],b=y[1];e=(0,w.CR)([m*g,b*g],2),u=e[0],h=e[1]}var E=s+u+h+d+p;return{width:E,height:l,markerWidth:s,labelWidth:u,valueWidth:h}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var e=this.attributes.spacing;if(!e)return[0,0];var n=(0,w.CR)(An(e),2),i=n[0],a=n[1];return this.showValue?[i,a]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var e=this.shape,n=e.markerWidth,i=e.labelWidth,a=e.valueWidth,o=e.width,s=e.height,l=(0,w.CR)(this.spacing,2),c=l[0],u=l[1];return{height:s,width:o,markerWidth:n,labelWidth:i,valueWidth:a,position:[n/2,n+c,n+i+c+u]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var e=Cw(this.markerGroup.node()),n=this.attributes,i=n.markerSize,a=n.markerStrokeWidth,o=a===void 0?e.strokeWidth:a,s=n.markerLineWidth,l=s===void 0?e.lineWidth:s,c=n.markerStroke,u=c===void 0?e.stroke:c,h=+(o||l||(u?1:0))*Math.sqrt(2),f=this.markerGroup.node().getBBox(),d=f.width,p=f.height;return(1-h/Math.max(d,p))*i},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(e){var n=this,i=this.attributes.marker,a=Te(this.attributes,"marker");this.markerGroup=e.maybeAppendByClassName(ar.markerGroup,"g").style("zIndex",0),ir(!!i,this.markerGroup,function(){var o,s=n.markerGroup.node(),l=(o=s.childNodes)===null||o===void 0?void 0:o[0],c=typeof i=="string"?new Ve({style:{symbol:i},className:ar.marker.name}):i();l?c.nodeName===l.nodeName?l instanceof Ve?l.update((0,w.pi)((0,w.pi)({},a),{symbol:i})):(Ow(l,c),ge(l).styles(a)):(l.remove(),ge(c).attr("className",ar.marker.name).styles(a),s.appendChild(c)):(c instanceof Ve||ge(c).attr("className",ar.marker.name).styles(a),s.appendChild(c)),n.markerGroup.node().scale(1/n.markerGroup.node().getScale()[0]);var u=Pu(n.markerGroup.node(),n.scaleSize,!0);n.markerGroup.node().style._transform="scale(".concat(u,")")})},t.prototype.renderLabel=function(e){var n=Te(this.attributes,"label"),i=n.text,a=(0,w._T)(n,["text"]);this.labelGroup=e.maybeAppendByClassName(ar.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(ar.label,function(){return ni(i)}).styles(a)},t.prototype.renderValue=function(e){var n=this,i=Te(this.attributes,"value"),a=i.text,o=(0,w._T)(i,["text"]);this.valueGroup=e.maybeAppendByClassName(ar.valueGroup,"g").style("zIndex",0),ir(this.showValue,this.valueGroup,function(){n.valueGroup.maybeAppendByClassName(ar.value,function(){return ni(a)}).styles(o)})},t.prototype.renderBackground=function(e){var n=this.shape,i=n.width,a=n.height,o=Te(this.attributes,"background");this.background=e.maybeAppendByClassName(ar.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(ar.background,"rect").styles((0,w.pi)({width:i,height:a},o))},t.prototype.adjustLayout=function(){var e=this.layout,n=e.labelWidth,i=e.valueWidth,a=e.height,o=(0,w.CR)(e.position,3),s=o[0],l=o[1],c=o[2],u=a/2;this.markerGroup.styles({transform:"translate(".concat(s,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(l,", ").concat(u,")")}),ku(this.labelGroup.select(ar.label.class).node(),Math.ceil(n)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(c,", ").concat(u,")")}),ku(this.valueGroup.select(ar.value.class).node(),Math.ceil(i)))},t.prototype.render=function(e,n){var i=ge(n),a=e.x,o=a===void 0?0:a,s=e.y,l=s===void 0?0:s;i.styles({transform:"translate(".concat(o,", ").concat(l,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},t}(rn),Zi=Pr({page:"item-page",navigator:"navigator",item:"item"},"items"),vv=function(r,t,e){return e===void 0&&(e=!0),r?t(r):e},Aw=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:Au,mouseenter:Au,mouseleave:Au})||this;return n.navigatorShape=[0,0],n}return Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var e=this.attributes,n=e.gridRow,i=e.gridCol,a=e.data;if(!n&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return n&&i?[n,i]:n?[n,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var e=this.attributes,n=e.data,i=e.layout,a=Te(this.attributes,"item"),o=n.map(function(s,l){var c=s.id,u=c===void 0?l:c,h=s.label,f=s.value;return{id:"".concat(u),index:l,style:(0,w.pi)({layout:i,labelText:h,valueText:f},Object.fromEntries(Object.entries(a).map(function(d){var p=(0,w.CR)(d,2),g=p[0],y=p[1];return[g,vr(y,[s,l,n])]})))}});return o},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var e=this,n=this.attributes,i=n.orientation,a=n.width,o=n.rowPadding,s=n.colPadding,l=(0,w.CR)(this.navigatorShape,1),c=l[0],u=(0,w.CR)(this.grid,2),h=u[0],f=u[1],d=f*h,p=0;return this.pageViews.children.map(function(g,y){var m,b,E=Math.floor(y/d),O=y%d,M=e.ifHorizontal(f,h),k=[Math.floor(O/M),O%M];i==="vertical"&&k.reverse();var D=(0,w.CR)(k,2),N=D[0],rt=D[1],C=(a-c-(f-1)*s)/f,S=g.getBBox().height,A=(0,w.CR)([0,0],2),j=A[0],Y=A[1];return i==="horizontal"?(m=(0,w.CR)([p,N*(S+o)],2),j=m[0],Y=m[1],p=rt===f-1?0:p+C+s):(b=(0,w.CR)([rt*(C+s),p],2),j=b[0],Y=b[1],p=N===h-1?0:p+S+o),{page:E,index:y,row:N,col:rt,pageIndex:O,width:C,height:S,x:j,y:Y}})},t.prototype.getFlexLayout=function(){var e=this.attributes,n=e.width,i=e.height,a=e.rowPadding,o=e.colPadding,s=(0,w.CR)(this.navigatorShape,1),l=s[0],c=(0,w.CR)(this.grid,2),u=c[0],h=c[1],f=(0,w.CR)([n-l,i],2),d=f[0],p=f[1],g=(0,w.CR)([0,0,0,0,0,0,0,0],8),y=g[0],m=g[1],b=g[2],E=g[3],O=g[4],M=g[5],k=g[6],D=g[7];return this.pageViews.children.map(function(N,rt){var C,S,A,j,Y=N.getBBox(),ot=Y.width,Lt=Y.height,Xt=k===0?0:o,wt=k+Xt+ot;if(wt<=d&&vv(O,function($t){return $t<h}))return C=(0,w.CR)([k+Xt,D,wt],3),y=C[0],m=C[1],k=C[2],{width:ot,height:Lt,x:y,y:m,page:b,index:rt,pageIndex:E++,row:M,col:O++};S=(0,w.CR)([M+1,0,0,D+Lt+a],4),M=S[0],O=S[1],k=S[2],D=S[3];var Ct=D+Lt;return Ct<=p&&vv(M,function($t){return $t<u})?(A=(0,w.CR)([k,D,ot],3),y=A[0],m=A[1],k=A[2],{width:ot,height:Lt,x:y,y:m,page:b,index:rt,pageIndex:E++,row:M,col:O++}):(j=(0,w.CR)([0,0,ot,0,b+1,0,0,0],8),y=j[0],m=j[1],k=j[2],D=j[3],b=j[4],E=j[5],M=j[6],O=j[7],{width:ot,height:Lt,x:y,y:m,page:b,index:rt,pageIndex:E++,row:M,col:O++})})},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var e=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,n=e.call(this);return n.slice(-1)[0].page>0?(this.navigatorShape=[55,0],e.call(this)):n},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(e,n){var i=this.attributes.orientation;return Ru(i,e,n)},t.prototype.flattenPage=function(e){e.querySelectorAll(Zi.item.class).forEach(function(n){e.appendChild(n)}),e.querySelectorAll(Zi.page.class).forEach(function(n){var i=e.removeChild(n);i.destroy()})},t.prototype.renderItems=function(e){var n=this.attributes,i=n.click,a=n.mouseenter,o=n.mouseleave;this.flattenPage(e);var s=this.dispatchCustomEvent.bind(this);ge(e).selectAll(Zi.item.class).data(this.renderData,function(l){return l.id}).join(function(l){return l.append(function(c){var u=c.style;return new Tw({style:u})}).attr("className",Zi.item.name).on("click",function(){i==null||i(this),s("itemClick",{item:this})}).on("pointerenter",function(){a==null||a(this),s("itemMouseenter",{item:this})}).on("pointerleave",function(){o==null||o(this),s("itemMouseleave",{item:this})})},function(l){return l.each(function(c){var u=c.style;this.update(u)})},function(l){return l.remove()})},t.prototype.relayoutNavigator=function(){var e,n=this.attributes,i=n.layout,a=n.width,o=((e=this.pageViews.children[0])===null||e===void 0?void 0:e.getBBox().height)||0,s=(0,w.CR)(this.navigatorShape,2),l=s[0],c=s[1];this.navigator.update(i==="grid"?{pageWidth:a-l,pageHeight:o-c}:{})},t.prototype.adjustLayout=function(){var e=this,n=Object.entries(YE(this.itemsLayout,"page")).map(function(a){var o=(0,w.CR)(a,2),s=o[0],l=o[1];return{page:s,layouts:l}}),i=(0,w.ev)([],(0,w.CR)(this.navigator.getContainer().children),!1);n.forEach(function(a){var o=a.layouts,s=e.pageViews.appendChild(new x.ZA({className:Zi.page.name}));o.forEach(function(l){var c=l.x,u=l.y,h=l.index,f=l.width,d=l.height,p=i[h];s.appendChild(p),za(p,"__layout__",l),p.update({x:c,y:u,width:f,height:d})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(e){var n=this.attributes.orientation,i=Te(this.attributes,"nav"),a=xn({orientation:n},i),o=this;return e.selectAll(Zi.navigator.class).data(["nav"]).join(function(s){return s.append(function(){return new mw({style:a})}).attr("className",Zi.navigator.name).each(function(){o.navigator=this})},function(s){return s.each(function(){this.update(a)})},function(s){return s.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(e,n){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(ge(n));this.renderItems(a.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(e,n){var i=new x.Aw(e,{detail:n});this.dispatchEvent(i)},t}(rn),oo=Pr({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),gv={showLabel:!0,formatter:function(r){return r.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},lA=function(r){(0,w.ZT)(t,r);function t(e){return r.call(this,e,gv)||this}return t.prototype.render=function(e,n){var i=ge(n).maybeAppendByClassName(oo.markerGroup,"g");this.renderMarker(i);var a=ge(n).maybeAppendByClassName(oo.labelGroup,"g");this.renderLabel(a)},t.prototype.renderMarker=function(e){var n=this,i=this.attributes,a=i.orientation,o=i.markerSymbol,s=o===void 0?Ru(a,"horizontalHandle","verticalHandle"):o;ir(!!s,e,function(l){var c=Te(n.attributes,"marker"),u=(0,w.pi)({symbol:s},c);n.marker=l.maybeAppendByClassName(oo.marker,function(){return new Ve({style:u})}).update(u)})},t.prototype.renderLabel=function(e){var n=this,i=this.attributes,a=i.showLabel,o=i.orientation,s=i.spacing,l=s===void 0?0:s,c=i.formatter;ir(a,e,function(u){var h,f=Te(n.attributes,"label"),d=f.text,p=(0,w._T)(f,["text"]),g=((h=u.select(oo.marker.class))===null||h===void 0?void 0:h.node().getBBox())||{},y=g.width,m=y===void 0?0:y,b=g.height,E=b===void 0?0:b,O=(0,w.CR)(Ru(o,[0,E+l,"center","top"],[m+l,0,"start","middle"]),4),M=O[0],k=O[1],D=O[2],N=O[3];u.maybeAppendByClassName(oo.label,"text").styles((0,w.pi)((0,w.pi)({},p),{x:M,y:k,text:c(d).toString(),textAlign:D,textBaseline:N}))})},t}(rn),yv={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},Pw=xn({},yv,{}),cA=xn({},yv,ya(gv,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),uA=.01,hA=.5,so=Pr({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),Rw=function(r){(0,w.ZT)(t,r);function t(e){return r.call(this,e,Pw)||this}return t.prototype.renderTitle=function(e,n,i){var a=this.attributes,o=a.showTitle,s=a.titleText,l=Te(this.attributes,"title"),c=(0,w.CR)(ei(l),2),u=c[0],h=c[1];this.titleGroup=e.maybeAppendByClassName(so.titleGroup,"g").styles(h);var f=(0,w.pi)((0,w.pi)({width:n,height:i},u),{text:o?s:""});this.title=this.titleGroup.maybeAppendByClassName(so.title,function(){return new UE({style:f})}).update(f)},t.prototype.renderItems=function(e,n){var i=n.x,a=n.y,o=n.width,s=n.height,l=Te(this.attributes,"title",!0),c=(0,w.CR)(ei(l),2),u=c[0],h=c[1],f=(0,w.pi)((0,w.pi)({},u),{width:o,height:s,x:0,y:0});this.itemsGroup=e.maybeAppendByClassName(so.itemsGroup,"g").styles((0,w.pi)((0,w.pi)({},h),{transform:"translate(".concat(i,", ").concat(a,")")}));var d=this;this.itemsGroup.selectAll(so.items.class).data(["items"]).join(function(p){return p.append(function(){return new Aw({style:f})}).attr("className",so.items.name).each(function(){d.items=ge(this)})},function(p){return p.update(f)},function(p){return p.remove()})},t.prototype.adjustLayout=function(){var e=this.attributes.showTitle;if(e){var n=this.title.node().getAvailableSpace(),i=n.x,a=n.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(a,")")}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var e=this.attributes,n=e.showTitle,i=e.width,a=e.height;return n?this.title.node().getAvailableSpace():new Ln(0,0,i,a)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var e,n,i=(e=this.title)===null||e===void 0?void 0:e.node(),a=(n=this.items)===null||n===void 0?void 0:n.node();return!i||!a?r.prototype.getBBox.call(this):HE(i,a)},t.prototype.render=function(e,n){var i=this.attributes,a=i.width,o=i.height,s=i.x,l=s===void 0?0:s,c=i.y,u=c===void 0?0:c,h=ge(n);n.style.transform="translate(".concat(l,", ").concat(u,")"),this.renderTitle(h,a,o),this.renderItems(h,this.availableSpace),this.adjustLayout()},t}(rn);function Lu(r){const{width:t,height:e,renderer:n}=r,i=Dw(r),a=new x.Xz({width:t,height:e,container:i,renderer:n||new Ya});return[i,a]}function Dw(r){var t;const{container:e,className:n,graphCanvas:i}=r;if(e)return typeof e=="string"?document.getElementById(e):e;const a=ga(n,!1),{width:o,height:s,containerStyle:l}=r,[c,u]=kw(r);return Object.assign(a.style,Object.assign({position:"absolute",left:c+"px",top:u+"px",width:o+"px",height:s+"px"},l)),(t=i.getContainer())===null||t===void 0||t.appendChild(a),a}function kw(r){const{width:t,height:e,placement:n,graphCanvas:i}=r,[a,o]=i.getSize(),[s,l]=kf(n);return[s*(a-t),l*(o-e)]}var Lw=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class bl extends Tn{constructor(t,e){super(t,Object.assign({},bl.defaultOptions,e)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:n}=this.context;n.on(he.AFTER_DRAW,this.createElement)},this.changeState=(n,i)=>{const{graph:a}=this.context,{typePrefix:o}=this,s=Un(n,[o,"id"]),l=Un(n,[o,"style","labelText"]),[c]=s.split("__"),u=this.fieldMap[c].get(l)||[];a.setElementState(Object.fromEntries(u==null?void 0:u.map(h=>[h,i])))},this.click=n=>{if(this.options.trigger==="hover")return;const i=Un(n,[this.typePrefix,"id"]);this.selectedItems.includes(i)?(this.selectedItems=this.selectedItems.filter(a=>a!==i),this.changeState(n,[])):(this.selectedItems.push(i),this.changeState(n,"selected"))},this.mouseleave=n=>{this.options.trigger!=="click"&&(this.selectedItems=[],this.changeState(n,[]))},this.mouseenter=n=>{if(this.options.trigger==="click")return;const i=Un(n,[this.typePrefix,"id"]);this.selectedItems.includes(i)?this.selectedItems=this.selectedItems.filter(a=>a!==i):(this.selectedItems.push(i),this.changeState(n,"active"))},this.setFieldMap=(n,i,a)=>{if(!n)return;const o=this.fieldMap[a];if(o)if(!o.has(n))o.set(n,[i]);else{const s=o.get(n);s&&(s.push(i),o.set(n,s))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(n,i)=>{if(!n)return[];const{model:a,element:o}=this.context,{nodes:s,edges:l,combos:c}=a.getData(),u={},h=y=>(0,Se.Z)(n)?n(y):n,f={node:"circle",edge:"line",combo:"rect"},d={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},p=(y,m)=>o==null?void 0:o.getElementComputedStyle(y,m),g=(y,m)=>{y.forEach(b=>{const{id:E}=b,O=Un(b,["data",h(b)]),M=(o==null?void 0:o.getElementType(m,b))||"circle",k=p(m,b),D=(m==="edge"?k==null?void 0:k.stroke:k==null?void 0:k.fill)||"#1783ff";E&&O&&O.replace(/\s+/g,"")&&(this.setFieldMap(O,E,m),u[O]||(u[O]={id:`${m}__${E}`,label:O,marker:d[M]||f[m],elementType:m,lineWidth:1,stroke:D,fill:D}))})};switch(i){case"node":g(s,"node");break;case"edge":g(l,"edge");break;case"combo":g(c,"combo");break;default:return[]}return Object.values(u)},this.createElement=()=>{if(this.draw){this.updateElement();return}const n=this.options,{width:i,height:a,nodeField:o,edgeField:s,comboField:l,trigger:c,position:u,container:h,containerStyle:f,className:d}=n,p=Lw(n,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),g=this.getMarkerData(o,"node"),y=this.getMarkerData(s,"edge"),m=this.getMarkerData(l,"combo"),b=[...g,...m,...y],E=Object.assign({width:i,height:a,data:b,itemMarkerLineWidth:({lineWidth:k})=>k,itemMarker:({marker:k})=>k,itemMarkerStroke:({stroke:k})=>k,itemMarkerFill:({fill:k})=>k,gridCol:g.length},p,this.getEvents()),O=new Rw({className:"legend",style:E});this.category=O,this.upsertCanvas().appendChild(O),this.draw=!0},this.bindEvents()}update(t){super.update(t),this.clear(),this.createElement()}clear(){var t,e;(t=this.canvas)===null||t===void 0||t.destroy(),(e=this.container)===null||e===void 0||e.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:t})=>!this.selectedItems.length||this.selectedItems.includes(t)?1:.5,itemLabelOpacity:({id:t})=>!this.selectedItems.length||this.selectedItems.includes(t)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const t=this.context.canvas,[e,n]=t.getSize(),{width:i=e,height:a=n,position:o,container:s,containerStyle:l,className:c}=this.options,[u,h]=Lu({width:i,height:a,graphCanvas:t,container:s,containerStyle:l,placement:o,className:"legend"});return this.container=u,c&&u.classList.add(c),this.canvas=h,this.canvas}destroy(){this.clear(),this.context.graph.off(he.AFTER_DRAW,this.createElement),super.destroy()}}bl.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class _l extends Tn{constructor(t,e){super(t,Object.assign({},_l.defaultOptions,e)),this.onDraw=n=>{var i;!((i=n==null?void 0:n.data)===null||i===void 0)&&i.render||this.onRender()},this.shapes=new Map,this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=n=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(n.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=n=>{if(!this.mask||!this.isMaskDragging)return;const{size:[i,a]}=this.options,{movementX:o,movementY:s}=n,{left:l,top:c,width:u,height:h}=this.mask.style,[,,f,d]=this.maskBBox;let p=parseInt(l)+o,g=parseInt(c)+s,y=parseInt(u),m=parseInt(h);p<0&&(p=0),g<0&&(g=0),p+y>i&&(p=Oi(i-y,0)),g+m>a&&(g=Oi(a-m,0)),y<f&&(o>0?(p=Oi(p-o,0),y=Si(y+o,i)):o<0&&(y=Si(y-o,i))),m<d&&(s>0?(g=Oi(g-s,0),m=Si(m+s,a)):s<0&&(m=Si(m-s,a))),Object.assign(this.mask.style,{left:p+"px",top:g+"px",width:y+"px",height:m+"px"});const b=parseInt(l)-p,E=parseInt(c)-g;if(b===0&&E===0)return;const O=this.context.canvas.getCamera().getZoom(),M=this.canvas.getCamera().getZoom(),k=O/M;this.context.graph.translateBy([b*k,E*k],!1)},this.onMaskDragEnd=n=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(n.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=Wh(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(t){this.unbindEvents(),super.update(t),"delay"in t&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=to(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){const{graph:t}=this.context;t.on(he.AFTER_DRAW,this.onDraw),t.on(he.AFTER_RENDER,this.onRender),t.on(he.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:t}=this.context;t.off(he.AFTER_DRAW,this.onDraw),t.off(he.AFTER_RENDER,this.onRender),t.off(he.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const t=this.getElements(),e=this.initCanvas();this.setShapes(e,t)}getElements(){const{filter:t}=this.options,{model:e}=this.context,n=e.getData();if(!t)return n;const{nodes:i,edges:a,combos:o}=n;return{nodes:i.filter(s=>t(St(s),"node")),edges:a.filter(s=>t(St(s),"edge")),combos:o.filter(s=>t(St(s),"combo"))}}setShapes(t,e){const{nodes:n,edges:i,combos:a}=e,{shape:o}=this.options,{element:s}=this.context;if(o==="key"){const c=new Set,u=h=>{const f=St(h);c.add(f);const d=s.getElement(f);if(!d)return;const p=d.getShape("key"),g=this.shapes.get(f)||p.cloneNode();g.setPosition(p.getPosition()),d.style.zIndex&&(g.style.zIndex=d.style.zIndex),g.id=d.id,this.shapes.has(f)?Object.entries(p.attributes).forEach(([y,m])=>{g.style[y]!==m&&(g.style[y]=m)}):(t.appendChild(g),this.shapes.set(f,g))};i.forEach(u),a.forEach(u),n.forEach(u),this.shapes.forEach((h,f)=>{c.has(f)||(t.removeChild(h),this.shapes.delete(f))});return}const l=(c,u)=>{const f=s.getElement(c).getPosition();return u.setPosition(f),u};t.removeChildren(),i.forEach(c=>t.appendChild(o(St(c),"edge"))),a.forEach(c=>{t.appendChild(l(St(c),o(St(c),"combo")))}),n.forEach(c=>{t.appendChild(l(St(c),o(St(c),"node")))})}initCanvas(){const{renderer:t,size:[e,n]}=this.options;if(this.canvas){const{width:i,height:a}=this.canvas.getConfig();(e!==i||n!==a)&&this.canvas.resize(e,n),t&&this.canvas.setRenderer(t)}else{const{className:i,position:a,container:o,containerStyle:s}=this.options,[l,c]=Lu({renderer:t,width:e,height:n,placement:a,className:"minimap",container:o,containerStyle:s,graphCanvas:this.context.canvas});i&&l.classList.add(i),this.container=l,this.canvas=c}return this.setCamera(),this.canvas}createLandmark(t,e,n){const i=`${t.join(",")}-${e.join(",")}-${n}`;if(this.landmarkMap.has(i))return this.landmarkMap.get(i);const o=this.canvas.getCamera().createLandmark(i,{position:t,focalPoint:e,zoom:n});return this.landmarkMap.set(i,o),o}setCamera(){var t;const{canvas:e}=this.context,n=(t=this.canvas)===null||t===void 0?void 0:t.getCamera();if(!n)return;const{size:[i,a],padding:o}=this.options,[s,l,c,u]=xr(o),{min:h,max:f,center:d}=e.getBounds("elements"),p=f[0]-h[0],g=f[1]-h[1],y=i-u-l,m=a-s-c,b=y/p,E=m/g,O=Math.min(b,E),M=this.createLandmark(d,d,O);n.gotoLandmark(M,0)}get maskBBox(){const{canvas:t}=this.context,e=t.getSize(),n=t.getCanvasByViewport([0,0]),i=t.getCanvasByViewport(e),a=this.canvas.canvas2Viewport(Mr(n)),o=this.canvas.canvas2Viewport(Mr(i)),s=o.x-a.x,l=o.y-a.y;return[a.x,a.y,s,l]}calculateMaskBBox(){const{size:[t,e]}=this.options;let[n,i,a,o]=this.maskBBox;return n<0&&(a=Si(a+n,t),n=0),i<0&&(o=Si(o+i,e),i=0),n+a>t&&(a=Oi(t-n,0)),i+o>e&&(o=Oi(e-i,0)),[Si(n,t),Si(i,e),Oi(a,0),Oi(o,0)]}renderMask(){const{maskStyle:t}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",e=>e.preventDefault&&e.preventDefault())),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},t),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[t,e,n,i]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:e+"px",left:t+"px",width:n+"px",height:i+"px"})}destroy(){var t;this.unbindEvents(),this.canvas.destroy(),(t=this.mask)===null||t===void 0||t.remove(),super.destroy()}}_l.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const Si=(r,t)=>Math.min(r,t),Oi=(r,t)=>Math.max(r,t);var Iu=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};const Nu={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class xl extends Tn{constructor(t,e){super(t,Object.assign({},xl.defaultOptions,e)),this.initSnapline=()=>{const n=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=n.appendChild(new x.x1({style:Object.assign(Object.assign({},Nu),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=n.appendChild(new x.x1({style:Object.assign(Object.assign({},Nu),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(n,i,a)=>Iu(this,void 0,void 0,function*(){const{verticalX:o,horizontalY:s}=a,{tolerance:l}=this.options,{min:[c,u],max:[h,f],center:[d,p]}=i;let g=0,y=0;o!==null&&(In(h,o)<l&&(g=o-h),In(c,o)<l&&(g=o-c),In(d,o)<l&&(g=o-d),g!==0&&(this.isVerticalSticking=!0)),s!==null&&(In(f,s)<l&&(y=s-f),In(u,s)<l&&(y=s-u),In(p,s)<l&&(y=s-p),y!==0&&(this.isHorizontalSticking=!0)),(g!==0||y!==0)&&(yield this.context.graph.translateElementBy({[n]:[g,y]},!1))}),this.enableSnap=n=>{const{target:i}=n,a=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[o,s]=this.getDelta(n);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(o)<=a&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[-o,-s]},!1),!1;if(this.isHorizontalSticking&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[0,-s]},!1),!1;if(this.isVerticalSticking&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[-o,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(n,i)=>{const{tolerance:a,shape:o}=this.options,{min:[s,l],max:[c,u],center:[h,f]}=i;let d=null,p=null,g=null,y=null,m=null,b=null;return this.getNodes().some(E=>{if(cn(n.id,E.id))return!1;const O=mv(E,o).getRenderBounds(),{min:[M,k],max:[D,N],center:[rt,C]}=O;return d===null&&(In(rt,h)<a?d=rt:In(M,s)<a||In(M,c)<a?d=M:(In(D,c)<a||In(D,s)<a)&&(d=D),d!==null&&(p=Math.min(k,l),g=Math.max(N,u))),y===null&&(In(C,f)<a?y=C:In(k,l)<a||In(k,u)<a?y=k:(In(N,u)<a||In(N,l)<a)&&(y=N),y!==null&&(m=Math.min(M,s),b=Math.max(D,c))),d!==null&&y!==null}),{verticalX:d,verticalMinY:p,verticalMaxY:g,horizontalY:y,horizontalMinX:m,horizontalMaxX:b}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=n=>Iu(this,void 0,void 0,function*(){const{target:i}=n;if(this.options.autoSnap&&!this.enableSnap(n))return;const a=mv(i,this.options.shape).getRenderBounds(),o=this.calcSnaplineMetadata(i,a);this.hideSnapline(),(o.verticalX!==null||o.horizontalY!==null)&&this.updateSnapline(o),this.options.autoSnap&&(yield this.autoSnapToLine(i.id,a,o))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var t;const{filter:e}=this.options,i=(((t=this.context.element)===null||t===void 0?void 0:t.getNodes())||[]).filter(a=>{var o;return M_(a)&&((o=this.context.viewport)===null||o===void 0?void 0:o.isInViewport(a.getRenderBounds()))});return e?i.filter(a=>e(a)):i}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(t){const{lineWidth:e}=this.options[`${t}LineStyle`];return+(e||Nu.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(t){const{verticalX:e,verticalMinY:n,verticalMaxY:i,horizontalY:a,horizontalMinX:o,horizontalMaxX:s}=t,[l,c]=this.context.canvas.getSize(),{offset:u}=this.options;a!==null?Object.assign(this.horizontalLine.style,{x1:u===1/0?0:o-u,y1:a,x2:u===1/0?l:s+u,y2:a,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",e!==null?Object.assign(this.verticalLine.style,{x1:e,y1:u===1/0?0:n-u,x2:e,y2:u===1/0?c:i+u,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(t){const e=this.context.graph.getZoom();return Or([t.dx,t.dy],e)}bindEvents(){return Iu(this,void 0,void 0,function*(){const{graph:t}=this.context;t.on(fr.DRAG_START,this.onDragStart),t.on(fr.DRAG,this.onDrag),t.on(fr.DRAG_END,this.onDragEnd)})}unbindEvents(){const{graph:t}=this.context;t.off(fr.DRAG_START,this.onDragStart),t.off(fr.DRAG,this.onDrag),t.off(fr.DRAG_END,this.onDragEnd)}destroyElements(){var t,e;(t=this.horizontalLine)===null||t===void 0||t.destroy(),(e=this.verticalLine)===null||e===void 0||e.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}xl.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const In=(r,t)=>Math.abs(r-t),mv=(r,t)=>typeof t=="function"?t(r):r.getShape(t);var bv=null,Iw=null;function El(r){return r instanceof Date?r:new Date(r)}function Nw(r){for(var t=__read(r,2),e=t[0],n=t[1],i=bv.indexOf(e),a=bv.indexOf(n),o="",s=i;s<=a;s+=1)if(o+=Iw[s],s<a){var l="-";s===2?l=" ":s>2&&(l=":"),o+=l}return o}function Bn(r,t){var e={YYYY:r.getFullYear(),MM:r.getMonth()+1,DD:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds()},n=t;return Object.keys(e).forEach(function(i){var a=e[i];n=n.replace(i,i==="YYYY"?"".concat(a):"".concat(a).padStart(2,"0"))}),n}function fA(r,t){return El(r).getTime()-El(t).getTime()}function dA(r,t){var e=__read([El(r),El(t)],2),n=e[0],i=e[1];return n.getFullYear()!==i.getFullYear()?"year":n.getMonth()!==i.getMonth()?"month":n.getDay()!==i.getDay()?"day":n.getHours()!==i.getHours()?"hour":n.getMinutes()!==i.getMinutes()?"minute":"second"}function pA(r,t){var e=new Date(r),n={year:function(i){i.setMonth(0),i.setHours(0,0,0,0)},month:function(i){i.setDate(1),i.setHours(0,0,0,0)},day:function(i){return i.setHours(0,0,0,0)},hour:function(i){return i.setMinutes(0,0,0)},minute:function(i){return i.setSeconds(0,0)},second:function(i){return i.setMilliseconds(0)}};return n[t](e),Bn(e,Nw(["year",t]))}function jw(r,t){if(r.length<=t)return r;for(var e=Math.floor(r.length/t),n=[],i=0;i<r.length;i+=e)n.push(r[i]);return n}var ju={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new x.y$({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},vA=(0,Jn.Z)({},ju,{style:{type:"arc"}}),gA=(0,Jn.Z)({},ju,{style:{}}),ze=Pr({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis");function ri(r,t){return[r[0]*t,r[1]*t]}function lo(r,t){return[r[0]+t[0],r[1]+t[1]]}function Bu(r,t){return[r[0]-t[0],r[1]-t[1]]}function $i(r,t){return[Math.min(r[0],t[0]),Math.min(r[1],t[1])]}function Ui(r,t){return[Math.max(r[0],t[0]),Math.max(r[1],t[1])]}function co(r,t){return Math.sqrt(Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2))}function _v(r){if(r[0]===0&&r[1]===0)return[0,0];var t=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2));return[r[0]/t,r[1]/t]}function yA(r,t,e){var n=__read(r,2),i=n[0],a=n[1],o=__read(t,2),s=o[0],l=o[1],c=i-s,u=a-l,h=Math.sin(e),f=Math.cos(e);return[c*f-u*h+s,c*h+u*f+l]}function Bw(r,t){return t?[r[1],-r[0]]:[-r[1],r[0]]}function ba(r){return r*Math.PI/180}function xv(r){return Number((r*180/Math.PI).toPrecision(5))}function wl(r,t){return r.style.opacity||(r.style.opacity=1),Rr(r,{opacity:0},t)}var Fw=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function zw(r){return Fw.includes(r)}function Ev(r){var t={};for(var e in r)zw(e)&&(t[e]=r[e]);return t}var _a=Pr({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function wv(r){return r.reduce(function(t,e,n){return t.push((0,w.ev)([n===0?"M":"L"],(0,w.CR)(e),!1)),t},[])}function Ww(r,t,e){var n=t.connect,i=n===void 0?"line":n,a=t.center;if(i==="line")return wv(r);if(!a)return[];var o=co(r[0],a),s=e?0:1;return r.reduce(function(l,c,u){return u===0?l.push((0,w.ev)(["M"],(0,w.CR)(c),!1)):l.push((0,w.ev)(["A",o,o,0,0,s],(0,w.CR)(c),!1)),l},[])}function Fu(r,t,e){return t.type==="surround"?Ww(r,t,e):wv(r)}function Gw(r,t,e){var n=e.type,i=e.connect,a=e.center,o=e.closed,s=o?[["Z"]]:[],l=(0,w.CR)([Fu(r,e),Fu(t.slice().reverse(),e,!0)],2),c=l[0],u=l[1],h=(0,w.CR)([r[0],t.slice(-1)[0]],2),f=h[0],d=h[1],p=function(b,E){return[c,b,u,E,s].flat()};if(i==="line"||n==="surround")return p([(0,w.ev)(["L"],(0,w.CR)(d),!1)],[(0,w.ev)(["L"],(0,w.CR)(f),!1)]);if(!a)throw new Error("Arc grid need to specified center");var g=(0,w.CR)([co(d,a),co(f,a)],2),y=g[0],m=g[1];return p([(0,w.ev)(["A",y,y,0,0,1],(0,w.CR)(d),!1),(0,w.ev)(["L"],(0,w.CR)(d),!1)],[(0,w.ev)(["A",m,m,0,0,0],(0,w.CR)(f),!1),(0,w.ev)(["L"],(0,w.CR)(f),!1)])}function Vw(r,t,e,n){var i=e.animate,a=e.isBillboard,o=t.map(function(s,l){return{id:s.id||"grid-line-".concat(l),d:Fu(s.points,e)}});return r.selectAll(_a.line.class).data(o,function(s){return s.id}).join(function(s){return s.append("path").each(function(l,c){var u=vr(Ev((0,w.pi)({d:l.d},n)),[l,c,o]);this.attr((0,w.pi)({class:_a.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},u))})},function(s){return s.transition(function(l,c){var u=vr(Ev((0,w.pi)({d:l.d},n)),[l,c,o]);return Rr(this,u,i.update)})},function(s){return s.transition(function(){var l=this,c=wl(this,i.exit);return ma(c,function(){return l.remove()}),c})}).transitions()}function Hw(r,t,e){var n=e.animate,i=e.connect,a=e.areaFill;if(t.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(p){return o[p%o.length]},l=[],c=0;c<t.length-1;c++){var u=(0,w.CR)([t[c].points,t[c+1].points],2),h=u[0],f=u[1],d=Gw(h,f,e);l.push({d,fill:s(c)})}return r.selectAll(_a.region.class).data(l,function(p,g){return g}).join(function(p){return p.append("path").each(function(g,y){var m=vr(g,[g,y,l]);this.attr(m)}).attr("className",_a.region.name)},function(p){return p.transition(function(g,y){var m=vr(g,[g,y,l]);return Rr(this,m,n.update)})},function(p){return p.transition(function(){var g=this,y=wl(this,n.exit);return ma(y,function(){return g.remove()}),y})}).transitions()}function Zw(r){var t=r.data,e=t===void 0?[]:t,n=r.closed;return n?e.map(function(i){var a=i.points,o=(0,w.CR)(a,1),s=o[0];return(0,w.pi)((0,w.pi)({},i),{points:(0,w.ev)((0,w.ev)([],(0,w.CR)(a),!1),[s],!1)})}):e}var $w=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,n){var i=e.type,a=e.center,o=e.areaFill,s=e.closed,l=(0,w._T)(e,["type","center","areaFill","closed"]),c=Zw(e),u=ge(n).maybeAppendByClassName(_a.lineGroup,"g"),h=ge(n).maybeAppendByClassName(_a.regionGroup,"g"),f=Vw(u,c,e,l),d=Hw(h,c,e);return(0,w.ev)((0,w.ev)([],(0,w.CR)(f),!1),(0,w.CR)(d),!1)},t}(rn),Uw=function(r,t){return function(e){return r*(1-e)+t*e}};function Yw(r,t){var e=t?t.length:0,n=r?Math.min(e,r.length):0;return function(i){var a=new Array(n),o=new Array(e),s=0;for(s=0;s<n;++s)a[s]=zu(r[s],t[s]);for(;s<e;++s)o[s]=t[s];for(s=0;s<n;++s)o[s]=a[s](i);return o}}function Kw(r,t){r===void 0&&(r={}),t===void 0&&(t={});var e={},n={};return Object.entries(t).forEach(function(i){var a=(0,w.CR)(i,2),o=a[0],s=a[1];o in r?e[o]=zu(r[o],s):n[o]=s}),function(i){return Object.entries(e).forEach(function(a){var o=(0,w.CR)(a,2),s=o[0],l=o[1];return n[s]=l(i)}),n}}function zu(r,t){return typeof r=="number"&&typeof t=="number"?Uw(r,t):Array.isArray(r)&&Array.isArray(t)?Yw(r,t):typeof r=="object"&&typeof t=="object"?Kw(r,t):function(e){return r}}function Xw(r,t,e,n){if(!n)return r.attr("__keyframe_data__",e),null;var i=n.duration,a=i===void 0?0:i,o=zu(t,e),s=Math.ceil(+a/16),l=new Array(s).fill(0).map(function(c,u,h){return{__keyframe_data__:o(u/(h.length-1))}});return r.animate(l,(0,w.pi)({fill:"both"},n))}function Sv(r,t){var e={},n=Array.isArray(t)?t:[t];for(var i in r)n.includes(i)||(e[i]=r[i]);return e}function Ov(r,t){return Object.fromEntries(Object.entries(r).map(function(e){var n=(0,w.CR)(e,2),i=n[0],a=n[1];return[i,vr(a,t)]}))}function mA(r){if(r.type==="linear"){var t=r.startPos,e=r.endPos;return __spreadArray(__spreadArray([],__read(t),!1),__read(e),!1)}var n=r.startAngle,i=r.endAngle,a=r.center,o=r.radius;return __spreadArray(__spreadArray([n,i],__read(a),!1),[o],!1)}function Wu(r,t){return t&&(0,Se.Z)(t)?r.filter(t):r}function Mv(r,t){var e=t.startAngle,n=t.endAngle;return(n-e)*r+e}function Sl(r,t){if(t.type==="linear"){var e=(0,w.CR)(t.startPos,2),n=e[0],i=e[1],a=(0,w.CR)(t.endPos,2),o=a[0],s=a[1],l=(0,w.CR)([o-n,s-i],2),c=l[0],u=l[1];return _v([c,u])}var h=ba(Mv(r,t));return[-Math.sin(h),Math.cos(h)]}function Gu(r,t,e){var n=Sl(r,e);return Bw(n,t!=="positive")}function uo(r,t){return Gu(r,t.labelDirection,t)}function qw(r,t){var e=(0,w.CR)(t.startPos,2),n=e[0],i=e[1],a=(0,w.CR)(t.endPos,2),o=a[0],s=a[1],l=(0,w.CR)([o-n,s-i],2),c=l[0],u=l[1];return[n+c*r,i+u*r]}function Qw(r,t){var e=t.radius,n=(0,w.CR)(t.center,2),i=n[0],a=n[1],o=ba(Mv(r,t));return[i+e*Math.cos(o),a+e*Math.sin(o)]}function Ol(r,t){return t.type==="linear"?qw(r,t):Qw(r,t)}function Vu(r){return Sl(0,r)[1]===0}function Cv(r){return Sl(0,r)[0]===0}function Tv(r,t){return t-r===360}function Av(r,t,e,n,i){var a=t-r,o=(0,w.CR)([i,i],2),s=o[0],l=o[1],c=(0,w.CR)([ba(r),ba(t)],2),u=c[0],h=c[1],f=function(C){return[e+i*Math.cos(C),n+i*Math.sin(C)]},d=(0,w.CR)(f(u),2),p=d[0],g=d[1],y=(0,w.CR)(f(h),2),m=y[0],b=y[1];if(Tv(r,t)){var E=(h+u)/2,O=(0,w.CR)(f(E),2),M=O[0],k=O[1];return[["M",p,g],["A",s,l,0,1,0,M,k],["A",s,l,0,1,0,m,b]]}var D=a>180?1:0,N=r>t?0:1,rt=!1;return rt?"M".concat(e,",").concat(n,",L").concat(p,",").concat(g,",A").concat(s,",").concat(l,",0,").concat(D,",").concat(N,",").concat(m,",").concat(b,",L").concat(e,",").concat(n):"M".concat(p,",").concat(g,",A").concat(s,",").concat(l,",0,").concat(D,",").concat(N,",").concat(m,",").concat(b)}function Jw(r){var t=r.attributes,e=t.startAngle,n=t.endAngle,i=t.center,a=t.radius;return(0,w.ev)((0,w.ev)([e,n],(0,w.CR)(i),!1),[a],!1)}function tS(r,t,e,n){var i=t.startAngle,a=t.endAngle,o=t.center,s=t.radius;return r.selectAll(ze.line.class).data([{d:Av.apply(void 0,(0,w.ev)((0,w.ev)([i,a],(0,w.CR)(o),!1),[s],!1))}],function(l,c){return c}).join(function(l){return l.append("path").attr("className",ze.line.name).styles(t).styles({d:function(c){return c.d}})},function(l){return l.transition(function(){var c=this,u=Xw(this,Jw(this),(0,w.ev)((0,w.ev)([i,a],(0,w.CR)(o),!1),[s],!1),n.update);if(u){var h=function(){var f=Un(c.attributes,"__keyframe_data__");c.style.d=Av.apply(void 0,(0,w.ev)([],(0,w.CR)(f),!1))};u.onframe=h,u.onfinish=h}return u}).styles(t)},function(l){return l.remove()}).styles(e).transitions()}function eS(r,t){var e=t.truncRange,n=t.truncShape,i=t.lineExtension}function nS(r,t,e){e===void 0&&(e=[0,0]);var n=(0,w.CR)([r,t,e],3),i=(0,w.CR)(n[0],2),a=i[0],o=i[1],s=(0,w.CR)(n[1],2),l=s[0],c=s[1],u=(0,w.CR)(n[2],2),h=u[0],f=u[1],d=(0,w.CR)([l-a,c-o],2),p=d[0],g=d[1],y=Math.sqrt(Math.pow(p,2)+Math.pow(g,2)),m=(0,w.CR)([-h/y,f/y],2),b=m[0],E=m[1];return[b*p,b*g,E*p,E*g]}function Pv(r){var t=(0,w.CR)(r,2),e=(0,w.CR)(t[0],2),n=e[0],i=e[1],a=(0,w.CR)(t[1],2),o=a[0],s=a[1];return{x1:n,y1:i,x2:o,y2:s}}function rS(r,t,e,n){var i=t.showTrunc,a=t.startPos,o=t.endPos,s=t.truncRange,l=t.lineExtension,c=(0,w.CR)([a,o],2),u=(0,w.CR)(c[0],2),h=u[0],f=u[1],d=(0,w.CR)(c[1],2),p=d[0],g=d[1],y=(0,w.CR)(l?nS(a,o,l):new Array(4).fill(0),4),m=y[0],b=y[1],E=y[2],O=y[3],M=function(wt){return r.selectAll(ze.line.class).data(wt,function(Ct,$t){return $t}).join(function(Ct){return Ct.append("line").attr("className",function($t){return"".concat(ze.line.name," ").concat($t.className)}).styles(e).transition(function($t){return Rr(this,Pv($t.line),!1)})},function(Ct){return Ct.styles(e).transition(function($t){var ie=$t.line;return Rr(this,Pv(ie),n.update)})},function(Ct){return Ct.remove()}).transitions()};if(!i||!s)return M([{line:[[h+m,f+b],[p+E,g+O]],className:ze.line.name}]);var k=(0,w.CR)(s,2),D=k[0],N=k[1],rt=p-h,C=g-f,S=(0,w.CR)([h+rt*D,f+C*D],2),A=S[0],j=S[1],Y=(0,w.CR)([h+rt*N,f+C*N],2),ot=Y[0],Lt=Y[1],Xt=M([{line:[[h+m,f+b],[A,j]],className:ze.lineFirst.name},{line:[[ot,Lt],[p+E,g+O]],className:ze.lineSecond.name}]);return eS(r,t),Xt}function iS(r,t,e,n){var i=e.showArrow,a=e.showTrunc,o=e.lineArrow,s=e.lineArrowOffset,l=e.lineArrowSize,c;if(t==="arc"?c=r.select(ze.line.class):a?c=r.select(ze.lineSecond.class):c=r.select(ze.line.class),!i||!o||e.type==="arc"&&Tv(e.startAngle,e.endAngle)){var u=c.node();u&&(u.style.markerEnd=void 0);return}var h=ni(o);h.attr(n),Pu(h,l,!0),c.style("markerEnd",h).style("markerEndOffset",-s)}function aS(r,t,e){var n=t.type,i,a=Te(t,"line");return n==="linear"?i=rS(r,t,Sv(a,"arrow"),e):i=tS(r,t,Sv(a,"arrow"),e),iS(r,n,t,a),i}function oS(r,t){return Gu(r,t.gridDirection,t)}function Rv(r){var t=r.type,e=r.gridCenter;return t==="linear"?e:e||r.center}function sS(r,t){var e=t.gridLength;return r.map(function(n,i){var a=n.value,o=(0,w.CR)(Ol(a,t),2),s=o[0],l=o[1],c=(0,w.CR)(ri(oS(a,t),e),2),u=c[0],h=c[1];return{id:i,points:[[s,l],[s+u,l+h]]}})}function lS(r,t){var e=t.gridControlAngles,n=Rv(t);if(!n)throw new Error("grid center is not provide");if(r.length<2)throw new Error("Invalid grid data");if(!e||e.length===0)throw new Error("Invalid gridControlAngles");var i=(0,w.CR)(n,2),a=i[0],o=i[1];return r.map(function(s,l){var c=s.value,u=(0,w.CR)(Ol(c,t),2),h=u[0],f=u[1],d=(0,w.CR)([h-a,f-o],2),p=d[0],g=d[1],y=[];return e.forEach(function(m){var b=ba(m),E=(0,w.CR)([Math.cos(b),Math.sin(b)],2),O=E[0],M=E[1],k=p*O-g*M+a,D=p*M+g*O+o;y.push([k,D])}),{points:y,id:l}})}function cS(r,t,e,n){var i=Te(e,"grid"),a=i.type,o=i.areaFill,s=Rv(e),l=Wu(t,e.gridFilter),c=a==="segment"?sS(l,e):lS(l,e),u=(0,w.pi)((0,w.pi)({},i),{center:s,areaFill:(0,Se.Z)(o)?l.map(function(h,f){return vr(o,[h,f,l])}):o,animate:n,data:c});return r.selectAll(ze.grid.class).data([1]).join(function(h){return h.append(function(){return new $w({style:u})}).attr("className",ze.grid.name)},function(h){return h.transition(function(){return this.update(u)})},function(h){return h.remove()}).transitions()}function Pn(r,t,e,n,i){return n===void 0&&(n=!0),i===void 0&&(i=!1),n&&r===t||i&&r===e?!0:r>t&&r<e}function uS(r,t,e,n){e===void 0&&(e=2),n===void 0&&(n="top"),pv(r,{wordWrap:!0,wordWrapWidth:t,maxLines:e,textBaseline:n})}function hS(r,t,e){var n=r.getBBox(),i=n.width,a=n.height,o=(0,w.CR)([t,e].map(function(c,u){var h;return c.includes("%")?parseFloat(((h=c.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||h===void 0?void 0:h[0])||"0")/100*(u===0?i:a):c}),2),s=o[0],l=o[1];return[s,l]}function Dv(r,t){if(t)try{var e=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,n=t.replace(e,function(i,a,o){return"translate(".concat(hS(r,a,o),")")});r.attr("transform",n)}catch(i){}}var Hu=function(){function r(t,e,n,i){this.set(t,e,n,i)}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),r.prototype.rotatedPoints=function(t,e,n){var i=this,a=i.x1,o=i.y1,s=i.x2,l=i.y2,c=Math.cos(t),u=Math.sin(t),h=e-e*c+n*u,f=n-e*u-n*c,d=[[c*a-u*l+h,u*a+c*l+f],[c*s-u*l+h,u*s+c*l+f],[c*a-u*o+h,u*a+c*o+f],[c*s-u*o+h,u*s+c*o+f]];return d},r.prototype.set=function(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},r.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},r}();function Ml(r,t){var e=r.getEulerAngles()||0;r.setEulerAngles(0);var n=r.getBounds(),i=(0,w.CR)(n.min,2),a=i[0],o=i[1],s=(0,w.CR)(n.max,2),l=s[0],c=s[1],u=r.getBBox(),h=u.width,f=u.height,d=f,p=0,g=0,y=a,m=o,b=dv(r);if(b){d-=1.5;var E=b.style.textAlign,O=b.style.textBaseline;E==="center"?y=(a+l)/2:(E==="right"||E==="end")&&(y=l),O==="middle"?m=(o+c)/2:O==="bottom"&&(m=c)}var M=(0,w.CR)(An(t),4),k=M[0],D=k===void 0?0:k,N=M[1],rt=N===void 0?0:N,C=M[2],S=C===void 0?D:C,A=M[3],j=A===void 0?rt:A,Y=new Hu((p+=a)-j,(g+=o)-D,p+h+rt,g+d+S);return r.setEulerAngles(e),Y.rotatedPoints(ba(e),y,m)}function ho(r,t){return t[0]<=Math.max(r[0][0],r[1][0])&&t[0]<=Math.min(r[0][0],r[1][0])&&t[1]<=Math.max(r[0][1],r[1][1])&&t[1]<=Math.min(r[0][1],r[1][1])}function fo(r,t,e){var n=(t[1]-r[1])*(e[0]-t[0])-(t[0]-r[0])*(e[1]-t[1]);return n===0?0:n<0?2:1}function fS(r,t){var e=fo(r[0],r[1],t[0]),n=fo(r[0],r[1],t[1]),i=fo(t[0],t[1],r[0]),a=fo(t[0],t[1],r[1]);return!!(e!==n&&i!==a||e===0&&ho(r,t[0])||n===0&&ho(r,t[1])||i===0&&ho(t,r[0])||a===0&&ho(t,r[1]))}function dS(r,t){var e=r.length;if(e<3)return!1;var n=[t,[9999,t[1]]],i=0,a=0;do{var o=[r[a],r[(a+1)%e]];if(fS(o,n)){if(fo(o[0],t,o[1])===0)return ho(o,t);i++}a=(a+1)%e}while(a!==0);return!!(i&1)}function pS(r,t){return t.every(function(e){return dS(r,e)})}function vS(r,t,e){var n=r.x1,i=r.x2,a=r.y1,o=r.y2,s=[[n,a],[i,a],[i,o],[n,o]],l=Ml(t,e);return pS(s,l)}function kv(r,t){var e=(0,w.CR)(r,4),n=e[0],i=e[1],a=e[2],o=e[3],s=(0,w.CR)(t,4),l=s[0],c=s[1],u=s[2],h=s[3],f=a-n,d=o-i,p=u-l,g=h-c,y=f*g-p*d;if(y===0)return!1;var m=y>0,b=n-l,E=i-c,O=f*E-d*b;if(O<0===m)return!1;var M=p*E-g*b;return!(M<0===m||O>y===m||M>y===m)}function Lv(r,t){var e=[[r[0],r[1],r[2],r[3]],[r[2],r[3],r[4],r[5]],[r[4],r[5],r[6],r[7]],[r[6],r[7],r[0],r[1]]];return e.some(function(n){return kv(t,n)})}var bA={lineToLine:kv,intersectBoxLine:Lv,getBounds:Ml};function gS(r,t,e){var n,i,a=Ml(r,e).flat(1),o=Ml(t,e).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var l=(0,w.XA)(s),c=l.next();!c.done;c=l.next()){var u=c.value;if(Lv(o,u))return!0}}catch(h){n={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return!1}function yS(r,t){var e=r.type,n=r.labelDirection,i=r.crossSize;if(!i)return!1;if(e==="arc"){var a=r.center,o=r.radius,s=(0,w.CR)(a,2),l=s[0],c=s[1],u=n==="negative"?0:i,h=-o-u,f=o+u,d=(0,w.CR)(An(t),4),p=d[0],g=d[1],y=d[2],m=d[3];return new Hu(l+h-m,c+h-p,l+f+g,c+f+y)}var b=(0,w.CR)(r.startPos,2),E=b[0],O=b[1],M=(0,w.CR)(r.endPos,2),k=M[0],D=M[1],N=(0,w.CR)(Cv(r)?[-t,0,t,0]:[0,t,0,-t],4),rt=N[0],C=N[1],S=N[2],A=N[3],j=uo(0,r),Y=ri(j,i),ot=new Hu(E,O,k,D);return ot.x1+=A,ot.y1+=rt,ot.x2+=C+Y[0],ot.y2+=S+Y[1],ot}function Cl(r,t,e){var n,i,a=t.crossPadding,o=new Set,s=null,l=yS(t,a),c=function(p){return l?vS(l,p):!0},u=function(p,g){return!p||!p.firstChild?!0:!gS(p.firstChild,g.firstChild,An(e))};try{for(var h=(0,w.XA)(r),f=h.next();!f.done;f=h.next()){var d=f.value;c(d)?!s||u(s,d)?s=d:(o.add(s),o.add(d)):o.add(d)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return Array.from(o)}function Zu(r,t){return t===void 0&&(t={}),(0,Nt.Z)(r)?0:typeof r=="number"?r:Math.floor(Mw(r,t))}function mS(r,t,e,n){if(!(r.length<=1)){var i=t.suffix,a=i===void 0?"...":i,o=t.minLength,s=t.maxLength,l=s===void 0?1/0:s,c=t.step,u=c===void 0?" ":c,h=t.margin,f=h===void 0?[0,0,0,0]:h,d=fv(n.getTextShape(r[0])),p=Zu(u,d),g=o?Zu(o,d):p,y=Zu(l,d);((0,Nt.Z)(y)||y===1/0)&&(y=Math.max.apply(null,r.map(function(Y){return Y.getBBox().width})));for(var m=r.slice(),b=(0,w.CR)(f,4),E=b[0],O=E===void 0?0:E,M=b[1],k=M===void 0?0:M,D=b[2],N=D===void 0?O:D,rt=b[3],C=rt===void 0?k:rt,S=function(Y){if(m.forEach(function(ot){n.ellipsis(n.getTextShape(ot),Y,a)}),m=Cl(r,e,f),m.length<1)return{value:void 0}},A=y;A>g+p;A-=p){var j=S(A);if(typeof j=="object")return j.value}}}var bS=function(r){return r!==void 0&&r!=null&&!Number.isNaN(r)},_S={parity:function(r,t){var e=t.seq,n=e===void 0?2:e;return r.filter(function(i,a){return a%n?(Ar(i),!1):!0})}},xS=function(r){return r.filter(bS)};function ES(r,t,e,n){var i=r.length,a=t.keepHeader,o=t.keepTail;if(!(i<=1||i===2&&a&&o)){var s=_S.parity,l=function(E){return E.forEach(n.show),E},c=2,u=r.slice(),h=r.slice(),f=Math.min.apply(Math,(0,w.ev)([1],(0,w.CR)(r.map(function(E){return E.getBBox().width})),!1));if(e.type==="linear"&&(Vu(e)||Cv(e))){var d=hv(r[0]).left,p=hv(r[i-1]).right,g=Math.abs(p-d)||1;c=Math.max(Math.floor(i*f/g),c)}var y,m;for(a&&(y=u.splice(0,1)[0]),o&&(m=u.splice(-1,1)[0],u.reverse()),l(u);c<r.length&&Cl(xS(m?(0,w.ev)((0,w.ev)([m],(0,w.CR)(h),!1),[y],!1):(0,w.ev)([y],(0,w.CR)(h),!1)),e,t==null?void 0:t.margin).length;){if(m&&!y&&c%2===0){var b=u.splice(0,1);b.forEach(n.hide)}else if(m&&y){var b=u.splice(0,1);b.forEach(n.hide)}h=s(l(u),{seq:c}),c++}}}function wS(r,t,e,n){var i,a,o=t.optionalAngles,s=o===void 0?[0,45,90]:o,l=t.margin,c=t.recoverWhenFailed,u=c===void 0?!0:c,h=r.map(function(m){return m.getLocalEulerAngles()}),f=function(){return Cl(r,e,l).length<1},d=function(m){return r.forEach(function(b,E){var O=Array.isArray(m)?m[E]:m;n.rotate(b,+O)})};try{for(var p=(0,w.XA)(s),g=p.next();!g.done;g=p.next()){var y=g.value;if(d(y),f())return}}catch(m){i={error:m}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u&&d(h)}function SS(r){var t=r.type,e=r.labelDirection;return t==="linear"&&Vu(r)?e==="negative"?"bottom":"top":"middle"}function OS(r,t,e,n){var i=t.wordWrapWidth,a=i===void 0?50:i,o=t.maxLines,s=o===void 0?3:o,l=t.recoverWhenFailed,c=l===void 0?!0:l,u=t.margin,h=u===void 0?[0,0,0,0]:u,f=r.map(function(b){return b.attr("maxLines")||1}),d=Math.min.apply(Math,(0,w.ev)([],(0,w.CR)(f),!1)),p=function(){return Cl(r,e,h).length<1},g=SS(e),y=function(b){return r.forEach(function(E,O){var M=Array.isArray(b)?b[O]:b;n.wrap(E,a,M,g)})};if(!(d>s)){if(e.type==="linear"&&Vu(e)){if(y(s),p())return}else for(var m=d;m<=s;m++)if(y(m),p())return;c&&y(f)}}var MS=new Map([["hide",ES],["rotate",wS],["ellipsis",mS],["wrap",OS]]);function CS(r,t,e){return t.labelOverlap.length<1?!1:e==="hide"?!kE(r[0]):e==="rotate"?!r.some(function(n){var i;return!!(!((i=n.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):e==="ellipsis"||e==="wrap"?r.filter(function(n){return n.querySelector("text")}).length>1:!0}function TS(r,t,e){var n=t.labelOverlap,i=n===void 0?[]:n;i.length&&i.forEach(function(a){var o=a.type,s=MS.get(o);CS(r,t,o)&&(s==null||s(r,a,t,e))})}function AS(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=function(n){return n==="positive"?-1:1};return r.reduce(function(n,i){return n*e(i)},1)}function Iv(r){for(var t=r;t<0;)t+=360;return Math.round(t%360)}function $u(r,t){var e=(0,w.CR)(r,2),n=e[0],i=e[1],a=(0,w.CR)(t,2),o=a[0],s=a[1],l=(0,w.CR)([n*o+i*s,n*s-i*o],2),c=l[0],u=l[1];return Math.atan2(u,c)}function PS(r){var t=(r+360)%180;return Pn(t,-90,90)||(t+=180),t}function RS(r,t,e){var n,i=e.labelAlign,a=(n=t.style.transform)===null||n===void 0?void 0:n.includes("rotate");if(a)return t.getLocalEulerAngles();var o=0,s=uo(r.value,e),l=Sl(r.value,e);return i==="horizontal"?0:(i==="perpendicular"?o=$u([1,0],s):o=$u([l[0]<0?-1:1,0],l),PS(xv(o)))}function Nv(r,t,e){var n=e.type,i=e.labelAlign,a=uo(r,e),o=Iv(t),s=Iv(xv($u([1,0],a))),l="center",c="middle";return n==="linear"?[90,270].includes(s)&&o===0?(l="center",c=a[1]===1?"top":"bottom"):!(s%180)&&[90,270].includes(o)?l="center":s===0?(Pn(o,0,90,!1,!0)||Pn(o,0,90)||Pn(o,270,360))&&(l="start"):s===90?Pn(o,0,90,!1,!0)?l="start":(Pn(o,90,180)||Pn(o,270,360))&&(l="end"):s===270?Pn(o,0,90,!1,!0)?l="end":(Pn(o,90,180)||Pn(o,270,360))&&(l="start"):s===180&&(o===90?l="start":(Pn(o,0,90)||Pn(o,270,360))&&(l="end")):i==="parallel"?Pn(s,0,180,!0)?c="top":c="bottom":i==="horizontal"?Pn(s,90,270,!1)?l="end":(Pn(s,270,360,!1)||Pn(s,0,90))&&(l="start"):i==="perpendicular"&&(Pn(s,90,270)?l="end":l="start"),{textAlign:l,textBaseline:c}}function DS(r,t,e){t.setLocalEulerAngles(r);var n=t.__data__.value,i=Nv(n,r,e),a=t.querySelector(ze.labelItem.class);a&&Bv(a,i)}function jv(r,t,e){var n=e.showTick,i=e.tickLength,a=e.tickDirection,o=e.labelDirection,s=e.labelSpacing,l=t.indexOf(r),c=vr(s,[r,l,t]),u=(0,w.CR)([uo(r.value,e),AS(o,a)],2),h=u[0],f=u[1],d=f===1?vr(n?i:0,[r,l,t]):0,p=(0,w.CR)(lo(ri(h,c+d),Ol(r.value,e)),2),g=p[0],y=p[1];return{x:g,y}}function kS(r,t,e,n){var i=n.labelFormatter,a=(0,Se.Z)(i)?function(){return ni(vr(i,[r,t,e,uo(r.value,n)]))}:function(){return ni(r.label||"")};return a}function Bv(r,t){r.nodeName==="text"&&r.attr(t)}function LS(r){TS(this.node().childNodes,r,{hide:Ar,show:ao,rotate:function(t,e){DS(+e,t,r)},ellipsis:function(t,e,n){t&&ku(t,e||1/0,n)},wrap:function(t,e,n){t&&uS(t,e,n)},getTextShape:function(t){return t.querySelector("text")}})}function Fv(r,t,e,n,i){var a=e.indexOf(t),o=ge(r).append(kS(t,a,e,i)).attr("className",ze.labelItem.name).node(),s=(0,w.CR)(ei(Ov(n,[t,a,e])),2),l=s[0],c=s[1],u=c.transform,h=(0,w._T)(c,["transform"]);Dv(o,u);var f=RS(t,o,i);return o.getLocalEulerAngles()||o.setLocalEulerAngles(f),Bv(o,(0,w.pi)((0,w.pi)({},Nv(t.value,f,i)),l)),r.attr(h),o}function IS(r,t,e,n){var i=Wu(t,e.labelFilter),a=Te(e,"label"),o,s=r.selectAll(ze.label.class).data(i,function(l,c){return c}).join(function(l){return l.append("g").attr("className",ze.label.name).transition(function(c){Fv(this,c,t,a,e);var u=jv(c,t,e),h=u.x,f=u.y;return this.style.transform="translate(".concat(h,", ").concat(f,")"),null})},function(l){return l.transition(function(c){var u=this.querySelector(ze.labelItem.class),h=Fv(this,c,t,a,e),f=QE(u,h,n.update),d=jv(c,t,e),p=d.x,g=d.y,y=Rr(this,{transform:"translate(".concat(p,", ").concat(g,")")},n.update);return(0,w.ev)((0,w.ev)([],(0,w.CR)(f),!1),[y],!1)})},function(l){return o=l,l.transition(function(){var c=this,u=wl(this.childNodes[0],n.exit);return ma(u,function(){return ge(c).remove()}),u}),o}).transitions();return XE(s,function(){LS.call(r,e)}),s}function zv(r,t){return Gu(r,t.tickDirection,t)}function NS(r,t){var e=(0,w.CR)(r,2),n=e[0],i=e[1];return[[0,0],[n*t,i*t]]}function jS(r,t,e,n,i){var a=i.tickLength,o=(0,w.CR)(NS(n,vr(a,[r,t,e])),2),s=(0,w.CR)(o[0],2),l=s[0],c=s[1],u=(0,w.CR)(o[1],2),h=u[0],f=u[1];return{x1:l,x2:h,y1:c,y2:f}}function BS(r,t,e,n,i){var a=i.tickFormatter,o=zv(t.value,i),s="line";return(0,Se.Z)(a)&&(s=function(){return vr(a,[t,e,n,o])}),r.append(s).attr("className",ze.tickItem.name)}function FS(r,t,e,n,i,a,o){var s=zv(r.value,a),l=jS(r,t,e,s,a),c=l.x1,u=l.x2,h=l.y1,f=l.y2,d=(0,w.CR)(ei(Ov(o,[r,t,e,s])),2),p=d[0],g=d[1];n.node().nodeName==="line"&&n.styles((0,w.pi)({x1:c,x2:u,y1:h,y2:f},p)),i.attr(g),n.styles(p)}function Wv(r,t,e,n,i,a){var o=BS(ge(this),r,t,e,n);FS(r,t,e,o,this,n,i);var s=(0,w.CR)(Ol(r.value,n),2),l=s[0],c=s[1];return Rr(this,{transform:"translate(".concat(l,", ").concat(c,")")},a)}function zS(r,t,e,n){var i=Wu(t,e.tickFilter),a=Te(e,"tick");return r.selectAll(ze.tick.class).data(i,function(o){return o.id||o.label}).join(function(o){return o.append("g").attr("className",ze.tick.name).transition(function(s,l){return Wv.call(this,s,l,i,e,a,!1)})},function(o){return o.transition(function(s,l){return this.removeChildren(),Wv.call(this,s,l,i,e,a,n.update)})},function(o){return o.transition(function(){var s=this,l=wl(this.childNodes[0],n.exit);return ma(l,function(){return s.remove()}),l})}).transitions()}function WS(r,t,e){var n=e.titlePosition,i=n===void 0?"lb":n,a=e.titleSpacing,o=yl(i),s=r.node().getLocalBounds(),l=(0,w.CR)(s.min,2),c=l[0],u=l[1],h=(0,w.CR)(s.halfExtents,2),f=h[0],d=h[1],p=(0,w.CR)(t.node().getLocalBounds().halfExtents,2),g=p[0],y=p[1],m=(0,w.CR)([c+f,u+d],2),b=m[0],E=m[1],O=(0,w.CR)(An(a),4),M=O[0],k=O[1],D=O[2],N=O[3];if(["start","end"].includes(i)&&e.type==="linear"){var rt=e.startPos,C=e.endPos,S=(0,w.CR)(i==="start"?[rt,C]:[C,rt],2),A=S[0],j=S[1],Y=_v([-j[0]+A[0],-j[1]+A[1]]),ot=(0,w.CR)(ri(Y,M),2),Lt=ot[0],Xt=ot[1];return{x:A[0]+Lt,y:A[1]+Xt}}return o.includes("t")&&(E-=d+y+M),o.includes("r")&&(b+=f+g+k),o.includes("l")&&(b-=f+g+N),o.includes("b")&&(E+=d+y+D),{x:b,y:E}}function GS(r,t,e){var n=r.getGeometryBounds().halfExtents,i=n[1]*2;if(t==="vertical"){if(e==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(e==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function Gv(r,t,e,n,i){var a=Te(n,"title"),o=(0,w.CR)(ei(a),2),s=o[0],l=o[1],c=l.transform,u=l.transformOrigin,h=(0,w._T)(l,["transform","transformOrigin"]);t.styles(h);var f=c||GS(r.node(),s.direction,s.position);r.styles((0,w.pi)((0,w.pi)({},s),{transformOrigin:u})),Dv(r.node(),f);var d=WS(ge(e._offscreen||e.querySelector(ze.mainGroup.class)),t,n),p=d.x,g=d.y,y=Rr(t.node(),{transform:"translate(".concat(p,", ").concat(g,")")},i);return y}function VS(r,t,e,n){var i=e.titleText;return r.selectAll(ze.title.class).data([{title:i}].filter(function(a){return!!a.title}),function(a,o){return a.title}).join(function(a){return a.append(function(){return ni(i)}).attr("className",ze.title.name).transition(function(){return Gv(ge(this),r,t,e,n.enter)})},function(a){return a.transition(function(){return Gv(ge(this),r,t,e,n.update)})},function(a){return a.remove()}).transitions()}function Vv(r,t,e,n){var i=r.showLine,a=r.showTick,o=r.showLabel,s=t.maybeAppendByClassName(ze.lineGroup,"g"),l=ir(i,s,function(d){return aS(d,r,n)})||[],c=t.maybeAppendByClassName(ze.tickGroup,"g"),u=ir(a,c,function(d){return zS(d,e,r,n)})||[],h=t.maybeAppendByClassName(ze.labelGroup,"g"),f=ir(o,h,function(d){return IS(d,e,r,n)})||[];return(0,w.ev)((0,w.ev)((0,w.ev)([],(0,w.CR)(l),!1),(0,w.CR)(u),!1),(0,w.CR)(f),!1).filter(function(d){return!!d})}var HS=function(r){(0,w.ZT)(t,r);function t(e){return r.call(this,e,ju)||this}return t.prototype.render=function(e,n,i){var a=this,o=e.titleText,s=e.data,l=e.animate,c=e.showTitle,u=e.showGrid,h=e.dataThreshold,f=e.truncRange,d=jw(s,h).filter(function(M){var k=M.value;return!(f&&k>f[0]&&k<f[1])}),p=rv(i===void 0?l:i),g=ge(n).maybeAppendByClassName(ze.gridGroup,"g"),y=ir(u,g,function(M){return cS(M,d,e,p)})||[],m=ge(n).maybeAppendByClassName(ze.mainGroup,"g");o&&(!this.initialized&&p.enter||this.initialized&&p.update)&&Vv(e,ge(this.offscreenGroup),d,rv(!1));var b=Vv(e,ge(m.node()),d,p),E=ge(n).maybeAppendByClassName(ze.titleGroup,"g"),O=ir(c,E,function(M){return VS(M,a,e,p)})||[];return(0,w.ev)((0,w.ev)((0,w.ev)([],(0,w.CR)(y),!1),(0,w.CR)(b),!1),(0,w.CR)(O),!1).flat().filter(function(M){return!!M})},t}(rn);function Hv(r){var t=r.canvas,e=r.touches,n=r.offsetX,i=r.offsetY;if(t){var a=t.x,o=t.y;return[a,o]}if(e){var s=e[0],l=s.clientX,c=s.clientY;return[l,c]}return n&&i?[n,i]:[0,0]}function Uu(r,t){return+r.toPrecision(t)}function _A(r){return r.toLocaleString()}function xA(r){return r.toExponential()}function EA(r,t){return t===void 0&&(t=0),Math.abs(r)<1e3?String(r):"".concat(Uu(r/1e3,t).toLocaleString(),"K")}var wA=function(r,t,e){return r<0&&Number.isFinite(r)?t:e},SA=function(r,t,e){return r>0&&Number.isFinite(r)?t:e},OA=function(r,t){return r*t},MA=function(r,t){return r/2+(t||0)/2},Yu=function(r){return r};class Zv{constructor(t){this.options=(0,Jn.Z)({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=(0,Jn.Z)({},this.options,t),this.rescale(t)}rescale(t){}}function Ku(r,t){return t-r?e=>(e-r)/(t-r):e=>.5}function Tl(r,...t){return t.reduce((e,n)=>i=>e(n(i)),r)}function ZS(r,t,e,n,i){let a=e||0,o=n||r.length;const s=i||(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(r[l])>t?o=l:a=l+1}return a}var $S=G(19818),US=G.n($S);function Xu(r,t,e){let n=e;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(t-r)*6*n:n<1/2?t:n<2/3?r+(t-r)*(2/3-n)*6:r}function YS(r){const t=r[0]/360,e=r[1]/100,n=r[2]/100,i=r[3];if(e===0)return[n*255,n*255,n*255,i];const a=n<.5?n*(1+e):n+e-n*e,o=2*n-a,s=Xu(o,a,t+1/3),l=Xu(o,a,t),c=Xu(o,a,t-1/3);return[s*255,l*255,c*255,i]}function $v(r){const t=US().get(r);if(!t)return null;const{model:e,value:n}=t;return e==="rgb"?n:e==="hsl"?YS(n):null}const Al=(r,t)=>e=>r*(1-e)+t*e,KS=(r,t)=>{const e=$v(r),n=$v(t);return e===null||n===null?e?()=>r:()=>t:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const h=e[u],f=n[u];a[u]=h*(1-i)+f*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},XS=(r,t)=>typeof r=="number"&&typeof t=="number"?Al(r,t):typeof r=="string"&&typeof t=="string"?KS(r,t):()=>r,qS=(r,t)=>{const e=Al(r,t);return n=>Math.round(e(n))};function QS(r){return r===null}function Uv(r){return!(0,tn.Z)(r)&&!QS(r)&&!Number.isNaN(r)}const qu=Math.sqrt(50),Qu=Math.sqrt(10),Ju=Math.sqrt(2);function Pl(r,t,e){const n=(t-r)/Math.max(0,e),i=Math.floor(Math.log(n)/Math.LN10),a=n/Eo(10,i);return i>=0?(a>=qu?10:a>=Qu?5:a>=Ju?2:1)*Eo(10,i):-Eo(10,-i)/(a>=qu?10:a>=Qu?5:a>=Ju?2:1)}function CA(r,t,e){const n=Math.abs(t-r)/Math.max(0,e);let i=Eo(10,Math.floor(Math.log(n)/Math.LN10));const a=n/i;return a>=qu?i*=10:a>=Qu?i*=5:a>=Ju&&(i*=2),t<r?-i:i}const JS=(r,t,e=5)=>{const n=[r,t];let i=0,a=n.length-1,o=n[i],s=n[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=Pl(o,s,e),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=Pl(o,s,e)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=Pl(o,s,e)),l>0?(n[i]=Math.floor(o/l)*l,n[a]=Math.ceil(s/l)*l):l<0&&(n[i]=Math.ceil(o*l)/l,n[a]=Math.floor(s*l)/l),n};function tO(r,t){const e=t<r?t:r,n=r>t?r:t;return i=>Math.min(Math.max(e,i),n)}const eO=(r,t,e)=>{const[n,i]=r,[a,o]=t;let s,l;return n<i?(s=Ku(n,i),l=e(a,o)):(s=Ku(i,n),l=e(o,a)),Tl(l,s)},nO=(r,t,e)=>{const n=Math.min(r.length,t.length)-1,i=new Array(n),a=new Array(n),o=r[0]>r[n],s=o?[...r].reverse():r,l=o?[...t].reverse():t;for(let c=0;c<n;c+=1)i[c]=Ku(s[c],s[c+1]),a[c]=e(l[c],l[c+1]);return c=>{const u=ZS(r,c,1,n)-1,h=i[u],f=a[u];return Tl(f,h)(c)}},Yv=(r,t,e,n)=>(Math.min(r.length,t.length)>2?nO:eO)(r,t,n?qS:e);class rO extends Zv{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Al,tickCount:5}}map(t){return Uv(t)?this.output(t):this.options.unknown}invert(t){return Uv(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,e,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,e,n,...i)}getTicks(){const{tickMethod:t}=this.options,[e,n,i,...a]=this.getTickMethodOptions();return t(e,n,i,...a)}getTickMethodOptions(){const{domain:t,tickCount:e}=this.options,n=t[0],i=t[t.length-1];return[n,i,e]}chooseNice(){return JS}rescale(){this.nice();const[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e))}chooseClamp(t){const{clamp:e,range:n}=this.options,i=this.options.domain.map(t),a=Math.min(i.length,n.length);return e?tO(i[0],i[a-1]):Yu}composeOutput(t,e){const{domain:n,range:i,round:a,interpolate:o}=this.options,s=Yv(n.map(t),i,o,a);this.output=Tl(s,e,t)}composeInput(t,e,n){const{domain:i,range:a}=this.options,o=Yv(a,i.map(t),Al);this.input=Tl(e,n,o)}}const iO=(r,t,e)=>{let n,i,a=r,o=t;if(a===o&&e>0)return[a];let s=Pl(a,o,e);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(n=Math.ceil(o-a+1));for(let l=0;l<n;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(n=Math.ceil(o-a+1));for(let l=0;l<n;l+=1)i[l]=(a+l)/s}return i};class po extends rO{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:XS,tickMethod:iO,tickCount:5}}chooseTransforms(){return[Yu,Yu]}clone(){return new po(this.options)}}function Kv({map:r,initKey:t},e){const n=t(e);return r.has(n)?r.get(n):e}function aO({map:r,initKey:t},e){const n=t(e);return r.has(n)?r.get(n):(r.set(n,e),e)}function oO({map:r,initKey:t},e){const n=t(e);return r.has(n)&&(e=r.get(n),r.delete(n)),e}function sO(r){return typeof r=="object"?r.valueOf():r}class Xv extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=sO,t!==null)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Kv({map:this.map,initKey:this.initKey},t))}has(t){return super.has(Kv({map:this.map,initKey:this.initKey},t))}set(t,e){return super.set(aO({map:this.map,initKey:this.initKey},t),e)}delete(t){return super.delete(oO({map:this.map,initKey:this.initKey},t))}}const th=Symbol("defaultUnknown");function qv(r,t,e){for(let n=0;n<t.length;n+=1)r.has(t[n])||r.set(e(t[n]),n)}function Qv(r){const{value:t,from:e,to:n,mapper:i,notFoundReturn:a}=r;let o=i.get(t);if(o===void 0){if(a!==th)return a;o=e.push(t)-1,i.set(t,o)}return n[o%n.length]}function Jv(r){return r instanceof Date?t=>`${t}`:typeof r=="object"?t=>JSON.stringify(t):t=>t}class eh extends Zv{getDefaultOptions(){return{domain:[],range:[],unknown:th}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&qv(this.domainIndexMap,this.getDomain(),this.domainKey),Qv({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&qv(this.rangeIndexMap,this.getRange(),this.rangeKey),Qv({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=Jv(e),this.rangeKey=Jv(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new eh(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:e}=this.options;return this.sortedDomain=e?[...t].sort(e):t,this.sortedDomain}}function lO(r){const t=Math.min(...r);return r.map(e=>e/t)}function cO(r,t){const e=r.length,n=t-e;return n>0?[...r,...new Array(n).fill(1)]:n<0?r.slice(0,t):r}function uO(r){return Math.round(r*1e12)/1e12}function hO(r){const{domain:t,range:e,paddingOuter:n,paddingInner:i,flex:a,round:o,align:s}=r,l=t.length,c=cO(a,l),[u,h]=e,f=h-u,d=2/l*n+1-1/l*i,p=f/d,g=p*i/l,y=p-l*g,m=lO(c),b=m.reduce((A,j)=>A+j),E=y/b,O=new Xv(t.map((A,j)=>{const Y=m[j]*E;return[A,o?Math.floor(Y):Y]})),M=new Xv(t.map((A,j)=>{const ot=m[j]*E+g;return[A,o?Math.floor(ot):ot]})),k=Array.from(M.values()).reduce((A,j)=>A+j),N=(f-(k-k/l*i))*s,rt=u+N;let C=o?Math.round(rt):rt;const S=new Array(l);for(let A=0;A<l;A+=1){S[A]=uO(C);const j=t[A];C+=M.get(j)}return{valueBandWidth:O,valueStep:M,adjustedRange:S}}function fO(r){var t;const{domain:e}=r,n=e.length;if(n===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=r.flex)===null||t===void 0)&&t.length))return hO(r);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=r;let u,h,f=a[0];const p=a[1]-f,g=o*2,y=n-s;u=p/Math.max(1,g+y),l&&(u=Math.floor(u)),f+=(p-u*(n-s))*c,h=u*(1-s),l&&(f=Math.round(f),h=Math.round(h));const m=new Array(n).fill(0).map((b,E)=>f+E*u);return{valueStep:u,valueBandWidth:h,adjustedRange:m}}class nh extends eh{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:th,flex:[]}}constructor(t){super(t)}clone(){return new nh(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:e}=this.options;return t>0?t:e}getPaddingOuter(){const{padding:t,paddingOuter:e}=this.options;return t>0?t:e}rescale(){super.rescale();const{align:t,domain:e,range:n,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=fO({align:t,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}}var dO=function(r){(0,w.ZT)(t,r);function t(e){var n=this,i=e.style,a=(0,w._T)(e,["style"]);return n=r.call(this,(0,Jn.Z)({},{type:"column"},(0,w.pi)({style:i},a)))||this,n.columnsGroup=new x.ZA({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return t.prototype.render=function(){var e=this.attributes,n=e.columns,i=e.x,a=e.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),ge(this.columnsGroup).selectAll(".column").data(n.flat()).join(function(o){return o.append("rect").attr("className","column").each(function(s){this.attr(s)})},function(o){return o.each(function(s){this.attr(s)})},function(o){return o.remove()})},t.prototype.update=function(e){this.attr(xn({},this.attributes,e)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(x.s$),pO=function(r){(0,w.ZT)(t,r);function t(e){var n=this,i=e.style,a=(0,w._T)(e,["style"]);return n=r.call(this,(0,Jn.Z)({},{type:"lines"},(0,w.pi)({style:i},a)))||this,n.linesGroup=n.appendChild(new x.ZA),n.areasGroup=n.appendChild(new x.ZA),n.render(),n}return t.prototype.render=function(){var e=this.attributes,n=e.lines,i=e.areas,a=e.x,o=e.y;this.style.transform="translate(".concat(a,", ").concat(o,")"),n&&this.renderLines(n),i&&this.renderAreas(i)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(e){this.attr(xn({},this.attributes,e)),this.render()},t.prototype.renderLines=function(e){ge(this.linesGroup).selectAll(".line").data(e).join(function(n){return n.append("path").attr("className","line").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.attr(i)})},function(n){return n.remove()})},t.prototype.renderAreas=function(e){ge(this.linesGroup).selectAll(".area").data(e).join(function(n){return n.append("path").attr("className","area").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.style(i)})},function(n){return n.remove()})},t}(x.s$);function vO(r,t,e,n){var i,a=[],o=!!n,s,l,c=[1/0,1/0],u=[-1/0,-1/0],h,f,d;if(o){i=(0,w.CR)(n,2),c=i[0],u=i[1];for(var p=0,g=r.length;p<g;p+=1){var y=r[p];c=$i(c,y),u=Ui(u,y)}}for(var p=0,m=r.length;p<m;p+=1){var y=r[p];if(p===0&&!e)d=y;else if(p===m-1&&!e)f=y,a.push(d),a.push(f);else{var b=[p?p-1:m-1,p-1][e?0:1];s=r[b],l=r[e?(p+1)%m:p+1];var E=[0,0];E=Bu(l,s),E=ri(E,t);var O=co(y,s),M=co(y,l),k=O+M;k!==0&&(O/=k,M/=k);var D=ri(E,-O),N=ri(E,M);f=lo(y,D),h=lo(y,N),h=$i(h,Ui(l,y)),h=Ui(h,$i(l,y)),D=Bu(h,y),D=ri(D,-O/M),f=lo(y,D),f=$i(f,Ui(s,y)),f=Ui(f,$i(s,y)),N=Bu(y,f),N=ri(N,M/O),h=lo(y,N),o&&(f=Ui(f,c),f=$i(f,u),h=Ui(h,c),h=$i(h,u)),a.push(d),a.push(f),d=h}}return e&&a.push(a.shift()),a}function gO(r,t,e){var n;t===void 0&&(t=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var i=!!t,a=[],o=0,s=r.length;o<s;o+=2)a.push([r[o],r[o+1]]);for(var l=vO(a,.4,i,e),c=a.length,u=[],h,f,d,o=0;o<c-1;o+=1)h=l[o*2],f=l[o*2+1],d=a[o+1],u.push(["C",h[0],h[1],f[0],f[1],d[0],d[1]]);return i&&(h=l[c],f=l[c+1],n=(0,w.CR)(a,1),d=n[0],u.push(["C",h[0],h[1],f[0],f[1],d[0],d[1]])),u}function yO(r,t){var e,n=t.x,i=t.y,a=(0,w.CR)(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(e=(0,w.CR)([o,s],2),s=e[0],o=e[1]),r.map(function(l){var c=l.map(function(u,h){return[n.map(h),(0,ue.Z)(i.map(u),s,o)]});return c})}function vo(r,t){t===void 0&&(t=!1);var e=t?r.length-1:0,n=r.map(function(i,a){return(0,w.ev)([a===e?"M":"L"],(0,w.CR)(i),!1)});return t?n.reverse():n}function Rl(r,t){if(t===void 0&&(t=!1),r.length<=2)return vo(r);for(var e=[],n=r.length,i=0;i<n;i+=1){var a=t?r[n-i-1]:r[i];cn(a,e.slice(-2))||e.push.apply(e,(0,w.ev)([],(0,w.CR)(a),!1))}var o=gO(e,!1);return t?o.unshift((0,w.ev)(["M"],(0,w.CR)(r[n-1]),!1)):o.unshift((0,w.ev)(["M"],(0,w.CR)(r[0]),!1)),o}function rh(r,t,e){var n=(0,Po.Z)(r);return n.push(["L",t,e],["L",0,e],["Z"]),n}function mO(r,t,e,n){return r.map(function(i){return rh(t?Rl(i):vo(i),e,n)})}function bO(r,t,e){for(var n=[],i=r.length-1;i>=0;i-=1){var a=r[i],o=vo(a),s=void 0;if(i===0)s=rh(o,t,e);else{var l=r[i-1],c=vo(l,!0);c[0][0]="L",s=(0,w.ev)((0,w.ev)((0,w.ev)([],(0,w.CR)(o),!1),(0,w.CR)(c),!1),[["Z"]],!1)}n.push(s)}return n}function _O(r,t,e){for(var n=[],i=r.length-1;i>=0;i-=1){var a=r[i],o=Rl(a),s=void 0;if(i===0)s=rh(o,t,e);else{var l=r[i-1],c=Rl(l,!0),u=a[0];c[0][0]="L",s=(0,w.ev)((0,w.ev)((0,w.ev)([],(0,w.CR)(o),!1),(0,w.CR)(c),!1),[(0,w.ev)(["M"],(0,w.CR)(u),!1),["Z"]],!1)}n.push(s)}return n}var t0=G(71523),xO=function(r,t){if((0,Xr.Z)(r)){for(var e,n=1/0,i=0;i<r.length;i++){var a=r[i],o=(0,Se.Z)(t)?t(a):a[t];o<n&&(e=a,n=o)}return e}},e0=G(13882),EO=function(r,t){if((0,Xr.Z)(r)){for(var e,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=(0,Se.Z)(t)?t(a):a[t];o>n&&(e=a,n=o)}return e}};function n0(r){return r.length===0?[0,0]:[(0,t0.Z)(xO(r,function(t){return(0,t0.Z)(t)||0})),(0,e0.Z)(EO(r,function(t){return(0,e0.Z)(t)||0}))]}function r0(r){for(var t=(0,Po.Z)(r),e=t[0].length,n=(0,w.CR)([Array(e).fill(0),Array(e).fill(0)],2),i=n[0],a=n[1],o=0;o<t.length;o+=1)for(var s=t[o],l=0;l<e;l+=1)s[l]>=0?(s[l]+=i[l],i[l]=s[l]):(s[l]+=a[l],a[l]=s[l]);return t}var wO=function(r){(0,w.ZT)(t,r);function t(e){return r.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,"rawData",{get:function(){var e=this.attributes.data;if(!e||(e==null?void 0:e.length)===0)return[[]];var n=(0,Po.Z)(e);return(0,pt.Z)(n[0])?[n]:n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?r0(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var e=this.scales.y,n=(0,w.CR)(e.getOptions().domain||[0,0],2),i=n[0],a=n[1];return a<0?e.map(a):e.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var e=this.attributes,n=e.width,i=e.height;return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var e=this,n=this.attributes,i=n.type,a=n.isStack,o=n.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var s=Te(this.attributes,"area"),l=Te(this.attributes,"line"),c=this.containerShape.width,u=this.data;if(u[0].length===0)return{lines:[],areas:[]};var h=this.scales,f=h.x,d=h.y,p=yO(u,{type:"line",x:f,y:d}),g=[];if(s){var y=this.baseline;a?g=o?_O(p,c,y):bO(p,c,y):g=mO(p,o,c,y)}return{lines:p.map(function(m,b){return(0,w.pi)({stroke:e.getColor(b),d:o?Rl(m):vo(m)},l)}),areas:g.map(function(m,b){return(0,w.pi)({d:m,fill:e.getColor(b)},s)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var e=this,n=Te(this.attributes,"column"),i=this.attributes,a=i.isStack,o=i.type,s=i.scale;if(o!=="column")throw new Error("columnsStyle can only be used in column type");var l=this.containerShape.height,c=this.rawData;if(!c)return{columns:[]};a&&(c=r0(c));var u=this.createScales(c),h=u.x,f=u.y,d=(0,w.CR)(n0(c),2),p=d[0],g=d[1],y=new po({domain:[0,g-(p>0?0:p)],range:[0,l*s]}),m=h.getBandWidth(),b=this.rawData;return{columns:c.map(function(E,O){return E.map(function(M,k){var D=m/c.length,N=function(){return{x:h.map(k)+D*O,y:M>=0?f.map(M):f.map(0),width:D,height:y.map(Math.abs(M))}},rt=function(){return{x:h.map(k),y:f.map(M),width:m,height:y.map(b[O][k])}};return(0,w.pi)((0,w.pi)({fill:e.getColor(O)},n),a?rt():N())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(e,n){VE(n,".container","rect").attr("className","container").node();var i=e.type,a=e.x,o=e.y,s="spark".concat(i),l=(0,w.pi)({x:a,y:o},i==="line"?this.linesStyle:this.columnsStyle);ge(n).selectAll(".spark").data([i]).join(function(c){return c.append(function(u){return u==="line"?new pO({className:s,style:l}):new dO({className:s,style:l})}).attr("className","spark ".concat(s))},function(c){return c.update(l)},function(c){return c.remove()})},t.prototype.getColor=function(e){var n=this.attributes.color;return(0,Xr.Z)(n)?n[e%n.length]:(0,Se.Z)(n)?n.call(null,e):n},t.prototype.createScales=function(e){var n,i,a=this.attributes,o=a.type,s=a.scale,l=a.range,c=l===void 0?[]:l,u=a.spacing,h=this.containerShape,f=h.width,d=h.height,p=(0,w.CR)(n0(e),2),g=p[0],y=p[1],m=new po({domain:[(n=c[0])!==null&&n!==void 0?n:g,(i=c[1])!==null&&i!==void 0?i:y],range:[d,d*(1-s)]});return o==="line"?{type:o,x:new po({domain:[0,e[0].length-1],range:[0,f]}),y:m}:{type:o,x:new nh({domain:e[0].map(function(b,E){return E}),range:[0,f],paddingInner:u,paddingOuter:u/2,align:.5}),y:m}},t.tag="sparkline",t}(rn),i0={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},a0={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},o0={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},Vr=Pr({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Mi=Pr({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),SO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,n){var i=e.x,a=e.y,o=e.size,s=o===void 0?10:o,l=e.radius,c=l===void 0?s/4:l,u=e.orientation,h=(0,w._T)(e,["x","y","size","radius","orientation"]),f=s,d=f*2.4,p=ge(n).maybeAppendByClassName(Mi.iconRect,"rect").styles((0,w.pi)((0,w.pi)({},h),{width:f,height:d,radius:c,x:i-f/2,y:a-d/2,transformOrigin:"center"})),g=i+1/3*f-f/2,y=i+2/3*f-f/2,m=a+1/4*d-d/2,b=a+3/4*d-d/2;p.maybeAppendByClassName("".concat(Mi.iconLine,"-1"),"line").styles((0,w.pi)({x1:g,x2:g,y1:m,y2:b},h)),p.maybeAppendByClassName("".concat(Mi.iconLine,"-2"),"line").styles((0,w.pi)({x1:y,x2:y,y1:m,y2:b},h)),u==="vertical"&&(p.node().style.transform="rotate(90)")},t}(rn),OO=function(r){(0,w.ZT)(t,r);function t(e){return r.call(this,e,o0)||this}return t.prototype.renderLabel=function(e){var n=this,i=this.attributes,a=i.x,o=i.y,s=i.showLabel,l=Te(this.attributes,"label"),c=l.x,u=c===void 0?0:c,h=l.y,f=h===void 0?0:h,d=l.transform,p=l.transformOrigin,g=(0,w._T)(l,["x","y","transform","transformOrigin"]),y=(0,w.CR)(ei(g,[]),2),m=y[0],b=y[1],E=ge(e).maybeAppendByClassName(Mi.labelGroup,"g").styles(b),O=(0,w.pi)((0,w.pi)({},a0),m),M=O.text,k=(0,w._T)(O,["text"]);ir(!!s,E,function(D){n.label=D.maybeAppendByClassName(Mi.label,"text").styles((0,w.pi)((0,w.pi)({},k),{x:a+u,y:o+f,transform:d,transformOrigin:p,text:"".concat(M)})),n.label.on("mousedown",function(N){N.stopPropagation()}),n.label.on("touchstart",function(N){N.stopPropagation()})})},t.prototype.renderIcon=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.orientation,s=n.type,l=(0,w.pi)((0,w.pi)({x:i,y:a,orientation:o},i0),Te(this.attributes,"icon")),c=this.attributes.iconShape,u=c===void 0?function(){return new SO({style:l})}:c,h=ge(e).maybeAppendByClassName(Mi.iconGroup,"g");h.selectAll(Mi.icon.class).data([u]).join(function(f){return f.append(typeof u=="string"?u:function(){return u(s)}).attr("className",Mi.icon.name)},function(f){return f.update(l)},function(f){return f.remove()})},t.prototype.render=function(e,n){this.renderIcon(n),this.renderLabel(n)},t}(rn),MO=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,e,(0,w.pi)((0,w.pi)((0,w.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},ya(o0,"handle")),ya(i0,"handleIcon")),ya(a0,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(i){return function(a){a.stopPropagation(),n.target=i,n.prevPos=n.getOrientVal(Hv(a));var o=n.availableSpace,s=o.x,l=o.y,c=n.getBBox(),u=c.x,h=c.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([s,l])-n.getOrientVal([+u,+h])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(i){var a=n.attributes,o=a.slidable,s=a.brushable,l=a.type;i.stopPropagation();var c=n.getOrientVal(Hv(i)),u=c-n.prevPos;if(u){var h=n.getRatio(u);switch(n.target){case"start":o&&n.setValuesOffset(h);break;case"end":o&&n.setValuesOffset(0,h);break;case"selection":o&&n.setValuesOffset(h,h);break;case"track":if(!s)return;n.selectionWidth+=h,l==="range"?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);break;default:break}n.prevPos=c}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(i){var a=n.attributes,o=a.onChange,s=a.type,l=s==="range"?i:i[1],c=s==="range"?n.getValues():n.getValues()[1],u=new x.Aw("valuechange",{detail:{oldValue:l,value:c}});n.dispatchEvent(u),o==null||o(c)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(e){this.attributes.values=this.clampValues(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){var e=this.attributes.orientation;if(e!=="horizontal")return null;var n=Te(this.attributes,"sparkline");return(0,w.pi)((0,w.pi)({zIndex:0},this.availableSpace),n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var e=this.attributes,n=e.trackLength,i=e.trackSize,a=(0,w.CR)(this.getOrientVal([[n,i],[i,n]]),2),o=a[0],s=a[1];return{width:o,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var e=this.attributes,n=e.x,i=e.y,a=e.padding,o=(0,w.CR)(An(a),4),s=o[0],l=o[1],c=o[2],u=o[3],h=this.shape,f=h.width,d=h.height;return{x:u,y:s,width:f-(u+l),height:d-(s+c)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(e,n){e===void 0&&(e=[0,0]),n===void 0&&(n=!1),this.attributes.values=e;var i=n===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},t.prototype.updateSelectionArea=function(e){var n=this.calcSelectionArea();this.foregroundGroup.selectAll(Vr.selection.class).each(function(i,a){Rr(this,n[a],e)})},t.prototype.updateHandlesPosition=function(e){this.attributes.showHandle&&(this.startHandle&&Rr(this.startHandle,this.getHandleStyle("start"),e),this.endHandle&&Rr(this.endHandle,this.getHandleStyle("end"),e))},t.prototype.innerSetValues=function(e,n){e===void 0&&(e=[0,0]),n===void 0&&(n=!1);var i=this.values,a=this.clampValues(e);this.attributes.values=a,this.setValues(a),n&&this.onValueChange(i)},t.prototype.renderTrack=function(e){var n=this.attributes,i=n.x,a=n.y,o=Te(this.attributes,"track");this.trackShape=ge(e).maybeAppendByClassName(Vr.track,"rect").styles((0,w.pi)((0,w.pi)({x:i,y:a},this.shape),o))},t.prototype.renderBrushArea=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.brushable;this.brushArea=ge(e).maybeAppendByClassName(Vr.brushArea,"rect").styles((0,w.pi)({x:i,y:a,fill:"transparent",cursor:o?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(e){var n=this,i=this.attributes,a=i.x,o=i.y,s=i.orientation,l=ge(e).maybeAppendByClassName(Vr.sparklineGroup,"g");ir(s==="horizontal",l,function(c){var u=(0,w.pi)((0,w.pi)({},n.sparklineStyle),{x:a,y:o});c.maybeAppendByClassName(Vr.sparkline,function(){return new wO({style:u})}).update(u)})},t.prototype.renderHandles=function(){var e=this,n,i=this.attributes,a=i.showHandle,o=i.type,s=o==="range"?["start","end"]:["end"],l=a?s:[],c=this;(n=this.foregroundGroup)===null||n===void 0||n.selectAll(Vr.handle.class).data(l.map(function(u){return{type:u}}),function(u){return u.type}).join(function(u){return u.append(function(h){var f=h.type;return new OO({style:e.getHandleStyle(f)})}).each(function(h){var f=h.type;this.attr("class","".concat(Vr.handle.name," ").concat(f,"-handle"));var d="".concat(f,"Handle");c[d]=this,this.addEventListener("pointerdown",c.onDragStart(f))})},function(u){return u.each(function(h){var f=h.type;this.update(c.getHandleStyle(f))})},function(u){return u.each(function(h){var f=h.type,d="".concat(f,"Handle");c[d]=void 0}).remove()})},t.prototype.renderSelection=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.type,s=n.selectionType;this.foregroundGroup=ge(e).maybeAppendByClassName(Vr.foreground,"g");var l=Te(this.attributes,"selection"),c=function(h){return h.style("visibility",function(f){return f.show?"visible":"hidden"}).style("cursor",function(f){return s==="select"?"grab":s==="invert"?"crosshair":"default"}).styles((0,w.pi)((0,w.pi)({},l),{transform:"translate(".concat(i,", ").concat(a,")")}))},u=this;this.foregroundGroup.selectAll(Vr.selection.class).data(o==="value"?[]:this.calcSelectionArea().map(function(h,f){return{style:(0,w.pi)({},h),index:f,show:s==="select"?f===1:f!==1}}),function(h){return h.index}).join(function(h){return h.append("rect").attr("className",Vr.selection.name).call(c).each(function(f,d){var p=this;d===1?(u.selectionShape=ge(this),this.on("pointerdown",function(g){p.attr("cursor","grabbing"),u.onDragStart("selection")(g)}),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){p.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){p.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){p.attr("cursor","pointer")})):this.on("pointerdown",u.onDragStart("track"))})},function(h){return h.call(c)},function(h){return h.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(e,n){this.renderTrack(n),this.renderSparkline(n),this.renderBrushArea(n),this.renderSelection(n)},t.prototype.clampValues=function(e,n){var i;n===void 0&&(n=4);var a=(0,w.CR)(this.range,2),o=a[0],s=a[1],l=(0,w.CR)(this.getValues().map(function(y){return Uu(y,n)}),2),c=l[0],u=l[1],h=Array.isArray(e)?e:[c,e!=null?e:u],f=(0,w.CR)((h||[c,u]).map(function(y){return Uu(y,n)}),2),d=f[0],p=f[1];if(this.attributes.type==="value")return[0,(0,ue.Z)(p,o,s)];d>p&&(i=(0,w.CR)([p,d],2),d=i[0],p=i[1]);var g=p-d;return g>s-o?[o,s]:d<o?c===o&&u===p?[o,p]:[o,g+o]:p>s?u===s&&c===d?[d,s]:[s-g,s]:[d,p]},t.prototype.calcSelectionArea=function(e){var n=(0,w.CR)(this.clampValues(e),2),i=n[0],a=n[1],o=this.availableSpace,s=o.x,l=o.y,c=o.width,u=o.height;return this.getOrientVal([[{y:l,height:u,x:s,width:i*c},{y:l,height:u,x:i*c+s,width:(a-i)*c},{y:l,height:u,x:a*c,width:(1-a)*c}],[{x:s,width:c,y:l,height:i*u},{x:s,width:c,y:i*u+l,height:(a-i)*u},{x:s,width:c,y:a*u,height:(1-a)*u}]])},t.prototype.calcHandlePosition=function(e){var n=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,o=i.y,s=i.width,l=i.height,c=(0,w.CR)(this.clampValues(),2),u=c[0],h=c[1],f=e==="start"?-n:n,d=(e==="start"?u:h)*this.getOrientVal([s,l])+f;return{x:a+this.getOrientVal([d,s/2]),y:o+this.getOrientVal([l/2,d])}},t.prototype.inferTextStyle=function(e){var n=this.attributes.orientation;return n==="horizontal"?{}:e==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:e==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(e){var n,i=this.attributes,a=i.type,o=i.orientation,s=i.formatter,l=i.autoFitLabel,c=Te(this.attributes,"handle"),u=Te(c,"label"),h=c.spacing,f=this.getHandleSize(),d=this.clampValues(),p=e==="start"?d[0]:d[1],g=s(p),y=new Tu({style:(0,w.pi)((0,w.pi)((0,w.pi)({},u),this.inferTextStyle(e)),{text:g})}),m=y.getBBox(),b=m.width,E=m.height;if(y.destroy(),!l){if(a==="value")return{text:g,x:0,y:-E-h};var O=h+f+(o==="horizontal"?b/2:0);return n={text:g},n[o==="horizontal"?"x":"y"]=e==="start"?-O:O,n}var M=0,k=0,D=this.availableSpace,N=D.width,rt=D.height,C=this.calcSelectionArea()[1],S=C.x,A=C.y,j=C.width,Y=C.height,ot=h+f;if(o==="horizontal"){var Lt=ot+b/2;if(e==="start"){var Xt=S-ot-b;M=Xt>0?-Lt:Lt}else{var wt=N-S-j-ot>b;M=wt?Lt:-Lt}}else{var Ct=ot,$t=E+ot;e==="start"?k=A-f>E?-$t:Ct:k=rt-(A+Y)-f>E?$t:-Ct}return{x:M,y:k,text:g}},t.prototype.getHandleLabelStyle=function(e){var n=Te(this.attributes,"handleLabel");return(0,w.pi)((0,w.pi)((0,w.pi)({},n),this.calcHandleText(e)),this.inferTextStyle(e))},t.prototype.getHandleIconStyle=function(){var e=this.attributes.handleIconShape,n=Te(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return(0,w.pi)({cursor:i,shape:e,size:a},n)},t.prototype.getHandleStyle=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.showLabel,s=n.showLabelOnInteraction,l=n.orientation,c=this.calcHandlePosition(e),u=c.x,h=c.y,f=this.calcHandleText(e),d=o;return!o&&s&&(this.target?d=!0:d=!1),(0,w.pi)((0,w.pi)((0,w.pi)({},ya(this.getHandleIconStyle(),"icon")),ya((0,w.pi)((0,w.pi)({},this.getHandleLabelStyle(e)),f),"label")),{transform:"translate(".concat(u+i,", ").concat(h+a,")"),orientation:l,showLabel:d,type:e,zIndex:3})},t.prototype.getHandleSize=function(){var e=this.attributes,n=e.handleIconSize,i=e.width,a=e.height;return n||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},t.prototype.getOrientVal=function(e){var n=(0,w.CR)(e,2),i=n[0],a=n[1],o=this.attributes.orientation;return o==="horizontal"?i:a},t.prototype.setValuesOffset=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var a=this.attributes.type,o=(0,w.CR)(this.getValues(),2),s=o[0],l=o[1],c=a==="range"?e:0,u=[s+c,l+n].sort();i?this.setValues(u):this.innerSetValues(u,!0)},t.prototype.getRatio=function(e){var n=this.availableSpace,i=n.width,a=n.height;return e/this.getOrientVal([i,a])},t.prototype.dispatchCustomEvent=function(e,n,i){var a=this;e.on(n,function(o){o.stopPropagation(),a.dispatchEvent(new x.Aw(i,{detail:o}))})},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var e=this.brushArea;this.dispatchCustomEvent(e,"click","trackClick"),this.dispatchCustomEvent(e,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(e,"pointerleave","trackMouseleave"),e.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(e){var n=this.attributes.scrollable;if(n){var i=e.deltaX,a=e.deltaY,o=a||i,s=this.getRatio(o);this.setValuesOffset(s,s,!0)}},t.tag="slider",t}(rn),CO={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(r){return r.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},ih=Pr({background:"background",labelGroup:"label-group",label:"label"},"indicator"),TO=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,e,CO)||this;return n.point=[0,0],n.group=n.appendChild(new x.ZA({})),n.isMutationObserved=!0,n}return t.prototype.renderBackground=function(){if(this.label){var e=this.attributes,n=e.position,i=e.padding,a=(0,w.CR)(An(i),4),o=a[0],s=a[1],l=a[2],c=a[3],u=this.label.node().getLocalBounds(),h=u.min,f=u.max,d=new Ln(h[0]-c,h[1]-o,f[0]+s-h[0]+c,f[1]+l-h[1]+o),p=this.getPath(n,d),g=Te(this.attributes,"background");this.background=ge(this.group).maybeAppendByClassName(ih.background,"path").styles((0,w.pi)((0,w.pi)({},g),{d:p})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var e=this.attributes,n=e.formatter,i=e.labelText,a=Te(this.attributes,"label"),o=(0,w.CR)(ei(a),2),s=o[0],l=o[1],c=s.text,u=(0,w._T)(s,["text"]);if(this.label=ge(this.group).maybeAppendByClassName(ih.labelGroup,"g").styles(l),!!i){var h=this.label.maybeAppendByClassName(ih.label,function(){return ni(n(i))}).style("text",n(i).toString());h.selectAll("text").styles(u)}},t.prototype.adjustLayout=function(){var e=(0,w.CR)(this.point,2),n=e[0],i=e[1],a=this.attributes,o=a.x,s=a.y;this.group.attr("transform","translate(".concat(o-n,", ").concat(s-i,")"))},t.prototype.getPath=function(e,n){var i=this.attributes.radius,a=n.x,o=n.y,s=n.width,l=n.height,c=[["M",a+i,o],["L",a+s-i,o],["A",i,i,0,0,1,a+s,o+i],["L",a+s,o+l-i],["A",i,i,0,0,1,a+s-i,o+l],["L",a+i,o+l],["A",i,i,0,0,1,a,o+l-i],["L",a,o+i],["A",i,i,0,0,1,a+i,o],["Z"]],u={top:4,right:6,bottom:0,left:2},h=u[e],f=this.createCorner([c[h].slice(-2),c[h+1].slice(-2)]);return c.splice.apply(c,(0,w.ev)([h+1,1],(0,w.CR)(f),!1)),c[0][0]="M",c},t.prototype.createCorner=function(e,n){n===void 0&&(n=10);var i=.8,a=Sw.apply(void 0,(0,w.ev)([],(0,w.CR)(e),!1)),o=(0,w.CR)(e,2),s=(0,w.CR)(o[0],2),l=s[0],c=s[1],u=(0,w.CR)(o[1],2),h=u[0],f=u[1],d=(0,w.CR)(a?[h-l,[l,h]]:[f-c,[c,f]],2),p=d[0],g=(0,w.CR)(d[1],2),y=g[0],m=g[1],b=p/2,E=p/Math.abs(p),O=n*E,M=O/2,k=O*Math.sqrt(3)/2*i,D=(0,w.CR)([y,y+b-M,y+b,y+b+M,m],5),N=D[0],rt=D[1],C=D[2],S=D[3],A=D[4];return a?(this.point=[C,c-k],[["L",N,c],["L",rt,c],["L",C,c-k],["L",S,c],["L",A,c]]):(this.point=[l+k,C],[["L",l,N],["L",l,rt],["L",l+k,C],["L",l,S],["L",l,A]])},t.prototype.applyVisibility=function(){var e=this.attributes.visibility;e==="hidden"?Ar(this):ao(this)},t.prototype.bindEvents=function(){this.label.on(x.Dk.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(rn),AO=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},t.defaultOptions,e))||this;return n.hoverColor="#f5f5f5",n.selectedColor="#e6f7ff",n.background=n.appendChild(new x.UL({})),n.label=n.background.appendChild(new x.ZA({})),n}return Object.defineProperty(t.prototype,"padding",{get:function(){return An(this.style.padding)},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(){var e=this.style,n=e.label,i=e.value,a=Te(this.attributes,"label");ge(this.label).maybeAppend(".label",function(){return ni(n)}).attr("className","label").styles(a),this.label.attr("__data__",i)},t.prototype.renderBackground=function(){var e=this.label.getBBox(),n=(0,w.CR)(this.padding,4),i=n[0],a=n[1],o=n[2],s=n[3],l=e.width,c=e.height,u=l+s+a,h=c+i+o,f=Te(this.attributes,"background"),d=this.style,p=d.width,g=p===void 0?0:p,y=d.height,m=y===void 0?0:y,b=d.selected;this.background.attr((0,w.pi)((0,w.pi)({},f),{width:Math.max(u,g),height:Math.max(h,m),fill:b?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(s,", ").concat((h-c)/2,")")})},t.prototype.render=function(){this.renderLabel(),this.renderBackground()},t.prototype.bindEvents=function(){var e=this;this.addEventListener("pointerenter",function(){e.style.selected||e.background.attr("fill",e.hoverColor)}),this.addEventListener("pointerleave",function(){e.style.selected||e.background.attr("fill",e.style.backgroundFill)});var n=this;this.addEventListener("click",function(){var i=e.style,a=i.label,o=i.value,s=i.onClick;s==null||s(o,{label:a,value:o},n)})},t.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},t}(rn),PO=function(r){(0,w.ZT)(t,r);function t(e){var n,i,a=r.call(this,xn({},t.defaultOptions,e))||this;a.currentValue=(n=t.defaultOptions.style)===null||n===void 0?void 0:n.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new x.UL({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new x.UL({className:"dropdown"}));var o=a.style.defaultValue;return o&&(!((i=a.style.options)===null||i===void 0)&&i.some(function(s){return s.value===o}))&&(a.currentValue=o),a}return t.prototype.setValue=function(e){this.currentValue=e,this.render()},t.prototype.getValue=function(){return this.currentValue},Object.defineProperty(t.prototype,"dropdownPadding",{get:function(){return An(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),t.prototype.renderSelect=function(){var e=this,n,i=this.style,a=i.x,o=i.y,s=i.width,l=i.height,c=i.bordered,u=i.showDropdownIcon,h=Te(this.attributes,"select"),f=Te(this.attributes,"placeholder");this.select.attr((0,w.pi)((0,w.pi)({x:a,y:o,width:s,height:l},h),{fill:"#fff",strokeWidth:c?1:0}));var d=this.dropdownPadding,p=10;u&&ge(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(a+s-p-d[1]-d[3],", ").concat(o+l/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var g=(n=this.style.options)===null||n===void 0?void 0:n.find(function(E){return E.value===e.currentValue}),y=(0,w.pi)({x:a+d[3]},f);ge(this.select).selectAll(".placeholder").data(g?[]:[1]).join(function(E){return E.append("text").attr("className","placeholder").styles(y).style("y",function(){var O=this.getBBox();return o+(l-O.height)/2})},function(E){return E.styles(y)},function(E){return E.remove()});var m=Te(this.attributes,"optionLabel"),b=(0,w.pi)({x:a+d[3]},m);ge(this.select).selectAll(".value").data(g?[g]:[]).join(function(E){return E.append(function(O){return ni(O.label)}).attr("className","value").styles(b).style("y",function(){var O=this.getBBox();return o+(l-O.height)/2})},function(E){return E.styles(b)},function(E){return E.remove()})},t.prototype.renderDropdown=function(){var e=this,n,i,a=this.style,o=a.x,s=a.y,l=a.width,c=a.height,u=a.options,h=a.onSelect,f=a.open,d=Te(this.attributes,"dropdown"),p=Te(this.attributes,"option"),g=this.dropdownPadding;ge(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(u,function(b){return b.value}).join(function(b){return b.append(function(E){return new AO({className:"dropdown-item",style:(0,w.pi)((0,w.pi)((0,w.pi)({},E),p),{width:l-g[1]-g[3],selected:E.value===e.currentValue,onClick:function(O,M,k){e.setValue(O),h==null||h(O,M,k),e.dispatchEvent(new x.Aw("change",{detail:{value:O,option:M,item:k}})),Ar(e.dropdown)}})})}).each(function(E,O){var M,k=(M=this.parentNode)===null||M===void 0?void 0:M.children,D=k.reduce(function(N,rt,C){return C<O&&(N+=rt.getBBox().height),N},0);this.attr("transform","translate(".concat(g[3],", ").concat(g[0]+D,")"))})},function(b){return b.update(function(E){return{selected:E.value===e.currentValue}})},function(b){return b.remove()});var y=(i=(n=this.dropdown.getElementsByClassName("dropdown-container"))===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.getBBox(),m=d.spacing;this.dropdown.attr((0,w.pi)({transform:"translate(".concat(o,", ").concat(s+c+m,")"),width:y.width+g[1]+g[3],height:y.height+g[0]+g[2]},d)),!f&&Ar(this.dropdown)},t.prototype.render=function(){this.renderSelect(),this.renderDropdown()},t.prototype.bindEvents=function(){var e=this;this.addEventListener("click",function(n){n.stopPropagation()}),this.select.addEventListener("click",function(){e.dropdown.style.visibility==="visible"?Ar(e.dropdown):ao(e.dropdown)}),this.addEventListener("pointerenter",function(){e.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){e.isPointerInSelect=!1}),document==null||document.addEventListener("click",function(){e.isPointerInSelect||Ar(e.dropdown)})},t.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"\u8BF7\u9009\u62E9",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},t}(rn),Dr=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},{style:{backgroundOpacity:t.backgroundOpacities.default}},t.defaultOptions,e))||this;return n.showBackground=!0,n.background=n.appendChild(new x.UL({})),n.icon=n.appendChild(new x.ZA({})),n}return Object.defineProperty(t.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return An(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iconSize",{get:function(){var e=this.attributes.size,n=(0,w.CR)(this.padding,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.max(e-Math.max(s+a,i+o),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),t.prototype.renderBackground=function(){var e=this.attributes,n=e.x,i=e.y,a=e.size,o=a/2,s=Te(this.attributes,"background");this.background.attr((0,w.pi)({x:n-o,y:i-o,width:a,height:a},s))},t.prototype.showIndicator=function(){if(this.label){var e=this.attributes.size,n=this.background.getBBox(),i=n.x,a=n.y;this.indicator.update({x:i+e/2,y:a-5,labelText:this.label,visibility:"visible"})}},t.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},t.prototype.connectedCallback=function(){var e;r.prototype.connectedCallback.call(this);var n=this.attributes.size,i=this.background.getBBox(),a=i.x,o=i.y,s=(e=this.ownerDocument)===null||e===void 0?void 0:e.defaultView;s&&(this.indicator=s.appendChild(new TO({style:{x:a+n/2,y:o-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},t.prototype.disconnectedCallback=function(){this.indicator.destroy()},t.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},t.prototype.bindEvents=function(){var e=this,n=this.attributes.onClick;if(this.addEventListener("click",function(){n==null||n(e)}),this.showBackground){var i=function(){return e.background.attr({opacity:t.backgroundOpacities.default})},a=function(){return e.background.attr({opacity:t.backgroundOpacities.hover})},o=function(){return e.background.attr({opacity:t.backgroundOpacities.active})};this.addEventListener("pointerenter",function(){a(),e.showIndicator()}),this.addEventListener("pointerleave",function(){i(),e.hideIndicator()}),this.addEventListener("pointerdown",function(){o()}),this.addEventListener("pointerup",function(){i()})}},t.tag="IconBase",t.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},t.backgroundOpacities={default:0,hover:.8,active:1},t}(rn),go=function(r,t){return t===void 0&&(t="#565758"),new x.y$({style:{fill:t,d:"M ".concat(r,",").concat(r," L -").concat(r,",0 L ").concat(r,",-").concat(r," Z"),transformOrigin:"center"}})},RO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.arcPath=function(e,n,i){var a=(0,w.CR)([i,i],2),o=a[0],s=a[1],l=function(g){return[e+i*Math.cos(g),n+i*Math.sin(g)]},c=(0,w.CR)(l(-5/4*Math.PI),2),u=c[0],h=c[1],f=(0,w.CR)(l(1/4*Math.PI),2),d=f[0],p=f[1];return"M".concat(u,",").concat(h,",A").concat(o,",").concat(s,",0,1,1,").concat(d,",").concat(p)},Object.defineProperty(t.prototype,"label",{get:function(){return"\u91CD\u7F6E"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this.iconSize,s=this.lineWidth,l=s+.5;ge(this.icon).maybeAppend(".reset","path").styles({stroke:a,lineWidth:s,d:this.arcPath(n,i,o/2-s),markerStart:go(l,a)})},t}(Dr),DO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"label",{get:function(){return"\u5FEB\u9000"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this.iconSize,s=o/2,l=o/2/Math.pow(3,.5),c=[[n,i],[n,i-l],[n-s,i],[n,i+l],[n,i],[n+s,i-l],[n+s,i+l],[n,i]];ge(this.icon).maybeAppend(".backward","polygon").styles({points:c,fill:a})},t}(Dr),kO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"label",{get:function(){return"\u5FEB\u8FDB"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this.iconSize,s=o/2,l=o/2/Math.pow(3,.5),c=[[n,i],[n,i-l],[n+s,i],[n,i+l],[n,i],[n-s,i-l],[n-s,i+l],[n,i]];ge(this.icon).maybeAppend(".forward","polygon").styles({points:c,fill:a})},t}(Dr),LO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"label",{get:function(){return"\u64AD\u653E"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this.iconSize,s=o/3*Math.pow(3,.5)*.8,l=[[n+s,i],[n-s/2,i-o/2*.8],[n-s/2,i+o/2*.8],[n+s,i]];ge(this.icon).maybeAppend(".play","polygon").styles({points:l,fill:a})},t}(Dr),IO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"label",{get:function(){return"\u6682\u505C"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this.iconSize,s=o/3,l=[[n-s,i-o/2],[n-s,i+o/2],[n-s/2,i+o/2],[n-s/2,i-o/2],[n-s,i-o/2],[n+s/2,i-o/2],[n+s/2,i+o/2],[n+s,i+o/2],[n+s,i-o/2]];ge(this.icon).maybeAppend(".pause","polygon").styles({points:l,fill:a})},t}(Dr),NO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"label",{get:function(){return"\u8303\u56F4\u65F6\u95F4"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this,s=o.iconSize,l=o.lineWidth,c=l;ge(this.icon).maybeAppend(".left-line","line").styles({x1:n-s/2,y1:i-s/2,x2:n-s/2,y2:i+s/2,stroke:a,lineWidth:l}),ge(this.icon).maybeAppend(".right-line","line").styles({x1:n+s/2,y1:i-s/2,x2:n+s/2,y2:i+s/2,stroke:a,lineWidth:l}),ge(this.icon).maybeAppend(".left-arrow","line").styles({x1:n,y1:i,x2:n-s/2+c*2,y2:i,stroke:a,lineWidth:l,markerEnd:go(l*2,a)}),ge(this.icon).maybeAppend(".right-arrow","line").styles({x1:n,y1:i,x2:n+s/2-c*2,y2:i,stroke:a,lineWidth:l,markerEnd:go(l*2,a)})},t}(Dr),jO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"label",{get:function(){return"\u5355\u4E00\u65F6\u95F4"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this,s=o.iconSize,l=o.lineWidth;ge(this.icon).maybeAppend(".line","line").styles({x1:n,y1:i-s/2,x2:n,y2:i+s/2,stroke:a,lineWidth:l});var c=l;ge(this.icon).maybeAppend(".left-arrow","line").styles({x1:n-s/2-c*2,y1:i,x2:n-c*2,y2:i,stroke:a,lineWidth:l,markerEnd:go(l*2,a)}),ge(this.icon).maybeAppend(".right-arrow","line").styles({x1:n+s/2+c*2,y1:i,x2:n+c*2,y2:i,stroke:a,lineWidth:l,markerEnd:go(l*2,a)})},t}(Dr),s0=function(r){return[[-r/2,-r/2],[-r/2,r/2],[r/2,r/2]]},BO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"label",{get:function(){return"\u6298\u7EBF\u56FE"},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this,s=o.iconSize,l=o.lineWidth,c=l,u=(s-c*2-l)/4,h=(s-c*2-l)/2,f=(0,w.CR)([n-s/2+c,i+s/2-c*2],2),d=f[0],p=f[1];ge(this.icon).maybeAppend(".coordinate","polyline").styles({points:s0(s).map(function(g){var y=(0,w.CR)(g,2),m=y[0],b=y[1];return[m+n,b+i]}),stroke:a,lineWidth:l}),ge(this.icon).maybeAppend(".line","polyline").styles({points:[[d,p],[d+u,p-h],[d+u*2,p],[d+u*4,p-h*2]],stroke:a,lineWidth:l})},t}(Dr),FO=function(r){(0,w.ZT)(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"label",{get:function(){return"\u6761\u5F62\u56FE"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.data,n=this.attributes,i=n.x,a=n.y,o=n.color,s=this,l=s.iconSize,c=s.lineWidth,u=c,h=(l-u)/e.length,f=(l-u*2)/4,d=(0,w.CR)([i-l/2+u*2,a+l/2-u],2),p=d[0],g=d[1];ge(this.icon).maybeAppend(".coordinate","polyline").styles({points:s0(l).map(function(y){var m=(0,w.CR)(y,2),b=m[0],E=m[1];return[b+i,E+a]}),stroke:o,lineWidth:c}),ge(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(y,m){return{value:y,index:m}})).join(function(y){return y.append("line").attr("className","column").style("x1",function(m){var b=m.index;return p+h*b}).style("y1",g).style("x2",function(m){var b=m.index;return p+h*b}).style("y2",function(m){var b=m.value;return g-f*b}).styles({y1:g,stroke:o,lineWidth:c})})},t}(Dr),zO=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},{style:{color:"#d8d9d9"}},e))||this;return n.showBackground=!1,n}return t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.color,o=this,s=o.iconSize,l=o.lineWidth;ge(this.icon).maybeAppend(".split","line").styles({x1:n,y1:i-s/2,x2:n,y2:i+s/2,stroke:a,lineWidth:l})},t}(Dr),ah=function(r){(0,w.ZT)(t,r);function t(){var e=r.apply(this,(0,w.ev)([],(0,w.CR)(arguments),!1))||this;return e.showBackground=!1,e}return Object.defineProperty(t.prototype,"padding",{get:function(){return An(0)},enumerable:!1,configurable:!0}),t.prototype.renderIcon=function(){var e=this.iconSize,n=this.attributes,i=n.x,a=n.y,o=n.speed,s=o===void 0?1:o,l=gu(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),c=(0,ue.Z)(e,20,1/0),u=20,h=(0,w.pi)((0,w.pi)({},l),{x:i-c/2,y:a-u/2,width:c,height:u,defaultValue:s,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:e/5,placeholderFontSize:e/2,optionPadding:0,optionLabelFontSize:e/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});ge(this.icon).maybeAppend(".speed",function(){return new PO({style:h})}).attr("className","speed").each(function(){this.update(h)})},t.tag="SpeedSelect",t}(Dr),oh=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,e)||this;return n.icon=n.appendChild(new x.ZA({})),n.currentType=n.attributes.type,n}return t.prototype.getType=function(){return this.currentType},t.prototype.render=function(){var e=this,n=this.attributes,i=n.onChange,a=(0,w._T)(n,["onChange"]);ge(this.icon).selectAll(".icon").data([this.currentType]).join(function(o){return o.append(function(s){var l,c=(l=e.toggles.find(function(u){var h=(0,w.CR)(u,1),f=h[0];return f===s}))===null||l===void 0?void 0:l[1];if(!c)throw new Error("Invalid type: ".concat(s));return new c({})}).attr("className","icon").styles(a,!1).update({})},function(o){return o.styles({restStyles:a}).update({})},function(o){return o.remove()})},t.prototype.bindEvents=function(){var e=this,n=this.attributes.onChange;this.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var a=(e.toggles.findIndex(function(s){var l=(0,w.CR)(s,1),c=l[0];return c===e.currentType})+1)%e.toggles.length,o=e.toggles[a][0];n==null||n(e.currentType),e.currentType=o,e.render()})},t.tag="ToggleIcon",t}(rn),sh=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},{style:{type:"play"}},e))||this;return n.toggles=[["play",LO],["pause",IO]],n}return t}(oh),lh=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},{style:{type:"range"}},e))||this;return n.toggles=[["range",NO],["value",jO]],n}return t}(oh),ch=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},{style:{type:"column"}},e))||this;return n.toggles=[["line",BO],["column",FO]],n}return t}(oh),WO={reset:RO,speed:ah,backward:DO,playPause:sh,forward:kO,selectionType:lh,chartType:ch,split:zO},GO=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},t.defaultOptions,e))||this;return n.background=n.appendChild(new x.UL({})),n.functions=n.appendChild(new x.ZA({})),n}return Object.defineProperty(t.prototype,"padding",{get:function(){return An(this.attributes.padding)},enumerable:!1,configurable:!0}),t.prototype.renderBackground=function(){var e=this.style,n=e.x,i=e.y,a=e.width,o=e.height,s=Te(this.attributes,"background");this.background.attr((0,w.pi)({x:n,y:i,width:a,height:o},s))},t.prototype.renderFunctions=function(){var e=this,n,i=this.attributes,a=i.functions,o=i.iconSize,s=i.iconSpacing,l=i.x,c=i.y,u=i.width,h=i.height,f=i.align,d=(0,w.CR)(this.padding,4),p=d[1],g=d[3],y=a.reduce(function(E,O){return E.length&&O.length?E.concat.apply(E,(0,w.ev)(["split"],(0,w.CR)(O),!1)):E.concat.apply(E,(0,w.ev)([],(0,w.CR)(O),!1))},[]),m=y.length*(o+s)-s,b={left:g+o/2,center:(u-m)/2+o/2,right:u-m-g-p+o/2}[f]||0;(n=this.speedSelect)===null||n===void 0||n.destroy(),this.functions.removeChildren(),y.forEach(function(E,O){var M,k=WO[E],D={x:l+O*(o+s)+b,y:c+h/2,size:o};if(k===ah?(D.speed=e.attributes.speed,D.onSelect=function(rt){return e.handleFunctionChange(E,{value:rt})}):[sh,lh,ch].includes(k)?(D.onChange=function(rt){return e.handleFunctionChange(E,{value:rt})},k===sh&&(D.type=e.attributes.state==="play"?"pause":"play"),k===lh&&(D.type=e.attributes.selectionType==="range"?"value":"range"),k===ch&&(D.type=e.attributes.chartType==="line"?"column":"line")):D.onClick=function(){return e.handleFunctionChange(E,{value:E})},k===ah){var N=(M=e.ownerDocument)===null||M===void 0?void 0:M.defaultView;N&&(e.speedSelect=new k({style:(0,w.pi)((0,w.pi)({},D),{zIndex:100})}),N.appendChild(e.speedSelect))}else e.functions.appendChild(new k({style:D}))})},t.prototype.disconnectedCallback=function(){var e;r.prototype.disconnectedCallback.call(this),(e=this.speedSelect)===null||e===void 0||e.destroy()},t.prototype.render=function(){this.renderBackground(),this.renderFunctions()},t.prototype.handleFunctionChange=function(e,n){var i=this.attributes.onChange;i==null||i(e,n)},t.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},t}(rn),VO=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},t.defaultOptions,e))||this;return n.bindEvents(),n}return t.prototype.bindEvents=function(){var e=this;this.addEventListener("mouseenter",function(){e.attr("lineWidth",Math.ceil(+(e.style.r||0)/2))}),this.addEventListener("mouseleave",function(){e.attr("lineWidth",0)})},t.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},t}(x.Cd),HO=function(r){(0,w.ZT)(t,r);function t(e){return r.call(this,xn({},t.defaultOptions,e))||this}return t.prototype.renderBackground=function(){var e=this.attributes,n=e.x,i=e.y,a=e.width,o=e.height,s=Te(this.attributes,"background");ge(this).maybeAppend("background","rect").attr("className","background").styles((0,w.pi)({x:n-a/2,y:i-o/2,width:a,height:o},s))},t.prototype.renderIcon=function(){var e=this.attributes,n=e.x,i=e.y,a=e.iconSize,o=Te(this.attributes,"icon"),s=1,l=a/2;ge(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles((0,w.pi)({x1:n-s,y1:i-l,x2:n-s,y2:i+l},o)),ge(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles((0,w.pi)({x1:n+s,y1:i-l,x2:n+s,y2:i+l},o))},t.prototype.renderBorder=function(){var e=this.attributes,n=e.x,i=e.y,a=e.width,o=e.height,s=e.type,l=Te(this.attributes,"border"),c=s==="start"?+a/2:-a/2;ge(this).maybeAppend("border","line").attr("className","border").styles((0,w.pi)({x1:c+n,y1:i-o/2,x2:c+n,y2:i+o/2},l))},t.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},t.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},t}(rn);function ZO(r,t){return typeof r=="number"?l0(r):$O(r,t)}function $O(r,t){var e=new Date(r);switch(t){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(e.getHours())&&e.getMinutes()===0?Bn(e,`HH:mm
YYYY-MM-DD`):Bn(e,"HH:mm");case"half-day":return e.getHours()<12?`AM
`.concat(Bn(e,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(e.getDate())?Bn(e,`DD
YYYY-MM`):Bn(e,"DD");case"week":return e.getDate()<=7?Bn(e,`DD
YYYY-MM`):Bn(e,"DD");case"month":return[0,6].includes(e.getMonth())?Bn(e,`MM\u6708
YYYY`):Bn(e,"MM\u6708");case"season":return[0].includes(e.getMonth())?Bn(e,`MM\u6708
YYYY`):Bn(e,"MM\u6708");case"year":return Bn(e,"YYYY");default:return Bn(e,"YYYY-MM-DD HH:mm")}}function l0(r){var t=String(Math.floor(r/3600)).padStart(2,"0"),e=String(Math.floor(r%3600/60)).padStart(2,"0"),n=String(Math.floor(r%60)).padStart(2,"0");return r<3600?"".concat(e,":").concat(n):"".concat(t,":").concat(e,":").concat(n)}var UO=function(r){(0,w.ZT)(t,r);function t(e){var n=r.call(this,xn({},t.defaultOptions,e))||this;n.axis=n.appendChild(new HS({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),n.timeline=n.appendChild(new MO({style:{onChange:function(h){n.handleSliderChange(h)}}})),n.controller=n.appendChild(new GO({})),n.states={},n.handleSliderChange=function(h){var f=function(){var d=n.states.values;return Array.isArray(d)?(0,w.ev)([],(0,w.CR)(d),!1):d}();n.setBySliderValues(h),n.dispatchOnChange(f)};var i=n.attributes,a=i.selectionType,o=i.chartType,s=i.speed,l=i.state,c=i.playMode,u=i.values;return n.states={chartType:o,playMode:c,selectionType:a,speed:s,state:l},n.setByTimebarValues(u),n}return Object.defineProperty(t.prototype,"data",{get:function(){var e=this.attributes.data,n=function(i,a){return i.time<a.time?-1:i.time>a.time?1:0};return e.sort(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"space",{get:function(){var e=this.attributes,n=e.x,i=e.y,a=e.width,o=e.height,s=e.type,l=e.controllerHeight,c=(0,ue.Z)(+o-l,0,+o),u=new Ln(n,i+ +o-l,+a,l),h,f=0;s==="chart"?(f=35,h=new Ln(n,i+c-f,+a,f)):h=new Ln;var d=s==="time"?10:c,p=new Ln(n,i+(s==="time"?c:c-d),+a,d-f);return{axisBBox:h,controllerBBox:u,timelineBBox:p}},enumerable:!1,configurable:!0}),t.prototype.setBySliderValues=function(e){var n,i,a=this.data,o=(0,w.CR)(Array.isArray(e)?e:[0,e],2),s=o[0],l=o[1],c=a.length,u=a[Math.floor(s*c)],h=a[Math.ceil(l*c)-(Array.isArray(e)?0:1)];this.states.values=[(n=u==null?void 0:u.time)!==null&&n!==void 0?n:a[0].time,(i=h==null?void 0:h.time)!==null&&i!==void 0?i:1/0]},t.prototype.setByTimebarValues=function(e){var n,i,a,o=this.data,s=(0,w.CR)(Array.isArray(e)?e:[void 0,e],2),l=s[0],c=s[1],u=o.find(function(f){var d=f.time;return d===l}),h=o.find(function(f){var d=f.time;return d===c});this.states.values=[(n=u==null?void 0:u.time)!==null&&n!==void 0?n:(i=o[0])===null||i===void 0?void 0:i.time,(a=h==null?void 0:h.time)!==null&&a!==void 0?a:1/0]},t.prototype.setByIndex=function(e){var n,i,a,o,s=this.data,l=(0,w.CR)(e,2),c=l[0],u=l[1];this.states.values=[(i=(n=s[c])===null||n===void 0?void 0:n.time)!==null&&i!==void 0?i:s[0].time,(o=(a=this.data[u])===null||a===void 0?void 0:a.time)!==null&&o!==void 0?o:1/0]},Object.defineProperty(t.prototype,"sliderValues",{get:function(){var e=this.states,n=e.values,i=e.selectionType,a=(0,w.CR)(Array.isArray(n)?n:[void 0,n],2),o=a[0],s=a[1],l=this.data,c=l.length,u=i==="value",h=function(){var d=l.findIndex(function(p){var g=p.time;return g===o});return u?0:d>-1?d/c:0},f=function(){if(s===1/0)return 1;var d=l.findIndex(function(p){var g=p.time;return g===s});return d>-1?d/c:u?.5:1};return[h(),f()]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var e=this.states,n=e.values,i=e.selectionType,a=(0,w.CR)(Array.isArray(n)?n:[this.data[0].time,n],2),o=a[0],s=a[1];return i==="value"?s:[o,s]},enumerable:!1,configurable:!0}),t.prototype.getDatumByRatio=function(e){var n=this.data,i=n.length,a=Math.floor(e*(i-1));return n[a]},Object.defineProperty(t.prototype,"chartHandleIconShape",{get:function(){var e=this.states.selectionType,n=this.space.timelineBBox.height;return e==="range"?function(i){return new HO({style:{type:i,height:n,iconSize:n/6}})}:function(){return new x.x1({style:{x1:0,y1:-n/2,x2:0,y2:n/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),t.prototype.getChartStyle=function(e){var n=this,i=e.x,a=e.y,o=e.width,s=e.height,l=this.states,c=l.selectionType,u=l.chartType,h=this.data,f=this.attributes,d=f.type,p=f.labelFormatter,g=Te(this.attributes,"chart"),y=g.type,m=(0,w._T)(g,["type"]),b=c==="range";if(d==="time")return(0,w.pi)({handleIconShape:function(){return new VO({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:b?-15:0,autoFitLabel:b,handleSpacing:b?-15:0,trackFill:"#edeeef",trackLength:o,trackOpacity:.5,trackRadius:s/2,trackSize:s/2,type:c,values:this.sliderValues,formatter:function(M){if(p)return p(M);var k=n.getDatumByRatio(M).time;return typeof k=="number"?l0(k):Bn(k,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},m);var E=c==="range"?5:0,O=h.map(function(M){var k=M.value;return k});return(0,w.pi)({handleIconOffset:E,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:O,sparklineType:u,sparklineScale:.8,trackLength:o,trackSize:s,type:c,values:this.sliderValues,transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},m)},t.prototype.renderChart=function(e){e===void 0&&(e=this.space.timelineBBox),this.timeline.update(this.getChartStyle(e))},t.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},t.prototype.getAxisStyle=function(e){var n=this.data,i=this.attributes,a=i.interval,o=i.labelFormatter,s=Te(this.attributes,"axis"),l=e.x,c=e.y,u=e.width,h=(0,w.ev)((0,w.ev)([],(0,w.CR)(n),!1),[{time:0}],!1).map(function(d,p,g){var y=d.time;return{label:"".concat(y),value:p/(g.length-1),time:y}}),f=(0,w.pi)({startPos:[l,c],endPos:[l+u,c],data:h,labelFilter:function(d,p){return p<h.length-1},labelFormatter:function(d){var p=d.time;return o?o(p):ZO(p,a)}},s);return f},t.prototype.renderAxis=function(e){e===void 0&&(e=this.space.axisBBox);var n=this.attributes.type;n==="chart"&&this.axis.update(this.getAxisStyle(e))},t.prototype.renderController=function(e){e===void 0&&(e=this.space.controllerBBox);var n=this.attributes.type,i=this.states,a=i.state,o=i.speed,s=i.selectionType,l=i.chartType,c=Te(this.attributes,"controller"),u=this,h=(0,w.pi)((0,w.pi)((0,w.pi)({},e),{iconSize:20,speed:o,state:a,selectionType:s,chartType:l,onChange:function(f,d){var p=d.value;switch(f){case"reset":u.internalReset();break;case"speed":u.handleSpeedChange(p);break;case"backward":u.internalBackward();break;case"playPause":p==="play"?u.internalPlay():u.internalPause();break;case"forward":u.internalForward();break;case"selectionType":u.handleSelectionTypeChange(p);break;case"chartType":u.handleChartTypeChange(p);break;default:break}}}),c);n==="time"&&(h.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(h)},t.prototype.dispatchOnChange=function(e){var n=this.data,i=this.attributes.onChange,a=this.states,o=a.values,s=a.selectionType,l=(0,w.CR)(o,2),c=l[0],u=l[1],h=u===1/0?n.at(-1).time:u,f=s==="range"?[c,h]:h,d=function(p,g){return Array.isArray(p)?Array.isArray(g)?p[0]===g[0]&&(p[1]===g[1]||p[1]===1/0||g[1]===1/0):!1:Array.isArray(g)?!1:p===g};(!e||!d(e,f))&&(i==null||i(s==="range"?[c,h]:h))},t.prototype.internalReset=function(e){var n,i,a=this.states.selectionType;this.internalPause(),this.setBySliderValues(a==="range"?[0,1]:[0,0]),this.renderController(),this.updateSelection(),e||((i=(n=this.attributes)===null||n===void 0?void 0:n.onReset)===null||i===void 0||i.call(n),this.dispatchOnChange())},t.prototype.reset=function(){this.internalReset()},t.prototype.moveSelection=function(e,n){var i=this.data,a=i.length,o=this.states,s=o.values,l=o.selectionType,c=o.playMode,u=(0,w.CR)(s,2),h=u[0],f=u[1],d=i.findIndex(function(E){var O=E.time;return O===h}),p=i.findIndex(function(E){var O=E.time;return O===f});p===-1&&(p=a);var g=e==="backward"?-1:1,y;l==="range"?c==="acc"?(y=[d,p+g],g===-1&&d===p&&(y=[d,a])):y=[d+g,p+g]:y=[d,p+g];var m=function(E){var O=(0,w.CR)(E.sort(function(N,rt){return N-rt}),2),M=O[0],k=O[1],D=function(N){return(0,ue.Z)(N,0,a)};return k>a?l==="value"?[0,0]:c==="acc"?[D(M),D(M)]:[0,D(k-M)]:M<0?c==="acc"?[0,D(k)]:[D(M+a-k),a]:[D(M),D(k)]},b=m(y);return this.setByIndex(b),this.updateSelection(),b},t.prototype.internalBackward=function(e){var n,i,a=this.moveSelection("backward",e);return e||((i=(n=this.attributes)===null||n===void 0?void 0:n.onBackward)===null||i===void 0||i.call(n),this.dispatchOnChange()),a},t.prototype.backward=function(){this.internalBackward()},t.prototype.internalPlay=function(e){var n=this,i,a,o=this.data,s=this.attributes.loop,l=this.states.speed,c=l===void 0?1:l;this.playInterval=window.setInterval(function(){var u=n.internalForward();u[1]===o.length&&!s&&(n.internalPause(),n.renderController())},1e3/c),this.states.state="play",!e&&((a=(i=this.attributes)===null||i===void 0?void 0:i.onPlay)===null||a===void 0||a.call(i))},t.prototype.play=function(){this.internalPlay()},t.prototype.internalPause=function(e){var n,i;clearInterval(this.playInterval),this.states.state="pause",!e&&((i=(n=this.attributes)===null||n===void 0?void 0:n.onPause)===null||i===void 0||i.call(n))},t.prototype.pause=function(){this.internalPause()},t.prototype.internalForward=function(e){var n,i,a=this.moveSelection("forward",e);return e||((i=(n=this.attributes)===null||n===void 0?void 0:n.onForward)===null||i===void 0||i.call(n),this.dispatchOnChange()),a},t.prototype.forward=function(){this.internalForward()},t.prototype.handleSpeedChange=function(e){var n,i;this.states.speed=e;var a=this.states.state;a==="play"&&(this.internalPause(!0),this.internalPlay(!0)),(i=(n=this.attributes)===null||n===void 0?void 0:n.onSpeedChange)===null||i===void 0||i.call(n,e)},t.prototype.handleSelectionTypeChange=function(e){var n,i;this.states.selectionType=e,this.renderChart(),(i=(n=this.attributes)===null||n===void 0?void 0:n.onSelectionTypeChange)===null||i===void 0||i.call(n,e)},t.prototype.handleChartTypeChange=function(e){var n,i;this.states.chartType=e,this.renderChart(),(i=(n=this.attributes)===null||n===void 0?void 0:n.onChartTypeChange)===null||i===void 0||i.call(n,e)},t.prototype.render=function(){var e=this.space,n=e.axisBBox,i=e.controllerBBox,a=e.timelineBBox;this.renderController(i),this.renderAxis(n),this.renderChart(a),this.states.state==="play"&&this.internalPlay()},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.internalPause(!0)},t.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},t}(rn);function YO(r){return r instanceof Date}var KO=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},XO=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};const qO=["timestamp","time","date","datetime"];class Dl extends Tn{get padding(){return xr(this.options.padding)}constructor(t,e){super(t,Object.assign({},Dl.defaultOptions,e)),this.backup(),this.upsertTimebar()}play(){var t;(t=this.timebar)===null||t===void 0||t.play()}pause(){var t;(t=this.timebar)===null||t===void 0||t.pause()}forward(){var t;(t=this.timebar)===null||t===void 0||t.forward()}backward(){var t;(t=this.timebar)===null||t===void 0||t.backward()}reset(){var t;(t=this.timebar)===null||t===void 0||t.reset()}update(t){super.update(t),this.backup(),this.upsertTimebar()}backup(){this.originalData=c0(this.context.graph.getData())}upsertTimebar(){const{canvas:t}=this.context,e=this.options,{onChange:n,timebarType:i,data:a,x:o,y:s,width:l,height:c,mode:u}=e,h=XO(e,["onChange","timebarType","data","x","y","width","height","mode"]),f=t.getSize(),[d]=this.padding;this.upsertCanvas().ready.then(()=>{var p;const g=Object.assign(Object.assign({x:f[0]/2-l/2,y:d,onChange:y=>{const m=((0,Xr.Z)(y)?y:[y,y]).map(b=>YO(b)?b.getTime():b);this.options.mode==="modify"?this.filterElements(m):this.hiddenElements(m),n==null||n(m)}},h),{data:a.map(y=>(0,pt.Z)(y)?{time:y,value:0}:y),width:l,height:c,type:i});this.timebar?this.timebar.update(g):(this.timebar=new UO({style:g}),(p=this.canvas)===null||p===void 0||p.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;const{className:t,height:e,position:n}=this.options,i=this.context.canvas,[a]=i.getSize(),[o,,s]=this.padding,[l,c]=Lu({width:a,height:e+o+s,graphCanvas:i,className:"timebar",placement:n});return this.container=l,t&&l.classList.add(t),this.canvas=c,this.canvas}filterElements(t){return KO(this,void 0,void 0,function*(){var e;if(!this.originalData)return;const{elementTypes:n,getTime:i}=this.options,{graph:a,element:o}=this.context,s=c0(this.originalData);n.forEach(c=>{const u=`${c}s`;s[u]=(this.originalData[u]||[]).filter(h=>{const f=i(h);return!!u0(f,t)})});const l=[...s.nodes,...s.combos].map(c=>St(c));s.edges=s.edges.filter(c=>{const u=c.source,h=c.target;return l.includes(u)&&l.includes(h)}),a.setData(s),yield(e=o.draw({animation:!1,silence:!0}))===null||e===void 0?void 0:e.finished})}hiddenElements(t){const{graph:e}=this.context,{elementTypes:n,getTime:i}=this.options,a=[],o=[];n.forEach(s=>{var l;const c=`${s}s`;(((l=this.originalData)===null||l===void 0?void 0:l[c])||[]).forEach(h=>{const f=St(h),d=i(h);u0(d,t)?o.push(f):a.push(f)})}),e.hideElement(a,!1),e.showElement(o,!1)}destroy(){var t,e,n;const{graph:i}=this.context;this.originalData&&i.setData(Object.assign({},this.originalData)),(t=this.timebar)===null||t===void 0||t.destroy(),(e=this.canvas)===null||e===void 0||e.destroy(),(n=this.container)===null||n===void 0||n.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}Dl.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:r=>QO(r,qO,void 0),loop:!1};const c0=r=>{const{nodes:t=[],edges:e=[],combos:n=[]}=r;return{nodes:[...t],edges:[...e],combos:[...n]}},u0=(r,t)=>{if((0,pt.Z)(t))return r===t;const[e,n]=t;return r>=e&&r<=n},QO=(r,t,e)=>{var n;for(let i=0;i<t.length;i++){const a=t[i],o=(n=r.data)===null||n===void 0?void 0:n[a];if(o)return o}return e};function JO(r){const t={top:"unset",right:"unset",bottom:"unset",left:"unset"};return r.split("-").forEach(n=>{t[n]="8px"}),t.flexDirection=r.startsWith("top")||r.startsWith("bottom")?"row":"column",t}const tM=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,eM=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var h0=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class kl extends Tn{constructor(t,e){super(t,Object.assign({},kl.defaultOptions,e)),this.$element=ga("toolbar",!1),this.onToolbarItemClick=i=>{const{onClick:a}=this.options;if(i.target instanceof Element&&i.target.className.includes("g6-toolbar-item")){const o=i.target.getAttribute("value");a==null||a(o,i.target)}};const n=this.context.canvas.getContainer();this.$element.style.display="flex",n.appendChild(this.$element),yu("g6-toolbar-css","style",{},tM,document.head),yu("g6-toolbar-svgicon","div",{display:"none"},eM),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(e)}update(t){const e=Object.create(null,{update:{get:()=>super.update}});return h0(this,void 0,void 0,function*(){e.update.call(this,t);const{className:n,position:i,style:a}=this.options;this.$element.className=`g6-toolbar ${n||""}`,Object.assign(this.$element.style,a,JO(i)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return h0(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(e=>{var n;return`
          <div class="g6-toolbar-item" value="${e.value}" title="${(n=e.title)!==null&&n!==void 0?n:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${e.id}"></use>
            </svg>
          </div>`}).join("")})}}kl.defaultOptions={position:"top-left"};function uh(r){var t=document.createElement("div");t.innerHTML=r;var e=t.childNodes[0];return e&&t.contains(e)&&t.removeChild(e),e}function nM(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)==="\\"?e.slice(1):t[n]===void 0?"":t[n]})}var rM=nM,f0=function(r,t){if(t==null){r.innerHTML="";return}r.replaceChildren?Array.isArray(t)?r.replaceChildren.apply(r,(0,w.ev)([],(0,w.CR)(t),!1)):r.replaceChildren(t):(r.innerHTML="",Array.isArray(t)?t.forEach(function(e){return r.appendChild(e)}):r.appendChild(t))};function hh(r){return r===void 0&&(r=""),{CONTAINER:"".concat(r,"tooltip"),TITLE:"".concat(r,"tooltip-title"),LIST:"".concat(r,"tooltip-list"),LIST_ITEM:"".concat(r,"tooltip-list-item"),NAME:"".concat(r,"tooltip-list-item-name"),MARKER:"".concat(r,"tooltip-list-item-marker"),NAME_LABEL:"".concat(r,"tooltip-list-item-name-label"),VALUE:"".concat(r,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(r,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(r,"tooltip-crosshair-y")}}var d0={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function iM(r){var t;r===void 0&&(r="");var e=hh(r);return t={},t[".".concat(e.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(e.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(e.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(e.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(e.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(e.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(e.NAME_LABEL)]=(0,w.pi)({flex:1},d0),t[".".concat(e.VALUE)]=(0,w.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},d0),t[".".concat(e.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(e.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var aM=function(r){(0,w.ZT)(t,r);function t(e){var n=this,i,a,o=(a=(i=e.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,s=hh(o);return n=r.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(s.NAME,`">
          <span class="`).concat(s.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(s.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(s.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:iM(o)})||this,n.timestamp=-1,n.prevCustomContentKey=n.attributes.contentKey,n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){var e=this.element.offsetWidth,n=this.element.offsetHeight;return{width:e,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var e=this.attributes,n=e.data,i=e.template;return n.map(function(a,o){var s=a.name,l=s===void 0?"":s,c=a.color,u=c===void 0?"black":c,h=a.index,f=(0,w._T)(a,["name","color","index"]),d=(0,w.pi)({name:l,color:u,index:h!=null?h:o},f);return uh(rM(i.item,d))})},enumerable:!1,configurable:!0}),t.prototype.render=function(e,n){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var e;(e=this.element)===null||e===void 0||e.remove(),r.prototype.destroy.call(this)},t.prototype.show=function(e,n){var i=this;if(e!==void 0&&n!==void 0){var a=this.element.style.visibility==="hidden",o=function(){i.attributes.x=e!=null?e:i.attributes.x,i.attributes.y=n!=null?n:i.attributes.y,i.updatePosition()};a?this.closeTransition(o):o()}this.element.style.visibility="visible"},t.prototype.hide=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.attributes.enterable;i&&this.isCursorEntered(e,n)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var e=this.attributes.template;this.element=uh(e.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var e=this.attributes.content;e&&(typeof e=="string"?this.element.innerHTML=e:f0(this.element,e))}},t.prototype.renderHTMLTooltipElement=function(){var e,n,i=this.attributes,a=i.template,o=i.title,s=i.enterable,l=i.style,c=i.content,u=hh(a.prefixCls),h=this.element;if(this.element.style.pointerEvents=s?"auto":"none",c)this.renderCustomContent();else{o?(h.innerHTML=a.title,h.getElementsByClassName(u.TITLE)[0].innerHTML=o):(n=(e=h.getElementsByClassName(u.TITLE))===null||e===void 0?void 0:e[0])===null||n===void 0||n.remove();var f=this.HTMLTooltipItemsElements,d=document.createElement("ul");d.className=u.LIST,f0(d,f);var p=this.element.querySelector(".".concat(u.LIST));p?p.replaceWith(d):h.appendChild(d)}jE(h,l)},t.prototype.getRelativeOffsetFromCursor=function(e){var n=this.attributes,i=n.position,a=n.offset,o=e||i,s=o.split("-"),l={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},c=this.elementSize,u=c.width,h=c.height,f=[-u/2,-h/2];return s.forEach(function(d){var p=(0,w.CR)(f,2),g=p[0],y=p[1],m=(0,w.CR)(l[d],2),b=m[0],E=m[1];f=[g+(u/2+a[0])*b,y+(h/2+a[1])*E]}),f},t.prototype.setOffsetPosition=function(e){var n=(0,w.CR)(e,2),i=n[0],a=n[1],o=this.attributes,s=o.x,l=s===void 0?0:s,c=o.y,u=c===void 0?0:c,h=o.container,f=h.x,d=h.y;this.element.style.left="".concat(+l+f+i,"px"),this.element.style.top="".concat(+u+d+a,"px")},t.prototype.updatePosition=function(){var e=this.attributes.showDelay,n=e===void 0?60:e,i=Date.now();this.timestamp>0&&i-this.timestamp<n||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(e){var n=(0,w.CR)(e,2),i=n[0],a=n[1],o=this.attributes,s=o.x,l=o.y,c=o.bounding,u=o.position;if(!c)return[i,a];var h=this.element,f=h.offsetWidth,d=h.offsetHeight,p=(0,w.CR)([+s+i,+l+a],2),g=p[0],y=p[1],m={left:"right",right:"left",top:"bottom",bottom:"top"},b=c.x,E=c.y,O=c.width,M=c.height,k={left:g<b,right:g+f>b+O,top:y<E,bottom:y+d>E+M},D=[];u.split("-").forEach(function(rt){k[rt]?D.push(m[rt]):D.push(rt)});var N=D.join("-");return this.getRelativeOffsetFromCursor(N)},t.prototype.isCursorEntered=function(e,n){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,o=i.y,s=i.width,l=i.height;return new Ln(a,o,s,l).isPointIn(e,n)}return!1},t.prototype.closeTransition=function(e){var n=this,i=this.element.style.transition;this.element.style.transition="none",e(),setTimeout(function(){n.element.style.transition=i},10)},t.tag="tooltip",t}(rn),p0=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Ll extends Tn{constructor(t,e){super(t,Object.assign({},Ll.defaultOptions,e)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(n,i)=>{const{enable:a}=this.options;return typeof a=="function"?a(n,i):a},this.onClick=n=>{const{target:{id:i}}=n;this.currentTarget===i?this.hide(n):this.show(n)},this.onPointerMove=n=>{const{target:i}=n;!this.currentTarget||i.id===this.currentTarget||this.show(n)},this.onPointerLeave=n=>{this.hide(n)},this.onCanvasMove=n=>{this.hide(n)},this.onPointerEnter=n=>{this.show(n)},this.showById=n=>p0(this,void 0,void 0,function*(){const i={target:{id:n}};yield this.show(i)}),this.getElementData=(n,i)=>{const{model:a}=this.context;switch(i){case"node":return a.getNodeData([n]);case"edge":return a.getEdgeData([n]);case"combo":return a.getComboData([n]);default:return[]}},this.show=n=>p0(this,void 0,void 0,function*(){var i,a;const{client:o,target:{id:s}}=n;if(Ps(n.target))return;const l=this.context.graph.getElementType(s),{getContent:c,title:u}=this.options,h=this.getElementData(s,l);if(!this.tooltipElement||!this.isEnable(n,h))return;let f={};if(c){if(f.content=yield c(n,h),!f.content)return}else{const g=this.context.graph.getElementRenderStyle(s),y=l==="node"?g.fill:g.stroke;f={title:u||l,data:h.map(m=>({name:"ID",value:m.id||`${m.source} -> ${m.target}`,color:y}))}}this.currentTarget=s;let d,p;if(o)d=o.x,p=o.y;else{const g=Un(h,"0.style",{x:0,y:0});d=g.x,p=g.y}(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:d,y:p,style:{".tooltip":{visibility:"visible"}}}),f))}),this.hide=n=>{var i,a,o,s,l;if(!n){(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!1),(o=this.tooltipElement)===null||o===void 0||o.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;const{client:{x:c,y:u}}=n;(l=(s=this.options).onOpenChange)===null||l===void 0||l.call(s,!1),this.tooltipElement.hide(c,u),this.currentTarget=null},this.initTooltip=()=>{var n;const i=new aM({className:"tooltip",style:this.tooltipStyleProps});return(n=this.container)===null||n===void 0||n.appendChild(i.HTMLTooltipElement),i},this.render(),this.bindEvents()}getEvents(){return this.options.trigger==="click"?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerenter":this.onPointerEnter,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerenter":this.onPointerEnter,"edge:pointermove":this.onPointerMove,"combo:pointerenter":this.onPointerEnter,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(t){var e;this.unbindEvents(),super.update(t),this.tooltipElement&&((e=this.container)===null||e===void 0||e.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:t}=this.context,e=t.getContainer();e&&(this.container=e,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:t}=this.context,e=this.getEvents();Object.keys(e).forEach(n=>{t.off(n,e[n])})}bindEvents(){const{graph:t}=this.context,e=this.getEvents();Object.keys(e).forEach(n=>{t.on(n,e[n])})}get tooltipStyleProps(){const{canvas:t}=this.context,{center:e}=t.getBounds(),n=t.getContainer(),{top:i,left:a}=n.getBoundingClientRect(),{style:o,position:s,enterable:l,container:c={x:-a,y:-i},title:u,offset:h}=this.options,[f,d]=e,[p,g]=t.getSize();return{x:f,y:d,container:c,title:u,bounding:{x:0,y:0,width:p,height:g},position:s,enterable:l,offset:h,style:o}}destroy(){var t;this.unbindEvents(),this.tooltipElement&&((t=this.container)===null||t===void 0||t.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}Ll.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var v0=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};let xa;function g0(r,t){return xa||(xa=document.createElement("canvas")),xa.width=r,xa.height=t,xa.getContext("2d").clearRect(0,0,r,t),xa}function oM(r,t,e,n){return v0(this,void 0,void 0,function*(){const i=g0(r,t),a=i.getContext("2d"),{rotate:o,opacity:s,textFill:l,textFontSize:c,textFontFamily:u,textFontVariant:h,textFontWeight:f,textAlign:d,textBaseline:p}=n;return a.textAlign=d,a.textBaseline=p,a.translate(r/2,t/2),a.font=`${c}px ${u} ${h} ${f}`,o&&a.rotate(o),s&&(a.globalAlpha=s),l&&(a.fillStyle=l,a.fillText(`${e}`,0,0)),i.toDataURL()})}function sM(r,t,e,n){return v0(this,void 0,void 0,function*(){const i=g0(r,t),a=i.getContext("2d"),{rotate:o,opacity:s}=n;o&&a.rotate(o),s&&(a.globalAlpha=s);const l=new Image;return l.crossOrigin="anonymous",l.src=e,new Promise(c=>{l.onload=function(){const u=r>l.width?(r-l.width)/2:0,h=t>l.height?(t-l.height)/2:0;a.drawImage(l,0,0,l.width,l.height,u,h,r-u*2,t-h*2),c(i.toDataURL())}})})}var lM=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},cM=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class Il extends Tn{constructor(t,e){super(t,Object.assign({},Il.defaultOptions,e)),this.$element=ga("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(e)}update(t){const e=Object.create(null,{update:{get:()=>super.update}});return lM(this,void 0,void 0,function*(){e.update.call(this,t);const n=this.options,{width:i,height:a,text:o,imageURL:s}=n,l=cM(n,["width","height","text","imageURL"]);Object.keys(l).forEach(u=>{u.startsWith("background")&&(this.$element.style[u]=t[u])});const c=s?yield sM(i,a,s,l):yield oM(i,a,o,l);this.$element.style.backgroundImage=`url(${c})`})}destroy(){super.destroy(),this.$element.remove()}}Il.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const uM=["#7E92B5","#F4664A","#FFBE3A"],hM={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},fM={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function y0(r){const{bgColor:t,textColor:e,nodeColor:n,nodeColorDisabled:i,nodeStroke:a,nodeHaloStrokeOpacityActive:o=.15,nodeHaloStrokeOpacitySelected:s=.25,nodeOpacityDisabled:l=.06,nodeIconOpacityInactive:c=.85,nodeOpacityInactive:u=.25,nodeBadgePalette:h=uM,nodePaletteOptions:f=hM,edgeColor:d,edgeColorDisabled:p,edgePaletteOptions:g=fM,comboColor:y,comboColorDisabled:m,comboStroke:b,comboStrokeDisabled:E,edgeColorInactive:O}=r;return{background:t,node:{palette:f,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:h,fill:n,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:e,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:n,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:s,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:o},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:u,donutOpacity:u,fillOpacity:u,iconOpacity:c,labelFill:e,labelFillOpacity:u,strokeOpacity:u},disabled:{badgeBackgroundOpacity:.25,donutOpacity:l,fill:i,fillOpacity:l,iconFill:i,iconOpacity:.25,labelFill:e,labelFillOpacity:.25,strokeOpacity:l}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:g,style:{badgeBackgroundFill:d,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:e,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:d,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:O,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:p,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:t,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:y,halo:!1,haloLineWidth:12,haloStroke:b,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:t,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:e,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:b},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:m,fillOpacity:.25,labelOpacity:.25,stroke:E,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const dM=y0({bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:{type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"}),pM=y0({bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"});class Ci extends xc{beforeDraw(t,e){return t}afterLayout(t,e){}}class vM extends Ci{beforeDraw(t){const{model:e}=this.context,n=t.add.combos,i=a=>{const o=[];return a.forEach((s,l)=>{const u=e.getAncestorsData(l,"combo").map(h=>St(h)).reverse();o.push([l,s,u.length])}),new Map(o.sort(([,,s],[,,l])=>l-s).map(([s,l])=>[s,l]))};return t.add.combos=i(n),t.update.combos=i(t.update.combos),t}}function or(r,t,e,n,i){const a=St(n),o=`${e}s`,s=i?n:r.add[o].get(a)||r.update[o].get(a)||r.remove[o].get(a)||n;Object.entries(r).forEach(([l,c])=>{t===l?c[o].set(a,s):c[o].delete(a)})}function Nl(r,t){return Object.keys(r).every(e=>r[e]===t[e])}class gM extends Ci{beforeDraw(t,e){if(e.stage==="visibility"||!this.context.model.model.hasTreeStructure(Ge))return t;const{model:n}=this.context,{add:i,update:a}=t,o=[...t.update.combos.entries(),...t.add.combos.entries()];for(;o.length;){const[s,l]=o.pop();if($n(l)){const c=n.getDescendantsData(s),u=c.map(St),{internal:h,external:f}=iu(u,d=>n.getRelatedEdgesData(d));c.forEach(d=>{const p=St(d),g=o.findIndex(([m])=>m===p);g!==-1&&o.splice(g,1);const y=n.getElementType(p);or(t,"remove",y,d)}),h.forEach(d=>or(t,"remove","edge",d)),f.forEach(d=>{var p;const g=St(d);((p=this.context.element)===null||p===void 0?void 0:p.getElement(g))?a.edges.set(g,d):i.edges.set(g,d)})}else{const c=n.getChildrenData(s),u=c.map(St),{edges:h}=iu(u,f=>n.getRelatedEdgesData(f));[...c,...h].forEach(f=>{var d;const p=St(f),g=n.getElementType(p);((d=this.context.element)===null||d===void 0?void 0:d.getElement(p))?or(t,"update",g,f):or(t,"add",g,f),g==="combo"&&o.push([p,f])})}}return t}}const m0=(r,t,e,n)=>{const i=`${e}s`,a=St(n);!r.add[i].has(a)&&!r.update[i].has(a)&&r[t][i].set(St(n),n)};class yM extends Ci{getElement(t){return this.context.element.getElement(t)}handleExpand(t,e){if(m0(e,"add","node",t),$n(t))return;const n=St(t);m0(e,"add","node",t),this.context.model.getRelatedEdgesData(n,"out").forEach(o=>{or(e,"add","edge",o)}),this.context.model.getChildrenData(n).forEach(o=>{this.handleExpand(o,e)})}beforeDraw(t){const{graph:e,model:n}=this.context;if(!n.model.hasTreeStructure(qn))return t;const{add:{nodes:i,edges:a},update:{nodes:o}}=t,s=new Map,l=new Map;i.forEach((u,h)=>{$n(u)&&s.set(h,u)}),a.forEach(u=>{if(e.getElementType(u.source)!=="node")return;const h=e.getNodeData(u.source);$n(h)&&s.set(u.source,h)}),o.forEach((u,h)=>{const f=this.getElement(h);if(!f)return;const d=f.attributes.collapsed;$n(u)?d||s.set(h,u):d&&l.set(h,u)});const c=new Set;return s.forEach((u,h)=>{n.getDescendantsData(h).forEach(d=>{const p=St(d);if(c.has(p))return;or(t,"remove","node",d),n.getRelatedEdgesData(p).forEach(y=>{or(t,"remove","edge",y)}),c.add(p)})}),l.forEach((u,h)=>{if(n.getAncestorsData(h,qn).some($n)){or(t,"remove","node",u);return}this.handleExpand(u,t)}),t}}const fh=new WeakMap;function RA(r,t,e){fh.has(r)||fh.set(r,{});const n=fh.get(r);if(!n[t])return n[t]=e,!0;const i=n[t];return b0(i,e)?!1:(n[t]=e,!0)}const b0=(r,t,e=2)=>{if(typeof r!="object"||typeof t!="object")return r===t;const n=Object.keys(r),i=Object.keys(t);if(n.length!==i.length)return!1;for(const a of n){const o=r[a],s=t[a];if(e>1&&typeof o=="object"&&typeof s=="object"){if(!b0(o,s,e-1))return!1}else if(o!==s)return!1}return!0};function _0(r,t,e){ac[r][t]&&Zn.warn(`The extension ${t} of ${r} has been registered before, and will be overridden.`),Object.assign(ac[r],{[t]:e})}function Ti(r){"@babel/helpers - typeof";return Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(r)}function mM(r,t){if(Ti(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(Ti(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function x0(r){var t=mM(r,"string");return Ti(t)=="symbol"?t:t+""}function bM(r,t,e){return(t=x0(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function E0(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function _M(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?E0(Object(e),!0).forEach(function(n){bM(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):E0(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function w0(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function S0(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,x0(n.key),n)}}function O0(r,t,e){return t&&S0(r.prototype,t),e&&S0(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function jl(r){return jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jl(r)}function M0(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(M0=function(){return!!r})()}function xM(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function EM(r,t){if(t&&(Ti(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xM(r)}function wM(r,t,e){return t=jl(t),EM(r,M0()?Reflect.construct(t,e||[],jl(r).constructor):t.apply(r,e))}function dh(r,t){return dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},dh(r,t)}function SM(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&dh(r,t)}function ph(){"use strict";ph=function(){return t};var r,t={},e=Object.prototype,n=e.hasOwnProperty,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(C,S,A,j){return Object.defineProperty(C,S,{value:A,enumerable:!j,configurable:!j,writable:!j})}try{l({},"")}catch(C){l=function(A,j,Y){return A[j]=Y}}function c(C,S,A,j){var Y=S&&S.prototype instanceof f?S:f,ot=Object.create(Y.prototype);return l(ot,"_invoke",function(Lt,Xt,wt){var Ct=1;return function($t,ie){if(Ct===3)throw Error("Generator is already running");if(Ct===4){if($t==="throw")throw ie;return{value:r,done:!0}}for(wt.method=$t,wt.arg=ie;;){var ye=wt.delegate;if(ye){var ve=M(ye,wt);if(ve){if(ve===h)continue;return ve}}if(wt.method==="next")wt.sent=wt._sent=wt.arg;else if(wt.method==="throw"){if(Ct===1)throw Ct=4,wt.arg;wt.dispatchException(wt.arg)}else wt.method==="return"&&wt.abrupt("return",wt.arg);Ct=3;var Ee=u(Lt,Xt,wt);if(Ee.type==="normal"){if(Ct=wt.done?4:2,Ee.arg===h)continue;return{value:Ee.arg,done:wt.done}}Ee.type==="throw"&&(Ct=4,wt.method="throw",wt.arg=Ee.arg)}}}(C,A,new N(j||[])),!0),ot}function u(C,S,A){try{return{type:"normal",arg:C.call(S,A)}}catch(j){return{type:"throw",arg:j}}}t.wrap=c;var h={};function f(){}function d(){}function p(){}var g={};l(g,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(rt([])));m&&m!==e&&n.call(m,a)&&(g=m);var b=p.prototype=f.prototype=Object.create(g);function E(C){["next","throw","return"].forEach(function(S){l(C,S,function(A){return this._invoke(S,A)})})}function O(C,S){function A(Y,ot,Lt,Xt){var wt=u(C[Y],C,ot);if(wt.type!=="throw"){var Ct=wt.arg,$t=Ct.value;return $t&&Ti($t)=="object"&&n.call($t,"__await")?S.resolve($t.__await).then(function(ie){A("next",ie,Lt,Xt)},function(ie){A("throw",ie,Lt,Xt)}):S.resolve($t).then(function(ie){Ct.value=ie,Lt(Ct)},function(ie){return A("throw",ie,Lt,Xt)})}Xt(wt.arg)}var j;l(this,"_invoke",function(Y,ot){function Lt(){return new S(function(Xt,wt){A(Y,ot,Xt,wt)})}return j=j?j.then(Lt,Lt):Lt()},!0)}function M(C,S){var A=S.method,j=C.i[A];if(j===r)return S.delegate=null,A==="throw"&&C.i.return&&(S.method="return",S.arg=r,M(C,S),S.method==="throw")||A!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+A+"' method")),h;var Y=u(j,C.i,S.arg);if(Y.type==="throw")return S.method="throw",S.arg=Y.arg,S.delegate=null,h;var ot=Y.arg;return ot?ot.done?(S[C.r]=ot.value,S.next=C.n,S.method!=="return"&&(S.method="next",S.arg=r),S.delegate=null,h):ot:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,h)}function k(C){this.tryEntries.push(C)}function D(C){var S=C[4]||{};S.type="normal",S.arg=r,C[4]=S}function N(C){this.tryEntries=[[-1]],C.forEach(k,this),this.reset(!0)}function rt(C){if(C!=null){var S=C[a];if(S)return S.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var A=-1,j=function Y(){for(;++A<C.length;)if(n.call(C,A))return Y.value=C[A],Y.done=!1,Y;return Y.value=r,Y.done=!0,Y};return j.next=j}}throw new TypeError(Ti(C)+" is not iterable")}return d.prototype=p,l(b,"constructor",p),l(p,"constructor",d),d.displayName=l(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(C){var S=typeof C=="function"&&C.constructor;return!!S&&(S===d||(S.displayName||S.name)==="GeneratorFunction")},t.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,p):(C.__proto__=p,l(C,s,"GeneratorFunction")),C.prototype=Object.create(b),C},t.awrap=function(C){return{__await:C}},E(O.prototype),l(O.prototype,o,function(){return this}),t.AsyncIterator=O,t.async=function(C,S,A,j,Y){Y===void 0&&(Y=Promise);var ot=new O(c(C,S,A,j),Y);return t.isGeneratorFunction(S)?ot:ot.next().then(function(Lt){return Lt.done?Lt.value:ot.next()})},E(b),l(b,s,"Generator"),l(b,a,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),t.keys=function(C){var S=Object(C),A=[];for(var j in S)A.unshift(j);return function Y(){for(;A.length;)if((j=A.pop())in S)return Y.value=j,Y.done=!1,Y;return Y.done=!0,Y}},t.values=rt,N.prototype={constructor:N,reset:function(S){if(this.prev=this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!S)for(var A in this)A.charAt(0)==="t"&&n.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=r)},stop:function(){this.done=!0;var S=this.tryEntries[0][4];if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var A=this;function j($t){Lt.type="throw",Lt.arg=S,A.next=$t}for(var Y=A.tryEntries.length-1;Y>=0;--Y){var ot=this.tryEntries[Y],Lt=ot[4],Xt=this.prev,wt=ot[1],Ct=ot[2];if(ot[0]===-1)return j("end"),!1;if(!wt&&!Ct)throw Error("try statement without catch or finally");if(ot[0]!=null&&ot[0]<=Xt){if(Xt<wt)return this.method="next",this.arg=r,j(wt),!0;if(Xt<Ct)return j(Ct),!1}}},abrupt:function(S,A){for(var j=this.tryEntries.length-1;j>=0;--j){var Y=this.tryEntries[j];if(Y[0]>-1&&Y[0]<=this.prev&&this.prev<Y[2]){var ot=Y;break}}ot&&(S==="break"||S==="continue")&&ot[0]<=A&&A<=ot[2]&&(ot=null);var Lt=ot?ot[4]:{};return Lt.type=S,Lt.arg=A,ot?(this.method="next",this.next=ot[2],h):this.complete(Lt)},complete:function(S,A){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&A&&(this.next=A),h},finish:function(S){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j[2]===S)return this.complete(j[4],j[3]),D(j),h}},catch:function(S){for(var A=this.tryEntries.length-1;A>=0;--A){var j=this.tryEntries[A];if(j[0]===S){var Y=j[4];if(Y.type==="throw"){var ot=Y.arg;D(j)}return ot}}throw Error("illegal catch attempt")},delegateYield:function(S,A,j){return this.delegate={i:rt(S),r:A,n:j},this.method==="next"&&(this.arg=r),h}},t}function C0(r,t,e,n,i,a,o){try{var s=r[a](o),l=s.value}catch(c){return void e(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function OM(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var a=r.apply(t,e);function o(l){C0(a,n,i,o,s,"next",l)}function s(l){C0(a,n,i,o,s,"throw",l)}o(void 0)})}}var MM=G(44078);var T0=function(){function r(t){w0(this,r),this.dragndropPluginOptions=t}return O0(r,[{key:"apply",value:function(e){var n=this,i=e.renderingService,a=e.renderingContext,o=a.root.ownerDocument,s=o.defaultView,l=function(u){var h=u.target,f=h===o,d=f&&n.dragndropPluginOptions.isDocumentDraggable?o:h.closest&&h.closest("[draggable=true]");if(d){var p=!1,g=u.timeStamp,y=[u.clientX,u.clientY],m=null,b=[u.clientX,u.clientY],E=function(){var M=OM(ph().mark(function k(D){var N,rt,C,S,A,j;return ph().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(p){ot.next=8;break}if(N=D.timeStamp-g,rt=(0,MM.y)([D.clientX,D.clientY],y),!(N<=n.dragndropPluginOptions.dragstartTimeThreshold||rt<=n.dragndropPluginOptions.dragstartDistanceThreshold)){ot.next=5;break}return ot.abrupt("return");case 5:D.type="dragstart",d.dispatchEvent(D),p=!0;case 8:if(D.type="drag",D.dx=D.clientX-b[0],D.dy=D.clientY-b[1],d.dispatchEvent(D),b=[D.clientX,D.clientY],f){ot.next=21;break}return C=n.dragndropPluginOptions.overlap==="pointer"?[D.canvasX,D.canvasY]:h.getBounds().center,ot.next=17,o.elementsFromPoint(C[0],C[1]);case 17:S=ot.sent,A=S[S.indexOf(h)+1],j=(A==null?void 0:A.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?o:null),m!==j&&(m&&(D.type="dragleave",D.target=m,m.dispatchEvent(D)),j&&(D.type="dragenter",D.target=j,j.dispatchEvent(D)),m=j,m&&(D.type="dragover",D.target=m,m.dispatchEvent(D)));case 21:case"end":return ot.stop()}},k)}));return function(D){return M.apply(this,arguments)}}();s.addEventListener("pointermove",E);var O=function(k){if(p){k.detail={preventClick:!0};var D=k.clone();m&&(D.type="drop",D.target=m,m.dispatchEvent(D)),D.type="dragend",d.dispatchEvent(D),p=!1}s.removeEventListener("pointermove",E)};h.addEventListener("pointerup",O,{once:!0}),h.addEventListener("pointerupoutside",O,{once:!0})}};i.hooks.init.tap(r.tag,function(){s.addEventListener("pointerdown",l)}),i.hooks.destroy.tap(r.tag,function(){s.removeEventListener("pointerdown",l)})}}])}();T0.tag="Dragndrop";var CM=function(r){function t(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return w0(this,t),e=wM(this,t),e.name="dragndrop",e.options=n,e}return SM(t,r),O0(t,[{key:"init",value:function(){this.addRenderingPlugin(new T0(_M({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)}}])}(x.F6),A0=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},P0=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};const R0=["main"],D0=["background","main","label","transient"];function TM(r){return r.main}class k0{getConfig(){return this.config}getLayer(t="main"){return this.extends.layers[t]||TM(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(t){return this.extends.renderers[t]}getCamera(t="main"){return this.getLayer(t).getCamera()}getRoot(t="main"){return this.getLayer(t).getRoot()}getContextService(t="main"){return this.getLayer(t).getContextService()}setCursor(t){this.config.cursor=t,this.getLayer().setCursor(t)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(t){this.config={enableMultiLayer:!0},Object.assign(this.config,t);const e=this.config,{renderer:n,background:i,cursor:a,enableMultiLayer:o}=e,s=P0(e,["renderer","background","cursor","enableMultiLayer"]),l=o?D0:R0,c=L0(n,l),u=Object.fromEntries(l.map(h=>{const f=new x.Xz(Object.assign(Object.assign({},s),{supportsMutipleCanvasesInOneContainer:o,renderer:c[h],background:o?h==="background"?i:void 0:i}));return[h,f]}));I0(u),this.extends={config:this.config,renderer:n,renderers:c,layers:u}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,t])=>t.ready))}resize(t,e){Object.assign(this.extends.config,{width:t,height:e}),Object.values(this.getLayers()).forEach(n=>{const i=n.getCamera(),a=i.getPosition(),o=i.getFocalPoint();n.resize(t,e),i.setPosition(a),i.setFocalPoint(o)})}getBounds(t){return ka(Object.values(this.getLayers()).map(e=>t?e.getRoot().childNodes.find(i=>i.classList.includes(t)):e.getRoot()).filter(e=>(e==null?void 0:e.childNodes.length)>0).map(e=>e.getBounds()))}getContainer(){const t=this.extends.config.container;return typeof t=="string"?document.getElementById(t):t}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(t,e){var n;const i=((n=t.style)===null||n===void 0?void 0:n.$layer)||"main";return this.getLayer(i).appendChild(t,e)}setRenderer(t){if(t===this.extends.renderer)return;const e=L0(t,this.config.enableMultiLayer?D0:R0);this.extends.renderers=e,Object.entries(e).forEach(([n,i])=>this.getLayer(n).setRenderer(i)),I0(this.getLayers())}getCanvasByViewport(t){return Cn(this.getLayer().viewport2Canvas(Mr(t)))}getViewportByCanvas(t){return Cn(this.getLayer().canvas2Viewport(Mr(t)))}getViewportByClient(t){return Cn(this.getLayer().client2Viewport(Mr(t)))}getClientByViewport(t){return Cn(this.getLayer().viewport2Client(Mr(t)))}getClientByCanvas(t){return this.getClientByViewport(this.getViewportByCanvas(t))}getCanvasByClient(t){const e=this.getLayer(),n=e.client2Viewport(Mr(t));return Cn(e.viewport2Canvas(n))}toDataURL(){return A0(this,arguments,void 0,function*(t={}){const e=globalThis.devicePixelRatio||1,{mode:n="viewport"}=t,i=P0(t,["mode"]);let[a,o,s,l]=[0,0,0,0];if(n==="viewport")[s,l]=this.getSize();else if(n==="overall"){const m=this.getBounds(),b=si(m);[a,o]=m.min,[s,l]=b}const c=uh('<div id="virtual-image"></div>'),u=new x.Xz({width:s,height:l,renderer:new Ya,devicePixelRatio:e,container:c,background:this.extends.config.background});yield u.ready,u.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),u.appendChild(this.getRoot().cloneNode(!0));const h=this.getLayer("label").getRoot().cloneNode(!0),f=u.viewport2Canvas({x:0,y:0}),d=this.getCanvasByViewport([0,0]);h.translate([d[0]-f.x,d[1]-f.y]),h.scale(1/this.getCamera().getZoom()),u.appendChild(h),u.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const p=this.getCamera(),g=u.getCamera();if(n==="viewport")g.setZoom(p.getZoom()),g.setPosition(p.getPosition()),g.setFocalPoint(p.getFocalPoint());else if(n==="overall"){const[m,b,E]=g.getPosition(),[O,M,k]=g.getFocalPoint();g.setPosition([m+a,b+o,E]),g.setFocalPoint([O+a,M+o,k])}const y=u.getContextService();return new Promise(m=>{u.addEventListener(x.$6.RERENDER,()=>A0(this,void 0,void 0,function*(){yield new Promise(E=>setTimeout(E,300));const b=yield y.toDataURL(i);m(b)}))})})}destroy(){Object.values(this.getLayers()).forEach(t=>{t.getCamera().cancelLandmarkAnimation(),t.destroy()})}}function L0(r,t){return Object.fromEntries(t.map(e=>{const n=(r==null?void 0:r(e))||new Ya;return n instanceof Ya&&n.setConfig({enableDirtyRectangleRendering:!1}),e==="main"?n.registerPlugin(new CM({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[e,n]}))}function I0(r){Object.entries(r).forEach(([t,e])=>{const n=e.getContextService().getDomElement();n!=null&&n.style&&(n.style.gridArea="1 / 1 / 2 / 2",n.style.outline="none",n.tabIndex=1,t!=="main"&&(n.style.pointerEvents="none")),n!=null&&n.parentElement&&(n.parentElement.style.display="grid")})}const Ea=r=>r?parseInt(r):0;function AM(r){const t=getComputedStyle(r),e=r.clientWidth||Ea(t.width),n=r.clientHeight||Ea(t.height),i=Ea(t.paddingLeft)+Ea(t.paddingRight),a=Ea(t.paddingTop)+Ea(t.paddingBottom);return[e-i,n-a]}function N0(r){if(!r)return[0,0];let t=640,e=480;const[n,i]=AM(r);t=n||t,e=i||e;const a=1,o=1;return[Math.max((0,pt.Z)(t)?t:a,a),Math.max((0,pt.Z)(e)?e:o,o)]}class Bl{constructor(t){this.type=t}}class vn extends Bl{constructor(t,e){super(t),this.data=e}}class yr extends Bl{constructor(t,e,n,i){super(t),this.animationType=e,this.animation=n,this.data=i}}class wa extends Bl{constructor(t,e,n){super(t),this.elementType=e,this.data=n}}class Fl extends Bl{constructor(t,e){super(t),this.data=e}}function yn(r,t){r.emit(t.type,t)}function PM(r){if(!r)return null;if(r instanceof x.BB)return{type:"canvas",element:r};let t=r;for(;t;){if(Qa(t))return{type:"node",element:t};if(pp(t))return{type:"edge",element:t};if(au(t))return{type:"combo",element:t};t=t.parentElement}return null}function j0(r){var t;return((t=r==null?void 0:r.style)===null||t===void 0?void 0:t.zIndex)||0}const Sa="cachedStyle",zl=r=>`__${r}__`;function RM(r,t){const e=Array.isArray(t)?t:[t];Un(r,Sa)||za(r,Sa,{}),e.forEach(n=>{za(Un(r,Sa),zl(n),r.attributes[n])})}function B0(r,t){return Un(r,[Sa,zl(t)])}function DM(r,t){return zl(t)in(Un(r,Sa)||{})}function DA(r,t,e){set(r,[Sa,zl(t)],e)}class kM{constructor(t){this.tasks=[],this.animations=new Set,this.context=t}getTasks(){const t=[...this.tasks];return this.tasks=[],t}add(t,e){this.tasks.push([t,e])}animate(t,e,n){var i,a,o;(i=e==null?void 0:e.before)===null||i===void 0||i.call(e);const s=this.getTasks().map(([c,u])=>{var h,f,d;const{element:p,elementType:g,stage:y}=c,m=Yg(this.context.options,g,y,t);(h=u==null?void 0:u.before)===null||h===void 0||h.call(u);const b=m.length?Xg(p,this.inferStyle(c,n),m):null;return b?((f=u==null?void 0:u.beforeAnimate)===null||f===void 0||f.call(u,b),b.finished.then(()=>{var E,O;(E=u==null?void 0:u.afterAnimate)===null||E===void 0||E.call(u,b),(O=u==null?void 0:u.after)===null||O===void 0||O.call(u),this.animations.delete(b)})):(d=u==null?void 0:u.after)===null||d===void 0||d.call(u),b}).filter(Boolean);s.forEach(c=>this.animations.add(c));const l=oc(s);return l?((a=e==null?void 0:e.beforeAnimate)===null||a===void 0||a.call(e,l),l.finished.then(()=>{var c,u;(c=e==null?void 0:e.afterAnimate)===null||c===void 0||c.call(e,l),(u=e==null?void 0:e.after)===null||u===void 0||u.call(e),this.release()})):(o=e==null?void 0:e.after)===null||o===void 0||o.call(e),l}inferStyle(t,e){var n,i;const{element:a,elementType:o,stage:s,originalStyle:l,updatedStyle:c={}}=t;t.modifiedStyle||(t.modifiedStyle=Object.assign(Object.assign({},l),c));const{modifiedStyle:u}=t,h={},f={};if(s==="enter")Object.assign(h,{opacity:0});else if(s==="exit")Object.assign(f,{opacity:0});else if(s==="show")Object.assign(h,{opacity:0}),Object.assign(f,{opacity:(n=B0(a,"opacity"))!==null&&n!==void 0?n:Da("opacity")});else if(s==="hide")Object.assign(h,{opacity:(i=B0(a,"opacity"))!==null&&i!==void 0?i:Da("opacity")}),Object.assign(f,{opacity:0});else if(s==="collapse"){const{collapse:d}=e||{},{target:p,descendants:g,position:y}=d;if(o==="node"){if(g.includes(a.id)){const[m,b,E]=y;Object.assign(f,{x:m,y:b,z:E})}}else if(o==="combo"){if(a.id===p||g.includes(a.id)){const[m,b]=y;Object.assign(f,{x:m,y:b,childrenNode:l.childrenNode})}}else o==="edge"&&Object.assign(f,{sourceNode:u.sourceNode,targetNode:u.targetNode})}else if(s==="expand"){const{expand:d}=e||{},{target:p,descendants:g,position:y}=d;if(o==="node"){if(a.id===p||g.includes(a.id)){const[m,b,E]=y;Object.assign(h,{x:m,y:b,z:E})}}else if(o==="combo"){if(a.id===p||g.includes(a.id)){const[m,b,E]=y;Object.assign(h,{x:m,y:b,z:E,childrenNode:u.childrenNode})}}else o==="edge"&&Object.assign(h,{sourceNode:u.sourceNode,targetNode:u.targetNode})}return[Object.keys(h).length>0?Object.assign({},l,h):l,Object.keys(f).length>0?Object.assign({},u,f):u]}stop(){this.animations.forEach(t=>t.cancel())}clear(){this.tasks=[]}release(){var t,e;const{canvas:n}=this.context,i=(e=(t=n.document)===null||t===void 0?void 0:t.timeline)===null||e===void 0?void 0:e.animationsWithPromises;i&&(n.document.timeline.animationsWithPromises=i.filter(a=>a.playState!=="finished"))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}}class LM{constructor(t){this.batchCount=0,this.context=t}emit(t){const{graph:e}=this.context;e.emit(t.type,t)}startBatch(t=!0){this.batchCount++,this.batchCount===1&&this.emit(new vn(he.BATCH_START,{initiate:t}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new vn(he.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class IM extends _c{constructor(t){super(t),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=e=>{const{target:n}=e,i=PM(n);if(!i)return;const{graph:a,canvas:o}=this.context,{type:s,element:l}=i;if("destroyed"in l&&(Ps(l)||l.destroyed))return;const{type:c,detail:u,button:h}=e,f=Object.assign(Object.assign({},e),{target:l,targetType:s,originalTarget:n});c===Zt.POINTER_MOVE&&(this.currentTarget!==l&&(this.currentTarget&&a.emit(`${this.currentTargetType}:${Zt.POINTER_LEAVE}`,Object.assign(Object.assign({},f),{type:Zt.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),l&&(Object.assign(f,{type:Zt.POINTER_ENTER}),a.emit(`${s}:${Zt.POINTER_ENTER}`,f))),this.currentTarget=l,this.currentTargetType=s),c===Zt.CLICK&&h===2||(a.emit(`${s}:${c}`,f),a.emit(c,f)),c===Zt.CLICK&&u===2&&(Object.assign(f,{type:Zt.DBLCLICK}),a.emit(`${s}:${Zt.DBLCLICK}`,f),a.emit(Zt.DBLCLICK,f)),c===Zt.POINTER_DOWN&&h===2&&(Object.assign(f,{type:Zt.CONTEXT_MENU,preventDefault:()=>{var d;(d=o.getContainer())===null||d===void 0||d.addEventListener(Zt.CONTEXT_MENU,p=>p.preventDefault(),{once:!0})}}),a.emit(`${s}:${Zt.CONTEXT_MENU}`,f),a.emit(Zt.CONTEXT_MENU,f))},this.forwardContainerEvents=e=>{this.context.graph.emit(e.type,e)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(t){this.setExtensions(t)}forwardEvents(){const t=this.context.canvas.getContainer();t&&[ta.KEY_DOWN,ta.KEY_UP].forEach(n=>{t.addEventListener(n,this.forwardContainerEvents)});const e=this.context.canvas.document;e&&[Zt.CLICK,Zt.DBLCLICK,Zt.POINTER_OVER,Zt.POINTER_LEAVE,Zt.POINTER_ENTER,Zt.POINTER_MOVE,Zt.POINTER_OUT,Zt.POINTER_DOWN,Zt.POINTER_UP,Zt.CONTEXT_MENU,Zt.DRAG_START,Zt.DRAG,Zt.DRAG_END,Zt.DRAG_ENTER,Zt.DRAG_OVER,Zt.DRAG_LEAVE,Zt.DROP,Zt.WHEEL].forEach(n=>{e.addEventListener(n,this.forwardCanvasEvents)})}destroy(){const t=this.context.canvas.getContainer();t&&[ta.KEY_DOWN,ta.KEY_UP].forEach(e=>{t.removeEventListener(e,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}function NM(r,t){t===void 0&&(t=new Map);var e=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];t.has(a)||(e.push(a),t.set(a,!0))}return e}var yo=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};function Ai(r,t){const{data:e,style:n}=r,i=yo(r,["data","style"]),{data:a,style:o}=t,s=yo(t,["data","style"]),l=Object.assign(Object.assign({},i),s);return(e||a)&&Object.assign(l,{data:Object.assign(Object.assign({},e),a)}),(n||o)&&Object.assign(l,{style:Object.assign(Object.assign({},n),o)}),l}function vh(r){const{data:t,style:e}=r,i=yo(r,["data","style"]);return t&&(i.data=Object.assign({},t)),e&&(i.style=Object.assign({},e)),i}function kA(r){return!get(r,["nodes","length"])&&!get(r,["edges","length"])&&!get(r,["combos","length"])}function Oa(r={},t={}){const{states:e=[],data:n={},style:i={},children:a=[]}=r,o=yo(r,["states","data","style","children"]),{states:s=[],data:l={},style:c={},children:u=[]}=t,h=yo(t,["states","data","style","children"]),f=(p,g)=>p.length!==g.length?!1:p.every((y,m)=>y===g[m]),d=(p,g)=>{const y=Object.keys(p),m=Object.keys(g);return y.length!==m.length?!1:y.every(b=>p[b]===g[b])};return!(!d(o,h)||!f(a,u)||!f(e,s)||!d(n,l)||!d(i,c))}var jM=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};function gh(r){const{id:t=St(r),style:e,data:n}=r,i=jM(r,["id","style","data"]),a=Object.assign(Object.assign({},r),{style:Object.assign({},e),data:Object.assign({},n)});return iy(r)?Object.assign({id:t,data:a},i):{id:t,data:a}}function En(r){return r.data}function BM(r){if(r.hasTreeStructure(qn))return;r.attachTreeStructure(qn);const t=r.getAllEdges();for(const e of t){const{source:n,target:i}=e;r.setParent(i,n,qn)}}class FM{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new uu.k}pushChange(t){if(this.isTraceless)return;const{type:e}=t;if(e===Ye.NodeUpdated||e===Ye.EdgeUpdated||e===Ye.ComboUpdated){const{value:n,original:i}=t;this.changes.push({value:vh(n),original:vh(i),type:e})}else this.changes.push({value:vh(t.value),type:e})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(t){this.batchCount++,this.model.batch(t),this.batchCount--}isBatching(){return this.batchCount>0}silence(t){this.isTraceless=!0,t(),this.isTraceless=!1}isCombo(t){return this.comboIds.has(t)||this.latestRemovedComboIds.has(t)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(t){return this.model.getAllNodes().reduce((e,n)=>{const i=En(n);return this.isCombo(St(i))||(t===void 0||t.includes(St(i)))&&e.push(i),e},[])}getEdgeDatum(t){return En(this.model.getEdge(t))}getEdgeData(t){return this.model.getAllEdges().reduce((e,n)=>{const i=En(n);return(t===void 0||t.includes(St(i)))&&e.push(i),e},[])}getComboData(t){return this.model.getAllNodes().reduce((e,n)=>{const i=En(n);return this.isCombo(St(i))&&(t===void 0||t.includes(St(i)))&&e.push(i),e},[])}getRootsData(t=qn){return this.model.getRoots(t).map(En)}getAncestorsData(t,e){const{model:n}=this;return!n.hasNode(t)||!n.hasTreeStructure(e)?[]:n.getAncestors(t,e).map(En)}getDescendantsData(t){const e=this.getElementDataById(t),n=[];return ia(e,i=>{i!==e&&n.push(i)},i=>this.getChildrenData(St(i)),"TB"),n}getParentData(t,e){const{model:n}=this;if(!e){Zn.warn("The hierarchy structure key is not specified");return}if(!n.hasNode(t)||!n.hasTreeStructure(e))return;const i=n.getParent(t,e);return i?En(i):void 0}getChildrenData(t){const e=this.getElementType(t)==="node"?qn:Ge,{model:n}=this;return!n.hasNode(t)||!n.hasTreeStructure(e)?[]:n.getChildren(t,e).map(En)}getElementsDataByType(t){return t==="node"?this.getNodeData():t==="edge"?this.getEdgeData():t==="combo"?this.getComboData():[]}getElementDataById(t){return this.getElementType(t)==="edge"?this.getEdgeDatum(t):this.getNodeLikeDatum(t)}getNodeLikeDatum(t){const e=this.model.getNode(t);return En(e)}getNodeLikeData(t){return this.model.getAllNodes().reduce((e,n)=>{const i=En(n);return t?t.includes(St(i))&&e.push(i):e.push(i),e},[])}getElementDataByState(t,e){return this.getElementsDataByType(t).filter(i=>{var a;return(a=i.states)===null||a===void 0?void 0:a.includes(e)})}getElementState(t){var e;return((e=this.getElementDataById(t))===null||e===void 0?void 0:e.states)||[]}hasNode(t){return this.model.hasNode(t)&&!this.isCombo(t)}hasEdge(t){return this.model.hasEdge(t)}hasCombo(t){return this.model.hasNode(t)&&this.isCombo(t)}getRelatedEdgesData(t,e="both"){return this.model.getRelatedEdges(t,e).map(En)}getNeighborNodesData(t){return this.model.getNeighbors(t).map(En)}setData(t){const{nodes:e=[],edges:n=[],combos:i=[]}=t,{nodes:a,edges:o,combos:s}=this.getData(),l=ui(a,e,h=>St(h),Oa),c=ui(o,n,h=>St(h),Oa),u=ui(s,i,h=>St(h),Oa);this.batch(()=>{const h={nodes:l.enter,edges:c.enter,combos:u.enter};this.addData(h),this.computeZIndex(h,"add",!0);const f={nodes:l.update,edges:c.update,combos:u.update};this.updateData(f),this.computeZIndex(f,"update",!0);const d={nodes:l.exit.map(St),edges:c.exit.map(St),combos:u.exit.map(St)};this.removeData(d)})}addData(t){const{nodes:e,edges:n,combos:i}=t;this.batch(()=>{this.addComboData(i),this.addNodeData(e),this.addEdgeData(n)}),this.computeZIndex(t,"add")}addNodeData(t=[]){t.length&&(this.model.addNodes(t.map(e=>(this.pushChange({value:e,type:Ye.NodeAdded}),gh(e)))),this.updateNodeLikeHierarchy(t),this.computeZIndex({nodes:t},"add"))}addEdgeData(t=[]){t.length&&(this.model.addEdges(t.map(e=>(this.pushChange({value:e,type:Ye.EdgeAdded}),gh(e)))),this.computeZIndex({edges:t},"add"))}addComboData(t=[]){if(!t.length)return;const{model:e}=this;e.hasTreeStructure(Ge)||e.attachTreeStructure(Ge),e.addNodes(t.map(n=>(this.comboIds.add(St(n)),this.pushChange({value:n,type:Ye.ComboAdded}),gh(n)))),this.updateNodeLikeHierarchy(t),this.computeZIndex({combos:t},"add")}addChildrenData(t,e){const n=this.getNodeLikeDatum(t),i=e.map(St);this.addNodeData(e),this.updateNodeData([{id:t,children:[...n.children||[],...i]}]),this.addEdgeData(i.map(a=>({source:t,target:a})))}computeZIndex(t,e,n=!1){!n&&this.isBatching()||this.batch(()=>{const{nodes:i=[],edges:a=[],combos:o=[]}=t;o.forEach(s=>{var l,c,u;const h=St(s);if(e==="add"&&(0,pt.Z)((l=s.style)===null||l===void 0?void 0:l.zIndex)||e==="update"&&!("combo"in s))return;const f=this.getParentData(h,Ge),d=f?((u=(c=f.style)===null||c===void 0?void 0:c.zIndex)!==null&&u!==void 0?u:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:h,style:{zIndex:d}}])})}),i.forEach(s=>{var l,c,u;const h=St(s);if(e==="add"&&(0,pt.Z)((l=s.style)===null||l===void 0?void 0:l.zIndex)||e==="update"&&!("combo"in s)&&!("children"in s))return;let f=0;const d=this.getParentData(h,Ge);if(d)f=(((c=d.style)===null||c===void 0?void 0:c.zIndex)||0)+1;else{const p=this.getParentData(h,qn);p&&(f=((u=p==null?void 0:p.style)===null||u===void 0?void 0:u.zIndex)||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:h,style:{zIndex:f}}])})}),a.forEach(s=>{var l,c,u,h,f;if((0,pt.Z)((l=s.style)===null||l===void 0?void 0:l.zIndex))return;let{id:d,source:p,target:g}=s;if(!d)d=St(s);else{const b=this.getEdgeDatum(d);p=b.source,g=b.target}if(!p||!g)return;const y=((u=(c=this.getNodeLikeDatum(p))===null||c===void 0?void 0:c.style)===null||u===void 0?void 0:u.zIndex)||0,m=((f=(h=this.getNodeLikeDatum(g))===null||h===void 0?void 0:h.style)===null||f===void 0?void 0:f.zIndex)||0;this.updateEdgeData([{id:St(s),style:{zIndex:Math.max(y,m)-1}}])})})}getFrontZIndex(t){var e;const n=this.getElementType(t),i=this.getElementDataById(t),a=this.getData();if(Object.assign(a,{[`${n}s`]:a[`${n}s`].filter(o=>St(o)!==t)}),n==="combo"&&!$n(i)){const o=new Set(this.getAncestorsData(t,Ge).map(St));a.nodes=a.nodes.filter(s=>!o.has(St(s))),a.combos=a.combos.filter(s=>!o.has(St(s))),a.edges=a.edges.filter(({source:s,target:l})=>!o.has(s)&&!o.has(l))}return Math.max(((e=i.style)===null||e===void 0?void 0:e.zIndex)||0,0,...Object.values(a).flat().map(o=>{var s;return(((s=o==null?void 0:o.style)===null||s===void 0?void 0:s.zIndex)||0)+1}))}updateNodeLikeHierarchy(t){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:e}=this;t.forEach(n=>{const i=St(n),a=Ho(n);a!==void 0&&(e.hasTreeStructure(Ge)||e.attachTreeStructure(Ge),a===null&&this.refreshComboData(i),this.setParent(i,Ho(n),Ge));const o=n.children||[];if(o.length){e.hasTreeStructure(qn)||e.attachTreeStructure(qn);const s=o.filter(l=>e.hasNode(l));s.forEach(l=>this.setParent(l,i,qn)),s.length!==o.length&&this.updateNodeData([{id:i,children:s}])}})}preventUpdateNodeLikeHierarchy(t){this.enableUpdateNodeLikeHierarchy=!1,t(),this.enableUpdateNodeLikeHierarchy=!0}updateData(t){const{nodes:e,edges:n,combos:i}=t;this.batch(()=>{this.updateNodeData(e),this.updateComboData(i),this.updateEdgeData(n)}),this.computeZIndex(t,"update")}updateNodeData(t=[]){if(!t.length)return;const{model:e}=this;this.batch(()=>{const n=[];t.forEach(i=>{const a=St(i),o=En(e.getNode(a));if(Oa(o,i))return;const s=Ai(o,i);this.pushChange({value:s,original:o,type:Ye.NodeUpdated}),e.mergeNodeData(a,s),n.push(s)}),this.updateNodeLikeHierarchy(n)}),this.computeZIndex({nodes:t},"update")}refreshData(){const{nodes:t,edges:e,combos:n}=this.getData();t.forEach(i=>{this.pushChange({value:i,original:i,type:Ye.NodeUpdated})}),e.forEach(i=>{this.pushChange({value:i,original:i,type:Ye.EdgeUpdated})}),n.forEach(i=>{this.pushChange({value:i,original:i,type:Ye.ComboUpdated})})}syncNodeLikeDatum(t){const{model:e}=this,n=St(t);if(!e.hasNode(n))return;const i=En(e.getNode(n)),a=Ai(i,t);e.mergeNodeData(n,a)}syncEdgeDatum(t){const{model:e}=this,n=St(t);if(!e.hasEdge(n))return;const i=En(e.getEdge(n)),a=Ai(i,t);e.mergeEdgeData(n,a)}updateEdgeData(t=[]){if(!t.length)return;const{model:e}=this;this.batch(()=>{t.forEach(n=>{const i=St(n),a=En(e.getEdge(i));if(Oa(a,n))return;n.source&&a.source!==n.source&&e.updateEdgeSource(i,n.source),n.target&&a.target!==n.target&&e.updateEdgeTarget(i,n.target);const o=Ai(a,n);this.pushChange({value:o,original:a,type:Ye.EdgeUpdated}),e.mergeEdgeData(i,o)})}),this.computeZIndex({edges:t},"update")}updateComboData(t=[]){if(!t.length)return;const{model:e}=this;e.batch(()=>{const n=[];t.forEach(i=>{const a=St(i),o=En(e.getNode(a));if(Oa(o,i))return;const s=Ai(o,i);this.pushChange({value:s,original:o,type:Ye.ComboUpdated}),e.mergeNodeData(a,s),n.push(s)}),this.updateNodeLikeHierarchy(n)}),this.computeZIndex({combos:t},"update")}setParent(t,e,n,i=!0){if(t===e)return;const a=this.getNodeLikeDatum(t),o=Ho(a);if(o!==e&&n===Ge){const s={id:t,combo:e};this.isCombo(t)?this.syncNodeLikeDatum(s):this.syncNodeLikeDatum(s)}this.model.setParent(t,e,n),i&&n===Ge&&NM([o,e]).forEach(s=>{s!==void 0&&this.refreshComboData(s)})}refreshComboData(t){const e=this.getComboData([t])[0],n=this.getAncestorsData(t,Ge);e&&this.pushChange({value:e,original:e,type:Ye.ComboUpdated}),n.forEach(i=>{this.pushChange({value:i,original:i,type:Ye.ComboUpdated})})}getElementPosition(t){const e=this.getElementDataById(t);return gn(e)}translateNodeLikeBy(t,e){this.isCombo(t)?this.translateComboBy(t,e):this.translateNodeBy(t,e)}translateNodeLikeTo(t,e){this.isCombo(t)?this.translateComboTo(t,e):this.translateNodeTo(t,e)}translateNodeBy(t,e){const n=this.getElementPosition(t),i=Ce(n,[...e,0].slice(0,3));this.translateNodeTo(t,i)}translateNodeTo(t,e){const[n=0,i=0,a=0]=e;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:t,style:{x:n,y:i,z:a}}])})}translateComboBy(t,e){const[n=0,i=0,a=0]=e;if([n,i,a].some(isNaN)||[n,i,a].every(l=>l===0))return;const o=this.getComboData([t])[0];if(!o)return;const s=new Set;ia(o,l=>{const c=St(l);if(s.has(c))return;s.add(c);const[u,h,f]=gn(l),d=Ai(l,{style:{x:u+n,y:h+i,z:f+a}});this.pushChange({value:d,original:l,type:this.isCombo(c)?Ye.ComboUpdated:Ye.NodeUpdated}),this.model.mergeNodeData(c,d)},l=>this.getChildrenData(St(l)),"BT")}translateComboTo(t,e){var n;if(e.some(isNaN))return;const[i=0,a=0,o=0]=e,s=(n=this.getComboData([t]))===null||n===void 0?void 0:n[0];if(!s)return;const[l,c,u]=gn(s),h=i-l,f=a-c,d=o-u;ia(s,p=>{const g=St(p),[y,m,b]=gn(p),E=Ai(p,{style:{x:y+h,y:m+f,z:b+d}});this.pushChange({value:E,original:p,type:this.isCombo(g)?Ye.ComboUpdated:Ye.NodeUpdated}),this.model.mergeNodeData(g,E)},p=>this.getChildrenData(St(p)),"BT")}removeData(t){const{nodes:e,edges:n,combos:i}=t;this.batch(()=>{this.removeEdgeData(n),this.removeNodeData(e),this.removeComboData(i),this.latestRemovedComboIds=new Set(i)})}removeNodeData(t=[]){t.length&&this.batch(()=>{t.forEach(e=>{this.removeEdgeData(this.getRelatedEdgesData(e).map(St)),this.pushChange({value:this.getNodeData([e])[0],type:Ye.NodeRemoved}),this.removeNodeLikeHierarchy(e)}),this.model.removeNodes(t)})}removeEdgeData(t=[]){t.length&&(t.forEach(e=>this.pushChange({value:this.getEdgeData([e])[0],type:Ye.EdgeRemoved})),this.model.removeEdges(t))}removeComboData(t=[]){t.length&&this.batch(()=>{t.forEach(e=>{this.pushChange({value:this.getComboData([e])[0],type:Ye.ComboRemoved}),this.removeNodeLikeHierarchy(e),this.comboIds.delete(e)}),this.model.removeNodes(t)})}removeNodeLikeHierarchy(t){if(this.model.hasTreeStructure(Ge)){const e=Ho(this.getNodeLikeDatum(t));this.setParent(t,void 0,Ge,!1),this.model.getChildren(t,Ge).forEach(n=>{const i=En(n),a=St(i);this.setParent(St(i),e,Ge,!1);const o=Ai(i,{id:St(i),combo:e});this.pushChange({value:o,original:i,type:this.isCombo(a)?Ye.ComboUpdated:Ye.NodeUpdated}),this.model.mergeNodeData(St(i),o)}),(0,Nt.Z)(e)||this.refreshComboData(e)}}getElementType(t){if(this.model.hasNode(t))return this.isCombo(t)?"combo":"node";if(this.model.hasEdge(t))return"edge";throw new Error(Kr(`Unknown element type of id: ${t}`))}destroy(){const{model:t}=this,e=t.getAllNodes(),n=t.getAllEdges();t.removeEdges(n.map(i=>i.id)),t.removeNodes(e.map(i=>i.id)),this.context={}}}var mo=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class zM{constructor(t){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=t}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:t}=this.context;this.container=t.appendChild(new x.ZA({className:"elements"}))}}emit(t,e){e.silence||yn(this.context.graph,t)}forEachElementData(t){ji.forEach(e=>{const n=this.context.model.getElementsDataByType(e);t(e,n)})}getElementType(t,e){var n;const{options:i,graph:a}=this.context,o=((n=i[t])===null||n===void 0?void 0:n.type)||e.type;return o?typeof o=="string"?o:o.call(a,e):t==="edge"?"line":"circle"}getTheme(t){return Ih(this.context.options)[t]||{}}getThemeStyle(t){return this.getTheme(t).style||{}}getThemeStateStyle(t,e){const{state:n={}}=this.getTheme(t);return Object.assign({},...e.map(i=>n[i]||{}))}computePaletteStyle(){const{options:t}=this.context;this.paletteStyle={},this.forEachElementData((e,n)=>{var i,a;const o=Object.assign({},Uf((i=this.getTheme(e))===null||i===void 0?void 0:i.palette),Uf((a=t[e])===null||a===void 0?void 0:a.palette));o!=null&&o.field&&Object.assign(this.paletteStyle,f1(n,o))})}getPaletteStyle(t,e){const n=this.paletteStyle[e];return n?t==="edge"?{stroke:n}:{fill:n}:{}}computeElementDefaultStyle(t,e){var n;const{options:i}=this.context,a=((n=i[t])===null||n===void 0?void 0:n.style)||{};"transform"in a&&Array.isArray(a.transform)&&(a.transform=[...a.transform]),this.defaultStyle[St(e.datum)]=$f(a,e)}computeElementsDefaultStyle(t){const{graph:e}=this.context;this.forEachElementData((n,i)=>{const a=i.length;for(let o=0;o<a;o++){const s=i[o];(t===void 0||t.includes(St(s)))&&this.computeElementDefaultStyle(n,{datum:s,graph:e})}})}getDefaultStyle(t){return this.defaultStyle[t]||{}}getElementState(t){try{const{model:e}=this.context;return e.getElementState(t)}catch(e){return[]}}getElementStateStyle(t,e,n){var i,a;const{options:o}=this.context,s=((a=(i=o[t])===null||i===void 0?void 0:i.state)===null||a===void 0?void 0:a[e])||{};return $f(s,n)}computeElementStatesStyle(t,e,n){this.stateStyle[St(n.datum)]=Object.assign({},...e.map(i=>this.getElementStateStyle(t,i,n)))}computeElementsStatesStyle(t){const{graph:e}=this.context;this.forEachElementData((n,i)=>{const a=i.length;for(let o=0;o<a;o++){const s=i[o];if(t===void 0||t.includes(St(s))){const l=this.getElementState(St(s));this.computeElementStatesStyle(n,l,{datum:s,graph:e})}}})}getStateStyle(t){return this.stateStyle[t]||{}}computeStyle(t,e){t&&["translate","zIndex"].includes(t)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(e),this.computeElementsStatesStyle(e))}getElement(t){return this.elementMap[t]}getNodes(){return this.context.model.getNodeData().map(({id:t})=>this.elementMap[t])}getEdges(){return this.context.model.getEdgeData().map(t=>this.elementMap[St(t)])}getCombos(){return this.context.model.getComboData().map(({id:t})=>this.elementMap[t])}getElementComputedStyle(t,e){const n=St(e),i=this.getThemeStyle(t),a=this.getPaletteStyle(t,n),o=e.style||{},s=this.getDefaultStyle(n),l=this.getThemeStateStyle(t,this.getElementState(n)),c=this.getStateStyle(n),u=Object.assign({},i,a,o,s,l,c);if(t==="combo"){const h=this.context.model.getChildrenData(n),d=!!u.collapsed?[]:h.map(St).filter(p=>this.getElement(p));Object.assign(u,{childrenNode:d,childrenData:h})}return u}getDrawData(t){this.init();const e=this.computeChangesAndDrawData(t);if(!e)return null;const{type:n="draw",stage:i=n}=t;return this.markDestroyElement(e.drawData),this.computeStyle(i),{type:n,stage:i,data:e}}draw(t={animation:!0}){const e=this.getDrawData(t);if(!e)return;const{data:{drawData:{add:n,update:i,remove:a}}}=e;return this.destroyElements(a,t),this.createElements(n,t),this.updateElements(i,t),this.setAnimationTask(t,e)}preLayoutDraw(){return mo(this,arguments,void 0,function*(t={animation:!0}){var e,n;const i=this.getDrawData(t);if(!i)return;const{data:{drawData:a}}=i;yield(n=(e=this.context.layout)===null||e===void 0?void 0:e.preLayout)===null||n===void 0?void 0:n.call(e,a);const{add:o,update:s,remove:l}=a;return this.destroyElements(l,t),this.createElements(o,t),this.updateElements(s,t),this.setAnimationTask(t,i)})}setAnimationTask(t,e){const{animation:n,silence:i}=t,{data:{dataChanges:a,drawData:o},stage:s,type:l}=e;return this.context.animation.animate(n,i?{}:{before:()=>this.emit(new vn(he.BEFORE_DRAW,{dataChanges:a,animation:n,stage:s,render:l==="render"}),t),beforeAnimate:c=>this.emit(new yr(he.BEFORE_ANIMATE,Hn.DRAW,c,o),t),afterAnimate:c=>this.emit(new yr(he.AFTER_ANIMATE,Hn.DRAW,c,o),t),after:()=>this.emit(new vn(he.AFTER_DRAW,{dataChanges:a,animation:n,stage:s,render:l==="render",firstRender:this.context.graph.rendered===!1}),t)})}computeChangesAndDrawData(t){const{model:e}=this.context,n=e.getChanges(),i=Su(n);if(i.length===0)return null;const{NodeAdded:a=[],NodeUpdated:o=[],NodeRemoved:s=[],EdgeAdded:l=[],EdgeUpdated:c=[],EdgeRemoved:u=[],ComboAdded:h=[],ComboUpdated:f=[],ComboRemoved:d=[]}=Ao(i,m=>m.type),p=m=>new Map(m.map(b=>{const E=b.value;return[St(E),E]})),g={add:{nodes:p(a),edges:p(l),combos:p(h)},update:{nodes:p(o),edges:p(c),combos:p(f)},remove:{nodes:p(s),edges:p(u),combos:p(d)}},y=this.transformData(g,t);return e.clearChanges(),{dataChanges:n,drawData:y}}transformData(t,e){const n=this.context.transform.getTransformInstance();return Object.values(n).reduce((i,a)=>a.beforeDraw(i,e),t)}createElement(t,e,n){var i;const a=St(e);if(this.getElement(a))return;const s=this.getElementType(t,e),l=this.getElementComputedStyle(t,e),c=Yr(t,s);if(!c)return Zn.warn(`The element ${s} of ${t} is not registered.`);this.emit(new wa(he.BEFORE_ELEMENT_CREATE,t,e),n);const u=this.container.appendChild(new c({id:a,context:this.context,style:l}));this.shapeTypeMap[a]=s,this.elementMap[a]=u;const{stage:h="enter"}=n;(i=this.context.animation)===null||i===void 0||i.add({element:u,elementType:t,stage:h,originalStyle:Object.assign({},u.attributes),updatedStyle:l},{after:()=>{var f;this.emit(new wa(he.AFTER_ELEMENT_CREATE,t,e),n),(f=u.onCreate)===null||f===void 0||f.call(u)}})}createElements(t,e){const{nodes:n,edges:i,combos:a}=t;[["node",n],["combo",a],["edge",i]].forEach(([s,l])=>{l.forEach(c=>this.createElement(s,c,e))})}getUpdateStageStyle(t,e,n){const{stage:i="update"}=n;if(i==="translate")if(t==="node"||t==="combo"){const{style:{x:a=0,y:o=0,z:s=0}={}}=e;return{x:a,y:o,z:s}}else return{};return this.getElementComputedStyle(t,e)}updateElement(t,e,n){var i;const a=St(e),{stage:o="update"}=n,s=this.getElement(a);if(!s)return()=>null;this.emit(new wa(he.BEFORE_ELEMENT_UPDATE,t,e),n);const l=this.getElementType(t,e),c=this.getUpdateStageStyle(t,e,n);this.shapeTypeMap[a]!==l&&(s.destroy(),delete this.shapeTypeMap[a],delete this.elementMap[a],this.createElement(t,e,{animation:!1,silence:!0}));const u=o!=="visibility"?o:c.visibility==="hidden"?"hide":"show";u==="hide"&&delete c.visibility,(i=this.context.animation)===null||i===void 0||i.add({element:s,elementType:t,stage:u,originalStyle:Object.assign({},s.attributes),updatedStyle:c},{before:()=>{const h=this.elementMap[a];o!=="collapse"&&cu(h,c),o==="visibility"&&(DM(h,"opacity")||RM(h,"opacity"),this.visibilityCache.set(h,u==="show"?"visible":"hidden"),u==="show"&&Ii(h,"visible"))},after:()=>{var h;const f=this.elementMap[a];o==="collapse"&&cu(f,c),u==="hide"&&Ii(f,this.visibilityCache.get(f)),this.emit(new wa(he.AFTER_ELEMENT_UPDATE,t,e),n),(h=f.onUpdate)===null||h===void 0||h.call(f)}})}updateElements(t,e){const{nodes:n,edges:i,combos:a}=t;[["node",n],["combo",a],["edge",i]].forEach(([s,l])=>{l.forEach(c=>this.updateElement(s,c,e))})}markDestroyElement(t){Object.values(t.remove).forEach(e=>{e.forEach(n=>{const i=St(n),a=this.getElement(i);a&&A_(a)})})}destroyElement(t,e,n){var i;const{stage:a="exit"}=n,o=St(e),s=this.elementMap[o];if(!s)return()=>null;this.emit(new wa(he.BEFORE_ELEMENT_DESTROY,t,e),n),(i=this.context.animation)===null||i===void 0||i.add({element:s,elementType:t,stage:a,originalStyle:Object.assign({},s.attributes),updatedStyle:{}},{after:()=>{var l;this.clearElement(o),s.destroy(),(l=s.onDestroy)===null||l===void 0||l.call(s),this.emit(new wa(he.AFTER_ELEMENT_DESTROY,t,e),n)}})}destroyElements(t,e){const{nodes:n,edges:i,combos:a}=t;[["combo",a],["edge",i],["node",n]].forEach(([s,l])=>{l.forEach(c=>this.destroyElement(s,c,e))})}clearElement(t){delete this.paletteStyle[t],delete this.defaultStyle[t],delete this.stateStyle[t],delete this.elementMap[t],delete this.shapeTypeMap[t]}alignLayoutResultToElement(t,e){var n,i;const a=(n=t.nodes)===null||n===void 0?void 0:n.find(o=>St(o)===e);if(a){const o=gn(this.context.model.getNodeLikeDatum(e)),s=gn(a),l=Fe(o,s);(i=t.nodes)===null||i===void 0||i.forEach(c=>{var u,h,f;!((u=c.style)===null||u===void 0)&&u.x&&(c.style.x+=l[0]),!((h=c.style)===null||h===void 0)&&h.y&&(c.style.y+=l[1]),!((f=c.style)===null||f===void 0)&&f.z&&(c.style.z+=l[2]||0)})}}collapseNode(t,e){return mo(this,void 0,void 0,function*(){var n;const{animation:i,align:a}=e,{model:o,layout:s}=this.context,l=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!l)return;this.markDestroyElement(l.drawData);const c=yield s.simulate();a&&this.alignLayoutResultToElement(c,t),o.updateData(c);const u=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!u)return;const{drawData:h}=u,{add:f,remove:d,update:p}=h;this.markDestroyElement(h);const g={animation:i,stage:"collapse",data:h};this.destroyElements(d,g),this.createElements(f,g),this.updateElements(p,g),yield(n=this.context.animation.animate(i,{beforeAnimate:y=>this.emit(new yr(he.BEFORE_ANIMATE,Hn.COLLAPSE,y,h),g),afterAnimate:y=>this.emit(new yr(he.AFTER_ANIMATE,Hn.COLLAPSE,y,h),g)},{collapse:{target:t,descendants:Array.from(d.nodes).map(([,y])=>St(y)),position:gn(p.nodes.get(t))}}))===null||n===void 0?void 0:n.finished})}expandNode(t,e){return mo(this,void 0,void 0,function*(){var n;const{model:i,layout:a}=this.context,{animation:o,align:s}=e,l=gn(i.getNodeData([t])[0]),c=this.computeChangesAndDrawData({stage:"expand",animation:o});if(!c)return;const{drawData:{add:u}}=c;this.createElements(u,{animation:!1,stage:"expand",target:t}),this.context.animation.clear();const h=yield a.simulate();s&&this.alignLayoutResultToElement(h,t),i.updateData(h),this.computeStyle("expand");const f=this.computeChangesAndDrawData({stage:"collapse",animation:o});if(!f)return;const{drawData:d}=f,{update:p}=d,g={animation:o,stage:"expand",data:d};u.edges.forEach(y=>p.edges.set(St(y),y)),u.nodes.forEach(y=>p.nodes.set(St(y),y)),this.updateElements(p,g),yield(n=this.context.animation.animate(o,{beforeAnimate:y=>this.emit(new yr(he.BEFORE_ANIMATE,Hn.EXPAND,y,d),g),afterAnimate:y=>this.emit(new yr(he.AFTER_ANIMATE,Hn.EXPAND,y,d),g)},{expand:{target:t,descendants:Array.from(u.nodes).map(([,y])=>St(y)),position:l}}))===null||n===void 0?void 0:n.finished})}collapseCombo(t,e){return mo(this,void 0,void 0,function*(){var n;const{model:i,element:a}=this.context;if(i.getAncestorsData(t,Ge).some(g=>$n(g)))return;const o=a.getElement(t),s=o.getComboPosition(Object.assign(Object.assign({},o.attributes),{collapsed:!0})),l=this.computeChangesAndDrawData({stage:"collapse",animation:e});if(!l)return;const{dataChanges:c,drawData:u}=l;this.markDestroyElement(u);const{update:h,remove:f}=u,d={animation:e,stage:"collapse",data:u};this.destroyElements(f,d),this.updateElements(h,d);const p=g=>Array.from(g).map(([,y])=>St(y));yield(n=this.context.animation.animate(e,{before:()=>this.emit(new vn(he.BEFORE_DRAW,{dataChanges:c,animation:e}),d),beforeAnimate:g=>this.emit(new yr(he.BEFORE_ANIMATE,Hn.COLLAPSE,g,u),d),afterAnimate:g=>this.emit(new yr(he.AFTER_ANIMATE,Hn.COLLAPSE,g,u),d),after:()=>this.emit(new vn(he.AFTER_DRAW,{dataChanges:c,animation:e}),d)},{collapse:{target:t,descendants:[...p(f.nodes),...p(f.combos)],position:s}}))===null||n===void 0?void 0:n.finished})}expandCombo(t,e){return mo(this,void 0,void 0,function*(){var n;const{model:i}=this.context,a=gn(i.getComboData([t])[0]);this.computeStyle("expand");const o=this.computeChangesAndDrawData({stage:"expand",animation:e});if(!o)return;const{dataChanges:s,drawData:l}=o,{add:c,update:u}=l,h={animation:e,stage:"expand",data:l,target:t};this.createElements(c,h),this.updateElements(u,h);const f=d=>Array.from(d).map(([,p])=>St(p));yield(n=this.context.animation.animate(e,{before:()=>this.emit(new vn(he.BEFORE_DRAW,{dataChanges:s,animation:e}),h),beforeAnimate:d=>this.emit(new yr(he.BEFORE_ANIMATE,Hn.EXPAND,d,l),h),afterAnimate:d=>this.emit(new yr(he.AFTER_ANIMATE,Hn.EXPAND,d,l),h),after:()=>this.emit(new vn(he.AFTER_DRAW,{dataChanges:s,animation:e}),h)},{expand:{target:t,descendants:[...f(c.nodes),...f(c.combos)],position:a}}))===null||n===void 0?void 0:n.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}const F0=Symbol("Comlink.proxy"),WM=Symbol("Comlink.endpoint"),z0=Symbol("Comlink.releaseProxy"),yh=Symbol("Comlink.finalizer"),Wl=Symbol("Comlink.thrown"),W0=r=>typeof r=="object"&&r!==null||typeof r=="function",GM={canHandle:r=>W0(r)&&r[F0],serialize(r){const{port1:t,port2:e}=new MessageChannel;return V0(r,t),[e,[e]]},deserialize(r){return r.start(),Z0(r)}},VM={canHandle:r=>W0(r)&&Wl in r,serialize({value:r}){let t;return r instanceof Error?t={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:t={isError:!1,value:r},[t,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},G0=new Map([["proxy",GM],["throw",VM]]);function HM(r,t){for(const e of r)if(t===e||e==="*"||e instanceof RegExp&&e.test(t))return!0;return!1}function V0(r,t=globalThis,e=["*"]){t.addEventListener("message",function n(i){if(!i||!i.data)return;if(!HM(e,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:o,path:s}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(Yi);let c;try{const u=s.slice(0,-1).reduce((f,d)=>f[d],r),h=s.reduce((f,d)=>f[d],r);switch(o){case"GET":c=h;break;case"SET":u[s.slice(-1)[0]]=Yi(i.data.value),c=!0;break;case"APPLY":c=h.apply(u,l);break;case"CONSTRUCT":{const f=new h(...l);c=XM(f)}break;case"ENDPOINT":{const{port1:f,port2:d}=new MessageChannel;V0(r,d),c=KM(f,[f])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[Wl]:0}}Promise.resolve(c).catch(u=>({value:u,[Wl]:0})).then(u=>{const[h,f]=Zl(u);t.postMessage(Object.assign(Object.assign({},h),{id:a}),f),o==="RELEASE"&&(t.removeEventListener("message",n),H0(t),yh in r&&typeof r[yh]=="function"&&r[yh]())}).catch(u=>{const[h,f]=Zl({value:new TypeError("Unserializable return value"),[Wl]:0});t.postMessage(Object.assign(Object.assign({},h),{id:a}),f)})}),t.start&&t.start()}function ZM(r){return r.constructor.name==="MessagePort"}function H0(r){ZM(r)&&r.close()}function Z0(r,t){const e=new Map;return r.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const o=e.get(a.id);if(o)try{o(a)}finally{e.delete(a.id)}}),mh(r,e,[],t)}function Gl(r){if(r)throw new Error("Proxy has been released and is not useable")}function $0(r){return Ma(r,new Map,{type:"RELEASE"}).then(()=>{H0(r)})}const Vl=new WeakMap,Hl="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const t=(Vl.get(r)||0)-1;Vl.set(r,t),t===0&&$0(r)});function $M(r,t){const e=(Vl.get(t)||0)+1;Vl.set(t,e),Hl&&Hl.register(r,t,r)}function UM(r){Hl&&Hl.unregister(r)}function mh(r,t,e=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(o,s){if(Gl(i),s===z0)return()=>{UM(a),$0(r),t.clear(),i=!0};if(s==="then"){if(e.length===0)return{then:()=>a};const l=Ma(r,t,{type:"GET",path:e.map(c=>c.toString())}).then(Yi);return l.then.bind(l)}return mh(r,t,[...e,s])},set(o,s,l){Gl(i);const[c,u]=Zl(l);return Ma(r,t,{type:"SET",path:[...e,s].map(h=>h.toString()),value:c},u).then(Yi)},apply(o,s,l){Gl(i);const c=e[e.length-1];if(c===WM)return Ma(r,t,{type:"ENDPOINT"}).then(Yi);if(c==="bind")return mh(r,t,e.slice(0,-1));const[u,h]=U0(l);return Ma(r,t,{type:"APPLY",path:e.map(f=>f.toString()),argumentList:u},h).then(Yi)},construct(o,s){Gl(i);const[l,c]=U0(s);return Ma(r,t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},c).then(Yi)}});return $M(a,r),a}function YM(r){return Array.prototype.concat.apply([],r)}function U0(r){const t=r.map(Zl);return[t.map(e=>e[0]),YM(t.map(e=>e[1]))]}const Y0=new WeakMap;function KM(r,t){return Y0.set(r,t),r}function XM(r){return Object.assign(r,{[F0]:!0})}function LA(r,t=globalThis,e="*"){return{postMessage:(n,i)=>r.postMessage(n,e,i),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function Zl(r){for(const[t,e]of G0)if(e.canHandle(r)){const[n,i]=e.serialize(r);return[{type:"HANDLER",name:t,value:n},i]}return[{type:"RAW",value:r},Y0.get(r)||[]]}function Yi(r){switch(r.type){case"HANDLER":return G0.get(r.name).deserialize(r.value);case"RAW":return r.value}}function Ma(r,t,e,n){return new Promise(i=>{const a=qM();t.set(a,i),r.start&&r.start(),r.postMessage(Object.assign({id:a},e),n)})}function qM(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class QM extends wu.Z{constructor(t,e,n){super(),this.graph=t,this.layout=e,this.options=n,this.spawnWorker()}spawnWorker(){this.proxy=Z0(new Worker(new URL(G.p+G.u(293),G.b),{type:void 0})),this.running&&(this.running=!1,this.execute())}execute(){var t;return(0,w.mG)(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;const e=this.layout.options,{onTick:n}=e,i=(0,w._T)(e,["onTick"]),a={};Object.keys(i).forEach(c=>{(0,Se.Z)(i[c])||(a[c]=i[c])});const o={layout:{id:this.layout.id,options:a,iterations:(t=this.options)===null||t===void 0?void 0:t.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},s=new Float32Array([0]),[l]=yield this.proxy.calculateLayout(o,[s]);return l})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[z0]()}isRunning(){return this.running}}var K0=G(10779),Ca=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},JM=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};class t3{get presetOptions(){return{animation:!!Nh(this.context.options,!0)}}get options(){const{options:t}=this.context;return t.layout}constructor(t){this.instances=[],this.context=t}getLayoutInstance(){return this.instances}preLayout(t){return Ca(this,void 0,void 0,function*(){var e,n,i,a;const{graph:o,model:s}=this.context,{add:l}=t;yn(o,new vn(he.BEFORE_LAYOUT,{type:"pre"}));const c=yield(e=this.context.layout)===null||e===void 0?void 0:e.simulate();(n=c==null?void 0:c.nodes)===null||n===void 0||n.forEach(u=>{const h=St(u),f=l.nodes.get(h);s.syncNodeLikeDatum(u),f&&Object.assign(f.style,u.style)}),(i=c==null?void 0:c.edges)===null||i===void 0||i.forEach(u=>{const h=St(u),f=l.edges.get(h);s.syncEdgeDatum(u),f&&Object.assign(f.style,u.style)}),(a=c==null?void 0:c.combos)===null||a===void 0||a.forEach(u=>{const h=St(u),f=l.combos.get(h);s.syncNodeLikeDatum(u),f&&Object.assign(f.style,u.style)}),yn(o,new vn(he.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",t)})}postLayout(){return Ca(this,arguments,void 0,function*(t=this.options){if(!t)return;const e=Array.isArray(t)?t:[t],{graph:n}=this.context;yn(n,new vn(he.BEFORE_LAYOUT,{type:"post"}));for(let i=0;i<e.length;i++){const a=e[i],o=this.getLayoutData(a),s=Object.assign(Object.assign({},this.presetOptions),a);yn(n,new vn(he.BEFORE_STAGE_LAYOUT,{options:s,index:i}));const l=yield this.stepLayout(o,s,i);yn(n,new vn(he.AFTER_STAGE_LAYOUT,{options:s,index:i})),a.animation||this.updateElementPosition(l,!1)}yn(n,new vn(he.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")})}transformDataAfterLayout(t,e){const n=this.context.transform.getTransformInstance();Object.values(n).forEach(i=>i.afterLayout(t,e))}simulate(){return Ca(this,void 0,void 0,function*(){if(!this.options)return{};const t=Array.isArray(this.options)?this.options:[this.options];let e={};for(let n=0;n<t.length;n++){const i=t[n],a=this.getLayoutData(i);e=yield this.stepLayout(a,Object.assign(Object.assign(Object.assign({},this.presetOptions),i),{animation:!1}),n)}return e})}stepLayout(t,e,n){return Ca(this,void 0,void 0,function*(){return N_(e)?yield this.treeLayout(t,e,n):yield this.graphLayout(t,e,n)})}graphLayout(t,e,n){return Ca(this,void 0,void 0,function*(){const{animation:i,enableWorker:a,iterations:o=300}=e,s=this.initGraphLayout(e);if(!s)return{};if(this.instances[n]=s,this.instance=s,a){const c=s;return this.supervisor=new QM(c.graphData2LayoutModel(t),c.instance,{iterations:o}),Bs(yield this.supervisor.execute())}if((0,K0.h)(s))return i?yield s.execute(t,{onTick:c=>{this.updateElementPosition(c,!1)}}):(s.execute(t),s.stop(),s.tick(o));const l=yield s.execute(t);if(i){const c=this.updateElementPosition(l,i);yield c==null?void 0:c.finished}return l})}treeLayout(t,e,n){return Ca(this,void 0,void 0,function*(){const{type:i,animation:a}=e,o=Yr("layout",i);if(!o)return{};const{nodes:s=[],edges:l=[]}=t,c=new uu.k({nodes:s.map(p=>({id:St(p),data:p.data||{}})),edges:l.map(p=>({id:St(p),source:p.source,target:p.target,data:p.data||{}}))});BM(c);const u={nodes:[],edges:[]},h={nodes:[],edges:[]};c.getRoots(qn).forEach(p=>{ia(p,E=>{E.children=c.getSuccessors(E.id)},E=>c.getSuccessors(E.id),"TB");const g=o(p,e),{x:y,y:m,z:b=0}=g;ia(g,E=>{const{id:O,x:M,y:k,z:D=0}=E;u.nodes.push({id:O,style:{x:y,y:m,z:b}}),h.nodes.push({id:O,style:{x:M,y:k,z:D}})},E=>E.children,"TB")});const d=this.inferTreeLayoutOffset(h);if(X0(h,d),a){X0(u,d),this.updateElementPosition(u,!1);const p=this.updateElementPosition(h,a);yield p==null?void 0:p.finished}return h})}inferTreeLayoutOffset(t){var e;let[n,i]=[1/0,-1/0],[a,o]=[1/0,-1/0];(e=t.nodes)===null||e===void 0||e.forEach(g=>{const{x:y=0,y:m=0}=g.style||{};n=Math.min(n,y),i=Math.max(i,y),a=Math.min(a,m),o=Math.max(o,m)});const{canvas:s}=this.context,l=s.getSize(),[c,u]=s.getCanvasByViewport([0,0]),[h,f]=s.getCanvasByViewport(l);if(n>=c&&i<=h&&a>=u&&o<=f)return[0,0];const d=(c+h)/2,p=(u+f)/2;return[d-(n+i)/2,p-(a+o)/2]}stopLayout(){this.instance&&(0,K0.h)(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(t){const{nodeFilter:e=()=>!0,preLayout:n=!1,isLayoutInvisibleNodes:i=!1}=t,{nodes:a,edges:o,combos:s}=this.context.model.getData(),{element:l,model:c}=this.context,u=g=>l.getElement(g),h=n?g=>{var y;return!i&&(((y=g.style)===null||y===void 0?void 0:y.visibility)==="hidden"||c.getAncestorsData(g.id,qn).some($n)||c.getAncestorsData(g.id,Ge).some($n))?!1:e(g)}:g=>{const y=St(g),m=u(y);return!m||Ps(m)?!1:e(g)},f=a.filter(h),d=new Map(f.map(g=>[St(g),g]));s.forEach(g=>d.set(St(g),g));const p=o.filter(({source:g,target:y})=>d.has(g)&&d.has(y));return{nodes:f,edges:p,combos:s}}initGraphLayout(t){var e;const{element:n,viewport:i}=this.context,{type:a,enableWorker:o,animation:s,iterations:l}=t,c=JM(t,["type","enableWorker","animation","iterations"]),[u,h]=i.getCanvasSize(),f=[u/2,h/2],d=(e=t==null?void 0:t.nodeSize)!==null&&e!==void 0?e:b=>{const E=n==null?void 0:n.getElement(b.id);return E?E.attributes.size:n==null?void 0:n.getElementComputedStyle("node",b).size},p=Yr("layout",a);if(!p)return Zn.warn(`The layout of ${a} is not registered.`);const g=Object.getPrototypeOf(p.prototype)===js.prototype?p:B_(p,this.context),y=new g(this.context),m={nodeSize:d,width:u,height:h,center:f};switch(y.id){case"d3-force":case"d3-force-3d":Object.assign(m,{center:{x:u/2,y:h/2,z:0}});break;default:break}return(0,Jn.Z)(y.options,m,c),y}updateElementPosition(t,e){const{model:n,element:i}=this.context;return i?(n.updateData(t),i.draw({animation:e,silence:!0})):null}destroy(){var t;this.stopLayout(),this.context={},(t=this.supervisor)===null||t===void 0||t.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const X0=(r,t)=>{var e;const[n,i]=t;(e=r.nodes)===null||e===void 0||e.forEach(a=>{if(a.style){const{x:o=0,y:s=0}=a.style;a.style.x=o+n,a.style.y=s+i}else a.style={x:n,y:i}})};function e3(r){return[n3].reduce((e,n)=>n(e),r)}function n3(r){return!r.layout||Array.isArray(r.layout)||"preLayout"in r.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(r.layout.type)&&(r.layout.preLayout=!0),r}class r3 extends _c{constructor(t){super(t),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(t){this.setExtensions(t)}getPluginInstance(t){const e=this.extensionMap[t];if(e)return e;Zn.warn(`Cannot find the plugin ${t}, will try to find it by type.`);const n=this.extensions.find(i=>i.type===t);if(n)return this.extensionMap[n.key]}}const $l=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class i3 extends _c{constructor(t){super(t),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(t){this.setExtensions([...$l.slice(0,$l.length-1),...t,$l[$l.length-1]])}getTransformInstance(t){return t?this.extensionMap[t]:this.extensionMap}}var bo=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class a3{get padding(){return xr(this.context.options.padding)}get paddingOffset(){const[t,e,n,i]=this.padding,[a,o,s]=[(i-e)/2,(t-n)/2,0];return[a,o,s]}constructor(t){this.landmarkCounter=0,this.context=t;const[e,n]=this.paddingOffset,{zoom:i,rotation:a,x:o=e,y:s=n}=t.options;this.transform({mode:"absolute",scale:i,translate:[o,s],rotate:a},!1)}get camera(){const{canvas:t}=this.context;return new Proxy(t.getCamera(),{get:(e,n)=>{const a=Object.entries(t.getLayers()).filter(([s])=>!["main"].includes(s)).map(([,s])=>s.getCamera()),o=e[n];if(typeof o=="function")return(...s)=>{const l=o.apply(e,s);return a.forEach(c=>{c[n].apply(c,s)}),l}}})}createLandmark(t){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,t)}getAnimation(t){const e=Nh(this.context.options,t);return e?(0,Ka.Z)(Object.assign({},e),["easing","duration"]):!1}getCanvasSize(){const{canvas:t}=this.context,{width:e=0,height:n=0}=t.getConfig();return[e,n]}getCanvasCenter(){const{canvas:t}=this.context,{width:e=0,height:n=0}=t.getConfig();return[e/2,n/2,0]}getViewportCenter(){const[t,e]=this.camera.getPosition();return[t,e,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(t){const{camera:e}=this,{mode:n,translate:i=[]}=t,a=this.getZoom(),o=e.getPosition(),s=e.getFocalPoint(),[l,c]=this.getCanvasCenter(),[u=0,h=0,f=0]=i,d=Or([-u,-h,-f],a);return n==="relative"?{position:Ce(o,d),focalPoint:Ce(s,d)}:{position:Ce([l,c,o[2]],d),focalPoint:Ce([l,c,s[2]],d)}}getRotateOptions(t){const{mode:e,rotate:n=0}=t;return{roll:e==="relative"?this.camera.getRoll()+n:n}}getZoomOptions(t){const{zoomRange:e}=this.context.options,n=this.camera.getZoom(),{mode:i,scale:a=1}=t;return(0,ue.Z)(i==="relative"?n*a:a,...e)}transform(t,e){return bo(this,void 0,void 0,function*(){const{graph:n}=this.context,{translate:i,rotate:a,scale:o,origin:s}=t;this.cancelAnimation();const l=this.getAnimation(e);if(yn(n,new Fl(he.BEFORE_TRANSFORM,t)),!a&&o&&!i&&s&&!l){this.camera.setZoomByViewportPoint(this.getZoomOptions(t),s),yn(n,new Fl(he.AFTER_TRANSFORM,t));return}const c={};if(i&&Object.assign(c,this.getTranslateOptions(t)),(0,pt.Z)(a)&&Object.assign(c,this.getRotateOptions(t)),(0,pt.Z)(o)&&Object.assign(c,{zoom:this.getZoomOptions(t)}),l)return yn(n,new yr(he.BEFORE_ANIMATE,Hn.TRANSFORM,null,t)),new Promise(u=>{this.transformResolver=u,this.camera.gotoLandmark(this.createLandmark(c),Object.assign(Object.assign({},l),{onfinish:()=>{yn(n,new yr(he.AFTER_ANIMATE,Hn.TRANSFORM,null,t)),yn(n,new Fl(he.AFTER_TRANSFORM,t)),this.transformResolver=void 0,u()}}))});this.camera.gotoLandmark(this.createLandmark(c),{duration:0}),yn(n,new Fl(he.AFTER_TRANSFORM,t))})}fitView(t,e){return bo(this,void 0,void 0,function*(){const[n,i,a,o]=this.padding,{when:s="always",direction:l="both"}=t||{},[c,u]=this.context.canvas.getSize(),h=c-o-i,f=u-n-a,d=this.context.canvas.getBounds(),p=this.getBBoxInViewport(d),[g,y]=si(p),m=l==="x"&&g>=h||l==="y"&&y>=f||l==="both"&&g>=h&&y>=f;if(s==="overflow"&&!m)return yield this.fitCenter({animation:e});const b=h/g,E=f/y,O=l==="x"?b:l==="y"?E:Math.min(b,E),M=this.getAnimation(e);yield this.transform({mode:"relative",scale:O,translate:Ce(Fe(this.getCanvasCenter(),this.getBBoxInViewport(d).center),Or(this.paddingOffset,O))},M)})}fitCenter(t){return bo(this,void 0,void 0,function*(){const e=this.context.canvas.getBounds();yield this.focus(e,t)})}focusElements(t){return bo(this,arguments,void 0,function*(e,n={}){const{element:i}=this.context;if(!i)return;const a=s=>n.shapes?s.getShape(n.shapes).getRenderBounds():s.getRenderBounds(),o=ka(e.map(s=>a(i.getElement(s))));yield this.focus(o,n)})}focus(t,e){return bo(this,void 0,void 0,function*(){const n=this.context.graph.getViewportByCanvas(t.center),i=e.position||this.getCanvasCenter(),a=Fe(i,n);yield this.transform({mode:"relative",translate:Ce(a,this.paddingOffset)},e.animation)})}getBBoxInViewport(t){const{min:e,max:n}=t,{graph:i}=this.context,[a,o]=i.getViewportByCanvas(e),[s,l]=i.getViewportByCanvas(n),c=new x.mN;return c.setMinMax([a,o,0],[s,l,0]),c}isInViewport(t,e=!1,n=0){const{graph:i}=this.context,a=this.getCanvasSize(),[o,s]=i.getCanvasByViewport([0,0]),[l,c]=i.getCanvasByViewport(a);let u=new x.mN;return u.setMinMax([o,s,0],[l,c,0]),n&&(u=ci(u,n)),na(t)?Er(t,u):e?sy(t,u):u.intersects(t)}cancelAnimation(){var t,e;!((t=this.camera.landmarks)===null||t===void 0)&&t.length&&this.camera.cancelLandmarkAnimation(),(e=this.transformResolver)===null||e===void 0||e.call(this)}}var Ze=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};class Ul extends wu.Z{constructor(t){var e;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new FM},this.isCollapsingExpanding=!1,this.onResize=to(()=>{this.resize()},300),this._setOptions(Object.assign({},Ul.defaultOptions,t),!0),this.context.graph=this,this.options.autoResize&&((e=globalThis.addEventListener)===null||e===void 0||e.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(t){this._setOptions(t,!1)}_setOptions(t,e){if(this.updateCanvas(t),Object.assign(this.options,e3(t)),e){const{data:f}=t;f&&this.addData(f);return}const{behaviors:n,combo:i,data:a,edge:o,layout:s,node:l,plugins:c,theme:u,transforms:h}=t;n&&this.setBehaviors(n),a&&this.setData(a),l&&this.setNode(l),o&&this.setEdge(o),i&&this.setCombo(i),s&&this.setLayout(s),u&&this.setTheme(u),c&&this.setPlugins(c),h&&this.setTransforms(h)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(t,e){t&&(this.options.width=t),e&&(this.options.height=e),this.resize(t,e)}setZoomRange(t){this.options.zoomRange=t}getZoomRange(){return this.options.zoomRange}setNode(t){this.options.node=t,this.context.model.refreshData()}setEdge(t){this.options.edge=t,this.context.model.refreshData()}setCombo(t){this.options.combo=t,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(t){this.options.theme=(0,Se.Z)(t)?t(this.getTheme()):t}setLayout(t){this.options.layout=(0,Se.Z)(t)?t(this.getLayout()):t}getLayout(){return this.options.layout}setBehaviors(t){var e;this.options.behaviors=(0,Se.Z)(t)?t(this.getBehaviors()):t,(e=this.context.behavior)===null||e===void 0||e.setBehaviors(this.options.behaviors)}updateBehavior(t){this.setBehaviors(e=>e.map(n=>typeof n=="object"&&n.key===t.key?Object.assign(Object.assign({},n),t):n))}getBehaviors(){return this.options.behaviors||[]}setPlugins(t){var e;this.options.plugins=(0,Se.Z)(t)?t(this.getPlugins()):t,(e=this.context.plugin)===null||e===void 0||e.setPlugins(this.options.plugins)}updatePlugin(t){this.setPlugins(e=>e.map(n=>typeof n=="object"&&n.key===t.key?Object.assign(Object.assign({},n),t):n))}getPlugins(){return this.options.plugins||[]}getPluginInstance(t){return this.context.plugin.getPluginInstance(t)}setTransforms(t){var e;this.options.transforms=(0,Se.Z)(t)?t(this.getTransforms()):t,(e=this.context.transform)===null||e===void 0||e.setTransforms(this.options.transforms)}updateTransform(t){this.setTransforms(e=>e.map(n=>typeof n=="object"&&n.key===t.key?Object.assign(Object.assign({},n),t):n)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}getElementData(t){return Array.isArray(t)?t.map(e=>this.context.model.getElementDataById(e)):this.context.model.getElementDataById(t)}getNodeData(t){return t===void 0?this.context.model.getNodeData():Array.isArray(t)?this.context.model.getNodeData(t):this.context.model.getNodeLikeDatum(t)}getEdgeData(t){return t===void 0?this.context.model.getEdgeData():Array.isArray(t)?this.context.model.getEdgeData(t):this.context.model.getEdgeDatum(t)}getComboData(t){return t===void 0?this.context.model.getComboData():Array.isArray(t)?this.context.model.getComboData(t):this.context.model.getNodeLikeDatum(t)}setData(t){this.context.model.setData((0,Se.Z)(t)?t(this.getData()):t)}addData(t){this.context.model.addData((0,Se.Z)(t)?t(this.getData()):t)}addNodeData(t){this.context.model.addNodeData((0,Se.Z)(t)?t(this.getNodeData()):t)}addEdgeData(t){this.context.model.addEdgeData((0,Se.Z)(t)?t(this.getEdgeData()):t)}addComboData(t){this.context.model.addComboData((0,Se.Z)(t)?t(this.getComboData()):t)}addChildrenData(t,e){this.context.model.addChildrenData(t,e)}updateData(t){this.context.model.updateData((0,Se.Z)(t)?t(this.getData()):t)}updateNodeData(t){this.context.model.updateNodeData((0,Se.Z)(t)?t(this.getNodeData()):t)}updateEdgeData(t){this.context.model.updateEdgeData((0,Se.Z)(t)?t(this.getEdgeData()):t)}updateComboData(t){this.context.model.updateComboData((0,Se.Z)(t)?t(this.getComboData()):t)}removeData(t){this.context.model.removeData((0,Se.Z)(t)?t(this.getData()):t)}removeNodeData(t){this.context.model.removeNodeData((0,Se.Z)(t)?t(this.getNodeData()):t)}removeEdgeData(t){this.context.model.removeEdgeData((0,Se.Z)(t)?t(this.getEdgeData()):t)}removeComboData(t){this.context.model.removeComboData((0,Se.Z)(t)?t(this.getComboData()):t)}getElementType(t){return this.context.model.getElementType(t)}getRelatedEdgesData(t,e="both"){return this.context.model.getRelatedEdgesData(t,e)}getNeighborNodesData(t){return this.context.model.getNeighborNodesData(t)}getAncestorsData(t,e){return this.context.model.getAncestorsData(t,e)}getParentData(t,e){return this.context.model.getParentData(t,e)}getChildrenData(t){return this.context.model.getChildrenData(t)}getDescendantsData(t){return this.context.model.getDescendantsData(t)}getElementDataByState(t,e){return this.context.model.getElementDataByState(t,e)}initCanvas(){return Ze(this,void 0,void 0,function*(){var t;if(this.context.canvas)return yield this.context.canvas.ready;const{container:e="container",width:n,height:i,renderer:a,cursor:o,background:s,canvas:l,devicePixelRatio:c=(t=globalThis.devicePixelRatio)!==null&&t!==void 0?t:1}=this.options;if(e instanceof k0)this.context.canvas=e,o&&e.setCursor(o),a&&e.setRenderer(a),yield e.ready;else{const u=(0,ae.Z)(e)?document.getElementById(e):e,h=N0(u);this.emit(he.BEFORE_CANVAS_INIT,{container:u,width:n,height:i});const f=Object.assign(Object.assign({},l),{container:u,width:n||h[0],height:i||h[1],background:s,renderer:a,cursor:o,devicePixelRatio:c}),d=new k0(f);this.context.canvas=d,yield d.ready,this.emit(he.AFTER_CANVAS_INIT,{canvas:d})}})}updateCanvas(t){var e,n;const{renderer:i,cursor:a,height:o,width:s}=t,l=this.context.canvas;l&&(i&&(this.emit(he.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),l.setRenderer(i),this.emit(he.AFTER_RENDERER_CHANGE,{renderer:i})),a&&l.setCursor(a),((0,pt.Z)(s)||(0,pt.Z)(o))&&this.setSize((e=s!=null?s:this.options.width)!==null&&e!==void 0?e:0,(n=o!=null?o:this.options.height)!==null&&n!==void 0?n:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new LM(this.context)),this.context.plugin||(this.context.plugin=new r3(this.context)),this.context.viewport||(this.context.viewport=new a3(this.context)),this.context.transform||(this.context.transform=new i3(this.context)),this.context.element||(this.context.element=new zM(this.context)),this.context.animation||(this.context.animation=new kM(this.context)),this.context.layout||(this.context.layout=new t3(this.context)),this.context.behavior||(this.context.behavior=new IM(this.context))}prepare(){return Ze(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed)throw new Error(Kr("The graph instance has been destroyed"));yield this.initCanvas(),this.initRuntime()})}render(){return Ze(this,void 0,void 0,function*(){if(yield this.prepare(),yn(this,new vn(he.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&j_(this.options.layout)){const t=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([t==null?void 0:t.finished,this.autoFit()])}else{const t=this.context.element.draw({type:"render"});yield Promise.all([t==null?void 0:t.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const t=this.context.element.draw({type:"render"});yield Promise.all([t==null?void 0:t.finished,this.autoFit()])}this.rendered=!0,yn(this,new vn(he.AFTER_RENDER))})}draw(){return Ze(this,void 0,void 0,function*(){var t;yield this.prepare(),yield(t=this.context.element.draw())===null||t===void 0?void 0:t.finished})}layout(t){return Ze(this,void 0,void 0,function*(){yield this.context.layout.postLayout(t)})}stopLayout(){this.context.layout.stopLayout()}clear(){return Ze(this,void 0,void 0,function*(){const{model:t,element:e}=this.context;t.setData({}),t.clearChanges(),e==null||e.clear()})}destroy(){var t;yn(this,new vn(he.BEFORE_DESTROY));const{layout:e,animation:n,element:i,model:a,canvas:o,behavior:s,plugin:l}=this.context;l==null||l.destroy(),s==null||s.destroy(),e==null||e.destroy(),n==null||n.destroy(),i==null||i.destroy(),a.destroy(),o==null||o.destroy(),this.options={},this.context={},this.off(),(t=globalThis.removeEventListener)===null||t===void 0||t.call(globalThis,"resize",this.onResize),this.destroyed=!0,yn(this,new vn(he.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(t,e){var n;const i=N0((n=this.context.canvas)===null||n===void 0?void 0:n.getContainer()),a=[t||i[0],e||i[1]];if(!this.context.canvas)return;const o=this.context.canvas.getSize();cn(a,o)||(yn(this,new vn(he.BEFORE_SIZE_CHANGE,{size:a})),this.context.canvas.resize(...a),yn(this,new vn(he.AFTER_SIZE_CHANGE,{size:a})))}fitView(t,e){return Ze(this,void 0,void 0,function*(){var n;yield(n=this.context.viewport)===null||n===void 0?void 0:n.fitView(t,e)})}fitCenter(t){return Ze(this,void 0,void 0,function*(){var e;yield(e=this.context.viewport)===null||e===void 0?void 0:e.fitCenter({animation:t})})}autoFit(){return Ze(this,void 0,void 0,function*(){const{autoFit:t}=this.context.options;if(t)if((0,ae.Z)(t))t==="view"?yield this.fitView():t==="center"&&(yield this.fitCenter());else{const{type:e,animation:n}=t;e==="view"?yield this.fitView(t.options,n):e==="center"&&(yield this.fitCenter(n))}})}focusElement(t,e){return Ze(this,void 0,void 0,function*(){var n;yield(n=this.context.viewport)===null||n===void 0?void 0:n.focusElements(Array.isArray(t)?t:[t],{animation:e})})}zoomBy(t,e,n){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:t,origin:n},e)})}zoomTo(t,e,n){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:t,origin:n},e)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(t,e,n){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:t,origin:n},e)})}rotateTo(t,e,n){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:t,origin:n},e)})}getRotation(){return this.context.viewport.getRotation()}translateBy(t,e){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:t},e)})}translateTo(t,e){return Ze(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:t},e)})}getPosition(){return Fe([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(t,e){return Ze(this,arguments,void 0,function*(n,i,a=!0){var o,s;const[l,c]=(0,Vn.Z)(n)?[n,(o=i)!==null&&o!==void 0?o:!0]:[{[n]:i},a];Object.entries(l).forEach(([u,h])=>this.context.model.translateNodeLikeBy(u,h)),yield(s=this.context.element.draw({animation:c,stage:"translate"}))===null||s===void 0?void 0:s.finished})}translateElementTo(t,e){return Ze(this,arguments,void 0,function*(n,i,a=!0){var o,s;const[l,c]=(0,Vn.Z)(n)?[n,(o=i)!==null&&o!==void 0?o:!0]:[{[n]:i},a];Object.entries(l).forEach(([u,h])=>this.context.model.translateNodeLikeTo(u,h)),yield(s=this.context.element.draw({animation:c,stage:"translate"}))===null||s===void 0?void 0:s.finished})}getElementPosition(t){return this.context.model.getElementPosition(t)}getElementRenderStyle(t){return gu(this.context.element.getElement(t).attributes,["context"])}setElementVisibility(t,e){return Ze(this,arguments,void 0,function*(n,i,a=!0){var o,s;const[l,c]=(0,Vn.Z)(n)?[n,(o=i)!==null&&o!==void 0?o:!0]:[{[n]:i},a],u={nodes:[],edges:[],combos:[]};Object.entries(l).forEach(([d,p])=>{const g=this.getElementType(d);u[`${g}s`].push({id:d,style:{visibility:p}})});const{model:h,element:f}=this.context;h.preventUpdateNodeLikeHierarchy(()=>{h.updateData(u)}),yield(s=f.draw({animation:c,stage:"visibility"}))===null||s===void 0?void 0:s.finished})}showElement(t,e){return Ze(this,void 0,void 0,function*(){const n=Array.isArray(t)?t:[t];yield this.setElementVisibility(Object.fromEntries(n.map(i=>[i,"visible"])),e)})}hideElement(t,e){return Ze(this,void 0,void 0,function*(){const n=Array.isArray(t)?t:[t];yield this.setElementVisibility(Object.fromEntries(n.map(i=>[i,"hidden"])),e)})}getElementVisibility(t){var e,n;const i=this.context.element.getElement(t);return(n=(e=i==null?void 0:i.style)===null||e===void 0?void 0:e.visibility)!==null&&n!==void 0?n:"visible"}setElementZIndex(t,e){return Ze(this,void 0,void 0,function*(){var n;const i={nodes:[],edges:[],combos:[]},a=(0,Vn.Z)(t)?t:{[t]:e};Object.entries(a).forEach(([l,c])=>{const u=this.getElementType(l);i[`${u}s`].push({id:l,style:{zIndex:c}})});const{model:o,element:s}=this.context;o.preventUpdateNodeLikeHierarchy(()=>o.updateData(i)),yield(n=s.draw({animation:!1,stage:"zIndex"}))===null||n===void 0?void 0:n.finished})}frontElement(t){return Ze(this,void 0,void 0,function*(){const e=Array.isArray(t)?t:[t],{model:n}=this.context,i={};e.map(a=>{const o=n.getFrontZIndex(a);if(n.getElementType(a)==="combo"){const l=n.getAncestorsData(a,Ge).at(-1)||this.getComboData(a),c=[l,...n.getDescendantsData(St(l))],u=o-j0(l);c.forEach(f=>{i[St(f)]=this.getElementZIndex(St(f))+u});const{internal:h}=iu(c.map(St),f=>n.getRelatedEdgesData(f));h.forEach(f=>{const d=St(f);i[d]=this.getElementZIndex(d)+u})}else i[a]=o}),yield this.setElementZIndex(i)})}getElementZIndex(t){return j0(this.context.model.getElementDataById(t))}setElementState(t,e){return Ze(this,arguments,void 0,function*(n,i,a=!0){var o,s;const[l,c]=(0,Vn.Z)(n)?[n,(o=i)!==null&&o!==void 0?o:!0]:[{[n]:i},a],u=f=>f?Array.isArray(f)?f:[f]:[],h={nodes:[],edges:[],combos:[]};Object.entries(l).forEach(([f,d])=>{const p=this.getElementType(f);h[`${p}s`].push({id:f,states:u(d)})}),this.updateData(h),yield(s=this.context.element.draw({animation:c,stage:"state"}))===null||s===void 0?void 0:s.finished})}getElementState(t){return this.context.model.getElementState(t)}getElementRenderBounds(t){return this.context.element.getElement(t).getRenderBounds()}collapseElement(t){return Ze(this,arguments,void 0,function*(e,n=!0){const{model:i,element:a}=this.context;if($n(i.getNodeLikeData([e])[0])||this.isCollapsingExpanding)return;typeof n=="boolean"&&(n={animation:n,align:!0});const o=i.getElementType(e);yield this.frontElement(e),this.isCollapsingExpanding=!0,this.setElementCollapsibility(e,!0),o==="node"?yield a.collapseNode(e,n):o==="combo"&&(yield a.collapseCombo(e,!!n.animation)),this.isCollapsingExpanding=!1})}expandElement(t){return Ze(this,arguments,void 0,function*(e,n=!0){const{model:i,element:a}=this.context;if(!$n(i.getNodeLikeData([e])[0])||this.isCollapsingExpanding)return;typeof n=="boolean"&&(n={animation:n,align:!0});const o=i.getElementType(e);this.isCollapsingExpanding=!0,this.setElementCollapsibility(e,!1),o==="node"?yield a.expandNode(e,n):o==="combo"&&(yield a.expandCombo(e,!!n.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(t,e){const n=this.getElementType(t);n==="node"?this.updateNodeData([{id:t,style:{collapsed:e}}]):n==="combo"&&this.updateComboData([{id:t,style:{collapsed:e}}])}toDataURL(){return Ze(this,arguments,void 0,function*(t={}){return this.context.canvas.toDataURL(t)})}getCanvasByViewport(t){return this.context.canvas.getCanvasByViewport(t)}getViewportByCanvas(t){return this.context.canvas.getViewportByCanvas(t)}getClientByCanvas(t){return this.context.canvas.getClientByCanvas(t)}getCanvasByClient(t){return this.context.canvas.getCanvasByClient(t)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(t,e,n){return super.on(t,e,n)}once(t,e){return super.once(t,e)}off(t,e){return super.off(t,e)}}Ul.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};var o3=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e};function IA(r,t){const{getNodeData:e=(s,l)=>{if(s.depth=l,!s.children)return s;const{children:c}=s,u=o3(s,["children"]);return Object.assign(Object.assign({},u),{children:c.map(h=>h.id)})},getEdgeData:n=(s,l)=>({source:s.id,target:l.id}),getChildren:i=s=>s.children||[]}=t||{},a=[],o=[];return dfs(r,(s,l)=>{a.push(e(s,l));const c=i(s);for(const u of c)o.push(n(s,u))},s=>i(s),"TB"),{nodes:a,edges:o}}class s3 extends Ci{beforeDraw(t){const{add:e,update:n}=t,{model:i}=this.context;return[...e.edges.entries(),...n.edges.entries()].forEach(([,a])=>{q0(i,a)}),t}}const q0=(r,t)=>{const{source:e,target:n}=t,i=r.getElementDataById(e),a=r.getElementDataById(n),o=lp(i,h=>r.getParentData(h,Ge)),s=lp(a,h=>r.getParentData(h,Ge)),l=St(o),c=St(s),u={sourceNode:l,targetNode:c};return t.style?Object.assign(t.style,u):t.style=u,t},l3=(r,t,e)=>{const[n,i]=t,[a,o]=e;if(i===n)return a;const s=(r-n)/(i-n);return a+s*(o-a)},c3=(r,t,e)=>{const[n,i]=t,[a,o]=e,s=Math.log(r-n+1)/Math.log(i-n+1);return a+s*(o-a)},u3=(r,t,e,n=2)=>{const[i,a]=t,[o,s]=e,l=Math.pow((r-i)/(a-i),n);return o+l*(s-o)},h3=(r,t,e)=>{const[n,i]=t,[a,o]=e,s=Math.sqrt((r-n)/(i-n));return a+s*(o-a)};class Yl extends Ci{constructor(t,e){super(t,(0,Jn.Z)({},Yl.defaultOptions,e)),this.assignSizeByCentrality=(n,i,a,o,s,l)=>{const c=[i,a],u=[o[0],s[0]],h=[o[1],s[1]],f=[o[2],s[2]],d=(p,g)=>{if(typeof l=="function")return l(p,c,g);switch(l){case"linear":return l3(p,c,g);case"log":return c3(p,c,g);case"pow":return u3(p,c,g,2);case"sqrt":return h3(p,c,g);default:return g[0]}};return[d(n,u),d(n,h),d(n,f)]}}beforeDraw(t){const{model:e}=this.context,n=e.getNodeData(),i=tr(this.options.maxSize),a=tr(this.options.minSize),o=this.getCentralities(this.options.centrality),s=o.size>0?Math.max(...o.values()):0,l=o.size>0?Math.min(...o.values()):0;return n.forEach(c=>{var u;const h=this.assignSizeByCentrality(o.get(St(c))||0,l,s,a,i,this.options.scale),f=(u=this.context.element)===null||u===void 0?void 0:u.getElement(St(c)),d={size:h};this.assignLabelStyle(d,h,c,f),(!f||!Nl(d,f.attributes))&&or(t,f?"update":"add","node",(0,Jn.Z)(c,{style:d}),!0)}),t}assignLabelStyle(t,e,n,i){var a;const o=i?i.config.style:(a=this.context.element)===null||a===void 0?void 0:a.getElementComputedStyle("node",n);if(Object.assign(t,(0,Ka.Z)(o,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const s=this.getLabelSizeByNodeSize(e,1/0,Number(t.labelFontSize));Object.assign(t,{labelFontSize:s,labelLineHeight:s+oy(t.labelPadding)})}return t}getLabelSizeByNodeSize(t,e,n){const i=Math.min(...t)/2,[a,o]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,e];return Math.min(o,Math.max(i,a))}getCentralities(t){const{model:e}=this.context,n=e.getData();if(typeof t=="function")return t(n);const i=e.getRelatedEdgesData.bind(e);return Tf(n,i,t)}}Yl.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class Kl extends Ci{constructor(t,e){super(t,Object.assign({},Kl.defaultOptions,e))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var t;const e=gn(this.ref),{graph:n,model:i}=this.context;(t=i.getData().nodes)===null||t===void 0||t.forEach(o=>{var s;if(St(o)===St(this.ref))return;const l=Rf(Fe(gn(o),e)),c=Math.abs(l)>Math.PI/2,u=!o.children||o.children.length===0,h=St(o),f=(s=this.context.element)===null||s===void 0?void 0:s.getElement(h);if(!f||!f.isVisible())return;const d=tr(n.getElementRenderStyle(h).size)[0]/2,p=(u?1:-1)*(d+this.options.offset),g=[["translate",p*Math.cos(l),p*Math.sin(l)],["rotate",c?(0,x.BV)(l)+180:(0,x.BV)(l)]];i.updateNodeData([{id:St(o),style:{labelTextAlign:c===u?"right":"left",labelTextBaseline:"middle",labelTransform:g}}])}),n.draw()}}Kl.defaultOptions={offset:5};const f3="quadratic",Q0=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class Xl extends Ci{constructor(t,e){super(t,Object.assign({},Xl.defaultOptions,e)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=n=>{const{add:{edges:i},update:{nodes:a,edges:o,combos:s},remove:{edges:l}}=n,{model:c}=this.context,u=new Map,h=(p,g)=>{c.getRelatedEdgesData(g).forEach(m=>!u.has(St(m))&&u.set(St(m),m))};a.forEach(h),s.forEach(h);const f=p=>{const g=c.getEdgeData().map(m=>q0(c,m));d3(p,g,!0).forEach(m=>!u.has(St(m))&&u.set(St(m),m))};if(l.size&&l.forEach(f),i.size&&i.forEach(f),o.size){const p=Wp(Su(c.getChanges())).update.edges;o.forEach(g=>{var y;f(g);const m=(y=p.find(b=>St(b.value)===St(g)))===null||y===void 0?void 0:y.original;m&&!bh(g,m)&&f(m)})}Wr(this.options.edges)||u.forEach((p,g)=>!this.options.edges.includes(g)&&u.delete(g));const d=c.getEdgeData().map(St);return new Map([...u].sort((p,g)=>d.indexOf(p[0])-d.indexOf(g[0])))},this.applyBundlingStyle=(n,i,a)=>{const{edgeMap:o,reverses:s}=J0(i);o.forEach(l=>{l.forEach((c,u,h)=>{var f;const d=h.length,p=c.style||{};if(c.source===c.target){const m=Q0.length;p.loopPlacement=Q0[u%m],p.loopDist=Math.floor(u/m)*a+50}else if(d===1)p.curveOffset=0;else{const m=(u%2===0?1:-1)*(s[`${c.source}|${c.target}|${u}`]?-1:1);p.curveOffset=d%2===1?m*Math.ceil(u/2)*a*2:m*(Math.floor(u/2)*a*2+a)}const g=Object.assign(c,{type:f3,style:p}),y=(f=this.context.element)===null||f===void 0?void 0:f.getElement(St(c));(!y||!Nl(g.style,y.attributes))&&or(n,y?"update":"add","edge",g,!0)})})},this.resetEdgeStyle=n=>{const i=n.style||{},a=this.cacheMergeStyle.get(St(n))||{};return Object.keys(a).forEach(o=>{cn(i[o],a[o])&&(n[o]?i[o]=n[o]:delete i[o])}),Object.assign(n,{style:i})},this.applyMergingStyle=(n,i)=>{const{edgeMap:a,reverses:o}=J0(i);a.forEach(s=>{var l;if(s.length===1){const u=s[0],h=(l=this.context.element)===null||l===void 0?void 0:l.getElement(St(u)),f=this.resetEdgeStyle(u);(!h||!Nl(f,h.attributes))&&or(n,h?"update":"add","edge",f);return}const c=s.map(({source:u,target:h,style:f={}},d)=>{const{startArrow:p,endArrow:g}=f,y={},[m,b]=o[`${u}|${h}|${d}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return(0,Eu.Z)(p)&&(y[m]=p),(0,Eu.Z)(g)&&(y[b]=g),y}).reduce((u,h)=>Object.assign(Object.assign({},u),h),{});s.forEach((u,h,f)=>{var d;if(h!==0){or(n,"remove","edge",u);return}const p=Object.assign({},(0,Se.Z)(this.options.style)?this.options.style(f):this.options.style,{childrenData:f});this.cacheMergeStyle.set(St(u),p);const g=Object.assign(Object.assign({},u),{type:"line",style:Object.assign(Object.assign(Object.assign({},u.style),c),p)}),y=(d=this.context.element)===null||d===void 0?void 0:d.getElement(St(u));(!y||!Nl(g.style,y.attributes))&&or(n,y?"update":"add","edge",g,!0)})})}}beforeDraw(t){const e=this.getAffectedParallelEdges(t);return e.size===0||(this.options.mode==="bundle"?this.applyBundlingStyle(t,e,this.options.distance):this.applyMergingStyle(t,e)),t}}Xl.defaultOptions={mode:"bundle",distance:15};const J0=r=>{const t=new Map,e=new Set,n={},i=new Map;for(const[a,o]of r){if(e.has(a))continue;const{source:s,target:l}=o,c=`${s}-${l}`;t.has(c)||(t.set(c,[]),i.set(c,new Set));const u=t.get(c),h=i.get(c);u&&h&&!h.has(a)&&(u.push(o),h.add(a),e.add(a));for(const[f,d]of r)if(!(e.has(f)||f===a)&&bh(o,d)){const p=t.get(c),g=i.get(c);p&&g&&!g.has(f)&&(p.push(d),g.add(f),s===d.target&&l===d.source&&(n[`${d.source}|${d.target}|${p.length-1}`]=!0),e.add(f))}}return{edgeMap:t,reverses:n}},d3=(r,t,e)=>t.filter(n=>(e||St(n)!==St(r))&&bh(n,r)),bh=(r,t)=>{const{sourceNode:e,targetNode:n}=r.style||{},{sourceNode:i,targetNode:a}=t.style||{};return e===i&&n===a||e===a&&n===i};class p3 extends Ci{beforeDraw(t,e){const{stage:n}=e;if(n==="visibility")return t;const{model:i}=this.context,{update:{nodes:a,edges:o,combos:s}}=t,l=(c,u)=>{i.getRelatedEdgesData(u).forEach(f=>!o.has(St(f))&&o.set(St(f),f))};return a.forEach(l),s.forEach(l),t}}const v3={animation:{"combo-collapse":zh,"combo-expand":ey,"node-collapse":Bh,"node-expand":Jg,"path-in":Fh,"path-out":ty,fade:qg,translate:Qg},behavior:{"brush-select":Fa,"click-select":qo,"collapse-expand":Rs,"create-edge":Is,"drag-canvas":Ns,"drag-element-force":z_,"drag-element":eo,"fix-element-size":Fs,"focus-element":zs,"hover-activate":Ws,"lasso-select":G_,"auto-adapt-label":Zo,"optimize-viewport-transform":Gs,"scroll-canvas":Vs,"zoom-canvas":Hs},combo:{circle:L2,rect:I2},edge:{cubic:zi,line:Cs,polyline:Ts,quadratic:As,"cubic-horizontal":Ss,"cubic-radial":Os,"cubic-vertical":Ms},layout:{"antv-dagre":V_.b,"combo-combined":Z_.u,"compact-box":Zs.compactBox,"d3-force":U_.j,"force-atlas2":K_.E,circular:H_.S,concentric:$_.W,dagre:Y_.V,dendrogram:Zs.dendrogram,fishbone:$s,force:X_.y,fruchterman:q_.O,grid:Q_.M,indented:Zs.indented,mds:J_.A,mindmap:Zs.mindmap,radial:tx.D,random:ex._,snake:Us},node:{circle:Bi,diamond:R1,ellipse:ns,hexagon:N1,html:Xa,image:_s,rect:D2,star:k2,donut:ts,triangle:xs},palette:{spectral:ox,tableau:sx,oranges:lx,greens:cx,blues:ux},theme:{dark:dM,light:pM},plugin:{"bubble-sets":rl,"edge-bundling":al,"edge-filter-lens":ol,"grid-line":cl,background:Ys,contextmenu:il,fisheye:sl,fullscreen:ll,history:ul,hull:pl,legend:bl,minimap:_l,snapline:xl,timebar:Dl,toolbar:kl,tooltip:Ll,watermark:Il},transform:{"arrange-draw-order":vM,"collapse-expand-combo":gM,"collapse-expand-node":yM,"get-edge-actual-ends":s3,"map-node-size":Yl,"place-radial-labels":Kl,"process-parallel-edges":Xl,"update-related-edges":p3},shape:{circle:x.Cd,ellipse:x.Pj,group:x.ZA,html:x.k9,image:Pc,line:x.x1,path:x.y$,polygon:x.mg,polyline:x.aH,rect:x.UL,text:x.xv,label:di,badge:aa}};function g3(){Object.entries(v3).forEach(([r,t])=>{Object.entries(t).forEach(([e,n])=>{_0(r,e,n)})})}g3();const NA={css:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.css",js:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.js"};var y3=G(73935),m3=G.t(y3,2),ql=function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})};const tg=Object.assign({},m3),{version:b3,render:_3,unmountComponentAtNode:x3}=tg;let _o;function eg(){return ql(this,void 0,void 0,function*(){if(_o)return;if(Number((b3||"").split(".")[0])>=18)try{const t=yield Promise.resolve().then(G.t.bind(G,20745,19));t.createRoot&&(_o=t.createRoot)}catch(t){}})}function ng(r){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:t}=tg;t&&typeof t=="object"&&(t.usingClientEntryPoint=r)}const Ql="__rc_react_root__";function E3(r,t){ng(!0);const e=t[Ql]||_o(t);ng(!1),e.render(r),t[Ql]=e}function w3(r,t){_3(r,t)}function rg(r,t){return ql(this,void 0,void 0,function*(){yield eg(),_o?E3(r,t):w3(r,t)})}function S3(r){return ql(this,void 0,void 0,function*(){return Promise.resolve().then(()=>{var t;(t=r[Ql])===null||t===void 0||t.unmount(),delete r[Ql]})})}function O3(r){x3(r)}function M3(r){return ql(this,void 0,void 0,function*(){if(yield eg(),_o)return S3(r);O3(r)})}class C3 extends Xa{getKeyStyle(t){return Object.assign({},super.getKeyStyle(t))}constructor(t){super(t)}update(t){super.update(t)}connectedCallback(){super.connectedCallback();const{component:t}=this.attributes;rg(t,this.getDomElement())}attributeChangedCallback(t,e,n){super.attributeChangedCallback(t,e,n),t==="component"&&e!==n&&rg(this.attributes.component,this.getDomElement())}destroy(){M3(this.getDomElement()),super.destroy()}}var T3=G(45007),Hr={CustomizeNode:"CustomizeNode___abhD3",centerIcon:"centerIcon___HH35h",parentIcon:"parentIcon___LeHUJ",icon:"icon___s50w9",img:"img___lRGj0",img_hover:"img_hover___eri7M",label:"label___UYohI",childIcon:"childIcon___fBFRW",bg:"bg___bfi3L"},jA=G(93967),BA=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=useRef({fn:t,timer:null}),a=i.current;return useEffect(function(){a.fn=t},[t]),useCallback(function(){if(!a.timer){var s;a.timer=setTimeout(function(){delete a.timer},e);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];(s=a.fn).call.apply(s,[this].concat(c))}},n)},FA=null,wn=G(85893),A3=function(t){var e=t.graph,n=e===void 0?void 0:e,i=t.nodeId,a=i===void 0?"":i,o=t.nodeStates,s=o===void 0?[]:o,l=t.nodeData,c=l===void 0?{}:l,u=(0,tt.useState)(!1),h=X()(u,2),f=h[0],d=h[1];(0,tt.useEffect)(function(){d(s==null?void 0:s.includes("highlight"))},[s==null?void 0:s.includes("highlight")]);var p=function(O){var M;O.preventDefault();var k=n.getNodeData((M=O.target)===null||M===void 0?void 0:M.id)},g=function(O){var M;O.preventDefault();var k=(M=n.getNodeData(a))===null||M===void 0||(M=M.style)===null||M===void 0?void 0:M.collapsed;n.updateNodeData([{id:a,style:{collapsed:!k}}]),n.draw()},y=function(O){O.stopPropagation(),O.preventDefault();var M=n.getNodeData(a);if(M.data.level===1){var k=n.getDescendantsData(a);n.setElementState(a,"dragActive"),k.map(function(N){n.setElementState(N.id,"dragActive")})}else if(M.data.level>1){var D=n.getDescendantsData(M.data.parent);n.setElementState(M.data.parent,"dragActive"),D.map(function(N){n.setElementState(N.id,"dragActive")})}d(!0)},m=function(O){O.stopPropagation(),O.preventDefault();var M=n.getNodeData(a);if(M.data.level===1){var k=n.getDescendantsData(a);n.setElementState(a,""),k.map(function(N){n.setElementState(N.id,"")})}else if(M.data.level>1){var D=n.getDescendantsData(M.data.parent);n.setElementState(M.data.parent,""),D.map(function(N){n.setElementState(N.id,"")})}d(!1)},b=function(){switch(c.level){case 0:return(0,wn.jsx)("div",{className:Hr.centerIcon});case 1:return(0,wn.jsxs)("div",{onDoubleClick:g,className:Hr.parentIcon,style:f?{background:"radial-gradient(50% 50% at 50% 50%, ".concat(c.color,", ").concat(c.color,"00), ").concat(c.color),boxShadow:"0px 20px 38px ".concat(c.color,"3D, 0px 1px 5px rgba(255, 255, 255, 0.58) inset, 0px -10px 24px ").concat(c.color,"5E inset, 5px 8px 10px ").concat(c.color,"F2 inset")}:{},children:[(0,wn.jsx)("div",{className:Hr.icon,style:f?{border:"none"}:{borderColor:"".concat(c.color)},children:(c==null?void 0:c.icon)&&(0,wn.jsx)("img",{src:c==null?void 0:c.icon,className:f?Hr.img_hover:Hr.img,style:f?{}:{filter:"drop-shadow(".concat(c.color," 0 200px)")}})}),(0,wn.jsx)("div",{className:Hr.label,"data-type":c.level,children:c==null?void 0:c.name})]});default:return(0,wn.jsxs)("div",{className:Hr.childIcon,style:{backgroundColor:"".concat(c.color),boxShadow:"0px 5.48px 5.48px 0px ".concat(c.color,"4A")},children:[(0,wn.jsx)("div",{className:Hr.bg,style:{backgroundColor:"".concat(c.color,"42")}}),(0,wn.jsx)("div",{className:Hr.label,"data-type":c.level,children:c==null?void 0:c.name})]})}};return(0,wn.jsx)("div",{className:Hr.CustomizeNode,onMouseEnter:y,onMouseLeave:m,children:b()})},P3=A3,R3=G(97460),D3={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},k3=D3,L3=G(92578),I3=function(t,e){return tt.createElement(L3.Z,(0,R3.Z)({},t,{ref:e,icon:k3}))},N3=tt.forwardRef(I3),j3=N3;_0(ea.NODE,"react",C3);var B3=function(t){var e=(0,T3.I0)(),n=(0,tt.useRef)(null),i=(0,tt.useRef)(null),a=(0,tt.useState)(!0),o=X()(a,2),s=o[0],l=o[1],c=(0,tt.useState)({}),u=X()(c,2),h=u[0],f=u[1];(0,tt.useEffect)(function(){d()},[]);var d=function(){l(!0),e({type:"AntV_G6/fetchGetTreeData"}).then(function(g){f(g),l(!1)})};return(0,tt.useEffect)(function(){if(n.current){i.current&&i.current.destroy();var p=n.current.clientWidth,g=n.current.clientHeight,y=new Ul({container:n.current,autoFit:"view",padding:50,width:p,height:g,data:h,node:{type:"react",style:{size:function(b){return b.data.level<2?48:18},component:function(b){return(0,wn.jsx)(P3,{graph:y,nodeId:b.id,nodeStates:b.states,nodeData:b.data})}}},edge:{type:"line",style:{lineWidth:1,stroke:"#CADDFC"},state:{highlight:{lineWidth:3,stroke:function(b){var E=y.getNodeData(b.target);return E.data.color}}}},layout:{type:"compact-box",radial:!0,direction:"RL",getVGap:function(b){return 30},getHGap:function(b){return b.data.level===1?80:50}},behaviors:["zoom-canvas","drag-canvas",{key:"drag-element",type:"drag-element",state:"dragActive",enable:function(b){var E,O=y.getNodeData((E=b.target)===null||E===void 0?void 0:E.id);return O.data.level>0}},{key:"hover-activate",type:"hover-activate",degree:5,direction:"in",state:"highlight",enable:function(b){return b.targetType==="node"}}],plugins:[{type:"toolbar",position:"top-left",onClick:function(b){switch(b){case"zoom-in":y.zoomBy(1.2,{duration:300});break;case"zoom-out":y.zoomBy(.8,{duration:300});break;case"auto-fit":y.fitView();break}},getItems:function(){return[{id:"zoom-in",value:"zoom-in"},{id:"zoom-out",value:"zoom-out"},{id:"auto-fit",value:"auto-fit"}]}}],animation:!1});i.current=y,y.render()}},[h]),(0,wn.jsxs)("div",{className:at.g6,children:[(0,wn.jsxs)("div",{className:at.tips,children:[(0,wn.jsx)("div",{className:at.icon,children:(0,wn.jsx)(j3,{})}),"\u53CC\u51FB\u53EF\u6536\u8D77/\u5C55\u5F00\u8282\u70B9"]}),s?(0,wn.jsx)(K.Z,{}):(0,wn.jsx)(wn.Fragment,{children:(0,wn.jsx)("div",{className:at.treeMap,ref:n})})]})},F3=B3},96159:function(me,Bt,G){"use strict";G.d(Bt,{M2:function(){return Et},Tm:function(){return at}});var U=G(67294);function Et(tt){return tt&&U.isValidElement(tt)&&tt.type===U.Fragment}const X=(tt,K,x)=>U.isValidElement(tt)?U.cloneElement(tt,typeof x=="function"?x(tt.props||{}):x):K;function at(tt,K){return X(tt,tt,K)}},8874:function(me){"use strict";me.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(me,Bt,G){var U=G(8874),Et=G(86851),X=Object.hasOwnProperty,at=Object.create(null);for(var tt in U)X.call(U,tt)&&(at[U[tt]]=tt);var K=me.exports={to:{},get:{}};K.get=function(I){var et=I.substring(0,3).toLowerCase(),$,it;switch(et){case"hsl":$=K.get.hsl(I),it="hsl";break;case"hwb":$=K.get.hwb(I),it="hwb";break;default:$=K.get.rgb(I),it="rgb";break}return $?{model:it,value:$}:null},K.get.rgb=function(I){if(!I)return null;var et=/^#([a-f0-9]{3,4})$/i,$=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,it=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,gt=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,lt=/^(\w+)$/,Rt=[0,0,0,1],At,Dt,Jt;if(At=I.match($)){for(Jt=At[2],At=At[1],Dt=0;Dt<3;Dt++){var qt=Dt*2;Rt[Dt]=parseInt(At.slice(qt,qt+2),16)}Jt&&(Rt[3]=parseInt(Jt,16)/255)}else if(At=I.match(et)){for(At=At[1],Jt=At[3],Dt=0;Dt<3;Dt++)Rt[Dt]=parseInt(At[Dt]+At[Dt],16);Jt&&(Rt[3]=parseInt(Jt+Jt,16)/255)}else if(At=I.match(it)){for(Dt=0;Dt<3;Dt++)Rt[Dt]=parseInt(At[Dt+1],0);At[4]&&(At[5]?Rt[3]=parseFloat(At[4])*.01:Rt[3]=parseFloat(At[4]))}else if(At=I.match(gt)){for(Dt=0;Dt<3;Dt++)Rt[Dt]=Math.round(parseFloat(At[Dt+1])*2.55);At[4]&&(At[5]?Rt[3]=parseFloat(At[4])*.01:Rt[3]=parseFloat(At[4]))}else return(At=I.match(lt))?At[1]==="transparent"?[0,0,0,0]:X.call(U,At[1])?(Rt=U[At[1]],Rt[3]=1,Rt):null:null;for(Dt=0;Dt<3;Dt++)Rt[Dt]=x(Rt[Dt],0,255);return Rt[3]=x(Rt[3],0,1),Rt},K.get.hsl=function(I){if(!I)return null;var et=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,$=I.match(et);if($){var it=parseFloat($[4]),gt=(parseFloat($[1])%360+360)%360,lt=x(parseFloat($[2]),0,100),Rt=x(parseFloat($[3]),0,100),At=x(isNaN(it)?1:it,0,1);return[gt,lt,Rt,At]}return null},K.get.hwb=function(I){if(!I)return null;var et=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,$=I.match(et);if($){var it=parseFloat($[4]),gt=(parseFloat($[1])%360+360)%360,lt=x(parseFloat($[2]),0,100),Rt=x(parseFloat($[3]),0,100),At=x(isNaN(it)?1:it,0,1);return[gt,lt,Rt,At]}return null},K.to.hex=function(){var I=Et(arguments);return"#"+q(I[0])+q(I[1])+q(I[2])+(I[3]<1?q(Math.round(I[3]*255)):"")},K.to.rgb=function(){var I=Et(arguments);return I.length<4||I[3]===1?"rgb("+Math.round(I[0])+", "+Math.round(I[1])+", "+Math.round(I[2])+")":"rgba("+Math.round(I[0])+", "+Math.round(I[1])+", "+Math.round(I[2])+", "+I[3]+")"},K.to.rgb.percent=function(){var I=Et(arguments),et=Math.round(I[0]/255*100),$=Math.round(I[1]/255*100),it=Math.round(I[2]/255*100);return I.length<4||I[3]===1?"rgb("+et+"%, "+$+"%, "+it+"%)":"rgba("+et+"%, "+$+"%, "+it+"%, "+I[3]+")"},K.to.hsl=function(){var I=Et(arguments);return I.length<4||I[3]===1?"hsl("+I[0]+", "+I[1]+"%, "+I[2]+"%)":"hsla("+I[0]+", "+I[1]+"%, "+I[2]+"%, "+I[3]+")"},K.to.hwb=function(){var I=Et(arguments),et="";return I.length>=4&&I[3]!==1&&(et=", "+I[3]),"hwb("+I[0]+", "+I[1]+"%, "+I[2]+"%"+et+")"},K.to.keyword=function(I){return at[I.slice(0,3)]};function x(I,et,$){return Math.min(Math.max(et,I),$)}function q(I){var et=Math.round(I).toString(16).toUpperCase();return et.length<2?"0"+et:et}},26729:function(me){"use strict";var Bt=Object.prototype.hasOwnProperty,G="~";function U(){}Object.create&&(U.prototype=Object.create(null),new U().__proto__||(G=!1));function Et(K,x,q){this.fn=K,this.context=x,this.once=q||!1}function X(K,x,q,I,et){if(typeof q!="function")throw new TypeError("The listener must be a function");var $=new Et(q,I||K,et),it=G?G+x:x;return K._events[it]?K._events[it].fn?K._events[it]=[K._events[it],$]:K._events[it].push($):(K._events[it]=$,K._eventsCount++),K}function at(K,x){--K._eventsCount===0?K._events=new U:delete K._events[x]}function tt(){this._events=new U,this._eventsCount=0}tt.prototype.eventNames=function(){var x=[],q,I;if(this._eventsCount===0)return x;for(I in q=this._events)Bt.call(q,I)&&x.push(G?I.slice(1):I);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(q)):x},tt.prototype.listeners=function(x){var q=G?G+x:x,I=this._events[q];if(!I)return[];if(I.fn)return[I.fn];for(var et=0,$=I.length,it=new Array($);et<$;et++)it[et]=I[et].fn;return it},tt.prototype.listenerCount=function(x){var q=G?G+x:x,I=this._events[q];return I?I.fn?1:I.length:0},tt.prototype.emit=function(x,q,I,et,$,it){var gt=G?G+x:x;if(!this._events[gt])return!1;var lt=this._events[gt],Rt=arguments.length,At,Dt;if(lt.fn){switch(lt.once&&this.removeListener(x,lt.fn,void 0,!0),Rt){case 1:return lt.fn.call(lt.context),!0;case 2:return lt.fn.call(lt.context,q),!0;case 3:return lt.fn.call(lt.context,q,I),!0;case 4:return lt.fn.call(lt.context,q,I,et),!0;case 5:return lt.fn.call(lt.context,q,I,et,$),!0;case 6:return lt.fn.call(lt.context,q,I,et,$,it),!0}for(Dt=1,At=new Array(Rt-1);Dt<Rt;Dt++)At[Dt-1]=arguments[Dt];lt.fn.apply(lt.context,At)}else{var Jt=lt.length,qt;for(Dt=0;Dt<Jt;Dt++)switch(lt[Dt].once&&this.removeListener(x,lt[Dt].fn,void 0,!0),Rt){case 1:lt[Dt].fn.call(lt[Dt].context);break;case 2:lt[Dt].fn.call(lt[Dt].context,q);break;case 3:lt[Dt].fn.call(lt[Dt].context,q,I);break;case 4:lt[Dt].fn.call(lt[Dt].context,q,I,et);break;default:if(!At)for(qt=1,At=new Array(Rt-1);qt<Rt;qt++)At[qt-1]=arguments[qt];lt[Dt].fn.apply(lt[Dt].context,At)}}return!0},tt.prototype.on=function(x,q,I){return X(this,x,q,I,!1)},tt.prototype.once=function(x,q,I){return X(this,x,q,I,!0)},tt.prototype.removeListener=function(x,q,I,et){var $=G?G+x:x;if(!this._events[$])return this;if(!q)return at(this,$),this;var it=this._events[$];if(it.fn)it.fn===q&&(!et||it.once)&&(!I||it.context===I)&&at(this,$);else{for(var gt=0,lt=[],Rt=it.length;gt<Rt;gt++)(it[gt].fn!==q||et&&!it[gt].once||I&&it[gt].context!==I)&&lt.push(it[gt]);lt.length?this._events[$]=lt.length===1?lt[0]:lt:at(this,$)}return this},tt.prototype.removeAllListeners=function(x){var q;return x?(q=G?G+x:x,this._events[q]&&at(this,q)):(this._events=new U,this._eventsCount=0),this},tt.prototype.off=tt.prototype.removeListener,tt.prototype.addListener=tt.prototype.on,tt.prefixed=G,tt.EventEmitter=tt,me.exports=tt},49685:function(me,Bt,G){"use strict";G.d(Bt,{Ib:function(){return U},WT:function(){return Et}});var U=1e-6,Et=typeof Float32Array!="undefined"?Float32Array:Array,X=Math.random;function at(q){Et=q}var tt=Math.PI/180;function K(q){return q*tt}function x(q,I){return Math.abs(q-I)<=U*Math.max(1,Math.abs(q),Math.abs(I))}Math.hypot||(Math.hypot=function(){for(var q=0,I=arguments.length;I--;)q+=arguments[I]*arguments[I];return Math.sqrt(q)})},35600:function(me,Bt,G){"use strict";G.d(Bt,{Ue:function(){return Et},al:function(){return K},xO:function(){return X}});var U=G(49685);function Et(){var T=new U.WT(9);return U.WT!=Float32Array&&(T[1]=0,T[2]=0,T[3]=0,T[5]=0,T[6]=0,T[7]=0),T[0]=1,T[4]=1,T[8]=1,T}function X(T,V){return T[0]=V[0],T[1]=V[1],T[2]=V[2],T[3]=V[4],T[4]=V[5],T[5]=V[6],T[6]=V[8],T[7]=V[9],T[8]=V[10],T}function at(T){var V=new glMatrix.ARRAY_TYPE(9);return V[0]=T[0],V[1]=T[1],V[2]=T[2],V[3]=T[3],V[4]=T[4],V[5]=T[5],V[6]=T[6],V[7]=T[7],V[8]=T[8],V}function tt(T,V){return T[0]=V[0],T[1]=V[1],T[2]=V[2],T[3]=V[3],T[4]=V[4],T[5]=V[5],T[6]=V[6],T[7]=V[7],T[8]=V[8],T}function K(T,V,H,J,ht,bt,zt,kt,se){var z=new U.WT(9);return z[0]=T,z[1]=V,z[2]=H,z[3]=J,z[4]=ht,z[5]=bt,z[6]=zt,z[7]=kt,z[8]=se,z}function x(T,V,H,J,ht,bt,zt,kt,se,z){return T[0]=V,T[1]=H,T[2]=J,T[3]=ht,T[4]=bt,T[5]=zt,T[6]=kt,T[7]=se,T[8]=z,T}function q(T){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=1,T[5]=0,T[6]=0,T[7]=0,T[8]=1,T}function I(T,V){if(T===V){var H=V[1],J=V[2],ht=V[5];T[1]=V[3],T[2]=V[6],T[3]=H,T[5]=V[7],T[6]=J,T[7]=ht}else T[0]=V[0],T[1]=V[3],T[2]=V[6],T[3]=V[1],T[4]=V[4],T[5]=V[7],T[6]=V[2],T[7]=V[5],T[8]=V[8];return T}function et(T,V){var H=V[0],J=V[1],ht=V[2],bt=V[3],zt=V[4],kt=V[5],se=V[6],z=V[7],P=V[8],B=P*zt-kt*z,dt=-P*bt+kt*se,L=z*bt-zt*se,Z=H*B+J*dt+ht*L;return Z?(Z=1/Z,T[0]=B*Z,T[1]=(-P*J+ht*z)*Z,T[2]=(kt*J-ht*zt)*Z,T[3]=dt*Z,T[4]=(P*H-ht*se)*Z,T[5]=(-kt*H+ht*bt)*Z,T[6]=L*Z,T[7]=(-z*H+J*se)*Z,T[8]=(zt*H-J*bt)*Z,T):null}function $(T,V){var H=V[0],J=V[1],ht=V[2],bt=V[3],zt=V[4],kt=V[5],se=V[6],z=V[7],P=V[8];return T[0]=zt*P-kt*z,T[1]=ht*z-J*P,T[2]=J*kt-ht*zt,T[3]=kt*se-bt*P,T[4]=H*P-ht*se,T[5]=ht*bt-H*kt,T[6]=bt*z-zt*se,T[7]=J*se-H*z,T[8]=H*zt-J*bt,T}function it(T){var V=T[0],H=T[1],J=T[2],ht=T[3],bt=T[4],zt=T[5],kt=T[6],se=T[7],z=T[8];return V*(z*bt-zt*se)+H*(-z*ht+zt*kt)+J*(se*ht-bt*kt)}function gt(T,V,H){var J=V[0],ht=V[1],bt=V[2],zt=V[3],kt=V[4],se=V[5],z=V[6],P=V[7],B=V[8],dt=H[0],L=H[1],Z=H[2],ct=H[3],R=H[4],W=H[5],ft=H[6],v=H[7],_=H[8];return T[0]=dt*J+L*zt+Z*z,T[1]=dt*ht+L*kt+Z*P,T[2]=dt*bt+L*se+Z*B,T[3]=ct*J+R*zt+W*z,T[4]=ct*ht+R*kt+W*P,T[5]=ct*bt+R*se+W*B,T[6]=ft*J+v*zt+_*z,T[7]=ft*ht+v*kt+_*P,T[8]=ft*bt+v*se+_*B,T}function lt(T,V,H){var J=V[0],ht=V[1],bt=V[2],zt=V[3],kt=V[4],se=V[5],z=V[6],P=V[7],B=V[8],dt=H[0],L=H[1];return T[0]=J,T[1]=ht,T[2]=bt,T[3]=zt,T[4]=kt,T[5]=se,T[6]=dt*J+L*zt+z,T[7]=dt*ht+L*kt+P,T[8]=dt*bt+L*se+B,T}function Rt(T,V,H){var J=V[0],ht=V[1],bt=V[2],zt=V[3],kt=V[4],se=V[5],z=V[6],P=V[7],B=V[8],dt=Math.sin(H),L=Math.cos(H);return T[0]=L*J+dt*zt,T[1]=L*ht+dt*kt,T[2]=L*bt+dt*se,T[3]=L*zt-dt*J,T[4]=L*kt-dt*ht,T[5]=L*se-dt*bt,T[6]=z,T[7]=P,T[8]=B,T}function At(T,V,H){var J=H[0],ht=H[1];return T[0]=J*V[0],T[1]=J*V[1],T[2]=J*V[2],T[3]=ht*V[3],T[4]=ht*V[4],T[5]=ht*V[5],T[6]=V[6],T[7]=V[7],T[8]=V[8],T}function Dt(T,V){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=1,T[5]=0,T[6]=V[0],T[7]=V[1],T[8]=1,T}function Jt(T,V){var H=Math.sin(V),J=Math.cos(V);return T[0]=J,T[1]=H,T[2]=0,T[3]=-H,T[4]=J,T[5]=0,T[6]=0,T[7]=0,T[8]=1,T}function qt(T,V){return T[0]=V[0],T[1]=0,T[2]=0,T[3]=0,T[4]=V[1],T[5]=0,T[6]=0,T[7]=0,T[8]=1,T}function fe(T,V){return T[0]=V[0],T[1]=V[1],T[2]=0,T[3]=V[2],T[4]=V[3],T[5]=0,T[6]=V[4],T[7]=V[5],T[8]=1,T}function ae(T,V){var H=V[0],J=V[1],ht=V[2],bt=V[3],zt=H+H,kt=J+J,se=ht+ht,z=H*zt,P=J*zt,B=J*kt,dt=ht*zt,L=ht*kt,Z=ht*se,ct=bt*zt,R=bt*kt,W=bt*se;return T[0]=1-B-Z,T[3]=P-W,T[6]=dt+R,T[1]=P+W,T[4]=1-z-Z,T[7]=L-ct,T[2]=dt-R,T[5]=L+ct,T[8]=1-z-B,T}function pt(T,V){var H=V[0],J=V[1],ht=V[2],bt=V[3],zt=V[4],kt=V[5],se=V[6],z=V[7],P=V[8],B=V[9],dt=V[10],L=V[11],Z=V[12],ct=V[13],R=V[14],W=V[15],ft=H*kt-J*zt,v=H*se-ht*zt,_=H*z-bt*zt,F=J*se-ht*kt,nt=J*z-bt*kt,ut=ht*z-bt*se,xt=P*ct-B*Z,Pt=P*R-dt*Z,jt=P*W-L*Z,Ht=B*R-dt*ct,Gt=B*W-L*ct,Ut=dt*W-L*R,Yt=ft*Ut-v*Gt+_*Ht+F*jt-nt*Pt+ut*xt;return Yt?(Yt=1/Yt,T[0]=(kt*Ut-se*Gt+z*Ht)*Yt,T[1]=(se*jt-zt*Ut-z*Pt)*Yt,T[2]=(zt*Gt-kt*jt+z*xt)*Yt,T[3]=(ht*Gt-J*Ut-bt*Ht)*Yt,T[4]=(H*Ut-ht*jt+bt*Pt)*Yt,T[5]=(J*jt-H*Gt-bt*xt)*Yt,T[6]=(ct*ut-R*nt+W*F)*Yt,T[7]=(R*_-Z*ut-W*v)*Yt,T[8]=(Z*nt-ct*_+W*ft)*Yt,T):null}function It(T,V,H){return T[0]=2/V,T[1]=0,T[2]=0,T[3]=0,T[4]=-2/H,T[5]=0,T[6]=-1,T[7]=1,T[8]=1,T}function vt(T){return"mat3("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+", "+T[4]+", "+T[5]+", "+T[6]+", "+T[7]+", "+T[8]+")"}function st(T){return Math.hypot(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8])}function Vt(T,V,H){return T[0]=V[0]+H[0],T[1]=V[1]+H[1],T[2]=V[2]+H[2],T[3]=V[3]+H[3],T[4]=V[4]+H[4],T[5]=V[5]+H[5],T[6]=V[6]+H[6],T[7]=V[7]+H[7],T[8]=V[8]+H[8],T}function ne(T,V,H){return T[0]=V[0]-H[0],T[1]=V[1]-H[1],T[2]=V[2]-H[2],T[3]=V[3]-H[3],T[4]=V[4]-H[4],T[5]=V[5]-H[5],T[6]=V[6]-H[6],T[7]=V[7]-H[7],T[8]=V[8]-H[8],T}function ee(T,V,H){return T[0]=V[0]*H,T[1]=V[1]*H,T[2]=V[2]*H,T[3]=V[3]*H,T[4]=V[4]*H,T[5]=V[5]*H,T[6]=V[6]*H,T[7]=V[7]*H,T[8]=V[8]*H,T}function Ft(T,V,H,J){return T[0]=V[0]+H[0]*J,T[1]=V[1]+H[1]*J,T[2]=V[2]+H[2]*J,T[3]=V[3]+H[3]*J,T[4]=V[4]+H[4]*J,T[5]=V[5]+H[5]*J,T[6]=V[6]+H[6]*J,T[7]=V[7]+H[7]*J,T[8]=V[8]+H[8]*J,T}function Mt(T,V){return T[0]===V[0]&&T[1]===V[1]&&T[2]===V[2]&&T[3]===V[3]&&T[4]===V[4]&&T[5]===V[5]&&T[6]===V[6]&&T[7]===V[7]&&T[8]===V[8]}function Wt(T,V){var H=T[0],J=T[1],ht=T[2],bt=T[3],zt=T[4],kt=T[5],se=T[6],z=T[7],P=T[8],B=V[0],dt=V[1],L=V[2],Z=V[3],ct=V[4],R=V[5],W=V[6],ft=V[7],v=V[8];return Math.abs(H-B)<=glMatrix.EPSILON*Math.max(1,Math.abs(H),Math.abs(B))&&Math.abs(J-dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(J),Math.abs(dt))&&Math.abs(ht-L)<=glMatrix.EPSILON*Math.max(1,Math.abs(ht),Math.abs(L))&&Math.abs(bt-Z)<=glMatrix.EPSILON*Math.max(1,Math.abs(bt),Math.abs(Z))&&Math.abs(zt-ct)<=glMatrix.EPSILON*Math.max(1,Math.abs(zt),Math.abs(ct))&&Math.abs(kt-R)<=glMatrix.EPSILON*Math.max(1,Math.abs(kt),Math.abs(R))&&Math.abs(se-W)<=glMatrix.EPSILON*Math.max(1,Math.abs(se),Math.abs(W))&&Math.abs(z-ft)<=glMatrix.EPSILON*Math.max(1,Math.abs(z),Math.abs(ft))&&Math.abs(P-v)<=glMatrix.EPSILON*Math.max(1,Math.abs(P),Math.abs(v))}var te=null,re=null},85975:function(me,Bt,G){"use strict";G.r(Bt),G.d(Bt,{add:function(){return B},adjoint:function(){return et},clone:function(){return X},copy:function(){return at},create:function(){return Et},determinant:function(){return $},equals:function(){return R},exactEquals:function(){return ct},frob:function(){return P},fromQuat:function(){return te},fromQuat2:function(){return Vt},fromRotation:function(){return ae},fromRotationTranslation:function(){return st},fromRotationTranslationScale:function(){return Mt},fromRotationTranslationScaleOrigin:function(){return Wt},fromScaling:function(){return fe},fromTranslation:function(){return qt},fromValues:function(){return tt},fromXRotation:function(){return pt},fromYRotation:function(){return It},fromZRotation:function(){return vt},frustum:function(){return re},getRotation:function(){return Ft},getScaling:function(){return ee},getTranslation:function(){return ne},identity:function(){return x},invert:function(){return I},lookAt:function(){return kt},mul:function(){return W},multiply:function(){return it},multiplyScalar:function(){return L},multiplyScalarAndAdd:function(){return Z},ortho:function(){return bt},orthoNO:function(){return ht},orthoZO:function(){return zt},perspective:function(){return V},perspectiveFromFieldOfView:function(){return J},perspectiveNO:function(){return T},perspectiveZO:function(){return H},rotate:function(){return Rt},rotateX:function(){return At},rotateY:function(){return Dt},rotateZ:function(){return Jt},scale:function(){return lt},set:function(){return K},str:function(){return z},sub:function(){return ft},subtract:function(){return dt},targetTo:function(){return se},translate:function(){return gt},transpose:function(){return q}});var U=G(49685);function Et(){var v=new U.WT(16);return U.WT!=Float32Array&&(v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=0,v[12]=0,v[13]=0,v[14]=0),v[0]=1,v[5]=1,v[10]=1,v[15]=1,v}function X(v){var _=new U.WT(16);return _[0]=v[0],_[1]=v[1],_[2]=v[2],_[3]=v[3],_[4]=v[4],_[5]=v[5],_[6]=v[6],_[7]=v[7],_[8]=v[8],_[9]=v[9],_[10]=v[10],_[11]=v[11],_[12]=v[12],_[13]=v[13],_[14]=v[14],_[15]=v[15],_}function at(v,_){return v[0]=_[0],v[1]=_[1],v[2]=_[2],v[3]=_[3],v[4]=_[4],v[5]=_[5],v[6]=_[6],v[7]=_[7],v[8]=_[8],v[9]=_[9],v[10]=_[10],v[11]=_[11],v[12]=_[12],v[13]=_[13],v[14]=_[14],v[15]=_[15],v}function tt(v,_,F,nt,ut,xt,Pt,jt,Ht,Gt,Ut,Yt,ce,oe,de,ue){var Nt=new U.WT(16);return Nt[0]=v,Nt[1]=_,Nt[2]=F,Nt[3]=nt,Nt[4]=ut,Nt[5]=xt,Nt[6]=Pt,Nt[7]=jt,Nt[8]=Ht,Nt[9]=Gt,Nt[10]=Ut,Nt[11]=Yt,Nt[12]=ce,Nt[13]=oe,Nt[14]=de,Nt[15]=ue,Nt}function K(v,_,F,nt,ut,xt,Pt,jt,Ht,Gt,Ut,Yt,ce,oe,de,ue,Nt){return v[0]=_,v[1]=F,v[2]=nt,v[3]=ut,v[4]=xt,v[5]=Pt,v[6]=jt,v[7]=Ht,v[8]=Gt,v[9]=Ut,v[10]=Yt,v[11]=ce,v[12]=oe,v[13]=de,v[14]=ue,v[15]=Nt,v}function x(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function q(v,_){if(v===_){var F=_[1],nt=_[2],ut=_[3],xt=_[6],Pt=_[7],jt=_[11];v[1]=_[4],v[2]=_[8],v[3]=_[12],v[4]=F,v[6]=_[9],v[7]=_[13],v[8]=nt,v[9]=xt,v[11]=_[14],v[12]=ut,v[13]=Pt,v[14]=jt}else v[0]=_[0],v[1]=_[4],v[2]=_[8],v[3]=_[12],v[4]=_[1],v[5]=_[5],v[6]=_[9],v[7]=_[13],v[8]=_[2],v[9]=_[6],v[10]=_[10],v[11]=_[14],v[12]=_[3],v[13]=_[7],v[14]=_[11],v[15]=_[15];return v}function I(v,_){var F=_[0],nt=_[1],ut=_[2],xt=_[3],Pt=_[4],jt=_[5],Ht=_[6],Gt=_[7],Ut=_[8],Yt=_[9],ce=_[10],oe=_[11],de=_[12],ue=_[13],Nt=_[14],Q=_[15],yt=F*jt-nt*Pt,_t=F*Ht-ut*Pt,Ot=F*Gt-xt*Pt,mt=nt*Ht-ut*jt,Tt=nt*Gt-xt*jt,Kt=ut*Gt-xt*Ht,Qt=Ut*ue-Yt*de,le=Ut*Nt-ce*de,pe=Ut*Q-oe*de,be=Yt*Nt-ce*ue,xe=Yt*Q-oe*ue,Me=ce*Q-oe*Nt,_e=yt*Me-_t*xe+Ot*be+mt*pe-Tt*le+Kt*Qt;return _e?(_e=1/_e,v[0]=(jt*Me-Ht*xe+Gt*be)*_e,v[1]=(ut*xe-nt*Me-xt*be)*_e,v[2]=(ue*Kt-Nt*Tt+Q*mt)*_e,v[3]=(ce*Tt-Yt*Kt-oe*mt)*_e,v[4]=(Ht*pe-Pt*Me-Gt*le)*_e,v[5]=(F*Me-ut*pe+xt*le)*_e,v[6]=(Nt*Ot-de*Kt-Q*_t)*_e,v[7]=(Ut*Kt-ce*Ot+oe*_t)*_e,v[8]=(Pt*xe-jt*pe+Gt*Qt)*_e,v[9]=(nt*pe-F*xe-xt*Qt)*_e,v[10]=(de*Tt-ue*Ot+Q*yt)*_e,v[11]=(Yt*Ot-Ut*Tt-oe*yt)*_e,v[12]=(jt*le-Pt*be-Ht*Qt)*_e,v[13]=(F*be-nt*le+ut*Qt)*_e,v[14]=(ue*_t-de*mt-Nt*yt)*_e,v[15]=(Ut*mt-Yt*_t+ce*yt)*_e,v):null}function et(v,_){var F=_[0],nt=_[1],ut=_[2],xt=_[3],Pt=_[4],jt=_[5],Ht=_[6],Gt=_[7],Ut=_[8],Yt=_[9],ce=_[10],oe=_[11],de=_[12],ue=_[13],Nt=_[14],Q=_[15];return v[0]=jt*(ce*Q-oe*Nt)-Yt*(Ht*Q-Gt*Nt)+ue*(Ht*oe-Gt*ce),v[1]=-(nt*(ce*Q-oe*Nt)-Yt*(ut*Q-xt*Nt)+ue*(ut*oe-xt*ce)),v[2]=nt*(Ht*Q-Gt*Nt)-jt*(ut*Q-xt*Nt)+ue*(ut*Gt-xt*Ht),v[3]=-(nt*(Ht*oe-Gt*ce)-jt*(ut*oe-xt*ce)+Yt*(ut*Gt-xt*Ht)),v[4]=-(Pt*(ce*Q-oe*Nt)-Ut*(Ht*Q-Gt*Nt)+de*(Ht*oe-Gt*ce)),v[5]=F*(ce*Q-oe*Nt)-Ut*(ut*Q-xt*Nt)+de*(ut*oe-xt*ce),v[6]=-(F*(Ht*Q-Gt*Nt)-Pt*(ut*Q-xt*Nt)+de*(ut*Gt-xt*Ht)),v[7]=F*(Ht*oe-Gt*ce)-Pt*(ut*oe-xt*ce)+Ut*(ut*Gt-xt*Ht),v[8]=Pt*(Yt*Q-oe*ue)-Ut*(jt*Q-Gt*ue)+de*(jt*oe-Gt*Yt),v[9]=-(F*(Yt*Q-oe*ue)-Ut*(nt*Q-xt*ue)+de*(nt*oe-xt*Yt)),v[10]=F*(jt*Q-Gt*ue)-Pt*(nt*Q-xt*ue)+de*(nt*Gt-xt*jt),v[11]=-(F*(jt*oe-Gt*Yt)-Pt*(nt*oe-xt*Yt)+Ut*(nt*Gt-xt*jt)),v[12]=-(Pt*(Yt*Nt-ce*ue)-Ut*(jt*Nt-Ht*ue)+de*(jt*ce-Ht*Yt)),v[13]=F*(Yt*Nt-ce*ue)-Ut*(nt*Nt-ut*ue)+de*(nt*ce-ut*Yt),v[14]=-(F*(jt*Nt-Ht*ue)-Pt*(nt*Nt-ut*ue)+de*(nt*Ht-ut*jt)),v[15]=F*(jt*ce-Ht*Yt)-Pt*(nt*ce-ut*Yt)+Ut*(nt*Ht-ut*jt),v}function $(v){var _=v[0],F=v[1],nt=v[2],ut=v[3],xt=v[4],Pt=v[5],jt=v[6],Ht=v[7],Gt=v[8],Ut=v[9],Yt=v[10],ce=v[11],oe=v[12],de=v[13],ue=v[14],Nt=v[15],Q=_*Pt-F*xt,yt=_*jt-nt*xt,_t=_*Ht-ut*xt,Ot=F*jt-nt*Pt,mt=F*Ht-ut*Pt,Tt=nt*Ht-ut*jt,Kt=Gt*de-Ut*oe,Qt=Gt*ue-Yt*oe,le=Gt*Nt-ce*oe,pe=Ut*ue-Yt*de,be=Ut*Nt-ce*de,xe=Yt*Nt-ce*ue;return Q*xe-yt*be+_t*pe+Ot*le-mt*Qt+Tt*Kt}function it(v,_,F){var nt=_[0],ut=_[1],xt=_[2],Pt=_[3],jt=_[4],Ht=_[5],Gt=_[6],Ut=_[7],Yt=_[8],ce=_[9],oe=_[10],de=_[11],ue=_[12],Nt=_[13],Q=_[14],yt=_[15],_t=F[0],Ot=F[1],mt=F[2],Tt=F[3];return v[0]=_t*nt+Ot*jt+mt*Yt+Tt*ue,v[1]=_t*ut+Ot*Ht+mt*ce+Tt*Nt,v[2]=_t*xt+Ot*Gt+mt*oe+Tt*Q,v[3]=_t*Pt+Ot*Ut+mt*de+Tt*yt,_t=F[4],Ot=F[5],mt=F[6],Tt=F[7],v[4]=_t*nt+Ot*jt+mt*Yt+Tt*ue,v[5]=_t*ut+Ot*Ht+mt*ce+Tt*Nt,v[6]=_t*xt+Ot*Gt+mt*oe+Tt*Q,v[7]=_t*Pt+Ot*Ut+mt*de+Tt*yt,_t=F[8],Ot=F[9],mt=F[10],Tt=F[11],v[8]=_t*nt+Ot*jt+mt*Yt+Tt*ue,v[9]=_t*ut+Ot*Ht+mt*ce+Tt*Nt,v[10]=_t*xt+Ot*Gt+mt*oe+Tt*Q,v[11]=_t*Pt+Ot*Ut+mt*de+Tt*yt,_t=F[12],Ot=F[13],mt=F[14],Tt=F[15],v[12]=_t*nt+Ot*jt+mt*Yt+Tt*ue,v[13]=_t*ut+Ot*Ht+mt*ce+Tt*Nt,v[14]=_t*xt+Ot*Gt+mt*oe+Tt*Q,v[15]=_t*Pt+Ot*Ut+mt*de+Tt*yt,v}function gt(v,_,F){var nt=F[0],ut=F[1],xt=F[2],Pt,jt,Ht,Gt,Ut,Yt,ce,oe,de,ue,Nt,Q;return _===v?(v[12]=_[0]*nt+_[4]*ut+_[8]*xt+_[12],v[13]=_[1]*nt+_[5]*ut+_[9]*xt+_[13],v[14]=_[2]*nt+_[6]*ut+_[10]*xt+_[14],v[15]=_[3]*nt+_[7]*ut+_[11]*xt+_[15]):(Pt=_[0],jt=_[1],Ht=_[2],Gt=_[3],Ut=_[4],Yt=_[5],ce=_[6],oe=_[7],de=_[8],ue=_[9],Nt=_[10],Q=_[11],v[0]=Pt,v[1]=jt,v[2]=Ht,v[3]=Gt,v[4]=Ut,v[5]=Yt,v[6]=ce,v[7]=oe,v[8]=de,v[9]=ue,v[10]=Nt,v[11]=Q,v[12]=Pt*nt+Ut*ut+de*xt+_[12],v[13]=jt*nt+Yt*ut+ue*xt+_[13],v[14]=Ht*nt+ce*ut+Nt*xt+_[14],v[15]=Gt*nt+oe*ut+Q*xt+_[15]),v}function lt(v,_,F){var nt=F[0],ut=F[1],xt=F[2];return v[0]=_[0]*nt,v[1]=_[1]*nt,v[2]=_[2]*nt,v[3]=_[3]*nt,v[4]=_[4]*ut,v[5]=_[5]*ut,v[6]=_[6]*ut,v[7]=_[7]*ut,v[8]=_[8]*xt,v[9]=_[9]*xt,v[10]=_[10]*xt,v[11]=_[11]*xt,v[12]=_[12],v[13]=_[13],v[14]=_[14],v[15]=_[15],v}function Rt(v,_,F,nt){var ut=nt[0],xt=nt[1],Pt=nt[2],jt=Math.hypot(ut,xt,Pt),Ht,Gt,Ut,Yt,ce,oe,de,ue,Nt,Q,yt,_t,Ot,mt,Tt,Kt,Qt,le,pe,be,xe,Me,_e,Pe;return jt<U.Ib?null:(jt=1/jt,ut*=jt,xt*=jt,Pt*=jt,Ht=Math.sin(F),Gt=Math.cos(F),Ut=1-Gt,Yt=_[0],ce=_[1],oe=_[2],de=_[3],ue=_[4],Nt=_[5],Q=_[6],yt=_[7],_t=_[8],Ot=_[9],mt=_[10],Tt=_[11],Kt=ut*ut*Ut+Gt,Qt=xt*ut*Ut+Pt*Ht,le=Pt*ut*Ut-xt*Ht,pe=ut*xt*Ut-Pt*Ht,be=xt*xt*Ut+Gt,xe=Pt*xt*Ut+ut*Ht,Me=ut*Pt*Ut+xt*Ht,_e=xt*Pt*Ut-ut*Ht,Pe=Pt*Pt*Ut+Gt,v[0]=Yt*Kt+ue*Qt+_t*le,v[1]=ce*Kt+Nt*Qt+Ot*le,v[2]=oe*Kt+Q*Qt+mt*le,v[3]=de*Kt+yt*Qt+Tt*le,v[4]=Yt*pe+ue*be+_t*xe,v[5]=ce*pe+Nt*be+Ot*xe,v[6]=oe*pe+Q*be+mt*xe,v[7]=de*pe+yt*be+Tt*xe,v[8]=Yt*Me+ue*_e+_t*Pe,v[9]=ce*Me+Nt*_e+Ot*Pe,v[10]=oe*Me+Q*_e+mt*Pe,v[11]=de*Me+yt*_e+Tt*Pe,_!==v&&(v[12]=_[12],v[13]=_[13],v[14]=_[14],v[15]=_[15]),v)}function At(v,_,F){var nt=Math.sin(F),ut=Math.cos(F),xt=_[4],Pt=_[5],jt=_[6],Ht=_[7],Gt=_[8],Ut=_[9],Yt=_[10],ce=_[11];return _!==v&&(v[0]=_[0],v[1]=_[1],v[2]=_[2],v[3]=_[3],v[12]=_[12],v[13]=_[13],v[14]=_[14],v[15]=_[15]),v[4]=xt*ut+Gt*nt,v[5]=Pt*ut+Ut*nt,v[6]=jt*ut+Yt*nt,v[7]=Ht*ut+ce*nt,v[8]=Gt*ut-xt*nt,v[9]=Ut*ut-Pt*nt,v[10]=Yt*ut-jt*nt,v[11]=ce*ut-Ht*nt,v}function Dt(v,_,F){var nt=Math.sin(F),ut=Math.cos(F),xt=_[0],Pt=_[1],jt=_[2],Ht=_[3],Gt=_[8],Ut=_[9],Yt=_[10],ce=_[11];return _!==v&&(v[4]=_[4],v[5]=_[5],v[6]=_[6],v[7]=_[7],v[12]=_[12],v[13]=_[13],v[14]=_[14],v[15]=_[15]),v[0]=xt*ut-Gt*nt,v[1]=Pt*ut-Ut*nt,v[2]=jt*ut-Yt*nt,v[3]=Ht*ut-ce*nt,v[8]=xt*nt+Gt*ut,v[9]=Pt*nt+Ut*ut,v[10]=jt*nt+Yt*ut,v[11]=Ht*nt+ce*ut,v}function Jt(v,_,F){var nt=Math.sin(F),ut=Math.cos(F),xt=_[0],Pt=_[1],jt=_[2],Ht=_[3],Gt=_[4],Ut=_[5],Yt=_[6],ce=_[7];return _!==v&&(v[8]=_[8],v[9]=_[9],v[10]=_[10],v[11]=_[11],v[12]=_[12],v[13]=_[13],v[14]=_[14],v[15]=_[15]),v[0]=xt*ut+Gt*nt,v[1]=Pt*ut+Ut*nt,v[2]=jt*ut+Yt*nt,v[3]=Ht*ut+ce*nt,v[4]=Gt*ut-xt*nt,v[5]=Ut*ut-Pt*nt,v[6]=Yt*ut-jt*nt,v[7]=ce*ut-Ht*nt,v}function qt(v,_){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=_[0],v[13]=_[1],v[14]=_[2],v[15]=1,v}function fe(v,_){return v[0]=_[0],v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=_[1],v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=_[2],v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function ae(v,_,F){var nt=F[0],ut=F[1],xt=F[2],Pt=Math.hypot(nt,ut,xt),jt,Ht,Gt;return Pt<U.Ib?null:(Pt=1/Pt,nt*=Pt,ut*=Pt,xt*=Pt,jt=Math.sin(_),Ht=Math.cos(_),Gt=1-Ht,v[0]=nt*nt*Gt+Ht,v[1]=ut*nt*Gt+xt*jt,v[2]=xt*nt*Gt-ut*jt,v[3]=0,v[4]=nt*ut*Gt-xt*jt,v[5]=ut*ut*Gt+Ht,v[6]=xt*ut*Gt+nt*jt,v[7]=0,v[8]=nt*xt*Gt+ut*jt,v[9]=ut*xt*Gt-nt*jt,v[10]=xt*xt*Gt+Ht,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v)}function pt(v,_){var F=Math.sin(_),nt=Math.cos(_);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=nt,v[6]=F,v[7]=0,v[8]=0,v[9]=-F,v[10]=nt,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function It(v,_){var F=Math.sin(_),nt=Math.cos(_);return v[0]=nt,v[1]=0,v[2]=-F,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=F,v[9]=0,v[10]=nt,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function vt(v,_){var F=Math.sin(_),nt=Math.cos(_);return v[0]=nt,v[1]=F,v[2]=0,v[3]=0,v[4]=-F,v[5]=nt,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function st(v,_,F){var nt=_[0],ut=_[1],xt=_[2],Pt=_[3],jt=nt+nt,Ht=ut+ut,Gt=xt+xt,Ut=nt*jt,Yt=nt*Ht,ce=nt*Gt,oe=ut*Ht,de=ut*Gt,ue=xt*Gt,Nt=Pt*jt,Q=Pt*Ht,yt=Pt*Gt;return v[0]=1-(oe+ue),v[1]=Yt+yt,v[2]=ce-Q,v[3]=0,v[4]=Yt-yt,v[5]=1-(Ut+ue),v[6]=de+Nt,v[7]=0,v[8]=ce+Q,v[9]=de-Nt,v[10]=1-(Ut+oe),v[11]=0,v[12]=F[0],v[13]=F[1],v[14]=F[2],v[15]=1,v}function Vt(v,_){var F=new U.WT(3),nt=-_[0],ut=-_[1],xt=-_[2],Pt=_[3],jt=_[4],Ht=_[5],Gt=_[6],Ut=_[7],Yt=nt*nt+ut*ut+xt*xt+Pt*Pt;return Yt>0?(F[0]=(jt*Pt+Ut*nt+Ht*xt-Gt*ut)*2/Yt,F[1]=(Ht*Pt+Ut*ut+Gt*nt-jt*xt)*2/Yt,F[2]=(Gt*Pt+Ut*xt+jt*ut-Ht*nt)*2/Yt):(F[0]=(jt*Pt+Ut*nt+Ht*xt-Gt*ut)*2,F[1]=(Ht*Pt+Ut*ut+Gt*nt-jt*xt)*2,F[2]=(Gt*Pt+Ut*xt+jt*ut-Ht*nt)*2),st(v,_,F),v}function ne(v,_){return v[0]=_[12],v[1]=_[13],v[2]=_[14],v}function ee(v,_){var F=_[0],nt=_[1],ut=_[2],xt=_[4],Pt=_[5],jt=_[6],Ht=_[8],Gt=_[9],Ut=_[10];return v[0]=Math.hypot(F,nt,ut),v[1]=Math.hypot(xt,Pt,jt),v[2]=Math.hypot(Ht,Gt,Ut),v}function Ft(v,_){var F=new U.WT(3);ee(F,_);var nt=1/F[0],ut=1/F[1],xt=1/F[2],Pt=_[0]*nt,jt=_[1]*ut,Ht=_[2]*xt,Gt=_[4]*nt,Ut=_[5]*ut,Yt=_[6]*xt,ce=_[8]*nt,oe=_[9]*ut,de=_[10]*xt,ue=Pt+Ut+de,Nt=0;return ue>0?(Nt=Math.sqrt(ue+1)*2,v[3]=.25*Nt,v[0]=(Yt-oe)/Nt,v[1]=(ce-Ht)/Nt,v[2]=(jt-Gt)/Nt):Pt>Ut&&Pt>de?(Nt=Math.sqrt(1+Pt-Ut-de)*2,v[3]=(Yt-oe)/Nt,v[0]=.25*Nt,v[1]=(jt+Gt)/Nt,v[2]=(ce+Ht)/Nt):Ut>de?(Nt=Math.sqrt(1+Ut-Pt-de)*2,v[3]=(ce-Ht)/Nt,v[0]=(jt+Gt)/Nt,v[1]=.25*Nt,v[2]=(Yt+oe)/Nt):(Nt=Math.sqrt(1+de-Pt-Ut)*2,v[3]=(jt-Gt)/Nt,v[0]=(ce+Ht)/Nt,v[1]=(Yt+oe)/Nt,v[2]=.25*Nt),v}function Mt(v,_,F,nt){var ut=_[0],xt=_[1],Pt=_[2],jt=_[3],Ht=ut+ut,Gt=xt+xt,Ut=Pt+Pt,Yt=ut*Ht,ce=ut*Gt,oe=ut*Ut,de=xt*Gt,ue=xt*Ut,Nt=Pt*Ut,Q=jt*Ht,yt=jt*Gt,_t=jt*Ut,Ot=nt[0],mt=nt[1],Tt=nt[2];return v[0]=(1-(de+Nt))*Ot,v[1]=(ce+_t)*Ot,v[2]=(oe-yt)*Ot,v[3]=0,v[4]=(ce-_t)*mt,v[5]=(1-(Yt+Nt))*mt,v[6]=(ue+Q)*mt,v[7]=0,v[8]=(oe+yt)*Tt,v[9]=(ue-Q)*Tt,v[10]=(1-(Yt+de))*Tt,v[11]=0,v[12]=F[0],v[13]=F[1],v[14]=F[2],v[15]=1,v}function Wt(v,_,F,nt,ut){var xt=_[0],Pt=_[1],jt=_[2],Ht=_[3],Gt=xt+xt,Ut=Pt+Pt,Yt=jt+jt,ce=xt*Gt,oe=xt*Ut,de=xt*Yt,ue=Pt*Ut,Nt=Pt*Yt,Q=jt*Yt,yt=Ht*Gt,_t=Ht*Ut,Ot=Ht*Yt,mt=nt[0],Tt=nt[1],Kt=nt[2],Qt=ut[0],le=ut[1],pe=ut[2],be=(1-(ue+Q))*mt,xe=(oe+Ot)*mt,Me=(de-_t)*mt,_e=(oe-Ot)*Tt,Pe=(1-(ce+Q))*Tt,Xe=(Nt+yt)*Tt,ln=(de+_t)*Kt,Rn=(Nt-yt)*Kt,On=(1-(ce+ue))*Kt;return v[0]=be,v[1]=xe,v[2]=Me,v[3]=0,v[4]=_e,v[5]=Pe,v[6]=Xe,v[7]=0,v[8]=ln,v[9]=Rn,v[10]=On,v[11]=0,v[12]=F[0]+Qt-(be*Qt+_e*le+ln*pe),v[13]=F[1]+le-(xe*Qt+Pe*le+Rn*pe),v[14]=F[2]+pe-(Me*Qt+Xe*le+On*pe),v[15]=1,v}function te(v,_){var F=_[0],nt=_[1],ut=_[2],xt=_[3],Pt=F+F,jt=nt+nt,Ht=ut+ut,Gt=F*Pt,Ut=nt*Pt,Yt=nt*jt,ce=ut*Pt,oe=ut*jt,de=ut*Ht,ue=xt*Pt,Nt=xt*jt,Q=xt*Ht;return v[0]=1-Yt-de,v[1]=Ut+Q,v[2]=ce-Nt,v[3]=0,v[4]=Ut-Q,v[5]=1-Gt-de,v[6]=oe+ue,v[7]=0,v[8]=ce+Nt,v[9]=oe-ue,v[10]=1-Gt-Yt,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function re(v,_,F,nt,ut,xt,Pt){var jt=1/(F-_),Ht=1/(ut-nt),Gt=1/(xt-Pt);return v[0]=xt*2*jt,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=xt*2*Ht,v[6]=0,v[7]=0,v[8]=(F+_)*jt,v[9]=(ut+nt)*Ht,v[10]=(Pt+xt)*Gt,v[11]=-1,v[12]=0,v[13]=0,v[14]=Pt*xt*2*Gt,v[15]=0,v}function T(v,_,F,nt,ut){var xt=1/Math.tan(_/2),Pt;return v[0]=xt/F,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=xt,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=-1,v[12]=0,v[13]=0,v[15]=0,ut!=null&&ut!==1/0?(Pt=1/(nt-ut),v[10]=(ut+nt)*Pt,v[14]=2*ut*nt*Pt):(v[10]=-1,v[14]=-2*nt),v}var V=T;function H(v,_,F,nt,ut){var xt=1/Math.tan(_/2),Pt;return v[0]=xt/F,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=xt,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=-1,v[12]=0,v[13]=0,v[15]=0,ut!=null&&ut!==1/0?(Pt=1/(nt-ut),v[10]=ut*Pt,v[14]=ut*nt*Pt):(v[10]=-1,v[14]=-nt),v}function J(v,_,F,nt){var ut=Math.tan(_.upDegrees*Math.PI/180),xt=Math.tan(_.downDegrees*Math.PI/180),Pt=Math.tan(_.leftDegrees*Math.PI/180),jt=Math.tan(_.rightDegrees*Math.PI/180),Ht=2/(Pt+jt),Gt=2/(ut+xt);return v[0]=Ht,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=Gt,v[6]=0,v[7]=0,v[8]=-((Pt-jt)*Ht*.5),v[9]=(ut-xt)*Gt*.5,v[10]=nt/(F-nt),v[11]=-1,v[12]=0,v[13]=0,v[14]=nt*F/(F-nt),v[15]=0,v}function ht(v,_,F,nt,ut,xt,Pt){var jt=1/(_-F),Ht=1/(nt-ut),Gt=1/(xt-Pt);return v[0]=-2*jt,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*Ht,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=2*Gt,v[11]=0,v[12]=(_+F)*jt,v[13]=(ut+nt)*Ht,v[14]=(Pt+xt)*Gt,v[15]=1,v}var bt=ht;function zt(v,_,F,nt,ut,xt,Pt){var jt=1/(_-F),Ht=1/(nt-ut),Gt=1/(xt-Pt);return v[0]=-2*jt,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*Ht,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=Gt,v[11]=0,v[12]=(_+F)*jt,v[13]=(ut+nt)*Ht,v[14]=xt*Gt,v[15]=1,v}function kt(v,_,F,nt){var ut,xt,Pt,jt,Ht,Gt,Ut,Yt,ce,oe,de=_[0],ue=_[1],Nt=_[2],Q=nt[0],yt=nt[1],_t=nt[2],Ot=F[0],mt=F[1],Tt=F[2];return Math.abs(de-Ot)<U.Ib&&Math.abs(ue-mt)<U.Ib&&Math.abs(Nt-Tt)<U.Ib?x(v):(Ut=de-Ot,Yt=ue-mt,ce=Nt-Tt,oe=1/Math.hypot(Ut,Yt,ce),Ut*=oe,Yt*=oe,ce*=oe,ut=yt*ce-_t*Yt,xt=_t*Ut-Q*ce,Pt=Q*Yt-yt*Ut,oe=Math.hypot(ut,xt,Pt),oe?(oe=1/oe,ut*=oe,xt*=oe,Pt*=oe):(ut=0,xt=0,Pt=0),jt=Yt*Pt-ce*xt,Ht=ce*ut-Ut*Pt,Gt=Ut*xt-Yt*ut,oe=Math.hypot(jt,Ht,Gt),oe?(oe=1/oe,jt*=oe,Ht*=oe,Gt*=oe):(jt=0,Ht=0,Gt=0),v[0]=ut,v[1]=jt,v[2]=Ut,v[3]=0,v[4]=xt,v[5]=Ht,v[6]=Yt,v[7]=0,v[8]=Pt,v[9]=Gt,v[10]=ce,v[11]=0,v[12]=-(ut*de+xt*ue+Pt*Nt),v[13]=-(jt*de+Ht*ue+Gt*Nt),v[14]=-(Ut*de+Yt*ue+ce*Nt),v[15]=1,v)}function se(v,_,F,nt){var ut=_[0],xt=_[1],Pt=_[2],jt=nt[0],Ht=nt[1],Gt=nt[2],Ut=ut-F[0],Yt=xt-F[1],ce=Pt-F[2],oe=Ut*Ut+Yt*Yt+ce*ce;oe>0&&(oe=1/Math.sqrt(oe),Ut*=oe,Yt*=oe,ce*=oe);var de=Ht*ce-Gt*Yt,ue=Gt*Ut-jt*ce,Nt=jt*Yt-Ht*Ut;return oe=de*de+ue*ue+Nt*Nt,oe>0&&(oe=1/Math.sqrt(oe),de*=oe,ue*=oe,Nt*=oe),v[0]=de,v[1]=ue,v[2]=Nt,v[3]=0,v[4]=Yt*Nt-ce*ue,v[5]=ce*de-Ut*Nt,v[6]=Ut*ue-Yt*de,v[7]=0,v[8]=Ut,v[9]=Yt,v[10]=ce,v[11]=0,v[12]=ut,v[13]=xt,v[14]=Pt,v[15]=1,v}function z(v){return"mat4("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+", "+v[6]+", "+v[7]+", "+v[8]+", "+v[9]+", "+v[10]+", "+v[11]+", "+v[12]+", "+v[13]+", "+v[14]+", "+v[15]+")"}function P(v){return Math.hypot(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])}function B(v,_,F){return v[0]=_[0]+F[0],v[1]=_[1]+F[1],v[2]=_[2]+F[2],v[3]=_[3]+F[3],v[4]=_[4]+F[4],v[5]=_[5]+F[5],v[6]=_[6]+F[6],v[7]=_[7]+F[7],v[8]=_[8]+F[8],v[9]=_[9]+F[9],v[10]=_[10]+F[10],v[11]=_[11]+F[11],v[12]=_[12]+F[12],v[13]=_[13]+F[13],v[14]=_[14]+F[14],v[15]=_[15]+F[15],v}function dt(v,_,F){return v[0]=_[0]-F[0],v[1]=_[1]-F[1],v[2]=_[2]-F[2],v[3]=_[3]-F[3],v[4]=_[4]-F[4],v[5]=_[5]-F[5],v[6]=_[6]-F[6],v[7]=_[7]-F[7],v[8]=_[8]-F[8],v[9]=_[9]-F[9],v[10]=_[10]-F[10],v[11]=_[11]-F[11],v[12]=_[12]-F[12],v[13]=_[13]-F[13],v[14]=_[14]-F[14],v[15]=_[15]-F[15],v}function L(v,_,F){return v[0]=_[0]*F,v[1]=_[1]*F,v[2]=_[2]*F,v[3]=_[3]*F,v[4]=_[4]*F,v[5]=_[5]*F,v[6]=_[6]*F,v[7]=_[7]*F,v[8]=_[8]*F,v[9]=_[9]*F,v[10]=_[10]*F,v[11]=_[11]*F,v[12]=_[12]*F,v[13]=_[13]*F,v[14]=_[14]*F,v[15]=_[15]*F,v}function Z(v,_,F,nt){return v[0]=_[0]+F[0]*nt,v[1]=_[1]+F[1]*nt,v[2]=_[2]+F[2]*nt,v[3]=_[3]+F[3]*nt,v[4]=_[4]+F[4]*nt,v[5]=_[5]+F[5]*nt,v[6]=_[6]+F[6]*nt,v[7]=_[7]+F[7]*nt,v[8]=_[8]+F[8]*nt,v[9]=_[9]+F[9]*nt,v[10]=_[10]+F[10]*nt,v[11]=_[11]+F[11]*nt,v[12]=_[12]+F[12]*nt,v[13]=_[13]+F[13]*nt,v[14]=_[14]+F[14]*nt,v[15]=_[15]+F[15]*nt,v}function ct(v,_){return v[0]===_[0]&&v[1]===_[1]&&v[2]===_[2]&&v[3]===_[3]&&v[4]===_[4]&&v[5]===_[5]&&v[6]===_[6]&&v[7]===_[7]&&v[8]===_[8]&&v[9]===_[9]&&v[10]===_[10]&&v[11]===_[11]&&v[12]===_[12]&&v[13]===_[13]&&v[14]===_[14]&&v[15]===_[15]}function R(v,_){var F=v[0],nt=v[1],ut=v[2],xt=v[3],Pt=v[4],jt=v[5],Ht=v[6],Gt=v[7],Ut=v[8],Yt=v[9],ce=v[10],oe=v[11],de=v[12],ue=v[13],Nt=v[14],Q=v[15],yt=_[0],_t=_[1],Ot=_[2],mt=_[3],Tt=_[4],Kt=_[5],Qt=_[6],le=_[7],pe=_[8],be=_[9],xe=_[10],Me=_[11],_e=_[12],Pe=_[13],Xe=_[14],ln=_[15];return Math.abs(F-yt)<=U.Ib*Math.max(1,Math.abs(F),Math.abs(yt))&&Math.abs(nt-_t)<=U.Ib*Math.max(1,Math.abs(nt),Math.abs(_t))&&Math.abs(ut-Ot)<=U.Ib*Math.max(1,Math.abs(ut),Math.abs(Ot))&&Math.abs(xt-mt)<=U.Ib*Math.max(1,Math.abs(xt),Math.abs(mt))&&Math.abs(Pt-Tt)<=U.Ib*Math.max(1,Math.abs(Pt),Math.abs(Tt))&&Math.abs(jt-Kt)<=U.Ib*Math.max(1,Math.abs(jt),Math.abs(Kt))&&Math.abs(Ht-Qt)<=U.Ib*Math.max(1,Math.abs(Ht),Math.abs(Qt))&&Math.abs(Gt-le)<=U.Ib*Math.max(1,Math.abs(Gt),Math.abs(le))&&Math.abs(Ut-pe)<=U.Ib*Math.max(1,Math.abs(Ut),Math.abs(pe))&&Math.abs(Yt-be)<=U.Ib*Math.max(1,Math.abs(Yt),Math.abs(be))&&Math.abs(ce-xe)<=U.Ib*Math.max(1,Math.abs(ce),Math.abs(xe))&&Math.abs(oe-Me)<=U.Ib*Math.max(1,Math.abs(oe),Math.abs(Me))&&Math.abs(de-_e)<=U.Ib*Math.max(1,Math.abs(de),Math.abs(_e))&&Math.abs(ue-Pe)<=U.Ib*Math.max(1,Math.abs(ue),Math.abs(Pe))&&Math.abs(Nt-Xe)<=U.Ib*Math.max(1,Math.abs(Nt),Math.abs(Xe))&&Math.abs(Q-ln)<=U.Ib*Math.max(1,Math.abs(Q),Math.abs(ln))}var W=it,ft=dt},32945:function(me,Bt,G){"use strict";G.d(Bt,{Fv:function(){return ht},JG:function(){return ne},Jp:function(){return et},Su:function(){return It},U_:function(){return fe},Ue:function(){return tt},al:function(){return Vt},dC:function(){return Mt},t8:function(){return ee},yY:function(){return x}});var U=G(49685),Et=G(35600),X=G(77160),at=G(98333);function tt(){var P=new U.WT(4);return U.WT!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0),P[3]=1,P}function K(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=1,P}function x(P,B,dt){dt=dt*.5;var L=Math.sin(dt);return P[0]=L*B[0],P[1]=L*B[1],P[2]=L*B[2],P[3]=Math.cos(dt),P}function q(P,B){var dt=Math.acos(B[3])*2,L=Math.sin(dt/2);return L>glMatrix.EPSILON?(P[0]=B[0]/L,P[1]=B[1]/L,P[2]=B[2]/L):(P[0]=1,P[1]=0,P[2]=0),dt}function I(P,B){var dt=te(P,B);return Math.acos(2*dt*dt-1)}function et(P,B,dt){var L=B[0],Z=B[1],ct=B[2],R=B[3],W=dt[0],ft=dt[1],v=dt[2],_=dt[3];return P[0]=L*_+R*W+Z*v-ct*ft,P[1]=Z*_+R*ft+ct*W-L*v,P[2]=ct*_+R*v+L*ft-Z*W,P[3]=R*_-L*W-Z*ft-ct*v,P}function $(P,B,dt){dt*=.5;var L=B[0],Z=B[1],ct=B[2],R=B[3],W=Math.sin(dt),ft=Math.cos(dt);return P[0]=L*ft+R*W,P[1]=Z*ft+ct*W,P[2]=ct*ft-Z*W,P[3]=R*ft-L*W,P}function it(P,B,dt){dt*=.5;var L=B[0],Z=B[1],ct=B[2],R=B[3],W=Math.sin(dt),ft=Math.cos(dt);return P[0]=L*ft-ct*W,P[1]=Z*ft+R*W,P[2]=ct*ft+L*W,P[3]=R*ft-Z*W,P}function gt(P,B,dt){dt*=.5;var L=B[0],Z=B[1],ct=B[2],R=B[3],W=Math.sin(dt),ft=Math.cos(dt);return P[0]=L*ft+Z*W,P[1]=Z*ft-L*W,P[2]=ct*ft+R*W,P[3]=R*ft-ct*W,P}function lt(P,B){var dt=B[0],L=B[1],Z=B[2];return P[0]=dt,P[1]=L,P[2]=Z,P[3]=Math.sqrt(Math.abs(1-dt*dt-L*L-Z*Z)),P}function Rt(P,B){var dt=B[0],L=B[1],Z=B[2],ct=B[3],R=Math.sqrt(dt*dt+L*L+Z*Z),W=Math.exp(ct),ft=R>0?W*Math.sin(R)/R:0;return P[0]=dt*ft,P[1]=L*ft,P[2]=Z*ft,P[3]=W*Math.cos(R),P}function At(P,B){var dt=B[0],L=B[1],Z=B[2],ct=B[3],R=Math.sqrt(dt*dt+L*L+Z*Z),W=R>0?Math.atan2(R,ct)/R:0;return P[0]=dt*W,P[1]=L*W,P[2]=Z*W,P[3]=.5*Math.log(dt*dt+L*L+Z*Z+ct*ct),P}function Dt(P,B,dt){return At(P,B),Wt(P,P,dt),Rt(P,P),P}function Jt(P,B,dt,L){var Z=B[0],ct=B[1],R=B[2],W=B[3],ft=dt[0],v=dt[1],_=dt[2],F=dt[3],nt,ut,xt,Pt,jt;return ut=Z*ft+ct*v+R*_+W*F,ut<0&&(ut=-ut,ft=-ft,v=-v,_=-_,F=-F),1-ut>U.Ib?(nt=Math.acos(ut),xt=Math.sin(nt),Pt=Math.sin((1-L)*nt)/xt,jt=Math.sin(L*nt)/xt):(Pt=1-L,jt=L),P[0]=Pt*Z+jt*ft,P[1]=Pt*ct+jt*v,P[2]=Pt*R+jt*_,P[3]=Pt*W+jt*F,P}function qt(P){var B=glMatrix.RANDOM(),dt=glMatrix.RANDOM(),L=glMatrix.RANDOM(),Z=Math.sqrt(1-B),ct=Math.sqrt(B);return P[0]=Z*Math.sin(2*Math.PI*dt),P[1]=Z*Math.cos(2*Math.PI*dt),P[2]=ct*Math.sin(2*Math.PI*L),P[3]=ct*Math.cos(2*Math.PI*L),P}function fe(P,B){var dt=B[0],L=B[1],Z=B[2],ct=B[3],R=dt*dt+L*L+Z*Z+ct*ct,W=R?1/R:0;return P[0]=-dt*W,P[1]=-L*W,P[2]=-Z*W,P[3]=ct*W,P}function ae(P,B){return P[0]=-B[0],P[1]=-B[1],P[2]=-B[2],P[3]=B[3],P}function pt(P,B){var dt=B[0]+B[4]+B[8],L;if(dt>0)L=Math.sqrt(dt+1),P[3]=.5*L,L=.5/L,P[0]=(B[5]-B[7])*L,P[1]=(B[6]-B[2])*L,P[2]=(B[1]-B[3])*L;else{var Z=0;B[4]>B[0]&&(Z=1),B[8]>B[Z*3+Z]&&(Z=2);var ct=(Z+1)%3,R=(Z+2)%3;L=Math.sqrt(B[Z*3+Z]-B[ct*3+ct]-B[R*3+R]+1),P[Z]=.5*L,L=.5/L,P[3]=(B[ct*3+R]-B[R*3+ct])*L,P[ct]=(B[ct*3+Z]+B[Z*3+ct])*L,P[R]=(B[R*3+Z]+B[Z*3+R])*L}return P}function It(P,B,dt,L){var Z=.5*Math.PI/180;B*=Z,dt*=Z,L*=Z;var ct=Math.sin(B),R=Math.cos(B),W=Math.sin(dt),ft=Math.cos(dt),v=Math.sin(L),_=Math.cos(L);return P[0]=ct*ft*_-R*W*v,P[1]=R*W*_+ct*ft*v,P[2]=R*ft*v-ct*W*_,P[3]=R*ft*_+ct*W*v,P}function vt(P){return"quat("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"}var st=at.d9,Vt=at.al,ne=at.JG,ee=at.t8,Ft=at.IH,Mt=et,Wt=at.bA,te=at.AK,re=at.t7,T=at.kE,V=null,H=at.we,J=null,ht=at.Fv,bt=at.I6,zt=at.fS,kt=function(){var P=X.Ue(),B=X.al(1,0,0),dt=X.al(0,1,0);return function(L,Z,ct){var R=X.AK(Z,ct);return R<-.999999?(X.kC(P,B,Z),X.Zh(P)<1e-6&&X.kC(P,dt,Z),X.Fv(P,P),x(L,P,Math.PI),L):R>.999999?(L[0]=0,L[1]=0,L[2]=0,L[3]=1,L):(X.kC(P,Z,ct),L[0]=P[0],L[1]=P[1],L[2]=P[2],L[3]=1+R,ht(L,L))}}(),se=function(){var P=tt(),B=tt();return function(dt,L,Z,ct,R,W){return Jt(P,L,R,W),Jt(B,Z,ct,W),Jt(dt,P,B,2*W*(1-W)),dt}}(),z=function(){var P=Et.Ue();return function(B,dt,L,Z){return P[0]=L[0],P[3]=L[1],P[6]=L[2],P[1]=Z[0],P[4]=Z[1],P[7]=Z[2],P[2]=-dt[0],P[5]=-dt[1],P[8]=-dt[2],ht(B,pt(B,P))}}()},31437:function(me,Bt,G){"use strict";G.d(Bt,{AK:function(){return st},Fv:function(){return vt},I6:function(){return J},JG:function(){return tt},Ue:function(){return Et},t8:function(){return K}});var U=G(49685);function Et(){var L=new U.WT(2);return U.WT!=Float32Array&&(L[0]=0,L[1]=0),L}function X(L){var Z=new glMatrix.ARRAY_TYPE(2);return Z[0]=L[0],Z[1]=L[1],Z}function at(L,Z){var ct=new glMatrix.ARRAY_TYPE(2);return ct[0]=L,ct[1]=Z,ct}function tt(L,Z){return L[0]=Z[0],L[1]=Z[1],L}function K(L,Z,ct){return L[0]=Z,L[1]=ct,L}function x(L,Z,ct){return L[0]=Z[0]+ct[0],L[1]=Z[1]+ct[1],L}function q(L,Z,ct){return L[0]=Z[0]-ct[0],L[1]=Z[1]-ct[1],L}function I(L,Z,ct){return L[0]=Z[0]*ct[0],L[1]=Z[1]*ct[1],L}function et(L,Z,ct){return L[0]=Z[0]/ct[0],L[1]=Z[1]/ct[1],L}function $(L,Z){return L[0]=Math.ceil(Z[0]),L[1]=Math.ceil(Z[1]),L}function it(L,Z){return L[0]=Math.floor(Z[0]),L[1]=Math.floor(Z[1]),L}function gt(L,Z,ct){return L[0]=Math.min(Z[0],ct[0]),L[1]=Math.min(Z[1],ct[1]),L}function lt(L,Z,ct){return L[0]=Math.max(Z[0],ct[0]),L[1]=Math.max(Z[1],ct[1]),L}function Rt(L,Z){return L[0]=Math.round(Z[0]),L[1]=Math.round(Z[1]),L}function At(L,Z,ct){return L[0]=Z[0]*ct,L[1]=Z[1]*ct,L}function Dt(L,Z,ct,R){return L[0]=Z[0]+ct[0]*R,L[1]=Z[1]+ct[1]*R,L}function Jt(L,Z){var ct=Z[0]-L[0],R=Z[1]-L[1];return Math.hypot(ct,R)}function qt(L,Z){var ct=Z[0]-L[0],R=Z[1]-L[1];return ct*ct+R*R}function fe(L){var Z=L[0],ct=L[1];return Math.hypot(Z,ct)}function ae(L){var Z=L[0],ct=L[1];return Z*Z+ct*ct}function pt(L,Z){return L[0]=-Z[0],L[1]=-Z[1],L}function It(L,Z){return L[0]=1/Z[0],L[1]=1/Z[1],L}function vt(L,Z){var ct=Z[0],R=Z[1],W=ct*ct+R*R;return W>0&&(W=1/Math.sqrt(W)),L[0]=Z[0]*W,L[1]=Z[1]*W,L}function st(L,Z){return L[0]*Z[0]+L[1]*Z[1]}function Vt(L,Z,ct){var R=Z[0]*ct[1]-Z[1]*ct[0];return L[0]=L[1]=0,L[2]=R,L}function ne(L,Z,ct,R){var W=Z[0],ft=Z[1];return L[0]=W+R*(ct[0]-W),L[1]=ft+R*(ct[1]-ft),L}function ee(L,Z){Z=Z||1;var ct=glMatrix.RANDOM()*2*Math.PI;return L[0]=Math.cos(ct)*Z,L[1]=Math.sin(ct)*Z,L}function Ft(L,Z,ct){var R=Z[0],W=Z[1];return L[0]=ct[0]*R+ct[2]*W,L[1]=ct[1]*R+ct[3]*W,L}function Mt(L,Z,ct){var R=Z[0],W=Z[1];return L[0]=ct[0]*R+ct[2]*W+ct[4],L[1]=ct[1]*R+ct[3]*W+ct[5],L}function Wt(L,Z,ct){var R=Z[0],W=Z[1];return L[0]=ct[0]*R+ct[3]*W+ct[6],L[1]=ct[1]*R+ct[4]*W+ct[7],L}function te(L,Z,ct){var R=Z[0],W=Z[1];return L[0]=ct[0]*R+ct[4]*W+ct[12],L[1]=ct[1]*R+ct[5]*W+ct[13],L}function re(L,Z,ct,R){var W=Z[0]-ct[0],ft=Z[1]-ct[1],v=Math.sin(R),_=Math.cos(R);return L[0]=W*_-ft*v+ct[0],L[1]=W*v+ft*_+ct[1],L}function T(L,Z){var ct=L[0],R=L[1],W=Z[0],ft=Z[1],v=Math.sqrt(ct*ct+R*R)*Math.sqrt(W*W+ft*ft),_=v&&(ct*W+R*ft)/v;return Math.acos(Math.min(Math.max(_,-1),1))}function V(L){return L[0]=0,L[1]=0,L}function H(L){return"vec2("+L[0]+", "+L[1]+")"}function J(L,Z){return L[0]===Z[0]&&L[1]===Z[1]}function ht(L,Z){var ct=L[0],R=L[1],W=Z[0],ft=Z[1];return Math.abs(ct-W)<=glMatrix.EPSILON*Math.max(1,Math.abs(ct),Math.abs(W))&&Math.abs(R-ft)<=glMatrix.EPSILON*Math.max(1,Math.abs(R),Math.abs(ft))}var bt=null,zt=null,kt=null,se=null,z=null,P=null,B=null,dt=function(){var L=Et();return function(Z,ct,R,W,ft,v){var _,F;for(ct||(ct=2),R||(R=0),W?F=Math.min(W*ct+R,Z.length):F=Z.length,_=R;_<F;_+=ct)L[0]=Z[_],L[1]=Z[_+1],ft(L,L,v),Z[_]=L[0],Z[_+1]=L[1];return Z}}()},77160:function(me,Bt,G){"use strict";G.d(Bt,{$X:function(){return I},AK:function(){return st},Fp:function(){return Rt},Fv:function(){return vt},IH:function(){return q},JG:function(){return K},Jp:function(){return et},TK:function(){return B},Ue:function(){return Et},VC:function(){return re},VV:function(){return lt},Zh:function(){return L},al:function(){return tt},bA:function(){return Dt},d9:function(){return X},fF:function(){return Wt},fS:function(){return kt},kC:function(){return Vt},kE:function(){return at},kK:function(){return te},lu:function(){return se},t7:function(){return ne},t8:function(){return x}});var U=G(49685);function Et(){var R=new U.WT(3);return U.WT!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R}function X(R){var W=new U.WT(3);return W[0]=R[0],W[1]=R[1],W[2]=R[2],W}function at(R){var W=R[0],ft=R[1],v=R[2];return Math.hypot(W,ft,v)}function tt(R,W,ft){var v=new U.WT(3);return v[0]=R,v[1]=W,v[2]=ft,v}function K(R,W){return R[0]=W[0],R[1]=W[1],R[2]=W[2],R}function x(R,W,ft,v){return R[0]=W,R[1]=ft,R[2]=v,R}function q(R,W,ft){return R[0]=W[0]+ft[0],R[1]=W[1]+ft[1],R[2]=W[2]+ft[2],R}function I(R,W,ft){return R[0]=W[0]-ft[0],R[1]=W[1]-ft[1],R[2]=W[2]-ft[2],R}function et(R,W,ft){return R[0]=W[0]*ft[0],R[1]=W[1]*ft[1],R[2]=W[2]*ft[2],R}function $(R,W,ft){return R[0]=W[0]/ft[0],R[1]=W[1]/ft[1],R[2]=W[2]/ft[2],R}function it(R,W){return R[0]=Math.ceil(W[0]),R[1]=Math.ceil(W[1]),R[2]=Math.ceil(W[2]),R}function gt(R,W){return R[0]=Math.floor(W[0]),R[1]=Math.floor(W[1]),R[2]=Math.floor(W[2]),R}function lt(R,W,ft){return R[0]=Math.min(W[0],ft[0]),R[1]=Math.min(W[1],ft[1]),R[2]=Math.min(W[2],ft[2]),R}function Rt(R,W,ft){return R[0]=Math.max(W[0],ft[0]),R[1]=Math.max(W[1],ft[1]),R[2]=Math.max(W[2],ft[2]),R}function At(R,W){return R[0]=Math.round(W[0]),R[1]=Math.round(W[1]),R[2]=Math.round(W[2]),R}function Dt(R,W,ft){return R[0]=W[0]*ft,R[1]=W[1]*ft,R[2]=W[2]*ft,R}function Jt(R,W,ft,v){return R[0]=W[0]+ft[0]*v,R[1]=W[1]+ft[1]*v,R[2]=W[2]+ft[2]*v,R}function qt(R,W){var ft=W[0]-R[0],v=W[1]-R[1],_=W[2]-R[2];return Math.hypot(ft,v,_)}function fe(R,W){var ft=W[0]-R[0],v=W[1]-R[1],_=W[2]-R[2];return ft*ft+v*v+_*_}function ae(R){var W=R[0],ft=R[1],v=R[2];return W*W+ft*ft+v*v}function pt(R,W){return R[0]=-W[0],R[1]=-W[1],R[2]=-W[2],R}function It(R,W){return R[0]=1/W[0],R[1]=1/W[1],R[2]=1/W[2],R}function vt(R,W){var ft=W[0],v=W[1],_=W[2],F=ft*ft+v*v+_*_;return F>0&&(F=1/Math.sqrt(F)),R[0]=W[0]*F,R[1]=W[1]*F,R[2]=W[2]*F,R}function st(R,W){return R[0]*W[0]+R[1]*W[1]+R[2]*W[2]}function Vt(R,W,ft){var v=W[0],_=W[1],F=W[2],nt=ft[0],ut=ft[1],xt=ft[2];return R[0]=_*xt-F*ut,R[1]=F*nt-v*xt,R[2]=v*ut-_*nt,R}function ne(R,W,ft,v){var _=W[0],F=W[1],nt=W[2];return R[0]=_+v*(ft[0]-_),R[1]=F+v*(ft[1]-F),R[2]=nt+v*(ft[2]-nt),R}function ee(R,W,ft,v,_,F){var nt=F*F,ut=nt*(2*F-3)+1,xt=nt*(F-2)+F,Pt=nt*(F-1),jt=nt*(3-2*F);return R[0]=W[0]*ut+ft[0]*xt+v[0]*Pt+_[0]*jt,R[1]=W[1]*ut+ft[1]*xt+v[1]*Pt+_[1]*jt,R[2]=W[2]*ut+ft[2]*xt+v[2]*Pt+_[2]*jt,R}function Ft(R,W,ft,v,_,F){var nt=1-F,ut=nt*nt,xt=F*F,Pt=ut*nt,jt=3*F*ut,Ht=3*xt*nt,Gt=xt*F;return R[0]=W[0]*Pt+ft[0]*jt+v[0]*Ht+_[0]*Gt,R[1]=W[1]*Pt+ft[1]*jt+v[1]*Ht+_[1]*Gt,R[2]=W[2]*Pt+ft[2]*jt+v[2]*Ht+_[2]*Gt,R}function Mt(R,W){W=W||1;var ft=glMatrix.RANDOM()*2*Math.PI,v=glMatrix.RANDOM()*2-1,_=Math.sqrt(1-v*v)*W;return R[0]=Math.cos(ft)*_,R[1]=Math.sin(ft)*_,R[2]=v*W,R}function Wt(R,W,ft){var v=W[0],_=W[1],F=W[2],nt=ft[3]*v+ft[7]*_+ft[11]*F+ft[15];return nt=nt||1,R[0]=(ft[0]*v+ft[4]*_+ft[8]*F+ft[12])/nt,R[1]=(ft[1]*v+ft[5]*_+ft[9]*F+ft[13])/nt,R[2]=(ft[2]*v+ft[6]*_+ft[10]*F+ft[14])/nt,R}function te(R,W,ft){var v=W[0],_=W[1],F=W[2];return R[0]=v*ft[0]+_*ft[3]+F*ft[6],R[1]=v*ft[1]+_*ft[4]+F*ft[7],R[2]=v*ft[2]+_*ft[5]+F*ft[8],R}function re(R,W,ft){var v=ft[0],_=ft[1],F=ft[2],nt=ft[3],ut=W[0],xt=W[1],Pt=W[2],jt=_*Pt-F*xt,Ht=F*ut-v*Pt,Gt=v*xt-_*ut,Ut=_*Gt-F*Ht,Yt=F*jt-v*Gt,ce=v*Ht-_*jt,oe=nt*2;return jt*=oe,Ht*=oe,Gt*=oe,Ut*=2,Yt*=2,ce*=2,R[0]=ut+jt+Ut,R[1]=xt+Ht+Yt,R[2]=Pt+Gt+ce,R}function T(R,W,ft,v){var _=[],F=[];return _[0]=W[0]-ft[0],_[1]=W[1]-ft[1],_[2]=W[2]-ft[2],F[0]=_[0],F[1]=_[1]*Math.cos(v)-_[2]*Math.sin(v),F[2]=_[1]*Math.sin(v)+_[2]*Math.cos(v),R[0]=F[0]+ft[0],R[1]=F[1]+ft[1],R[2]=F[2]+ft[2],R}function V(R,W,ft,v){var _=[],F=[];return _[0]=W[0]-ft[0],_[1]=W[1]-ft[1],_[2]=W[2]-ft[2],F[0]=_[2]*Math.sin(v)+_[0]*Math.cos(v),F[1]=_[1],F[2]=_[2]*Math.cos(v)-_[0]*Math.sin(v),R[0]=F[0]+ft[0],R[1]=F[1]+ft[1],R[2]=F[2]+ft[2],R}function H(R,W,ft,v){var _=[],F=[];return _[0]=W[0]-ft[0],_[1]=W[1]-ft[1],_[2]=W[2]-ft[2],F[0]=_[0]*Math.cos(v)-_[1]*Math.sin(v),F[1]=_[0]*Math.sin(v)+_[1]*Math.cos(v),F[2]=_[2],R[0]=F[0]+ft[0],R[1]=F[1]+ft[1],R[2]=F[2]+ft[2],R}function J(R,W){var ft=R[0],v=R[1],_=R[2],F=W[0],nt=W[1],ut=W[2],xt=Math.sqrt(ft*ft+v*v+_*_),Pt=Math.sqrt(F*F+nt*nt+ut*ut),jt=xt*Pt,Ht=jt&&st(R,W)/jt;return Math.acos(Math.min(Math.max(Ht,-1),1))}function ht(R){return R[0]=0,R[1]=0,R[2]=0,R}function bt(R){return"vec3("+R[0]+", "+R[1]+", "+R[2]+")"}function zt(R,W){return R[0]===W[0]&&R[1]===W[1]&&R[2]===W[2]}function kt(R,W){var ft=R[0],v=R[1],_=R[2],F=W[0],nt=W[1],ut=W[2];return Math.abs(ft-F)<=U.Ib*Math.max(1,Math.abs(ft),Math.abs(F))&&Math.abs(v-nt)<=U.Ib*Math.max(1,Math.abs(v),Math.abs(nt))&&Math.abs(_-ut)<=U.Ib*Math.max(1,Math.abs(_),Math.abs(ut))}var se=I,z=null,P=null,B=qt,dt=null,L=at,Z=null,ct=function(){var R=Et();return function(W,ft,v,_,F,nt){var ut,xt;for(ft||(ft=3),v||(v=0),_?xt=Math.min(_*ft+v,W.length):xt=W.length,ut=v;ut<xt;ut+=ft)R[0]=W[ut],R[1]=W[ut+1],R[2]=W[ut+2],F(R,R,nt),W[ut]=R[0],W[ut+1]=R[1],W[ut+2]=R[2];return W}}()},98333:function(me,Bt,G){"use strict";G.d(Bt,{AK:function(){return st},Fv:function(){return vt},I6:function(){return re},IH:function(){return x},JG:function(){return tt},Ue:function(){return Et},al:function(){return at},bA:function(){return At},d9:function(){return X},fF:function(){return Ft},fS:function(){return T},kE:function(){return fe},t7:function(){return ne},t8:function(){return K},we:function(){return ae}});var U=G(49685);function Et(){var z=new U.WT(4);return U.WT!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0),z}function X(z){var P=new U.WT(4);return P[0]=z[0],P[1]=z[1],P[2]=z[2],P[3]=z[3],P}function at(z,P,B,dt){var L=new U.WT(4);return L[0]=z,L[1]=P,L[2]=B,L[3]=dt,L}function tt(z,P){return z[0]=P[0],z[1]=P[1],z[2]=P[2],z[3]=P[3],z}function K(z,P,B,dt,L){return z[0]=P,z[1]=B,z[2]=dt,z[3]=L,z}function x(z,P,B){return z[0]=P[0]+B[0],z[1]=P[1]+B[1],z[2]=P[2]+B[2],z[3]=P[3]+B[3],z}function q(z,P,B){return z[0]=P[0]-B[0],z[1]=P[1]-B[1],z[2]=P[2]-B[2],z[3]=P[3]-B[3],z}function I(z,P,B){return z[0]=P[0]*B[0],z[1]=P[1]*B[1],z[2]=P[2]*B[2],z[3]=P[3]*B[3],z}function et(z,P,B){return z[0]=P[0]/B[0],z[1]=P[1]/B[1],z[2]=P[2]/B[2],z[3]=P[3]/B[3],z}function $(z,P){return z[0]=Math.ceil(P[0]),z[1]=Math.ceil(P[1]),z[2]=Math.ceil(P[2]),z[3]=Math.ceil(P[3]),z}function it(z,P){return z[0]=Math.floor(P[0]),z[1]=Math.floor(P[1]),z[2]=Math.floor(P[2]),z[3]=Math.floor(P[3]),z}function gt(z,P,B){return z[0]=Math.min(P[0],B[0]),z[1]=Math.min(P[1],B[1]),z[2]=Math.min(P[2],B[2]),z[3]=Math.min(P[3],B[3]),z}function lt(z,P,B){return z[0]=Math.max(P[0],B[0]),z[1]=Math.max(P[1],B[1]),z[2]=Math.max(P[2],B[2]),z[3]=Math.max(P[3],B[3]),z}function Rt(z,P){return z[0]=Math.round(P[0]),z[1]=Math.round(P[1]),z[2]=Math.round(P[2]),z[3]=Math.round(P[3]),z}function At(z,P,B){return z[0]=P[0]*B,z[1]=P[1]*B,z[2]=P[2]*B,z[3]=P[3]*B,z}function Dt(z,P,B,dt){return z[0]=P[0]+B[0]*dt,z[1]=P[1]+B[1]*dt,z[2]=P[2]+B[2]*dt,z[3]=P[3]+B[3]*dt,z}function Jt(z,P){var B=P[0]-z[0],dt=P[1]-z[1],L=P[2]-z[2],Z=P[3]-z[3];return Math.hypot(B,dt,L,Z)}function qt(z,P){var B=P[0]-z[0],dt=P[1]-z[1],L=P[2]-z[2],Z=P[3]-z[3];return B*B+dt*dt+L*L+Z*Z}function fe(z){var P=z[0],B=z[1],dt=z[2],L=z[3];return Math.hypot(P,B,dt,L)}function ae(z){var P=z[0],B=z[1],dt=z[2],L=z[3];return P*P+B*B+dt*dt+L*L}function pt(z,P){return z[0]=-P[0],z[1]=-P[1],z[2]=-P[2],z[3]=-P[3],z}function It(z,P){return z[0]=1/P[0],z[1]=1/P[1],z[2]=1/P[2],z[3]=1/P[3],z}function vt(z,P){var B=P[0],dt=P[1],L=P[2],Z=P[3],ct=B*B+dt*dt+L*L+Z*Z;return ct>0&&(ct=1/Math.sqrt(ct)),z[0]=B*ct,z[1]=dt*ct,z[2]=L*ct,z[3]=Z*ct,z}function st(z,P){return z[0]*P[0]+z[1]*P[1]+z[2]*P[2]+z[3]*P[3]}function Vt(z,P,B,dt){var L=B[0]*dt[1]-B[1]*dt[0],Z=B[0]*dt[2]-B[2]*dt[0],ct=B[0]*dt[3]-B[3]*dt[0],R=B[1]*dt[2]-B[2]*dt[1],W=B[1]*dt[3]-B[3]*dt[1],ft=B[2]*dt[3]-B[3]*dt[2],v=P[0],_=P[1],F=P[2],nt=P[3];return z[0]=_*ft-F*W+nt*R,z[1]=-(v*ft)+F*ct-nt*Z,z[2]=v*W-_*ct+nt*L,z[3]=-(v*R)+_*Z-F*L,z}function ne(z,P,B,dt){var L=P[0],Z=P[1],ct=P[2],R=P[3];return z[0]=L+dt*(B[0]-L),z[1]=Z+dt*(B[1]-Z),z[2]=ct+dt*(B[2]-ct),z[3]=R+dt*(B[3]-R),z}function ee(z,P){P=P||1;var B,dt,L,Z,ct,R;do B=glMatrix.RANDOM()*2-1,dt=glMatrix.RANDOM()*2-1,ct=B*B+dt*dt;while(ct>=1);do L=glMatrix.RANDOM()*2-1,Z=glMatrix.RANDOM()*2-1,R=L*L+Z*Z;while(R>=1);var W=Math.sqrt((1-ct)/R);return z[0]=P*B,z[1]=P*dt,z[2]=P*L*W,z[3]=P*Z*W,z}function Ft(z,P,B){var dt=P[0],L=P[1],Z=P[2],ct=P[3];return z[0]=B[0]*dt+B[4]*L+B[8]*Z+B[12]*ct,z[1]=B[1]*dt+B[5]*L+B[9]*Z+B[13]*ct,z[2]=B[2]*dt+B[6]*L+B[10]*Z+B[14]*ct,z[3]=B[3]*dt+B[7]*L+B[11]*Z+B[15]*ct,z}function Mt(z,P,B){var dt=P[0],L=P[1],Z=P[2],ct=B[0],R=B[1],W=B[2],ft=B[3],v=ft*dt+R*Z-W*L,_=ft*L+W*dt-ct*Z,F=ft*Z+ct*L-R*dt,nt=-ct*dt-R*L-W*Z;return z[0]=v*ft+nt*-ct+_*-W-F*-R,z[1]=_*ft+nt*-R+F*-ct-v*-W,z[2]=F*ft+nt*-W+v*-R-_*-ct,z[3]=P[3],z}function Wt(z){return z[0]=0,z[1]=0,z[2]=0,z[3]=0,z}function te(z){return"vec4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+")"}function re(z,P){return z[0]===P[0]&&z[1]===P[1]&&z[2]===P[2]&&z[3]===P[3]}function T(z,P){var B=z[0],dt=z[1],L=z[2],Z=z[3],ct=P[0],R=P[1],W=P[2],ft=P[3];return Math.abs(B-ct)<=U.Ib*Math.max(1,Math.abs(B),Math.abs(ct))&&Math.abs(dt-R)<=U.Ib*Math.max(1,Math.abs(dt),Math.abs(R))&&Math.abs(L-W)<=U.Ib*Math.max(1,Math.abs(L),Math.abs(W))&&Math.abs(Z-ft)<=U.Ib*Math.max(1,Math.abs(Z),Math.abs(ft))}var V=null,H=null,J=null,ht=null,bt=null,zt=null,kt=null,se=function(){var z=Et();return function(P,B,dt,L,Z,ct){var R,W;for(B||(B=4),dt||(dt=0),L?W=Math.min(L*B+dt,P.length):W=P.length,R=dt;R<W;R+=B)z[0]=P[R],z[1]=P[R+1],z[2]=P[R+2],z[3]=P[R+3],Z(z,z,ct),P[R]=z[0],P[R+1]=z[1],P[R+2]=z[2],P[R+3]=z[3];return P}}()},86851:function(me,Bt,G){"use strict";var U=G(89594),Et=Array.prototype.concat,X=Array.prototype.slice,at=me.exports=function(K){for(var x=[],q=0,I=K.length;q<I;q++){var et=K[q];U(et)?x=Et.call(x,X.call(et)):x.push(et)}return x};at.wrap=function(tt){return function(){return tt(at(arguments))}}},89594:function(me){me.exports=function(G){return!G||typeof G=="string"?!1:G instanceof Array||Array.isArray(G)||G.length>=0&&(G.splice instanceof Function||Object.getOwnPropertyDescriptor(G,G.length-1)&&G.constructor.name!=="String")}},95740:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return U}});function U(Et,X){(X==null||X>Et.length)&&(X=Et.length);for(var at=0,tt=Array(X);at<X;at++)tt[at]=Et[at];return tt}},6337:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return Et}});function U(X,at,tt,K,x,q,I){try{var et=X[q](I),$=et.value}catch(it){return void tt(it)}et.done?at($):Promise.resolve($).then(K,x)}function Et(X){return function(){var at=this,tt=arguments;return new Promise(function(K,x){var q=X.apply(at,tt);function I($){U(q,K,x,I,et,"next",$)}function et($){U(q,K,x,I,et,"throw",$)}I(void 0)})}}},37716:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return K}});var U=G(47829);function Et(){try{var x=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(q){}return(Et=function(){return!!x})()}var X=G(61726);function at(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function tt(x,q){if(q&&((0,X.Z)(q)=="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return at(x)}function K(x,q,I){return q=(0,U.Z)(q),tt(x,Et()?Reflect.construct(q,I||[],(0,U.Z)(x).constructor):q.apply(x,I))}},64475:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return U}});function U(Et,X){if(!(Et instanceof X))throw new TypeError("Cannot call a class as a function")}},82555:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return X}});var U=G(25757);function Et(at,tt){for(var K=0;K<tt.length;K++){var x=tt[K];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(at,(0,U.Z)(x.key),x)}}function X(at,tt,K){return tt&&Et(at.prototype,tt),K&&Et(at,K),Object.defineProperty(at,"prototype",{writable:!1}),at}},90339:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return Et}});var U=G(67695);function Et(X,at){var tt=typeof Symbol!="undefined"&&X[Symbol.iterator]||X["@@iterator"];if(!tt){if(Array.isArray(X)||(tt=(0,U.Z)(X))||at&&X&&typeof X.length=="number"){tt&&(X=tt);var K=0,x=function(){};return{s:x,n:function(){return K>=X.length?{done:!0}:{done:!1,value:X[K++]}},e:function(it){throw it},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q,I=!0,et=!1;return{s:function(){tt=tt.call(X)},n:function(){var it=tt.next();return I=it.done,it},e:function(it){et=!0,q=it},f:function(){try{I||tt.return==null||tt.return()}finally{if(et)throw q}}}}},18429:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return Et}});var U=G(25757);function Et(X,at,tt){return(at=(0,U.Z)(at))in X?Object.defineProperty(X,at,{value:tt,enumerable:!0,configurable:!0,writable:!0}):X[at]=tt,X}},47829:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return U}});function U(Et){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},U(Et)}},78112:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return Et}});function U(X,at){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,K){return tt.__proto__=K,tt},U(X,at)}function Et(X,at){if(typeof at!="function"&&at!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(at&&at.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),at&&U(X,at)}},78225:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return X}});var U=G(18429);function Et(at,tt){var K=Object.keys(at);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(at);tt&&(x=x.filter(function(q){return Object.getOwnPropertyDescriptor(at,q).enumerable})),K.push.apply(K,x)}return K}function X(at){for(var tt=1;tt<arguments.length;tt++){var K=arguments[tt]!=null?arguments[tt]:{};tt%2?Et(Object(K),!0).forEach(function(x){(0,U.Z)(at,x,K[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(K)):Et(Object(K)).forEach(function(x){Object.defineProperty(at,x,Object.getOwnPropertyDescriptor(K,x))})}return at}},53668:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return Et}});function U(X,at){if(X==null)return{};var tt={};for(var K in X)if({}.hasOwnProperty.call(X,K)){if(at.indexOf(K)!==-1)continue;tt[K]=X[K]}return tt}function Et(X,at){if(X==null)return{};var tt,K,x=U(X,at);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(X);for(K=0;K<q.length;K++)tt=q[K],at.indexOf(tt)===-1&&{}.propertyIsEnumerable.call(X,tt)&&(x[tt]=X[tt])}return x}},62641:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return Et}});var U=G(61726);function Et(){"use strict";Et=function(){return at};var X,at={},tt=Object.prototype,K=tt.hasOwnProperty,x=typeof Symbol=="function"?Symbol:{},q=x.iterator||"@@iterator",I=x.asyncIterator||"@@asyncIterator",et=x.toStringTag||"@@toStringTag";function $(Ft,Mt,Wt,te){return Object.defineProperty(Ft,Mt,{value:Wt,enumerable:!te,configurable:!te,writable:!te})}try{$({},"")}catch(Ft){$=function(Wt,te,re){return Wt[te]=re}}function it(Ft,Mt,Wt,te){var re=Mt&&Mt.prototype instanceof Rt?Mt:Rt,T=Object.create(re.prototype);return $(T,"_invoke",function(V,H,J){var ht=1;return function(bt,zt){if(ht===3)throw Error("Generator is already running");if(ht===4){if(bt==="throw")throw zt;return{value:X,done:!0}}for(J.method=bt,J.arg=zt;;){var kt=J.delegate;if(kt){var se=vt(kt,J);if(se){if(se===lt)continue;return se}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(ht===1)throw ht=4,J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);ht=3;var z=gt(V,H,J);if(z.type==="normal"){if(ht=J.done?4:2,z.arg===lt)continue;return{value:z.arg,done:J.done}}z.type==="throw"&&(ht=4,J.method="throw",J.arg=z.arg)}}}(Ft,Wt,new ne(te||[])),!0),T}function gt(Ft,Mt,Wt){try{return{type:"normal",arg:Ft.call(Mt,Wt)}}catch(te){return{type:"throw",arg:te}}}at.wrap=it;var lt={};function Rt(){}function At(){}function Dt(){}var Jt={};$(Jt,q,function(){return this});var qt=Object.getPrototypeOf,fe=qt&&qt(qt(ee([])));fe&&fe!==tt&&K.call(fe,q)&&(Jt=fe);var ae=Dt.prototype=Rt.prototype=Object.create(Jt);function pt(Ft){["next","throw","return"].forEach(function(Mt){$(Ft,Mt,function(Wt){return this._invoke(Mt,Wt)})})}function It(Ft,Mt){function Wt(re,T,V,H){var J=gt(Ft[re],Ft,T);if(J.type!=="throw"){var ht=J.arg,bt=ht.value;return bt&&(0,U.Z)(bt)=="object"&&K.call(bt,"__await")?Mt.resolve(bt.__await).then(function(zt){Wt("next",zt,V,H)},function(zt){Wt("throw",zt,V,H)}):Mt.resolve(bt).then(function(zt){ht.value=zt,V(ht)},function(zt){return Wt("throw",zt,V,H)})}H(J.arg)}var te;$(this,"_invoke",function(re,T){function V(){return new Mt(function(H,J){Wt(re,T,H,J)})}return te=te?te.then(V,V):V()},!0)}function vt(Ft,Mt){var Wt=Mt.method,te=Ft.i[Wt];if(te===X)return Mt.delegate=null,Wt==="throw"&&Ft.i.return&&(Mt.method="return",Mt.arg=X,vt(Ft,Mt),Mt.method==="throw")||Wt!=="return"&&(Mt.method="throw",Mt.arg=new TypeError("The iterator does not provide a '"+Wt+"' method")),lt;var re=gt(te,Ft.i,Mt.arg);if(re.type==="throw")return Mt.method="throw",Mt.arg=re.arg,Mt.delegate=null,lt;var T=re.arg;return T?T.done?(Mt[Ft.r]=T.value,Mt.next=Ft.n,Mt.method!=="return"&&(Mt.method="next",Mt.arg=X),Mt.delegate=null,lt):T:(Mt.method="throw",Mt.arg=new TypeError("iterator result is not an object"),Mt.delegate=null,lt)}function st(Ft){this.tryEntries.push(Ft)}function Vt(Ft){var Mt=Ft[4]||{};Mt.type="normal",Mt.arg=X,Ft[4]=Mt}function ne(Ft){this.tryEntries=[[-1]],Ft.forEach(st,this),this.reset(!0)}function ee(Ft){if(Ft!=null){var Mt=Ft[q];if(Mt)return Mt.call(Ft);if(typeof Ft.next=="function")return Ft;if(!isNaN(Ft.length)){var Wt=-1,te=function re(){for(;++Wt<Ft.length;)if(K.call(Ft,Wt))return re.value=Ft[Wt],re.done=!1,re;return re.value=X,re.done=!0,re};return te.next=te}}throw new TypeError((0,U.Z)(Ft)+" is not iterable")}return At.prototype=Dt,$(ae,"constructor",Dt),$(Dt,"constructor",At),At.displayName=$(Dt,et,"GeneratorFunction"),at.isGeneratorFunction=function(Ft){var Mt=typeof Ft=="function"&&Ft.constructor;return!!Mt&&(Mt===At||(Mt.displayName||Mt.name)==="GeneratorFunction")},at.mark=function(Ft){return Object.setPrototypeOf?Object.setPrototypeOf(Ft,Dt):(Ft.__proto__=Dt,$(Ft,et,"GeneratorFunction")),Ft.prototype=Object.create(ae),Ft},at.awrap=function(Ft){return{__await:Ft}},pt(It.prototype),$(It.prototype,I,function(){return this}),at.AsyncIterator=It,at.async=function(Ft,Mt,Wt,te,re){re===void 0&&(re=Promise);var T=new It(it(Ft,Mt,Wt,te),re);return at.isGeneratorFunction(Mt)?T:T.next().then(function(V){return V.done?V.value:T.next()})},pt(ae),$(ae,et,"Generator"),$(ae,q,function(){return this}),$(ae,"toString",function(){return"[object Generator]"}),at.keys=function(Ft){var Mt=Object(Ft),Wt=[];for(var te in Mt)Wt.unshift(te);return function re(){for(;Wt.length;)if((te=Wt.pop())in Mt)return re.value=te,re.done=!1,re;return re.done=!0,re}},at.values=ee,ne.prototype={constructor:ne,reset:function(Mt){if(this.prev=this.next=0,this.sent=this._sent=X,this.done=!1,this.delegate=null,this.method="next",this.arg=X,this.tryEntries.forEach(Vt),!Mt)for(var Wt in this)Wt.charAt(0)==="t"&&K.call(this,Wt)&&!isNaN(+Wt.slice(1))&&(this[Wt]=X)},stop:function(){this.done=!0;var Mt=this.tryEntries[0][4];if(Mt.type==="throw")throw Mt.arg;return this.rval},dispatchException:function(Mt){if(this.done)throw Mt;var Wt=this;function te(bt){V.type="throw",V.arg=Mt,Wt.next=bt}for(var re=Wt.tryEntries.length-1;re>=0;--re){var T=this.tryEntries[re],V=T[4],H=this.prev,J=T[1],ht=T[2];if(T[0]===-1)return te("end"),!1;if(!J&&!ht)throw Error("try statement without catch or finally");if(T[0]!=null&&T[0]<=H){if(H<J)return this.method="next",this.arg=X,te(J),!0;if(H<ht)return te(ht),!1}}},abrupt:function(Mt,Wt){for(var te=this.tryEntries.length-1;te>=0;--te){var re=this.tryEntries[te];if(re[0]>-1&&re[0]<=this.prev&&this.prev<re[2]){var T=re;break}}T&&(Mt==="break"||Mt==="continue")&&T[0]<=Wt&&Wt<=T[2]&&(T=null);var V=T?T[4]:{};return V.type=Mt,V.arg=Wt,T?(this.method="next",this.next=T[2],lt):this.complete(V)},complete:function(Mt,Wt){if(Mt.type==="throw")throw Mt.arg;return Mt.type==="break"||Mt.type==="continue"?this.next=Mt.arg:Mt.type==="return"?(this.rval=this.arg=Mt.arg,this.method="return",this.next="end"):Mt.type==="normal"&&Wt&&(this.next=Wt),lt},finish:function(Mt){for(var Wt=this.tryEntries.length-1;Wt>=0;--Wt){var te=this.tryEntries[Wt];if(te[2]===Mt)return this.complete(te[4],te[3]),Vt(te),lt}},catch:function(Mt){for(var Wt=this.tryEntries.length-1;Wt>=0;--Wt){var te=this.tryEntries[Wt];if(te[0]===Mt){var re=te[4];if(re.type==="throw"){var T=re.arg;Vt(te)}return T}}throw Error("illegal catch attempt")},delegateYield:function(Mt,Wt,te){return this.delegate={i:ee(Mt),r:Wt,n:te},this.method==="next"&&(this.arg=X),lt}},at}},84467:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return tt}});function U(K){if(Array.isArray(K))return K}function Et(K,x){var q=K==null?null:typeof Symbol!="undefined"&&K[Symbol.iterator]||K["@@iterator"];if(q!=null){var I,et,$,it,gt=[],lt=!0,Rt=!1;try{if($=(q=q.call(K)).next,x===0){if(Object(q)!==q)return;lt=!1}else for(;!(lt=(I=$.call(q)).done)&&(gt.push(I.value),gt.length!==x);lt=!0);}catch(At){Rt=!0,et=At}finally{try{if(!lt&&q.return!=null&&(it=q.return(),Object(it)!==it))return}finally{if(Rt)throw et}}return gt}}var X=G(67695);function at(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tt(K,x){return U(K)||Et(K,x)||(0,X.Z)(K,x)||at()}},23975:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return at}});var U=G(47829);function Et(tt,K){for(;!{}.hasOwnProperty.call(tt,K)&&(tt=(0,U.Z)(tt))!==null;);return tt}function X(){return X=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(tt,K,x){var q=Et(tt,K);if(q){var I=Object.getOwnPropertyDescriptor(q,K);return I.get?I.get.call(arguments.length<3?tt:x):I.value}},X.apply(null,arguments)}function at(tt,K,x,q){var I=X((0,U.Z)(1&q?tt.prototype:tt),K,x);return 2&q&&typeof I=="function"?function(et){return I.apply(x,et)}:I}},42043:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return K}});var U=G(95740);function Et(x){if(Array.isArray(x))return(0,U.Z)(x)}function X(x){if(typeof Symbol!="undefined"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}var at=G(67695);function tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(x){return Et(x)||X(x)||(0,at.Z)(x)||tt()}},25757:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return X}});var U=G(61726);function Et(at,tt){if((0,U.Z)(at)!="object"||!at)return at;var K=at[Symbol.toPrimitive];if(K!==void 0){var x=K.call(at,tt||"default");if((0,U.Z)(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(at)}function X(at){var tt=Et(at,"string");return(0,U.Z)(tt)=="symbol"?tt:tt+""}},61726:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return U}});function U(Et){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},U(Et)}},67695:function(me,Bt,G){"use strict";G.d(Bt,{Z:function(){return Et}});var U=G(95740);function Et(X,at){if(X){if(typeof X=="string")return(0,U.Z)(X,at);var tt={}.toString.call(X).slice(8,-1);return tt==="Object"&&X.constructor&&(tt=X.constructor.name),tt==="Map"||tt==="Set"?Array.from(X):tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt)?(0,U.Z)(X,at):void 0}}},54146:function(me,Bt,G){"use strict";var U=G(26729);Bt.Z=U},97582:function(me,Bt,G){"use strict";G.d(Bt,{CR:function(){return Dt},Q_:function(){return Ft},XA:function(){return At},ZT:function(){return Et},_T:function(){return at},ev:function(){return fe},mG:function(){return it},pi:function(){return X},pr:function(){return qt}});var U=function(H,J){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,bt){ht.__proto__=bt}||function(ht,bt){for(var zt in bt)Object.prototype.hasOwnProperty.call(bt,zt)&&(ht[zt]=bt[zt])},U(H,J)};function Et(H,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");U(H,J);function ht(){this.constructor=H}H.prototype=J===null?Object.create(J):(ht.prototype=J.prototype,new ht)}var X=function(){return X=Object.assign||function(J){for(var ht,bt=1,zt=arguments.length;bt<zt;bt++){ht=arguments[bt];for(var kt in ht)Object.prototype.hasOwnProperty.call(ht,kt)&&(J[kt]=ht[kt])}return J},X.apply(this,arguments)};function at(H,J){var ht={};for(var bt in H)Object.prototype.hasOwnProperty.call(H,bt)&&J.indexOf(bt)<0&&(ht[bt]=H[bt]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var zt=0,bt=Object.getOwnPropertySymbols(H);zt<bt.length;zt++)J.indexOf(bt[zt])<0&&Object.prototype.propertyIsEnumerable.call(H,bt[zt])&&(ht[bt[zt]]=H[bt[zt]]);return ht}function tt(H,J,ht,bt){var zt=arguments.length,kt=zt<3?J:bt===null?bt=Object.getOwnPropertyDescriptor(J,ht):bt,se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")kt=Reflect.decorate(H,J,ht,bt);else for(var z=H.length-1;z>=0;z--)(se=H[z])&&(kt=(zt<3?se(kt):zt>3?se(J,ht,kt):se(J,ht))||kt);return zt>3&&kt&&Object.defineProperty(J,ht,kt),kt}function K(H,J){return function(ht,bt){J(ht,bt,H)}}function x(H,J,ht,bt,zt,kt){function se(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var z=bt.kind,P=z==="getter"?"get":z==="setter"?"set":"value",B=!J&&H?bt.static?H:H.prototype:null,dt=J||(B?Object.getOwnPropertyDescriptor(B,bt.name):{}),L,Z=!1,ct=ht.length-1;ct>=0;ct--){var R={};for(var W in bt)R[W]=W==="access"?{}:bt[W];for(var W in bt.access)R.access[W]=bt.access[W];R.addInitializer=function(v){if(Z)throw new TypeError("Cannot add initializers after decoration has completed");kt.push(se(v||null))};var ft=(0,ht[ct])(z==="accessor"?{get:dt.get,set:dt.set}:dt[P],R);if(z==="accessor"){if(ft===void 0)continue;if(ft===null||typeof ft!="object")throw new TypeError("Object expected");(L=se(ft.get))&&(dt.get=L),(L=se(ft.set))&&(dt.set=L),(L=se(ft.init))&&zt.unshift(L)}else(L=se(ft))&&(z==="field"?zt.unshift(L):dt[P]=L)}B&&Object.defineProperty(B,bt.name,dt),Z=!0}function q(H,J,ht){for(var bt=arguments.length>2,zt=0;zt<J.length;zt++)ht=bt?J[zt].call(H,ht):J[zt].call(H);return bt?ht:void 0}function I(H){return typeof H=="symbol"?H:"".concat(H)}function et(H,J,ht){return typeof J=="symbol"&&(J=J.description?"[".concat(J.description,"]"):""),Object.defineProperty(H,"name",{configurable:!0,value:ht?"".concat(ht," ",J):J})}function $(H,J){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(H,J)}function it(H,J,ht,bt){function zt(kt){return kt instanceof ht?kt:new ht(function(se){se(kt)})}return new(ht||(ht=Promise))(function(kt,se){function z(dt){try{B(bt.next(dt))}catch(L){se(L)}}function P(dt){try{B(bt.throw(dt))}catch(L){se(L)}}function B(dt){dt.done?kt(dt.value):zt(dt.value).then(z,P)}B((bt=bt.apply(H,J||[])).next())})}function gt(H,J){var ht={label:0,sent:function(){if(kt[0]&1)throw kt[1];return kt[1]},trys:[],ops:[]},bt,zt,kt,se;return se={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(se[Symbol.iterator]=function(){return this}),se;function z(B){return function(dt){return P([B,dt])}}function P(B){if(bt)throw new TypeError("Generator is already executing.");for(;se&&(se=0,B[0]&&(ht=0)),ht;)try{if(bt=1,zt&&(kt=B[0]&2?zt.return:B[0]?zt.throw||((kt=zt.return)&&kt.call(zt),0):zt.next)&&!(kt=kt.call(zt,B[1])).done)return kt;switch(zt=0,kt&&(B=[B[0]&2,kt.value]),B[0]){case 0:case 1:kt=B;break;case 4:return ht.label++,{value:B[1],done:!1};case 5:ht.label++,zt=B[1],B=[0];continue;case 7:B=ht.ops.pop(),ht.trys.pop();continue;default:if(kt=ht.trys,!(kt=kt.length>0&&kt[kt.length-1])&&(B[0]===6||B[0]===2)){ht=0;continue}if(B[0]===3&&(!kt||B[1]>kt[0]&&B[1]<kt[3])){ht.label=B[1];break}if(B[0]===6&&ht.label<kt[1]){ht.label=kt[1],kt=B;break}if(kt&&ht.label<kt[2]){ht.label=kt[2],ht.ops.push(B);break}kt[2]&&ht.ops.pop(),ht.trys.pop();continue}B=J.call(H,ht)}catch(dt){B=[6,dt],zt=0}finally{bt=kt=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}}var lt=Object.create?function(H,J,ht,bt){bt===void 0&&(bt=ht);var zt=Object.getOwnPropertyDescriptor(J,ht);(!zt||("get"in zt?!J.__esModule:zt.writable||zt.configurable))&&(zt={enumerable:!0,get:function(){return J[ht]}}),Object.defineProperty(H,bt,zt)}:function(H,J,ht,bt){bt===void 0&&(bt=ht),H[bt]=J[ht]};function Rt(H,J){for(var ht in H)ht!=="default"&&!Object.prototype.hasOwnProperty.call(J,ht)&&lt(J,H,ht)}function At(H){var J=typeof Symbol=="function"&&Symbol.iterator,ht=J&&H[J],bt=0;if(ht)return ht.call(H);if(H&&typeof H.length=="number")return{next:function(){return H&&bt>=H.length&&(H=void 0),{value:H&&H[bt++],done:!H}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dt(H,J){var ht=typeof Symbol=="function"&&H[Symbol.iterator];if(!ht)return H;var bt=ht.call(H),zt,kt=[],se;try{for(;(J===void 0||J-- >0)&&!(zt=bt.next()).done;)kt.push(zt.value)}catch(z){se={error:z}}finally{try{zt&&!zt.done&&(ht=bt.return)&&ht.call(bt)}finally{if(se)throw se.error}}return kt}function Jt(){for(var H=[],J=0;J<arguments.length;J++)H=H.concat(Dt(arguments[J]));return H}function qt(){for(var H=0,J=0,ht=arguments.length;J<ht;J++)H+=arguments[J].length;for(var bt=Array(H),zt=0,J=0;J<ht;J++)for(var kt=arguments[J],se=0,z=kt.length;se<z;se++,zt++)bt[zt]=kt[se];return bt}function fe(H,J,ht){if(ht||arguments.length===2)for(var bt=0,zt=J.length,kt;bt<zt;bt++)(kt||!(bt in J))&&(kt||(kt=Array.prototype.slice.call(J,0,bt)),kt[bt]=J[bt]);return H.concat(kt||Array.prototype.slice.call(J))}function ae(H){return this instanceof ae?(this.v=H,this):new ae(H)}function pt(H,J,ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt=ht.apply(H,J||[]),zt,kt=[];return zt={},se("next"),se("throw"),se("return"),zt[Symbol.asyncIterator]=function(){return this},zt;function se(Z){bt[Z]&&(zt[Z]=function(ct){return new Promise(function(R,W){kt.push([Z,ct,R,W])>1||z(Z,ct)})})}function z(Z,ct){try{P(bt[Z](ct))}catch(R){L(kt[0][3],R)}}function P(Z){Z.value instanceof ae?Promise.resolve(Z.value.v).then(B,dt):L(kt[0][2],Z)}function B(Z){z("next",Z)}function dt(Z){z("throw",Z)}function L(Z,ct){Z(ct),kt.shift(),kt.length&&z(kt[0][0],kt[0][1])}}function It(H){var J,ht;return J={},bt("next"),bt("throw",function(zt){throw zt}),bt("return"),J[Symbol.iterator]=function(){return this},J;function bt(zt,kt){J[zt]=H[zt]?function(se){return(ht=!ht)?{value:ae(H[zt](se)),done:!1}:kt?kt(se):se}:kt}}function vt(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=H[Symbol.asyncIterator],ht;return J?J.call(H):(H=typeof At=="function"?At(H):H[Symbol.iterator](),ht={},bt("next"),bt("throw"),bt("return"),ht[Symbol.asyncIterator]=function(){return this},ht);function bt(kt){ht[kt]=H[kt]&&function(se){return new Promise(function(z,P){se=H[kt](se),zt(z,P,se.done,se.value)})}}function zt(kt,se,z,P){Promise.resolve(P).then(function(B){kt({value:B,done:z})},se)}}function st(H,J){return Object.defineProperty?Object.defineProperty(H,"raw",{value:J}):H.raw=J,H}var Vt=Object.create?function(H,J){Object.defineProperty(H,"default",{enumerable:!0,value:J})}:function(H,J){H.default=J};function ne(H){if(H&&H.__esModule)return H;var J={};if(H!=null)for(var ht in H)ht!=="default"&&Object.prototype.hasOwnProperty.call(H,ht)&&lt(J,H,ht);return Vt(J,H),J}function ee(H){return H&&H.__esModule?H:{default:H}}function Ft(H,J,ht,bt){if(ht==="a"&&!bt)throw new TypeError("Private accessor was defined without a getter");if(typeof J=="function"?H!==J||!bt:!J.has(H))throw new TypeError("Cannot read private member from an object whose class did not declare it");return ht==="m"?bt:ht==="a"?bt.call(H):bt?bt.value:J.get(H)}function Mt(H,J,ht,bt,zt){if(bt==="m")throw new TypeError("Private method is not writable");if(bt==="a"&&!zt)throw new TypeError("Private accessor was defined without a setter");if(typeof J=="function"?H!==J||!zt:!J.has(H))throw new TypeError("Cannot write private member to an object whose class did not declare it");return bt==="a"?zt.call(H,ht):zt?zt.value=ht:J.set(H,ht),ht}function Wt(H,J){if(J===null||typeof J!="object"&&typeof J!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof H=="function"?J===H:H.has(J)}function te(H,J,ht){if(J!=null){if(typeof J!="object"&&typeof J!="function")throw new TypeError("Object expected.");var bt;if(ht){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");bt=J[Symbol.asyncDispose]}if(bt===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");bt=J[Symbol.dispose]}if(typeof bt!="function")throw new TypeError("Object not disposable.");H.stack.push({value:J,dispose:bt,async:ht})}else ht&&H.stack.push({async:!0});return J}var re=typeof SuppressedError=="function"?SuppressedError:function(H,J,ht){var bt=new Error(ht);return bt.name="SuppressedError",bt.error=H,bt.suppressed=J,bt};function T(H){function J(bt){H.error=H.hasError?new re(bt,H.error,"An error was suppressed during disposal."):bt,H.hasError=!0}function ht(){for(;H.stack.length;){var bt=H.stack.pop();try{var zt=bt.dispose&&bt.dispose.call(bt.value);if(bt.async)return Promise.resolve(zt).then(ht,function(kt){return J(kt),ht()})}catch(kt){J(kt)}}if(H.hasError)throw H.error}return ht()}var V={__extends:Et,__assign:X,__rest:at,__decorate:tt,__param:K,__metadata:$,__awaiter:it,__generator:gt,__createBinding:lt,__exportStar:Rt,__values:At,__read:Dt,__spread:Jt,__spreadArrays:qt,__spreadArray:fe,__await:ae,__asyncGenerator:pt,__asyncDelegator:It,__asyncValues:vt,__makeTemplateObject:st,__importStar:ne,__importDefault:ee,__classPrivateFieldGet:Ft,__classPrivateFieldSet:Mt,__classPrivateFieldIn:Wt,__addDisposableResource:te,__disposeResources:T}}}]);
}());